function YQ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const QQ=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};QQ();var Dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function JQ(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var ae={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km=Symbol.for("react.element"),ZQ=Symbol.for("react.portal"),eJ=Symbol.for("react.fragment"),tJ=Symbol.for("react.strict_mode"),nJ=Symbol.for("react.profiler"),rJ=Symbol.for("react.provider"),sJ=Symbol.for("react.context"),iJ=Symbol.for("react.forward_ref"),oJ=Symbol.for("react.suspense"),aJ=Symbol.for("react.memo"),lJ=Symbol.for("react.lazy"),QR=Symbol.iterator;function uJ(t){return t===null||typeof t!="object"?null:(t=QR&&t[QR]||t["@@iterator"],typeof t=="function"?t:null)}var pB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mB=Object.assign,gB={};function nd(t,e,n){this.props=t,this.context=e,this.refs=gB,this.updater=n||pB}nd.prototype.isReactComponent={};nd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yB(){}yB.prototype=nd.prototype;function _N(t,e,n){this.props=t,this.context=e,this.refs=gB,this.updater=n||pB}var AN=_N.prototype=new yB;AN.constructor=_N;mB(AN,nd.prototype);AN.isPureReactComponent=!0;var JR=Array.isArray,vB=Object.prototype.hasOwnProperty,ON={current:null},xB={key:!0,ref:!0,__self:!0,__source:!0};function bB(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vB.call(e,r)&&!xB.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Km,type:t,key:i,ref:o,props:s,_owner:ON.current}}function cJ(t,e){return{$$typeof:Km,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function RN(t){return typeof t=="object"&&t!==null&&t.$$typeof===Km}function hJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ZR=/\/+/g;function BS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hJ(""+t.key):e.toString(36)}function sv(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Km:case ZQ:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+BS(o,0):r,JR(s)?(n="",t!=null&&(n=t.replace(ZR,"$&/")+"/"),sv(s,e,n,"",function(u){return u})):s!=null&&(RN(s)&&(s=cJ(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ZR,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",JR(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+BS(i,a);o+=sv(i,e,n,l,s)}else if(l=uJ(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+BS(i,a++),o+=sv(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function l0(t,e,n){if(t==null)return t;var r=[],s=0;return sv(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fs={current:null},iv={transition:null},dJ={ReactCurrentDispatcher:Fs,ReactCurrentBatchConfig:iv,ReactCurrentOwner:ON};wt.Children={map:l0,forEach:function(t,e,n){l0(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return l0(t,function(){e++}),e},toArray:function(t){return l0(t,function(e){return e})||[]},only:function(t){if(!RN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};wt.Component=nd;wt.Fragment=eJ;wt.Profiler=nJ;wt.PureComponent=_N;wt.StrictMode=tJ;wt.Suspense=oJ;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dJ;wt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mB({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ON.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)vB.call(e,l)&&!xB.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Km,type:t.type,key:s,ref:i,props:r,_owner:o}};wt.createContext=function(t){return t={$$typeof:sJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rJ,_context:t},t.Consumer=t};wt.createElement=bB;wt.createFactory=function(t){var e=bB.bind(null,t);return e.type=t,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(t){return{$$typeof:iJ,render:t}};wt.isValidElement=RN;wt.lazy=function(t){return{$$typeof:lJ,_payload:{_status:-1,_result:t},_init:fJ}};wt.memo=function(t,e){return{$$typeof:aJ,type:t,compare:e===void 0?null:e}};wt.startTransition=function(t){var e=iv.transition;iv.transition={};try{t()}finally{iv.transition=e}};wt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};wt.useCallback=function(t,e){return Fs.current.useCallback(t,e)};wt.useContext=function(t){return Fs.current.useContext(t)};wt.useDebugValue=function(){};wt.useDeferredValue=function(t){return Fs.current.useDeferredValue(t)};wt.useEffect=function(t,e){return Fs.current.useEffect(t,e)};wt.useId=function(){return Fs.current.useId()};wt.useImperativeHandle=function(t,e,n){return Fs.current.useImperativeHandle(t,e,n)};wt.useInsertionEffect=function(t,e){return Fs.current.useInsertionEffect(t,e)};wt.useLayoutEffect=function(t,e){return Fs.current.useLayoutEffect(t,e)};wt.useMemo=function(t,e){return Fs.current.useMemo(t,e)};wt.useReducer=function(t,e,n){return Fs.current.useReducer(t,e,n)};wt.useRef=function(t){return Fs.current.useRef(t)};wt.useState=function(t){return Fs.current.useState(t)};wt.useSyncExternalStore=function(t,e,n){return Fs.current.useSyncExternalStore(t,e,n)};wt.useTransition=function(){return Fs.current.useTransition()};wt.version="18.2.0";(function(t){t.exports=wt})(ae);const tn=EN(ae.exports);var BI={},wB={exports:{}},Si={},SB={exports:{}},kB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,V){var j=L.length;L.push(V);e:for(;0<j;){var Q=j-1>>>1,Z=L[Q];if(0<s(Z,V))L[Q]=V,L[j]=Z,j=Q;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],j=L.pop();if(j!==V){L[0]=j;e:for(var Q=0,Z=L.length,oe=Z>>>1;Q<oe;){var fe=2*(Q+1)-1,le=L[fe],ye=fe+1,Ce=L[ye];if(0>s(le,j))ye<Z&&0>s(Ce,le)?(L[Q]=Ce,L[ye]=j,Q=ye):(L[Q]=le,L[fe]=j,Q=fe);else if(ye<Z&&0>s(Ce,j))L[Q]=Ce,L[ye]=j,Q=ye;else break e}}return V}function s(L,V){var j=L.sortIndex-V.sortIndex;return j!==0?j:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=L)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(u)}}function x(L){if(m=!1,b(L),!p)if(n(l)!==null)p=!0,B(w);else{var V=n(u);V!==null&&K(x,V.startTime-L)}}function w(L,V){p=!1,m&&(m=!1,y(I),I=-1),d=!0;var j=f;try{for(b(V),h=n(l);h!==null&&(!(h.expirationTime>V)||L&&!A());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var Z=Q(h.expirationTime<=V);V=t.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(l)&&r(l),b(V)}else r(l);h=n(l)}if(h!==null)var oe=!0;else{var fe=n(u);fe!==null&&K(x,fe.startTime-V),oe=!1}return oe}finally{h=null,f=j,d=!1}}var S=!1,k=null,I=-1,T=5,N=-1;function A(){return!(t.unstable_now()-N<T)}function R(){if(k!==null){var L=t.unstable_now();N=L;var V=!0;try{V=k(!0,L)}finally{V?O():(S=!1,k=null)}}else S=!1}var O;if(typeof v=="function")O=function(){v(R)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,z=M.port2;M.port1.onmessage=R,O=function(){z.postMessage(null)}}else O=function(){g(R,0)};function B(L){k=L,S||(S=!0,O())}function K(L,V){I=g(function(){L(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,B(w))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var j=f;f=V;try{return L()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=f;f=L;try{return V()}finally{f=j}},t.unstable_scheduleCallback=function(L,V,j){var Q=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Q+j:Q):j=Q,L){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=j+Z,L={id:c++,callback:V,priorityLevel:L,startTime:j,expirationTime:Z,sortIndex:-1},j>Q?(L.sortIndex=j,e(u,L),n(l)===null&&L===n(u)&&(m?(y(I),I=-1):m=!0,K(x,j-Q))):(L.sortIndex=Z,e(l,L),p||d||(p=!0,B(w))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var V=f;return function(){var j=f;f=V;try{return L.apply(this,arguments)}finally{f=j}}}})(kB);(function(t){t.exports=kB})(SB);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IB=ae.exports,vi=SB.exports;function be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CB=new Set,Yp={};function jc(t,e){ff(t,e),ff(t+"Capture",e)}function ff(t,e){for(Yp[t]=e,t=0;t<e.length;t++)CB.add(e[t])}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zI=Object.prototype.hasOwnProperty,pJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eD={},tD={};function mJ(t){return zI.call(tD,t)?!0:zI.call(eD,t)?!1:pJ.test(t)?tD[t]=!0:(eD[t]=!0,!1)}function gJ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yJ(t,e,n,r){if(e===null||typeof e>"u"||gJ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ls(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new Ls(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jr[e]=new Ls(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new Ls(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new Ls(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new Ls(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new Ls(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new Ls(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new Ls(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new Ls(t,5,!1,t.toLowerCase(),null,!1,!1)});var DN=/[\-:]([a-z])/g;function PN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(DN,PN);Jr[e]=new Ls(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(DN,PN);Jr[e]=new Ls(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(DN,PN);Jr[e]=new Ls(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new Ls(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new Ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new Ls(t,1,!1,t.toLowerCase(),null,!0,!0)});function MN(t,e,n,r){var s=Jr.hasOwnProperty(e)?Jr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yJ(e,n,s,r)&&(n=null),r||s===null?mJ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ga=IB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u0=Symbol.for("react.element"),Nh=Symbol.for("react.portal"),Eh=Symbol.for("react.fragment"),FN=Symbol.for("react.strict_mode"),VI=Symbol.for("react.profiler"),TB=Symbol.for("react.provider"),$B=Symbol.for("react.context"),LN=Symbol.for("react.forward_ref"),UI=Symbol.for("react.suspense"),WI=Symbol.for("react.suspense_list"),BN=Symbol.for("react.memo"),nl=Symbol.for("react.lazy"),NB=Symbol.for("react.offscreen"),nD=Symbol.iterator;function Gd(t){return t===null||typeof t!="object"?null:(t=nD&&t[nD]||t["@@iterator"],typeof t=="function"?t:null)}var Dn=Object.assign,zS;function dp(t){if(zS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zS=e&&e[1]||""}return`
`+zS+t}var VS=!1;function US(t,e){if(!t||VS)return"";VS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{VS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dp(t):""}function vJ(t){switch(t.tag){case 5:return dp(t.type);case 16:return dp("Lazy");case 13:return dp("Suspense");case 19:return dp("SuspenseList");case 0:case 2:case 15:return t=US(t.type,!1),t;case 11:return t=US(t.type.render,!1),t;case 1:return t=US(t.type,!0),t;default:return""}}function jI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Eh:return"Fragment";case Nh:return"Portal";case VI:return"Profiler";case FN:return"StrictMode";case UI:return"Suspense";case WI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $B:return(t.displayName||"Context")+".Consumer";case TB:return(t._context.displayName||"Context")+".Provider";case LN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case BN:return e=t.displayName||null,e!==null?e:jI(t.type)||"Memo";case nl:e=t._payload,t=t._init;try{return jI(t(e))}catch{}}return null}function xJ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jI(e);case 8:return e===FN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EB(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bJ(t){var e=EB(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function c0(t){t._valueTracker||(t._valueTracker=bJ(t))}function _B(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=EB(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function GI(t,e){var n=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function rD(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AB(t,e){e=e.checked,e!=null&&MN(t,"checked",e,!1)}function HI(t,e){AB(t,e);var n=Vl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qI(t,e.type,n):e.hasOwnProperty("defaultValue")&&qI(t,e.type,Vl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sD(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qI(t,e,n){(e!=="number"||qv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pp=Array.isArray;function Kh(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vl(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function KI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(be(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iD(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(be(92));if(pp(n)){if(1<n.length)throw Error(be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vl(n)}}function OB(t,e){var n=Vl(e.value),r=Vl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RB(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RB(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var h0,DB=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(h0=h0||document.createElement("div"),h0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=h0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _p={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wJ=["Webkit","ms","Moz","O"];Object.keys(_p).forEach(function(t){wJ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_p[e]=_p[t]})});function PB(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_p.hasOwnProperty(t)&&_p[t]?(""+e).trim():e+"px"}function MB(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=PB(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var SJ=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function YI(t,e){if(e){if(SJ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(be(62))}}function QI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JI=null;function zN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ZI=null,Xh=null,Yh=null;function aD(t){if(t=Qm(t)){if(typeof ZI!="function")throw Error(be(280));var e=t.stateNode;e&&(e=gb(e),ZI(t.stateNode,t.type,e))}}function FB(t){Xh?Yh?Yh.push(t):Yh=[t]:Xh=t}function LB(){if(Xh){var t=Xh,e=Yh;if(Yh=Xh=null,aD(t),e)for(t=0;t<e.length;t++)aD(e[t])}}function BB(t,e){return t(e)}function zB(){}var WS=!1;function VB(t,e,n){if(WS)return t(e,n);WS=!0;try{return BB(t,e,n)}finally{WS=!1,(Xh!==null||Yh!==null)&&(zB(),LB())}}function Jp(t,e){var n=t.stateNode;if(n===null)return null;var r=gb(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(be(231,e,typeof n));return n}var eC=!1;if(Pa)try{var Hd={};Object.defineProperty(Hd,"passive",{get:function(){eC=!0}}),window.addEventListener("test",Hd,Hd),window.removeEventListener("test",Hd,Hd)}catch{eC=!1}function kJ(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ap=!1,Kv=null,Xv=!1,tC=null,IJ={onError:function(t){Ap=!0,Kv=t}};function CJ(t,e,n,r,s,i,o,a,l){Ap=!1,Kv=null,kJ.apply(IJ,arguments)}function TJ(t,e,n,r,s,i,o,a,l){if(CJ.apply(this,arguments),Ap){if(Ap){var u=Kv;Ap=!1,Kv=null}else throw Error(be(198));Xv||(Xv=!0,tC=u)}}function Gc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function UB(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lD(t){if(Gc(t)!==t)throw Error(be(188))}function $J(t){var e=t.alternate;if(!e){if(e=Gc(t),e===null)throw Error(be(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lD(s),t;if(i===r)return lD(s),e;i=i.sibling}throw Error(be(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(be(189))}}if(n.alternate!==r)throw Error(be(190))}if(n.tag!==3)throw Error(be(188));return n.stateNode.current===n?t:e}function WB(t){return t=$J(t),t!==null?jB(t):null}function jB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jB(t);if(e!==null)return e;t=t.sibling}return null}var GB=vi.unstable_scheduleCallback,uD=vi.unstable_cancelCallback,NJ=vi.unstable_shouldYield,EJ=vi.unstable_requestPaint,Hn=vi.unstable_now,_J=vi.unstable_getCurrentPriorityLevel,VN=vi.unstable_ImmediatePriority,HB=vi.unstable_UserBlockingPriority,Yv=vi.unstable_NormalPriority,AJ=vi.unstable_LowPriority,qB=vi.unstable_IdlePriority,fb=null,jo=null;function OJ(t){if(jo&&typeof jo.onCommitFiberRoot=="function")try{jo.onCommitFiberRoot(fb,t,void 0,(t.current.flags&128)===128)}catch{}}var vo=Math.clz32?Math.clz32:PJ,RJ=Math.log,DJ=Math.LN2;function PJ(t){return t>>>=0,t===0?32:31-(RJ(t)/DJ|0)|0}var f0=64,d0=4194304;function mp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=mp(a):(i&=o,i!==0&&(r=mp(i)))}else o=n&~s,o!==0?r=mp(o):i!==0&&(r=mp(i));if(r===0)return 0;if(e!==0&&e!==r&&(e&s)===0&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vo(e),s=1<<n,r|=t[n],e&=~s;return r}function MJ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FJ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vo(i),a=1<<o,l=s[o];l===-1?((a&n)===0||(a&r)!==0)&&(s[o]=MJ(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function nC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KB(){var t=f0;return f0<<=1,(f0&4194240)===0&&(f0=64),t}function jS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vo(e),t[e]=n}function LJ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vo(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function UN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vo(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Qt=0;function XB(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var YB,WN,QB,JB,ZB,rC=!1,p0=[],vl=null,xl=null,bl=null,Zp=new Map,em=new Map,il=[],BJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cD(t,e){switch(t){case"focusin":case"focusout":vl=null;break;case"dragenter":case"dragleave":xl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":Zp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":em.delete(e.pointerId)}}function qd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qm(e),e!==null&&WN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zJ(t,e,n,r,s){switch(e){case"focusin":return vl=qd(vl,t,e,n,r,s),!0;case"dragenter":return xl=qd(xl,t,e,n,r,s),!0;case"mouseover":return bl=qd(bl,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zp.set(i,qd(Zp.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,em.set(i,qd(em.get(i)||null,t,e,n,r,s)),!0}return!1}function ez(t){var e=ju(t.target);if(e!==null){var n=Gc(e);if(n!==null){if(e=n.tag,e===13){if(e=UB(n),e!==null){t.blockedOn=e,ZB(t.priority,function(){QB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ov(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JI=r,n.target.dispatchEvent(r),JI=null}else return e=Qm(n),e!==null&&WN(e),t.blockedOn=n,!1;e.shift()}return!0}function hD(t,e,n){ov(t)&&n.delete(e)}function VJ(){rC=!1,vl!==null&&ov(vl)&&(vl=null),xl!==null&&ov(xl)&&(xl=null),bl!==null&&ov(bl)&&(bl=null),Zp.forEach(hD),em.forEach(hD)}function Kd(t,e){t.blockedOn===e&&(t.blockedOn=null,rC||(rC=!0,vi.unstable_scheduleCallback(vi.unstable_NormalPriority,VJ)))}function tm(t){function e(s){return Kd(s,t)}if(0<p0.length){Kd(p0[0],t);for(var n=1;n<p0.length;n++){var r=p0[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vl!==null&&Kd(vl,t),xl!==null&&Kd(xl,t),bl!==null&&Kd(bl,t),Zp.forEach(e),em.forEach(e),n=0;n<il.length;n++)r=il[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<il.length&&(n=il[0],n.blockedOn===null);)ez(n),n.blockedOn===null&&il.shift()}var Qh=Ga.ReactCurrentBatchConfig,Jv=!0;function UJ(t,e,n,r){var s=Qt,i=Qh.transition;Qh.transition=null;try{Qt=1,jN(t,e,n,r)}finally{Qt=s,Qh.transition=i}}function WJ(t,e,n,r){var s=Qt,i=Qh.transition;Qh.transition=null;try{Qt=4,jN(t,e,n,r)}finally{Qt=s,Qh.transition=i}}function jN(t,e,n,r){if(Jv){var s=sC(t,e,n,r);if(s===null)ek(t,e,r,Zv,n),cD(t,r);else if(zJ(s,t,e,n,r))r.stopPropagation();else if(cD(t,r),e&4&&-1<BJ.indexOf(t)){for(;s!==null;){var i=Qm(s);if(i!==null&&YB(i),i=sC(t,e,n,r),i===null&&ek(t,e,r,Zv,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ek(t,e,r,null,n)}}var Zv=null;function sC(t,e,n,r){if(Zv=null,t=zN(r),t=ju(t),t!==null)if(e=Gc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=UB(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zv=t,null}function tz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_J()){case VN:return 1;case HB:return 4;case Yv:case AJ:return 16;case qB:return 536870912;default:return 16}default:return 16}}var fl=null,GN=null,av=null;function nz(){if(av)return av;var t,e=GN,n=e.length,r,s="value"in fl?fl.value:fl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return av=s.slice(t,1<r?1-r:void 0)}function lv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function m0(){return!0}function fD(){return!1}function ki(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?m0:fD,this.isPropagationStopped=fD,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=m0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=m0)},persist:function(){},isPersistent:m0}),e}var rd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HN=ki(rd),Ym=Dn({},rd,{view:0,detail:0}),jJ=ki(Ym),GS,HS,Xd,db=Dn({},Ym,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xd&&(Xd&&t.type==="mousemove"?(GS=t.screenX-Xd.screenX,HS=t.screenY-Xd.screenY):HS=GS=0,Xd=t),GS)},movementY:function(t){return"movementY"in t?t.movementY:HS}}),dD=ki(db),GJ=Dn({},db,{dataTransfer:0}),HJ=ki(GJ),qJ=Dn({},Ym,{relatedTarget:0}),qS=ki(qJ),KJ=Dn({},rd,{animationName:0,elapsedTime:0,pseudoElement:0}),XJ=ki(KJ),YJ=Dn({},rd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QJ=ki(YJ),JJ=Dn({},rd,{data:0}),pD=ki(JJ),ZJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tZ[t])?!!e[t]:!1}function qN(){return nZ}var rZ=Dn({},Ym,{key:function(t){if(t.key){var e=ZJ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qN,charCode:function(t){return t.type==="keypress"?lv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sZ=ki(rZ),iZ=Dn({},db,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mD=ki(iZ),oZ=Dn({},Ym,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qN}),aZ=ki(oZ),lZ=Dn({},rd,{propertyName:0,elapsedTime:0,pseudoElement:0}),uZ=ki(lZ),cZ=Dn({},db,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hZ=ki(cZ),fZ=[9,13,27,32],KN=Pa&&"CompositionEvent"in window,Op=null;Pa&&"documentMode"in document&&(Op=document.documentMode);var dZ=Pa&&"TextEvent"in window&&!Op,rz=Pa&&(!KN||Op&&8<Op&&11>=Op),gD=String.fromCharCode(32),yD=!1;function sz(t,e){switch(t){case"keyup":return fZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _h=!1;function pZ(t,e){switch(t){case"compositionend":return iz(e);case"keypress":return e.which!==32?null:(yD=!0,gD);case"textInput":return t=e.data,t===gD&&yD?null:t;default:return null}}function mZ(t,e){if(_h)return t==="compositionend"||!KN&&sz(t,e)?(t=nz(),av=GN=fl=null,_h=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rz&&e.locale!=="ko"?null:e.data;default:return null}}var gZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gZ[t.type]:e==="textarea"}function oz(t,e,n,r){FB(r),e=e1(e,"onChange"),0<e.length&&(n=new HN("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rp=null,nm=null;function yZ(t){yz(t,0)}function pb(t){var e=Rh(t);if(_B(e))return t}function vZ(t,e){if(t==="change")return e}var az=!1;if(Pa){var KS;if(Pa){var XS="oninput"in document;if(!XS){var xD=document.createElement("div");xD.setAttribute("oninput","return;"),XS=typeof xD.oninput=="function"}KS=XS}else KS=!1;az=KS&&(!document.documentMode||9<document.documentMode)}function bD(){Rp&&(Rp.detachEvent("onpropertychange",lz),nm=Rp=null)}function lz(t){if(t.propertyName==="value"&&pb(nm)){var e=[];oz(e,nm,t,zN(t)),VB(yZ,e)}}function xZ(t,e,n){t==="focusin"?(bD(),Rp=e,nm=n,Rp.attachEvent("onpropertychange",lz)):t==="focusout"&&bD()}function bZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pb(nm)}function wZ(t,e){if(t==="click")return pb(e)}function SZ(t,e){if(t==="input"||t==="change")return pb(e)}function kZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var So=typeof Object.is=="function"?Object.is:kZ;function rm(t,e){if(So(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zI.call(e,s)||!So(t[s],e[s]))return!1}return!0}function wD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SD(t,e){var n=wD(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wD(n)}}function uz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cz(){for(var t=window,e=qv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qv(t.document)}return e}function XN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IZ(t){var e=cz(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uz(n.ownerDocument.documentElement,n)){if(r!==null&&XN(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=SD(n,i);var o=SD(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CZ=Pa&&"documentMode"in document&&11>=document.documentMode,Ah=null,iC=null,Dp=null,oC=!1;function kD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oC||Ah==null||Ah!==qv(r)||(r=Ah,"selectionStart"in r&&XN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dp&&rm(Dp,r)||(Dp=r,r=e1(iC,"onSelect"),0<r.length&&(e=new HN("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ah)))}function g0(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oh={animationend:g0("Animation","AnimationEnd"),animationiteration:g0("Animation","AnimationIteration"),animationstart:g0("Animation","AnimationStart"),transitionend:g0("Transition","TransitionEnd")},YS={},hz={};Pa&&(hz=document.createElement("div").style,"AnimationEvent"in window||(delete Oh.animationend.animation,delete Oh.animationiteration.animation,delete Oh.animationstart.animation),"TransitionEvent"in window||delete Oh.transitionend.transition);function mb(t){if(YS[t])return YS[t];if(!Oh[t])return t;var e=Oh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hz)return YS[t]=e[n];return t}var fz=mb("animationend"),dz=mb("animationiteration"),pz=mb("animationstart"),mz=mb("transitionend"),gz=new Map,ID="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ru(t,e){gz.set(t,e),jc(e,[t])}for(var QS=0;QS<ID.length;QS++){var JS=ID[QS],TZ=JS.toLowerCase(),$Z=JS[0].toUpperCase()+JS.slice(1);ru(TZ,"on"+$Z)}ru(fz,"onAnimationEnd");ru(dz,"onAnimationIteration");ru(pz,"onAnimationStart");ru("dblclick","onDoubleClick");ru("focusin","onFocus");ru("focusout","onBlur");ru(mz,"onTransitionEnd");ff("onMouseEnter",["mouseout","mouseover"]);ff("onMouseLeave",["mouseout","mouseover"]);ff("onPointerEnter",["pointerout","pointerover"]);ff("onPointerLeave",["pointerout","pointerover"]);jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(gp));function CD(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TJ(r,e,void 0,t),t.currentTarget=null}function yz(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;CD(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;CD(s,a,u),i=l}}}if(Xv)throw t=tC,Xv=!1,tC=null,t}function mn(t,e){var n=e[hC];n===void 0&&(n=e[hC]=new Set);var r=t+"__bubble";n.has(r)||(vz(e,t,2,!1),n.add(r))}function ZS(t,e,n){var r=0;e&&(r|=4),vz(n,t,r,e)}var y0="_reactListening"+Math.random().toString(36).slice(2);function sm(t){if(!t[y0]){t[y0]=!0,CB.forEach(function(n){n!=="selectionchange"&&(NZ.has(n)||ZS(n,!1,t),ZS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[y0]||(e[y0]=!0,ZS("selectionchange",!1,e))}}function vz(t,e,n,r){switch(tz(e)){case 1:var s=UJ;break;case 4:s=WJ;break;default:s=jN}n=s.bind(null,e,n,t),s=void 0,!eC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ek(t,e,n,r,s){var i=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ju(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}VB(function(){var u=i,c=zN(n),h=[];e:{var f=gz.get(t);if(f!==void 0){var d=HN,p=t;switch(t){case"keypress":if(lv(n)===0)break e;case"keydown":case"keyup":d=sZ;break;case"focusin":p="focus",d=qS;break;case"focusout":p="blur",d=qS;break;case"beforeblur":case"afterblur":d=qS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=dD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=HJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=aZ;break;case fz:case dz:case pz:d=XJ;break;case mz:d=uZ;break;case"scroll":d=jJ;break;case"wheel":d=hZ;break;case"copy":case"cut":case"paste":d=QJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=mD}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=Jp(v,y),x!=null&&m.push(im(v,x,b)))),g)break;v=v.return}0<m.length&&(f=new d(f,p,null,n,c),h.push({event:f,listeners:m}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==JI&&(p=n.relatedTarget||n.fromElement)&&(ju(p)||p[Ma]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=u,p=p?ju(p):null,p!==null&&(g=Gc(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(m=dD,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=mD,x="onPointerLeave",y="onPointerEnter",v="pointer"),g=d==null?f:Rh(d),b=p==null?f:Rh(p),f=new m(x,v+"leave",d,n,c),f.target=g,f.relatedTarget=b,x=null,ju(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,x=m),g=x,d&&p)t:{for(m=d,y=p,v=0,b=m;b;b=dh(b))v++;for(b=0,x=y;x;x=dh(x))b++;for(;0<v-b;)m=dh(m),v--;for(;0<b-v;)y=dh(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=dh(m),y=dh(y)}m=null}else m=null;d!==null&&TD(h,f,d,m,!1),p!==null&&g!==null&&TD(h,g,p,m,!0)}}e:{if(f=u?Rh(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var w=vZ;else if(vD(f))if(az)w=SZ;else{w=bZ;var S=xZ}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=wZ);if(w&&(w=w(t,u))){oz(h,w,n,c);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&qI(f,"number",f.value)}switch(S=u?Rh(u):window,t){case"focusin":(vD(S)||S.contentEditable==="true")&&(Ah=S,iC=u,Dp=null);break;case"focusout":Dp=iC=Ah=null;break;case"mousedown":oC=!0;break;case"contextmenu":case"mouseup":case"dragend":oC=!1,kD(h,n,c);break;case"selectionchange":if(CZ)break;case"keydown":case"keyup":kD(h,n,c)}var k;if(KN)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else _h?sz(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(rz&&n.locale!=="ko"&&(_h||I!=="onCompositionStart"?I==="onCompositionEnd"&&_h&&(k=nz()):(fl=c,GN="value"in fl?fl.value:fl.textContent,_h=!0)),S=e1(u,I),0<S.length&&(I=new pD(I,t,null,n,c),h.push({event:I,listeners:S}),k?I.data=k:(k=iz(n),k!==null&&(I.data=k)))),(k=dZ?pZ(t,n):mZ(t,n))&&(u=e1(u,"onBeforeInput"),0<u.length&&(c=new pD("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=k))}yz(h,e)})}function im(t,e,n){return{instance:t,listener:e,currentTarget:n}}function e1(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Jp(t,n),i!=null&&r.unshift(im(t,i,s)),i=Jp(t,e),i!=null&&r.push(im(t,i,s))),t=t.return}return r}function dh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function TD(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Jp(n,i),l!=null&&o.unshift(im(n,l,a))):s||(l=Jp(n,i),l!=null&&o.push(im(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var EZ=/\r\n?/g,_Z=/\u0000|\uFFFD/g;function $D(t){return(typeof t=="string"?t:""+t).replace(EZ,`
`).replace(_Z,"")}function v0(t,e,n){if(e=$D(e),$D(t)!==e&&n)throw Error(be(425))}function t1(){}var aC=null,lC=null;function uC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cC=typeof setTimeout=="function"?setTimeout:void 0,AZ=typeof clearTimeout=="function"?clearTimeout:void 0,ND=typeof Promise=="function"?Promise:void 0,OZ=typeof queueMicrotask=="function"?queueMicrotask:typeof ND<"u"?function(t){return ND.resolve(null).then(t).catch(RZ)}:cC;function RZ(t){setTimeout(function(){throw t})}function tk(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),tm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);tm(e)}function wl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ED(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sd=Math.random().toString(36).slice(2),Bo="__reactFiber$"+sd,om="__reactProps$"+sd,Ma="__reactContainer$"+sd,hC="__reactEvents$"+sd,DZ="__reactListeners$"+sd,PZ="__reactHandles$"+sd;function ju(t){var e=t[Bo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ma]||n[Bo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ED(t);t!==null;){if(n=t[Bo])return n;t=ED(t)}return e}t=n,n=t.parentNode}return null}function Qm(t){return t=t[Bo]||t[Ma],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(be(33))}function gb(t){return t[om]||null}var fC=[],Dh=-1;function su(t){return{current:t}}function vn(t){0>Dh||(t.current=fC[Dh],fC[Dh]=null,Dh--)}function hn(t,e){Dh++,fC[Dh]=t.current,t.current=e}var Ul={},ys=su(Ul),Ys=su(!1),dc=Ul;function df(t,e){var n=t.type.contextTypes;if(!n)return Ul;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qs(t){return t=t.childContextTypes,t!=null}function n1(){vn(Ys),vn(ys)}function _D(t,e,n){if(ys.current!==Ul)throw Error(be(168));hn(ys,e),hn(Ys,n)}function xz(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(be(108,xJ(t)||"Unknown",s));return Dn({},n,r)}function r1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ul,dc=ys.current,hn(ys,t),hn(Ys,Ys.current),!0}function AD(t,e,n){var r=t.stateNode;if(!r)throw Error(be(169));n?(t=xz(t,e,dc),r.__reactInternalMemoizedMergedChildContext=t,vn(Ys),vn(ys),hn(ys,t)):vn(Ys),hn(Ys,n)}var ma=null,yb=!1,nk=!1;function bz(t){ma===null?ma=[t]:ma.push(t)}function MZ(t){yb=!0,bz(t)}function iu(){if(!nk&&ma!==null){nk=!0;var t=0,e=Qt;try{var n=ma;for(Qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ma=null,yb=!1}catch(s){throw ma!==null&&(ma=ma.slice(t+1)),GB(VN,iu),s}finally{Qt=e,nk=!1}}return null}var Ph=[],Mh=0,s1=null,i1=0,Pi=[],Mi=0,pc=null,Sa=1,ka="";function _u(t,e){Ph[Mh++]=i1,Ph[Mh++]=s1,s1=t,i1=e}function wz(t,e,n){Pi[Mi++]=Sa,Pi[Mi++]=ka,Pi[Mi++]=pc,pc=t;var r=Sa;t=ka;var s=32-vo(r)-1;r&=~(1<<s),n+=1;var i=32-vo(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sa=1<<32-vo(e)+s|n<<s|r,ka=i+t}else Sa=1<<i|n<<s|r,ka=t}function YN(t){t.return!==null&&(_u(t,1),wz(t,1,0))}function QN(t){for(;t===s1;)s1=Ph[--Mh],Ph[Mh]=null,i1=Ph[--Mh],Ph[Mh]=null;for(;t===pc;)pc=Pi[--Mi],Pi[Mi]=null,ka=Pi[--Mi],Pi[Mi]=null,Sa=Pi[--Mi],Pi[Mi]=null}var mi=null,fi=null,kn=!1,mo=null;function Sz(t,e){var n=Bi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function OD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mi=t,fi=wl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mi=t,fi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pc!==null?{id:Sa,overflow:ka}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mi=t,fi=null,!0):!1;default:return!1}}function dC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pC(t){if(kn){var e=fi;if(e){var n=e;if(!OD(t,e)){if(dC(t))throw Error(be(418));e=wl(n.nextSibling);var r=mi;e&&OD(t,e)?Sz(r,n):(t.flags=t.flags&-4097|2,kn=!1,mi=t)}}else{if(dC(t))throw Error(be(418));t.flags=t.flags&-4097|2,kn=!1,mi=t}}}function RD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mi=t}function x0(t){if(t!==mi)return!1;if(!kn)return RD(t),kn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uC(t.type,t.memoizedProps)),e&&(e=fi)){if(dC(t))throw kz(),Error(be(418));for(;e;)Sz(t,e),e=wl(e.nextSibling)}if(RD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fi=wl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fi=null}}else fi=mi?wl(t.stateNode.nextSibling):null;return!0}function kz(){for(var t=fi;t;)t=wl(t.nextSibling)}function pf(){fi=mi=null,kn=!1}function JN(t){mo===null?mo=[t]:mo.push(t)}var FZ=Ga.ReactCurrentBatchConfig;function ho(t,e){if(t&&t.defaultProps){e=Dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var o1=su(null),a1=null,Fh=null,ZN=null;function eE(){ZN=Fh=a1=null}function tE(t){var e=o1.current;vn(o1),t._currentValue=e}function mC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jh(t,e){a1=t,ZN=Fh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(qs=!0),t.firstContext=null)}function Yi(t){var e=t._currentValue;if(ZN!==t)if(t={context:t,memoizedValue:e,next:null},Fh===null){if(a1===null)throw Error(be(308));Fh=t,a1.dependencies={lanes:0,firstContext:t}}else Fh=Fh.next=t;return e}var Gu=null;function nE(t){Gu===null?Gu=[t]:Gu.push(t)}function Iz(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,nE(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fa(t,r)}function Fa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rl=!1;function rE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Aa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Ft&2)!==0){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Fa(t,n)}return s=r.interleaved,s===null?(e.next=e,nE(r)):(e.next=s.next,s.next=e),r.interleaved=e,Fa(t,n)}function uv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,UN(t,n)}}function DD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function l1(t,e,n,r){var s=t.updateQueue;rl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(d,h,f):p,f==null)break e;h=Dn({},h,f);break e;case 2:rl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gc|=o,t.lanes=o,t.memoizedState=h}}function PD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(be(191,s));s.call(r)}}}var Tz=new IB.Component().refs;function gC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vb={isMounted:function(t){return(t=t._reactInternals)?Gc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Os(),s=Il(t),i=Aa(r,s);i.payload=e,n!=null&&(i.callback=n),e=Sl(t,i,s),e!==null&&(xo(e,t,s,r),uv(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Os(),s=Il(t),i=Aa(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Sl(t,i,s),e!==null&&(xo(e,t,s,r),uv(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Os(),r=Il(t),s=Aa(n,r);s.tag=2,e!=null&&(s.callback=e),e=Sl(t,s,r),e!==null&&(xo(e,t,r,n),uv(e,t,r))}};function MD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!rm(n,r)||!rm(s,i):!0}function $z(t,e,n){var r=!1,s=Ul,i=e.contextType;return typeof i=="object"&&i!==null?i=Yi(i):(s=Qs(e)?dc:ys.current,r=e.contextTypes,i=(r=r!=null)?df(t,s):Ul),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vb,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function FD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vb.enqueueReplaceState(e,e.state,null)}function yC(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=Tz,rE(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yi(i):(i=Qs(e)?dc:ys.current,s.context=df(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gC(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vb.enqueueReplaceState(s,s.state,null),l1(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Yd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(be(309));var r=n.stateNode}if(!r)throw Error(be(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===Tz&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(be(284));if(!n._owner)throw Error(be(290,t))}return t}function b0(t,e){throw t=Object.prototype.toString.call(e),Error(be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LD(t){var e=t._init;return e(t._payload)}function Nz(t){function e(y,v){if(t){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=Cl(y,v),y.index=0,y.sibling=null,y}function i(y,v,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=uk(b,y.mode,x),v.return=y,v):(v=s(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===Eh?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===nl&&LD(w)===v.type)?(x=s(v,b.props),x.ref=Yd(y,v,b),x.return=y,x):(x=mv(b.type,b.key,b.props,null,y.mode,x),x.ref=Yd(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=ck(b,y.mode,x),v.return=y,v):(v=s(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=rc(b,y.mode,x,w),v.return=y,v):(v=s(v,b),v.return=y,v)}function h(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=uk(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case u0:return b=mv(v.type,v.key,v.props,null,y.mode,b),b.ref=Yd(y,null,v),b.return=y,b;case Nh:return v=ck(v,y.mode,b),v.return=y,v;case nl:var x=v._init;return h(y,x(v._payload),b)}if(pp(v)||Gd(v))return v=rc(v,y.mode,b,null),v.return=y,v;b0(y,v)}return null}function f(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case u0:return b.key===w?l(y,v,b,x):null;case Nh:return b.key===w?u(y,v,b,x):null;case nl:return w=b._init,f(y,v,w(b._payload),x)}if(pp(b)||Gd(b))return w!==null?null:c(y,v,b,x,null);b0(y,b)}return null}function d(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case u0:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case Nh:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case nl:var S=x._init;return d(y,v,b,S(x._payload),w)}if(pp(x)||Gd(x))return y=y.get(b)||null,c(v,y,x,w,null);b0(v,x)}return null}function p(y,v,b,x){for(var w=null,S=null,k=v,I=v=0,T=null;k!==null&&I<b.length;I++){k.index>I?(T=k,k=null):T=k.sibling;var N=f(y,k,b[I],x);if(N===null){k===null&&(k=T);break}t&&k&&N.alternate===null&&e(y,k),v=i(N,v,I),S===null?w=N:S.sibling=N,S=N,k=T}if(I===b.length)return n(y,k),kn&&_u(y,I),w;if(k===null){for(;I<b.length;I++)k=h(y,b[I],x),k!==null&&(v=i(k,v,I),S===null?w=k:S.sibling=k,S=k);return kn&&_u(y,I),w}for(k=r(y,k);I<b.length;I++)T=d(k,y,I,b[I],x),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?I:T.key),v=i(T,v,I),S===null?w=T:S.sibling=T,S=T);return t&&k.forEach(function(A){return e(y,A)}),kn&&_u(y,I),w}function m(y,v,b,x){var w=Gd(b);if(typeof w!="function")throw Error(be(150));if(b=w.call(b),b==null)throw Error(be(151));for(var S=w=null,k=v,I=v=0,T=null,N=b.next();k!==null&&!N.done;I++,N=b.next()){k.index>I?(T=k,k=null):T=k.sibling;var A=f(y,k,N.value,x);if(A===null){k===null&&(k=T);break}t&&k&&A.alternate===null&&e(y,k),v=i(A,v,I),S===null?w=A:S.sibling=A,S=A,k=T}if(N.done)return n(y,k),kn&&_u(y,I),w;if(k===null){for(;!N.done;I++,N=b.next())N=h(y,N.value,x),N!==null&&(v=i(N,v,I),S===null?w=N:S.sibling=N,S=N);return kn&&_u(y,I),w}for(k=r(y,k);!N.done;I++,N=b.next())N=d(k,y,I,N.value,x),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?I:N.key),v=i(N,v,I),S===null?w=N:S.sibling=N,S=N);return t&&k.forEach(function(R){return e(y,R)}),kn&&_u(y,I),w}function g(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Eh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case u0:e:{for(var w=b.key,S=v;S!==null;){if(S.key===w){if(w=b.type,w===Eh){if(S.tag===7){n(y,S.sibling),v=s(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===nl&&LD(w)===S.type){n(y,S.sibling),v=s(S,b.props),v.ref=Yd(y,S,b),v.return=y,y=v;break e}n(y,S);break}else e(y,S);S=S.sibling}b.type===Eh?(v=rc(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=mv(b.type,b.key,b.props,null,y.mode,x),x.ref=Yd(y,v,b),x.return=y,y=x)}return o(y);case Nh:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=s(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=ck(b,y.mode,x),v.return=y,y=v}return o(y);case nl:return S=b._init,g(y,v,S(b._payload),x)}if(pp(b))return p(y,v,b,x);if(Gd(b))return m(y,v,b,x);b0(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,b),v.return=y,y=v):(n(y,v),v=uk(b,y.mode,x),v.return=y,y=v),o(y)):n(y,v)}return g}var mf=Nz(!0),Ez=Nz(!1),Jm={},Go=su(Jm),am=su(Jm),lm=su(Jm);function Hu(t){if(t===Jm)throw Error(be(174));return t}function sE(t,e){switch(hn(lm,e),hn(am,t),hn(Go,Jm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:XI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=XI(e,t)}vn(Go),hn(Go,e)}function gf(){vn(Go),vn(am),vn(lm)}function _z(t){Hu(lm.current);var e=Hu(Go.current),n=XI(e,t.type);e!==n&&(hn(am,t),hn(Go,n))}function iE(t){am.current===t&&(vn(Go),vn(am))}var _n=su(0);function u1(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rk=[];function oE(){for(var t=0;t<rk.length;t++)rk[t]._workInProgressVersionPrimary=null;rk.length=0}var cv=Ga.ReactCurrentDispatcher,sk=Ga.ReactCurrentBatchConfig,mc=0,On=null,fr=null,Nr=null,c1=!1,Pp=!1,um=0,LZ=0;function is(){throw Error(be(321))}function aE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!So(t[n],e[n]))return!1;return!0}function lE(t,e,n,r,s,i){if(mc=i,On=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cv.current=t===null||t.memoizedState===null?UZ:WZ,t=n(r,s),Pp){i=0;do{if(Pp=!1,um=0,25<=i)throw Error(be(301));i+=1,Nr=fr=null,e.updateQueue=null,cv.current=jZ,t=n(r,s)}while(Pp)}if(cv.current=h1,e=fr!==null&&fr.next!==null,mc=0,Nr=fr=On=null,c1=!1,e)throw Error(be(300));return t}function uE(){var t=um!==0;return um=0,t}function Do(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?On.memoizedState=Nr=t:Nr=Nr.next=t,Nr}function Qi(){if(fr===null){var t=On.alternate;t=t!==null?t.memoizedState:null}else t=fr.next;var e=Nr===null?On.memoizedState:Nr.next;if(e!==null)Nr=e,fr=t;else{if(t===null)throw Error(be(310));fr=t,t={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},Nr===null?On.memoizedState=Nr=t:Nr=Nr.next=t}return Nr}function cm(t,e){return typeof e=="function"?e(t):e}function ik(t){var e=Qi(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=fr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((mc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,On.lanes|=c,gc|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,So(r,e.memoizedState)||(qs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,On.lanes|=i,gc|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ok(t){var e=Qi(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);So(i,e.memoizedState)||(qs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Az(){}function Oz(t,e){var n=On,r=Qi(),s=e(),i=!So(r.memoizedState,s);if(i&&(r.memoizedState=s,qs=!0),r=r.queue,cE(Pz.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Nr!==null&&Nr.memoizedState.tag&1){if(n.flags|=2048,hm(9,Dz.bind(null,n,r,s,e),void 0,null),Or===null)throw Error(be(349));(mc&30)!==0||Rz(n,e,s)}return s}function Rz(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=On.updateQueue,e===null?(e={lastEffect:null,stores:null},On.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dz(t,e,n,r){e.value=n,e.getSnapshot=r,Mz(e)&&Fz(t)}function Pz(t,e,n){return n(function(){Mz(e)&&Fz(t)})}function Mz(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!So(t,n)}catch{return!0}}function Fz(t){var e=Fa(t,1);e!==null&&xo(e,t,1,-1)}function BD(t){var e=Do();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cm,lastRenderedState:t},e.queue=t,t=t.dispatch=VZ.bind(null,On,t),[e.memoizedState,t]}function hm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=On.updateQueue,e===null?(e={lastEffect:null,stores:null},On.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lz(){return Qi().memoizedState}function hv(t,e,n,r){var s=Do();On.flags|=t,s.memoizedState=hm(1|e,n,void 0,r===void 0?null:r)}function xb(t,e,n,r){var s=Qi();r=r===void 0?null:r;var i=void 0;if(fr!==null){var o=fr.memoizedState;if(i=o.destroy,r!==null&&aE(r,o.deps)){s.memoizedState=hm(e,n,i,r);return}}On.flags|=t,s.memoizedState=hm(1|e,n,i,r)}function zD(t,e){return hv(8390656,8,t,e)}function cE(t,e){return xb(2048,8,t,e)}function Bz(t,e){return xb(4,2,t,e)}function zz(t,e){return xb(4,4,t,e)}function Vz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uz(t,e,n){return n=n!=null?n.concat([t]):null,xb(4,4,Vz.bind(null,e,t),n)}function hE(){}function Wz(t,e){var n=Qi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jz(t,e){var n=Qi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gz(t,e,n){return(mc&21)===0?(t.baseState&&(t.baseState=!1,qs=!0),t.memoizedState=n):(So(n,e)||(n=KB(),On.lanes|=n,gc|=n,t.baseState=!0),e)}function BZ(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var r=sk.transition;sk.transition={};try{t(!1),e()}finally{Qt=n,sk.transition=r}}function Hz(){return Qi().memoizedState}function zZ(t,e,n){var r=Il(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qz(t))Kz(e,n);else if(n=Iz(t,e,n,r),n!==null){var s=Os();xo(n,t,r,s),Xz(n,e,r)}}function VZ(t,e,n){var r=Il(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qz(t))Kz(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,So(a,o)){var l=e.interleaved;l===null?(s.next=s,nE(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Iz(t,e,s,r),n!==null&&(s=Os(),xo(n,t,r,s),Xz(n,e,r))}}function qz(t){var e=t.alternate;return t===On||e!==null&&e===On}function Kz(t,e){Pp=c1=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xz(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,UN(t,n)}}var h1={readContext:Yi,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useInsertionEffect:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useSyncExternalStore:is,useId:is,unstable_isNewReconciler:!1},UZ={readContext:Yi,useCallback:function(t,e){return Do().memoizedState=[t,e===void 0?null:e],t},useContext:Yi,useEffect:zD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hv(4194308,4,Vz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hv(4194308,4,t,e)},useInsertionEffect:function(t,e){return hv(4,2,t,e)},useMemo:function(t,e){var n=Do();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Do();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zZ.bind(null,On,t),[r.memoizedState,t]},useRef:function(t){var e=Do();return t={current:t},e.memoizedState=t},useState:BD,useDebugValue:hE,useDeferredValue:function(t){return Do().memoizedState=t},useTransition:function(){var t=BD(!1),e=t[0];return t=BZ.bind(null,t[1]),Do().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=On,s=Do();if(kn){if(n===void 0)throw Error(be(407));n=n()}else{if(n=e(),Or===null)throw Error(be(349));(mc&30)!==0||Rz(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zD(Pz.bind(null,r,i,t),[t]),r.flags|=2048,hm(9,Dz.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Do(),e=Or.identifierPrefix;if(kn){var n=ka,r=Sa;n=(r&~(1<<32-vo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=um++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LZ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WZ={readContext:Yi,useCallback:Wz,useContext:Yi,useEffect:cE,useImperativeHandle:Uz,useInsertionEffect:Bz,useLayoutEffect:zz,useMemo:jz,useReducer:ik,useRef:Lz,useState:function(){return ik(cm)},useDebugValue:hE,useDeferredValue:function(t){var e=Qi();return Gz(e,fr.memoizedState,t)},useTransition:function(){var t=ik(cm)[0],e=Qi().memoizedState;return[t,e]},useMutableSource:Az,useSyncExternalStore:Oz,useId:Hz,unstable_isNewReconciler:!1},jZ={readContext:Yi,useCallback:Wz,useContext:Yi,useEffect:cE,useImperativeHandle:Uz,useInsertionEffect:Bz,useLayoutEffect:zz,useMemo:jz,useReducer:ok,useRef:Lz,useState:function(){return ok(cm)},useDebugValue:hE,useDeferredValue:function(t){var e=Qi();return fr===null?e.memoizedState=t:Gz(e,fr.memoizedState,t)},useTransition:function(){var t=ok(cm)[0],e=Qi().memoizedState;return[t,e]},useMutableSource:Az,useSyncExternalStore:Oz,useId:Hz,unstable_isNewReconciler:!1};function yf(t,e){try{var n="",r=e;do n+=vJ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ak(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function vC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GZ=typeof WeakMap=="function"?WeakMap:Map;function Yz(t,e,n){n=Aa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){d1||(d1=!0,NC=r),vC(t,e)},n}function Qz(t,e,n){n=Aa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vC(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vC(t,e),typeof r!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function VD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GZ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iee.bind(null,t,e,n),e.then(t,t))}function UD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WD(t,e,n,r,s){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Aa(-1,1),e.tag=2,Sl(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var HZ=Ga.ReactCurrentOwner,qs=!1;function ks(t,e,n,r){e.child=t===null?Ez(e,null,n,r):mf(e,t.child,n,r)}function jD(t,e,n,r,s){n=n.render;var i=e.ref;return Jh(e,s),r=lE(t,e,n,r,i,s),n=uE(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,La(t,e,s)):(kn&&n&&YN(e),e.flags|=1,ks(t,e,r,s),e.child)}function GD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!xE(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jz(t,e,i,r,s)):(t=mv(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,(t.lanes&s)===0){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:rm,n(o,r)&&t.ref===e.ref)return La(t,e,s)}return e.flags|=1,t=Cl(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jz(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(rm(i,r)&&t.ref===e.ref)if(qs=!1,e.pendingProps=r=i,(t.lanes&s)!==0)(t.flags&131072)!==0&&(qs=!0);else return e.lanes=t.lanes,La(t,e,s)}return xC(t,e,n,r,s)}function Zz(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(Bh,li),li|=n;else{if((n&1073741824)===0)return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,hn(Bh,li),li|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,hn(Bh,li),li|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,hn(Bh,li),li|=r;return ks(t,e,s,n),e.child}function e8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xC(t,e,n,r,s){var i=Qs(n)?dc:ys.current;return i=df(e,i),Jh(e,s),n=lE(t,e,n,r,i,s),r=uE(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,La(t,e,s)):(kn&&r&&YN(e),e.flags|=1,ks(t,e,n,s),e.child)}function HD(t,e,n,r,s){if(Qs(n)){var i=!0;r1(e)}else i=!1;if(Jh(e,s),e.stateNode===null)fv(t,e),$z(e,n,r),yC(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Yi(u):(u=Qs(n)?dc:ys.current,u=df(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&FD(e,o,r,u),rl=!1;var f=e.memoizedState;o.state=f,l1(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ys.current||rl?(typeof c=="function"&&(gC(e,n,c,r),l=e.memoizedState),(a=rl||MD(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cz(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ho(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yi(l):(l=Qs(n)?dc:ys.current,l=df(e,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&FD(e,o,r,l),rl=!1,f=e.memoizedState,o.state=f,l1(e,r,o,s);var p=e.memoizedState;a!==h||f!==p||Ys.current||rl?(typeof d=="function"&&(gC(e,n,d,r),p=e.memoizedState),(u=rl||MD(e,n,u,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return bC(t,e,n,r,i,s)}function bC(t,e,n,r,s,i){e8(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&AD(e,n,!1),La(t,e,i);r=e.stateNode,HZ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mf(e,t.child,null,i),e.child=mf(e,null,a,i)):ks(t,e,a,i),e.memoizedState=r.state,s&&AD(e,n,!0),e.child}function t8(t){var e=t.stateNode;e.pendingContext?_D(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_D(t,e.context,!1),sE(t,e.containerInfo)}function qD(t,e,n,r,s){return pf(),JN(s),e.flags|=256,ks(t,e,n,r),e.child}var wC={dehydrated:null,treeContext:null,retryLane:0};function SC(t){return{baseLanes:t,cachePool:null,transitions:null}}function n8(t,e,n){var r=e.pendingProps,s=_n.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),hn(_n,s&1),t===null)return pC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sb(o,r,0,null),t=rc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=SC(n),e.memoizedState=wC,t):fE(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return qZ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Cl(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Cl(a,i):(i=rc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?SC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wC,r}return i=t.child,t=i.sibling,r=Cl(i,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fE(t,e){return e=Sb({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function w0(t,e,n,r){return r!==null&&JN(r),mf(e,t.child,null,n),t=fE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qZ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ak(Error(be(422))),w0(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Sb({mode:"visible",children:r.children},s,0,null),i=rc(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,(e.mode&1)!==0&&mf(e,t.child,null,o),e.child.memoizedState=SC(o),e.memoizedState=wC,i);if((e.mode&1)===0)return w0(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(be(419)),r=ak(i,r,void 0),w0(t,e,o,r)}if(a=(o&t.childLanes)!==0,qs||a){if(r=Or,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|o))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Fa(t,s),xo(r,t,s,-1))}return vE(),r=ak(Error(be(421))),w0(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oee.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fi=wl(s.nextSibling),mi=e,kn=!0,mo=null,t!==null&&(Pi[Mi++]=Sa,Pi[Mi++]=ka,Pi[Mi++]=pc,Sa=t.id,ka=t.overflow,pc=e),e=fE(e,r.children),e.flags|=4096,e)}function KD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mC(t.return,e,n)}function lk(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function r8(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ks(t,e,r.children,n),r=_n.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&KD(t,n,e);else if(t.tag===19)KD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(hn(_n,r),(e.mode&1)===0)e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&u1(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lk(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&u1(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lk(e,!0,n,null,i);break;case"together":lk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fv(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function La(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gc|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(be(153));if(e.child!==null){for(t=e.child,n=Cl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KZ(t,e,n){switch(e.tag){case 3:t8(e),pf();break;case 5:_z(e);break;case 1:Qs(e.type)&&r1(e);break;case 4:sE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;hn(o1,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(hn(_n,_n.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?n8(t,e,n):(hn(_n,_n.current&1),t=La(t,e,n),t!==null?t.sibling:null);hn(_n,_n.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return r8(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),hn(_n,_n.current),r)break;return null;case 22:case 23:return e.lanes=0,Zz(t,e,n)}return La(t,e,n)}var s8,kC,i8,o8;s8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kC=function(){};i8=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Hu(Go.current);var i=null;switch(n){case"input":s=GI(t,s),r=GI(t,r),i=[];break;case"select":s=Dn({},s,{value:void 0}),r=Dn({},r,{value:void 0}),i=[];break;case"textarea":s=KI(t,s),r=KI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=t1)}YI(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&mn("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};o8=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qd(t,e){if(!kn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function os(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XZ(t,e,n){var r=e.pendingProps;switch(QN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(e),null;case 1:return Qs(e.type)&&n1(),os(e),null;case 3:return r=e.stateNode,gf(),vn(Ys),vn(ys),oE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(x0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,mo!==null&&(AC(mo),mo=null))),kC(t,e),os(e),null;case 5:iE(e);var s=Hu(lm.current);if(n=e.type,t!==null&&e.stateNode!=null)i8(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(be(166));return os(e),null}if(t=Hu(Go.current),x0(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bo]=e,r[om]=i,t=(e.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(s=0;s<gp.length;s++)mn(gp[s],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":rD(r,i),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},mn("invalid",r);break;case"textarea":iD(r,i),mn("invalid",r)}YI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&v0(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&v0(r.textContent,a,t),s=["children",""+a]):Yp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mn("scroll",r)}switch(n){case"input":c0(r),sD(r,i,!0);break;case"textarea":c0(r),oD(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=t1)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RB(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bo]=e,t[om]=r,s8(t,e,!1,!1),e.stateNode=t;e:{switch(o=QI(n,r),n){case"dialog":mn("cancel",t),mn("close",t),s=r;break;case"iframe":case"object":case"embed":mn("load",t),s=r;break;case"video":case"audio":for(s=0;s<gp.length;s++)mn(gp[s],t);s=r;break;case"source":mn("error",t),s=r;break;case"img":case"image":case"link":mn("error",t),mn("load",t),s=r;break;case"details":mn("toggle",t),s=r;break;case"input":rD(t,r),s=GI(t,r),mn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Dn({},r,{value:void 0}),mn("invalid",t);break;case"textarea":iD(t,r),s=KI(t,r),mn("invalid",t);break;default:s=r}YI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?MB(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DB(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qp(t,l):typeof l=="number"&&Qp(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&mn("scroll",t):l!=null&&MN(t,i,l,o))}switch(n){case"input":c0(t),sD(t,r,!1);break;case"textarea":c0(t),oD(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Kh(t,!!r.multiple,i,!1):r.defaultValue!=null&&Kh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=t1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return os(e),null;case 6:if(t&&e.stateNode!=null)o8(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(be(166));if(n=Hu(lm.current),Hu(Go.current),x0(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bo]=e,(i=r.nodeValue!==n)&&(t=mi,t!==null))switch(t.tag){case 3:v0(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&v0(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bo]=e,e.stateNode=r}return os(e),null;case 13:if(vn(_n),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kn&&fi!==null&&(e.mode&1)!==0&&(e.flags&128)===0)kz(),pf(),e.flags|=98560,i=!1;else if(i=x0(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(be(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(be(317));i[Bo]=e}else pf(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;os(e),i=!1}else mo!==null&&(AC(mo),mo=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(_n.current&1)!==0?pr===0&&(pr=3):vE())),e.updateQueue!==null&&(e.flags|=4),os(e),null);case 4:return gf(),kC(t,e),t===null&&sm(e.stateNode.containerInfo),os(e),null;case 10:return tE(e.type._context),os(e),null;case 17:return Qs(e.type)&&n1(),os(e),null;case 19:if(vn(_n),i=e.memoizedState,i===null)return os(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qd(i,!1);else{if(pr!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=u1(t),o!==null){for(e.flags|=128,Qd(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return hn(_n,_n.current&1|2),e.child}t=t.sibling}i.tail!==null&&Hn()>vf&&(e.flags|=128,r=!0,Qd(i,!1),e.lanes=4194304)}else{if(!r)if(t=u1(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!kn)return os(e),null}else 2*Hn()-i.renderingStartTime>vf&&n!==1073741824&&(e.flags|=128,r=!0,Qd(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Hn(),e.sibling=null,n=_n.current,hn(_n,r?n&1|2:n&1),e):(os(e),null);case 22:case 23:return yE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(li&1073741824)!==0&&(os(e),e.subtreeFlags&6&&(e.flags|=8192)):os(e),null;case 24:return null;case 25:return null}throw Error(be(156,e.tag))}function YZ(t,e){switch(QN(e),e.tag){case 1:return Qs(e.type)&&n1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gf(),vn(Ys),vn(ys),oE(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return iE(e),null;case 13:if(vn(_n),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(be(340));pf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vn(_n),null;case 4:return gf(),null;case 10:return tE(e.type._context),null;case 22:case 23:return yE(),null;case 24:return null;default:return null}}var S0=!1,us=!1,QZ=typeof WeakSet=="function"?WeakSet:Set,De=null;function Lh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bn(t,e,r)}else n.current=null}function IC(t,e,n){try{n()}catch(r){Bn(t,e,r)}}var XD=!1;function JZ(t,e){if(aC=Jv,t=cz(),XN(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++c===r&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lC={focusedElem:t,selectionRange:n},Jv=!1,De=e;De!==null;)if(e=De,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,De=t;else for(;De!==null;){e=De;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ho(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(x){Bn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}return p=XD,XD=!1,p}function Mp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&IC(e,n,i)}s=s.next}while(s!==r)}}function bb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function CC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function a8(t){var e=t.alternate;e!==null&&(t.alternate=null,a8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bo],delete e[om],delete e[hC],delete e[DZ],delete e[PZ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l8(t){return t.tag===5||t.tag===3||t.tag===4}function YD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function TC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=t1));else if(r!==4&&(t=t.child,t!==null))for(TC(t,e,n),t=t.sibling;t!==null;)TC(t,e,n),t=t.sibling}function $C(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($C(t,e,n),t=t.sibling;t!==null;)$C(t,e,n),t=t.sibling}var jr=null,fo=!1;function Ja(t,e,n){for(n=n.child;n!==null;)u8(t,e,n),n=n.sibling}function u8(t,e,n){if(jo&&typeof jo.onCommitFiberUnmount=="function")try{jo.onCommitFiberUnmount(fb,n)}catch{}switch(n.tag){case 5:us||Lh(n,e);case 6:var r=jr,s=fo;jr=null,Ja(t,e,n),jr=r,fo=s,jr!==null&&(fo?(t=jr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jr.removeChild(n.stateNode));break;case 18:jr!==null&&(fo?(t=jr,n=n.stateNode,t.nodeType===8?tk(t.parentNode,n):t.nodeType===1&&tk(t,n),tm(t)):tk(jr,n.stateNode));break;case 4:r=jr,s=fo,jr=n.stateNode.containerInfo,fo=!0,Ja(t,e,n),jr=r,fo=s;break;case 0:case 11:case 14:case 15:if(!us&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&IC(n,e,o),s=s.next}while(s!==r)}Ja(t,e,n);break;case 1:if(!us&&(Lh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Bn(n,e,a)}Ja(t,e,n);break;case 21:Ja(t,e,n);break;case 22:n.mode&1?(us=(r=us)||n.memoizedState!==null,Ja(t,e,n),us=r):Ja(t,e,n);break;default:Ja(t,e,n)}}function QD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QZ),e.forEach(function(r){var s=aee.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jr=a.stateNode,fo=!1;break e;case 3:jr=a.stateNode.containerInfo,fo=!0;break e;case 4:jr=a.stateNode.containerInfo,fo=!0;break e}a=a.return}if(jr===null)throw Error(be(160));u8(i,o,s),jr=null,fo=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Bn(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)c8(e,t),e=e.sibling}function c8(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lo(e,t),Oo(t),r&4){try{Mp(3,t,t.return),bb(3,t)}catch(m){Bn(t,t.return,m)}try{Mp(5,t,t.return)}catch(m){Bn(t,t.return,m)}}break;case 1:lo(e,t),Oo(t),r&512&&n!==null&&Lh(n,n.return);break;case 5:if(lo(e,t),Oo(t),r&512&&n!==null&&Lh(n,n.return),t.flags&32){var s=t.stateNode;try{Qp(s,"")}catch(m){Bn(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&AB(s,i),QI(a,o);var u=QI(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?MB(s,h):c==="dangerouslySetInnerHTML"?DB(s,h):c==="children"?Qp(s,h):MN(s,c,h,u)}switch(a){case"input":HI(s,i);break;case"textarea":OB(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var d=i.value;d!=null?Kh(s,!!i.multiple,d,!1):f!==!!i.multiple&&(i.defaultValue!=null?Kh(s,!!i.multiple,i.defaultValue,!0):Kh(s,!!i.multiple,i.multiple?[]:"",!1))}s[om]=i}catch(m){Bn(t,t.return,m)}}break;case 6:if(lo(e,t),Oo(t),r&4){if(t.stateNode===null)throw Error(be(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){Bn(t,t.return,m)}}break;case 3:if(lo(e,t),Oo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tm(e.containerInfo)}catch(m){Bn(t,t.return,m)}break;case 4:lo(e,t),Oo(t);break;case 13:lo(e,t),Oo(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mE=Hn())),r&4&&QD(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(us=(u=us)||c,lo(e,t),us=u):lo(e,t),Oo(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&(t.mode&1)!==0)for(De=t,c=t.child;c!==null;){for(h=De=c;De!==null;){switch(f=De,d=f.child,f.tag){case 0:case 11:case 14:case 15:Mp(4,f,f.return);break;case 1:Lh(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Bn(r,n,m)}}break;case 5:Lh(f,f.return);break;case 22:if(f.memoizedState!==null){ZD(h);continue}}d!==null?(d.return=f,De=d):ZD(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PB("display",o))}catch(m){Bn(t,t.return,m)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Bn(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lo(e,t),Oo(t),r&4&&QD(t);break;case 21:break;default:lo(e,t),Oo(t)}}function Oo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l8(n)){var r=n;break e}n=n.return}throw Error(be(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qp(s,""),r.flags&=-33);var i=YD(t);$C(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=YD(t);TC(t,a,o);break;default:throw Error(be(161))}}catch(l){Bn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZZ(t,e,n){De=t,h8(t)}function h8(t,e,n){for(var r=(t.mode&1)!==0;De!==null;){var s=De,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||S0;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||us;a=S0;var u=us;if(S0=o,(us=l)&&!u)for(De=s;De!==null;)o=De,l=o.child,o.tag===22&&o.memoizedState!==null?eP(s):l!==null?(l.return=o,De=l):eP(s);for(;i!==null;)De=i,h8(i),i=i.sibling;De=s,S0=a,us=u}JD(t)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,De=i):JD(t)}}function JD(t){for(;De!==null;){var e=De;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:us||bb(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!us)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ho(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&PD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&tm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}us||e.flags&512&&CC(e)}catch(f){Bn(e,e.return,f)}}if(e===t){De=null;break}if(n=e.sibling,n!==null){n.return=e.return,De=n;break}De=e.return}}function ZD(t){for(;De!==null;){var e=De;if(e===t){De=null;break}var n=e.sibling;if(n!==null){n.return=e.return,De=n;break}De=e.return}}function eP(t){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bb(4,e)}catch(l){Bn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Bn(e,s,l)}}var i=e.return;try{CC(e)}catch(l){Bn(e,i,l)}break;case 5:var o=e.return;try{CC(e)}catch(l){Bn(e,o,l)}}}catch(l){Bn(e,e.return,l)}if(e===t){De=null;break}var a=e.sibling;if(a!==null){a.return=e.return,De=a;break}De=e.return}}var eee=Math.ceil,f1=Ga.ReactCurrentDispatcher,dE=Ga.ReactCurrentOwner,qi=Ga.ReactCurrentBatchConfig,Ft=0,Or=null,nr=null,Xr=0,li=0,Bh=su(0),pr=0,fm=null,gc=0,wb=0,pE=0,Fp=null,js=null,mE=0,vf=1/0,pa=null,d1=!1,NC=null,kl=null,k0=!1,dl=null,p1=0,Lp=0,EC=null,dv=-1,pv=0;function Os(){return(Ft&6)!==0?Hn():dv!==-1?dv:dv=Hn()}function Il(t){return(t.mode&1)===0?1:(Ft&2)!==0&&Xr!==0?Xr&-Xr:FZ.transition!==null?(pv===0&&(pv=KB()),pv):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:tz(t.type)),t)}function xo(t,e,n,r){if(50<Lp)throw Lp=0,EC=null,Error(be(185));Xm(t,n,r),((Ft&2)===0||t!==Or)&&(t===Or&&((Ft&2)===0&&(wb|=n),pr===4&&ol(t,Xr)),Js(t,r),n===1&&Ft===0&&(e.mode&1)===0&&(vf=Hn()+500,yb&&iu()))}function Js(t,e){var n=t.callbackNode;FJ(t,e);var r=Qv(t,t===Or?Xr:0);if(r===0)n!==null&&uD(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uD(n),e===1)t.tag===0?MZ(tP.bind(null,t)):bz(tP.bind(null,t)),OZ(function(){(Ft&6)===0&&iu()}),n=null;else{switch(XB(r)){case 1:n=VN;break;case 4:n=HB;break;case 16:n=Yv;break;case 536870912:n=qB;break;default:n=Yv}n=x8(n,f8.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function f8(t,e){if(dv=-1,pv=0,(Ft&6)!==0)throw Error(be(327));var n=t.callbackNode;if(Zh()&&t.callbackNode!==n)return null;var r=Qv(t,t===Or?Xr:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=m1(t,r);else{e=r;var s=Ft;Ft|=2;var i=p8();(Or!==t||Xr!==e)&&(pa=null,vf=Hn()+500,nc(t,e));do try{ree();break}catch(a){d8(t,a)}while(1);eE(),f1.current=i,Ft=s,nr!==null?e=0:(Or=null,Xr=0,e=pr)}if(e!==0){if(e===2&&(s=nC(t),s!==0&&(r=s,e=_C(t,s))),e===1)throw n=fm,nc(t,0),ol(t,r),Js(t,Hn()),n;if(e===6)ol(t,r);else{if(s=t.current.alternate,(r&30)===0&&!tee(s)&&(e=m1(t,r),e===2&&(i=nC(t),i!==0&&(r=i,e=_C(t,i))),e===1))throw n=fm,nc(t,0),ol(t,r),Js(t,Hn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(be(345));case 2:Au(t,js,pa);break;case 3:if(ol(t,r),(r&130023424)===r&&(e=mE+500-Hn(),10<e)){if(Qv(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Os(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cC(Au.bind(null,t,js,pa),e);break}Au(t,js,pa);break;case 4:if(ol(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vo(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eee(r/1960))-r,10<r){t.timeoutHandle=cC(Au.bind(null,t,js,pa),r);break}Au(t,js,pa);break;case 5:Au(t,js,pa);break;default:throw Error(be(329))}}}return Js(t,Hn()),t.callbackNode===n?f8.bind(null,t):null}function _C(t,e){var n=Fp;return t.current.memoizedState.isDehydrated&&(nc(t,e).flags|=256),t=m1(t,e),t!==2&&(e=js,js=n,e!==null&&AC(e)),t}function AC(t){js===null?js=t:js.push.apply(js,t)}function tee(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!So(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ol(t,e){for(e&=~pE,e&=~wb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vo(e),r=1<<n;t[n]=-1,e&=~r}}function tP(t){if((Ft&6)!==0)throw Error(be(327));Zh();var e=Qv(t,0);if((e&1)===0)return Js(t,Hn()),null;var n=m1(t,e);if(t.tag!==0&&n===2){var r=nC(t);r!==0&&(e=r,n=_C(t,r))}if(n===1)throw n=fm,nc(t,0),ol(t,e),Js(t,Hn()),n;if(n===6)throw Error(be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Au(t,js,pa),Js(t,Hn()),null}function gE(t,e){var n=Ft;Ft|=1;try{return t(e)}finally{Ft=n,Ft===0&&(vf=Hn()+500,yb&&iu())}}function yc(t){dl!==null&&dl.tag===0&&(Ft&6)===0&&Zh();var e=Ft;Ft|=1;var n=qi.transition,r=Qt;try{if(qi.transition=null,Qt=1,t)return t()}finally{Qt=r,qi.transition=n,Ft=e,(Ft&6)===0&&iu()}}function yE(){li=Bh.current,vn(Bh)}function nc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AZ(n)),nr!==null)for(n=nr.return;n!==null;){var r=n;switch(QN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&n1();break;case 3:gf(),vn(Ys),vn(ys),oE();break;case 5:iE(r);break;case 4:gf();break;case 13:vn(_n);break;case 19:vn(_n);break;case 10:tE(r.type._context);break;case 22:case 23:yE()}n=n.return}if(Or=t,nr=t=Cl(t.current,null),Xr=li=e,pr=0,fm=null,pE=wb=gc=0,js=Fp=null,Gu!==null){for(e=0;e<Gu.length;e++)if(n=Gu[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gu=null}return t}function d8(t,e){do{var n=nr;try{if(eE(),cv.current=h1,c1){for(var r=On.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}c1=!1}if(mc=0,Nr=fr=On=null,Pp=!1,um=0,dE.current=null,n===null||n.return===null){pr=1,fm=e,nr=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Xr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=UD(o);if(d!==null){d.flags&=-257,WD(d,o,a,i,e),d.mode&1&&VD(i,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if((e&1)===0){VD(i,u,e),vE();break e}l=Error(be(426))}}else if(kn&&a.mode&1){var g=UD(o);if(g!==null){(g.flags&65536)===0&&(g.flags|=256),WD(g,o,a,i,e),JN(yf(l,a));break e}}i=l=yf(l,a),pr!==4&&(pr=2),Fp===null?Fp=[i]:Fp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Yz(i,l,e);DD(i,y);break e;case 1:a=l;var v=i.type,b=i.stateNode;if((i.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(kl===null||!kl.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Qz(i,a,e);DD(i,x);break e}}i=i.return}while(i!==null)}g8(n)}catch(w){e=w,nr===n&&n!==null&&(nr=n=n.return);continue}break}while(1)}function p8(){var t=f1.current;return f1.current=h1,t===null?h1:t}function vE(){(pr===0||pr===3||pr===2)&&(pr=4),Or===null||(gc&268435455)===0&&(wb&268435455)===0||ol(Or,Xr)}function m1(t,e){var n=Ft;Ft|=2;var r=p8();(Or!==t||Xr!==e)&&(pa=null,nc(t,e));do try{nee();break}catch(s){d8(t,s)}while(1);if(eE(),Ft=n,f1.current=r,nr!==null)throw Error(be(261));return Or=null,Xr=0,pr}function nee(){for(;nr!==null;)m8(nr)}function ree(){for(;nr!==null&&!NJ();)m8(nr)}function m8(t){var e=v8(t.alternate,t,li);t.memoizedProps=t.pendingProps,e===null?g8(t):nr=e,dE.current=null}function g8(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=XZ(n,e,li),n!==null){nr=n;return}}else{if(n=YZ(n,e),n!==null){n.flags&=32767,nr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pr=6,nr=null;return}}if(e=e.sibling,e!==null){nr=e;return}nr=e=t}while(e!==null);pr===0&&(pr=5)}function Au(t,e,n){var r=Qt,s=qi.transition;try{qi.transition=null,Qt=1,see(t,e,n,r)}finally{qi.transition=s,Qt=r}return null}function see(t,e,n,r){do Zh();while(dl!==null);if((Ft&6)!==0)throw Error(be(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(be(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(LJ(t,i),t===Or&&(nr=Or=null,Xr=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||k0||(k0=!0,x8(Yv,function(){return Zh(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=qi.transition,qi.transition=null;var o=Qt;Qt=1;var a=Ft;Ft|=4,dE.current=null,JZ(t,n),c8(n,t),IZ(lC),Jv=!!aC,lC=aC=null,t.current=n,ZZ(n),EJ(),Ft=a,Qt=o,qi.transition=i}else t.current=n;if(k0&&(k0=!1,dl=t,p1=s),i=t.pendingLanes,i===0&&(kl=null),OJ(n.stateNode),Js(t,Hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(d1)throw d1=!1,t=NC,NC=null,t;return(p1&1)!==0&&t.tag!==0&&Zh(),i=t.pendingLanes,(i&1)!==0?t===EC?Lp++:(Lp=0,EC=t):Lp=0,iu(),null}function Zh(){if(dl!==null){var t=XB(p1),e=qi.transition,n=Qt;try{if(qi.transition=null,Qt=16>t?16:t,dl===null)var r=!1;else{if(t=dl,dl=null,p1=0,(Ft&6)!==0)throw Error(be(331));var s=Ft;for(Ft|=4,De=t.current;De!==null;){var i=De,o=i.child;if((De.flags&16)!==0){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(De=u;De!==null;){var c=De;switch(c.tag){case 0:case 11:case 15:Mp(8,c,i)}var h=c.child;if(h!==null)h.return=c,De=h;else for(;De!==null;){c=De;var f=c.sibling,d=c.return;if(a8(c),c===u){De=null;break}if(f!==null){f.return=d,De=f;break}De=d}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}De=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,De=o;else e:for(;De!==null;){if(i=De,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:Mp(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,De=y;break e}De=i.return}}var v=t.current;for(De=v;De!==null;){o=De;var b=o.child;if((o.subtreeFlags&2064)!==0&&b!==null)b.return=o,De=b;else e:for(o=v;De!==null;){if(a=De,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:bb(9,a)}}catch(w){Bn(a,a.return,w)}if(a===o){De=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,De=x;break e}De=a.return}}if(Ft=s,iu(),jo&&typeof jo.onPostCommitFiberRoot=="function")try{jo.onPostCommitFiberRoot(fb,t)}catch{}r=!0}return r}finally{Qt=n,qi.transition=e}}return!1}function nP(t,e,n){e=yf(n,e),e=Yz(t,e,1),t=Sl(t,e,1),e=Os(),t!==null&&(Xm(t,1,e),Js(t,e))}function Bn(t,e,n){if(t.tag===3)nP(t,t,n);else for(;e!==null;){if(e.tag===3){nP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kl===null||!kl.has(r))){t=yf(n,t),t=Qz(e,t,1),e=Sl(e,t,1),t=Os(),e!==null&&(Xm(e,1,t),Js(e,t));break}}e=e.return}}function iee(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Os(),t.pingedLanes|=t.suspendedLanes&n,Or===t&&(Xr&n)===n&&(pr===4||pr===3&&(Xr&130023424)===Xr&&500>Hn()-mE?nc(t,0):pE|=n),Js(t,e)}function y8(t,e){e===0&&((t.mode&1)===0?e=1:(e=d0,d0<<=1,(d0&130023424)===0&&(d0=4194304)));var n=Os();t=Fa(t,e),t!==null&&(Xm(t,e,n),Js(t,n))}function oee(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y8(t,n)}function aee(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(be(314))}r!==null&&r.delete(e),y8(t,n)}var v8;v8=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ys.current)qs=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return qs=!1,KZ(t,e,n);qs=(t.flags&131072)!==0}else qs=!1,kn&&(e.flags&1048576)!==0&&wz(e,i1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fv(t,e),t=e.pendingProps;var s=df(e,ys.current);Jh(e,n),s=lE(null,e,r,t,s,n);var i=uE();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qs(r)?(i=!0,r1(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rE(e),s.updater=vb,e.stateNode=s,s._reactInternals=e,yC(e,r,t,n),e=bC(null,e,r,!0,i,n)):(e.tag=0,kn&&i&&YN(e),ks(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fv(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uee(r),t=ho(r,t),s){case 0:e=xC(null,e,r,t,n);break e;case 1:e=HD(null,e,r,t,n);break e;case 11:e=jD(null,e,r,t,n);break e;case 14:e=GD(null,e,r,ho(r.type,t),n);break e}throw Error(be(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ho(r,s),xC(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ho(r,s),HD(t,e,r,s,n);case 3:e:{if(t8(e),t===null)throw Error(be(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Cz(t,e),l1(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yf(Error(be(423)),e),e=qD(t,e,r,n,s);break e}else if(r!==s){s=yf(Error(be(424)),e),e=qD(t,e,r,n,s);break e}else for(fi=wl(e.stateNode.containerInfo.firstChild),mi=e,kn=!0,mo=null,n=Ez(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pf(),r===s){e=La(t,e,n);break e}ks(t,e,r,n)}e=e.child}return e;case 5:return _z(e),t===null&&pC(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,uC(r,s)?o=null:i!==null&&uC(r,i)&&(e.flags|=32),e8(t,e),ks(t,e,o,n),e.child;case 6:return t===null&&pC(e),null;case 13:return n8(t,e,n);case 4:return sE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mf(e,null,r,n):ks(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ho(r,s),jD(t,e,r,s,n);case 7:return ks(t,e,e.pendingProps,n),e.child;case 8:return ks(t,e,e.pendingProps.children,n),e.child;case 12:return ks(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,hn(o1,r._currentValue),r._currentValue=o,i!==null)if(So(i.value,o)){if(i.children===s.children&&!Ys.current){e=La(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Aa(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),mC(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(be(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mC(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ks(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jh(e,n),s=Yi(s),r=r(s),e.flags|=1,ks(t,e,r,n),e.child;case 14:return r=e.type,s=ho(r,e.pendingProps),s=ho(r.type,s),GD(t,e,r,s,n);case 15:return Jz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ho(r,s),fv(t,e),e.tag=1,Qs(r)?(t=!0,r1(e)):t=!1,Jh(e,n),$z(e,r,s),yC(e,r,s,n),bC(null,e,r,!0,t,n);case 19:return r8(t,e,n);case 22:return Zz(t,e,n)}throw Error(be(156,e.tag))};function x8(t,e){return GB(t,e)}function lee(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(t,e,n,r){return new lee(t,e,n,r)}function xE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uee(t){if(typeof t=="function")return xE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===LN)return 11;if(t===BN)return 14}return 2}function Cl(t,e){var n=t.alternate;return n===null?(n=Bi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mv(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")xE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Eh:return rc(n.children,s,i,e);case FN:o=8,s|=8;break;case VI:return t=Bi(12,n,e,s|2),t.elementType=VI,t.lanes=i,t;case UI:return t=Bi(13,n,e,s),t.elementType=UI,t.lanes=i,t;case WI:return t=Bi(19,n,e,s),t.elementType=WI,t.lanes=i,t;case NB:return Sb(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TB:o=10;break e;case $B:o=9;break e;case LN:o=11;break e;case BN:o=14;break e;case nl:o=16,r=null;break e}throw Error(be(130,t==null?t:typeof t,""))}return e=Bi(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function rc(t,e,n,r){return t=Bi(7,t,r,e),t.lanes=n,t}function Sb(t,e,n,r){return t=Bi(22,t,r,e),t.elementType=NB,t.lanes=n,t.stateNode={isHidden:!1},t}function uk(t,e,n){return t=Bi(6,t,null,e),t.lanes=n,t}function ck(t,e,n){return e=Bi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cee(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jS(0),this.expirationTimes=jS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jS(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bE(t,e,n,r,s,i,o,a,l){return t=new cee(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bi(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rE(i),t}function hee(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function b8(t){if(!t)return Ul;t=t._reactInternals;e:{if(Gc(t)!==t||t.tag!==1)throw Error(be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(be(171))}if(t.tag===1){var n=t.type;if(Qs(n))return xz(t,n,e)}return e}function w8(t,e,n,r,s,i,o,a,l){return t=bE(n,r,!0,t,s,i,o,a,l),t.context=b8(null),n=t.current,r=Os(),s=Il(n),i=Aa(r,s),i.callback=e!=null?e:null,Sl(n,i,s),t.current.lanes=s,Xm(t,s,r),Js(t,r),t}function kb(t,e,n,r){var s=e.current,i=Os(),o=Il(s);return n=b8(n),e.context===null?e.context=n:e.pendingContext=n,e=Aa(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sl(s,e,o),t!==null&&(xo(t,s,o,i),uv(t,s,o)),o}function g1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wE(t,e){rP(t,e),(t=t.alternate)&&rP(t,e)}function fee(){return null}var S8=typeof reportError=="function"?reportError:function(t){console.error(t)};function SE(t){this._internalRoot=t}Ib.prototype.render=SE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(be(409));kb(t,e,null,null)};Ib.prototype.unmount=SE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yc(function(){kb(null,t,null,null)}),e[Ma]=null}};function Ib(t){this._internalRoot=t}Ib.prototype.unstable_scheduleHydration=function(t){if(t){var e=JB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<il.length&&e!==0&&e<il[n].priority;n++);il.splice(n,0,t),n===0&&ez(t)}};function kE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sP(){}function dee(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=g1(o);i.call(u)}}var o=w8(e,r,t,0,null,!1,!1,"",sP);return t._reactRootContainer=o,t[Ma]=o.current,sm(t.nodeType===8?t.parentNode:t),yc(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=g1(l);a.call(u)}}var l=bE(t,0,!1,null,null,!1,!1,"",sP);return t._reactRootContainer=l,t[Ma]=l.current,sm(t.nodeType===8?t.parentNode:t),yc(function(){kb(e,l,n,r)}),l}function Tb(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=g1(o);a.call(l)}}kb(e,o,t,s)}else o=dee(n,e,t,s,r);return g1(o)}YB=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mp(e.pendingLanes);n!==0&&(UN(e,n|1),Js(e,Hn()),(Ft&6)===0&&(vf=Hn()+500,iu()))}break;case 13:yc(function(){var r=Fa(t,1);if(r!==null){var s=Os();xo(r,t,1,s)}}),wE(t,1)}};WN=function(t){if(t.tag===13){var e=Fa(t,134217728);if(e!==null){var n=Os();xo(e,t,134217728,n)}wE(t,134217728)}};QB=function(t){if(t.tag===13){var e=Il(t),n=Fa(t,e);if(n!==null){var r=Os();xo(n,t,e,r)}wE(t,e)}};JB=function(){return Qt};ZB=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};ZI=function(t,e,n){switch(e){case"input":if(HI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gb(r);if(!s)throw Error(be(90));_B(r),HI(r,s)}}}break;case"textarea":OB(t,n);break;case"select":e=n.value,e!=null&&Kh(t,!!n.multiple,e,!1)}};BB=gE;zB=yc;var pee={usingClientEntryPoint:!1,Events:[Qm,Rh,gb,FB,LB,gE]},Jd={findFiberByHostInstance:ju,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mee={bundleType:Jd.bundleType,version:Jd.version,rendererPackageName:Jd.rendererPackageName,rendererConfig:Jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WB(t),t===null?null:t.stateNode},findFiberByHostInstance:Jd.findFiberByHostInstance||fee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var I0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!I0.isDisabled&&I0.supportsFiber)try{fb=I0.inject(mee),jo=I0}catch{}}Si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pee;Si.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kE(e))throw Error(be(200));return hee(t,e,null,n)};Si.createRoot=function(t,e){if(!kE(t))throw Error(be(299));var n=!1,r="",s=S8;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bE(t,1,!1,null,null,n,!1,r,s),t[Ma]=e.current,sm(t.nodeType===8?t.parentNode:t),new SE(e)};Si.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(be(188)):(t=Object.keys(t).join(","),Error(be(268,t)));return t=WB(e),t=t===null?null:t.stateNode,t};Si.flushSync=function(t){return yc(t)};Si.hydrate=function(t,e,n){if(!Cb(e))throw Error(be(200));return Tb(null,t,e,!0,n)};Si.hydrateRoot=function(t,e,n){if(!kE(t))throw Error(be(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=S8;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=w8(e,null,t,1,n!=null?n:null,s,!1,i,o),t[Ma]=e.current,sm(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ib(e)};Si.render=function(t,e,n){if(!Cb(e))throw Error(be(200));return Tb(null,t,e,!1,n)};Si.unmountComponentAtNode=function(t){if(!Cb(t))throw Error(be(40));return t._reactRootContainer?(yc(function(){Tb(null,null,t,!1,function(){t._reactRootContainer=null,t[Ma]=null})}),!0):!1};Si.unstable_batchedUpdates=gE;Si.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cb(n))throw Error(be(200));if(t==null||t._reactInternals===void 0)throw Error(be(38));return Tb(t,e,n,!1,r)};Si.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Si})(wB);var iP=wB.exports;BI.createRoot=iP.createRoot,BI.hydrateRoot=iP.hydrateRoot;function y1(){return y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y1.apply(this,arguments)}var qu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qu||(qu={}));var oP=function(t){return t},aP="beforeunload",gee="popstate";function yee(t){t===void 0&&(t={});var e=t,n=e.window,r=n===void 0?document.defaultView:n,s=r.history;function i(){var k=r.location,I=k.pathname,T=k.search,N=k.hash,A=s.state||{};return[A.idx,oP({pathname:I,search:T,hash:N,state:A.usr||null,key:A.key||"default"})]}var o=null;function a(){if(o)d.call(o),o=null;else{var k=qu.Pop,I=i(),T=I[0],N=I[1];if(d.length){if(T!=null){var A=c-T;A&&(o={action:k,location:N,retry:function(){w(A*-1)}},w(A))}}else v(k)}}r.addEventListener(gee,a);var l=qu.Pop,u=i(),c=u[0],h=u[1],f=uP(),d=uP();c==null&&(c=0,s.replaceState(y1({},s.state,{idx:c}),""));function p(k){return typeof k=="string"?k:OC(k)}function m(k,I){return I===void 0&&(I=null),oP(y1({pathname:h.pathname,hash:"",search:""},typeof k=="string"?Hc(k):k,{state:I,key:vee()}))}function g(k,I){return[{usr:k.state,key:k.key,idx:I},p(k)]}function y(k,I,T){return!d.length||(d.call({action:k,location:I,retry:T}),!1)}function v(k){l=k;var I=i();c=I[0],h=I[1],f.call({action:l,location:h})}function b(k,I){var T=qu.Push,N=m(k,I);function A(){b(k,I)}if(y(T,N,A)){var R=g(N,c+1),O=R[0],M=R[1];try{s.pushState(O,"",M)}catch{r.location.assign(M)}v(T)}}function x(k,I){var T=qu.Replace,N=m(k,I);function A(){x(k,I)}if(y(T,N,A)){var R=g(N,c),O=R[0],M=R[1];s.replaceState(O,"",M),v(T)}}function w(k){s.go(k)}var S={get action(){return l},get location(){return h},createHref:p,push:b,replace:x,go:w,back:function(){w(-1)},forward:function(){w(1)},listen:function(I){return f.push(I)},block:function(I){var T=d.push(I);return d.length===1&&r.addEventListener(aP,lP),function(){T(),d.length||r.removeEventListener(aP,lP)}}};return S}function lP(t){t.preventDefault(),t.returnValue=""}function uP(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter(function(r){return r!==n})}},call:function(n){t.forEach(function(r){return r&&r(n)})}}}function vee(){return Math.random().toString(36).substr(2,8)}function OC(t){var e=t.pathname,n=e===void 0?"/":e,r=t.search,s=r===void 0?"":r,i=t.hash,o=i===void 0?"":i;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Hc(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const IE=ae.exports.createContext(null),CE=ae.exports.createContext(null),$b=ae.exports.createContext({outlet:null,matches:[]});function na(t,e){if(!t)throw new Error(e)}function xee(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Hc(e):e,s=C8(r.pathname||"/",n);if(s==null)return null;let i=k8(t);bee(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=Eee(i[a],s);return o}function k8(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((s,i)=>{let o={relativePath:s.path||"",caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||na(!1),o.relativePath=o.relativePath.slice(r.length));let a=Tl([r,o.relativePath]),l=n.concat(o);s.children&&s.children.length>0&&(s.index===!0&&na(!1),k8(s.children,e,l,a)),!(s.path==null&&!s.index)&&e.push({path:a,score:$ee(a,s.index),routesMeta:l})}),e}function bee(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Nee(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wee=/^:\w+$/,See=3,kee=2,Iee=1,Cee=10,Tee=-2,cP=t=>t==="*";function $ee(t,e){let n=t.split("/"),r=n.length;return n.some(cP)&&(r+=Tee),e&&(r+=kee),n.filter(s=>!cP(s)).reduce((s,i)=>s+(wee.test(i)?See:i===""?Iee:Cee),r)}function Nee(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Eee(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",c=_ee({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;i.push({params:r,pathname:Tl([s,c.pathname]),pathnameBase:T8(Tl([s,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(s=Tl([s,c.pathnameBase]))}return i}function _ee(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Aee(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let f=a[h]||"";o=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}return u[c]=Oee(a[h]||""),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Aee(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(s,e?void 0:"i"),r]}function Oee(t,e){try{return decodeURIComponent(t)}catch{return t}}function Ree(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hc(t):t;return{pathname:n?n.startsWith("/")?n:Dee(n,e):e,search:Mee(r),hash:Fee(s)}}function Dee(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function I8(t,e,n){let r=typeof t=="string"?Hc(t):t,s=t===""||r.pathname===""?"/":r.pathname,i;if(s==null)i=n;else{let a=e.length-1;if(s.startsWith("..")){let l=s.split("/");for(;l[0]==="..";)l.shift(),a-=1;r.pathname=l.join("/")}i=a>=0?e[a]:"/"}let o=Ree(r,i);return s&&s!=="/"&&s.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function Pee(t){return t===""||t.pathname===""?"/":typeof t=="string"?Hc(t).pathname:t.pathname}function C8(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&n!=="/"?null:t.slice(e.length)||"/"}const Tl=t=>t.join("/").replace(/\/\/+/g,"/"),T8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Mee=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Fee=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Lee(t){Zm()||na(!1);let{basename:e,navigator:n}=ae.exports.useContext(IE),{hash:r,pathname:s,search:i}=$8(t),o=s;if(e!=="/"){let a=Pee(t),l=a!=null&&a.endsWith("/");o=s==="/"?e+(l?"/":""):Tl([e,s])}return n.createHref({pathname:o,search:i,hash:r})}function Zm(){return ae.exports.useContext(CE)!=null}function eg(){return Zm()||na(!1),ae.exports.useContext(CE).location}function TE(){Zm()||na(!1);let{basename:t,navigator:e}=ae.exports.useContext(IE),{matches:n}=ae.exports.useContext($b),{pathname:r}=eg(),s=JSON.stringify(n.map(a=>a.pathnameBase)),i=ae.exports.useRef(!1);return ae.exports.useEffect(()=>{i.current=!0}),ae.exports.useCallback(function(a,l){if(l===void 0&&(l={}),!i.current)return;if(typeof a=="number"){e.go(a);return}let u=I8(a,JSON.parse(s),r);t!=="/"&&(u.pathname=Tl([t,u.pathname])),(l.replace?e.replace:e.push)(u,l.state)},[t,e,s,r])}function $8(t){let{matches:e}=ae.exports.useContext($b),{pathname:n}=eg(),r=JSON.stringify(e.map(s=>s.pathnameBase));return ae.exports.useMemo(()=>I8(t,JSON.parse(r),n),[t,r,n])}function Bee(t,e){Zm()||na(!1);let{matches:n}=ae.exports.useContext($b),r=n[n.length-1],s=r?r.params:{};r&&r.pathname;let i=r?r.pathnameBase:"/";r&&r.route;let o=eg(),a;if(e){var l;let f=typeof e=="string"?Hc(e):e;i==="/"||((l=f.pathname)==null?void 0:l.startsWith(i))||na(!1),a=f}else a=o;let u=a.pathname||"/",c=i==="/"?u:u.slice(i.length)||"/",h=xee(t,{pathname:c});return zee(h&&h.map(f=>Object.assign({},f,{params:Object.assign({},s,f.params),pathname:Tl([i,f.pathname]),pathnameBase:f.pathnameBase==="/"?i:Tl([i,f.pathnameBase])})),n)}function zee(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((n,r,s)=>ae.exports.createElement($b.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:e.concat(t.slice(0,s+1))}}),null)}function Ou(t){na(!1)}function Vee(t){let{basename:e="/",children:n=null,location:r,navigationType:s=qu.Pop,navigator:i,static:o=!1}=t;Zm()&&na(!1);let a=T8(e),l=ae.exports.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Hc(r));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:d="default"}=r,p=ae.exports.useMemo(()=>{let m=C8(u,a);return m==null?null:{pathname:m,search:c,hash:h,state:f,key:d}},[a,u,c,h,f,d]);return p==null?null:ae.exports.createElement(IE.Provider,{value:l},ae.exports.createElement(CE.Provider,{children:n,value:{location:p,navigationType:s}}))}function Uee(t){let{children:e,location:n}=t;return Bee(RC(e),n)}function RC(t){let e=[];return ae.exports.Children.forEach(t,n=>{if(!ae.exports.isValidElement(n))return;if(n.type===ae.exports.Fragment){e.push.apply(e,RC(n.props.children));return}n.type!==Ou&&na(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=RC(n.props.children)),e.push(r)}),e}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DC(){return DC=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DC.apply(this,arguments)}function Wee(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const jee=["onClick","reloadDocument","replace","state","target","to"];function Gee(t){let{basename:e,children:n,window:r}=t,s=ae.exports.useRef();s.current==null&&(s.current=yee({window:r}));let i=s.current,[o,a]=ae.exports.useState({action:i.action,location:i.location});return ae.exports.useLayoutEffect(()=>i.listen(a),[i]),ae.exports.createElement(Vee,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i})}function Hee(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const xa=ae.exports.forwardRef(function(e,n){let{onClick:r,reloadDocument:s,replace:i=!1,state:o,target:a,to:l}=e,u=Wee(e,jee),c=Lee(l),h=qee(l,{replace:i,state:o,target:a});function f(d){r&&r(d),!d.defaultPrevented&&!s&&h(d)}return ae.exports.createElement("a",DC({},u,{href:c,onClick:f,ref:n,target:a}))});function qee(t,e){let{target:n,replace:r,state:s}=e===void 0?{}:e,i=TE(),o=eg(),a=$8(t);return ae.exports.useCallback(l=>{if(l.button===0&&(!n||n==="_self")&&!Hee(l)){l.preventDefault();let u=!!r||OC(o)===OC(a);i(t,{replace:u,state:s})}},[o,i,a,r,s,n,t])}var N8="Expected a function",hP=0/0,Kee="[object Symbol]",Xee=/^\s+|\s+$/g,Yee=/^[-+]0x[0-9a-f]+$/i,Qee=/^0b[01]+$/i,Jee=/^0o[0-7]+$/i,Zee=parseInt,ete=typeof Dt=="object"&&Dt&&Dt.Object===Object&&Dt,tte=typeof self=="object"&&self&&self.Object===Object&&self,nte=ete||tte||Function("return this")(),rte=Object.prototype,ste=rte.toString,ite=Math.max,ote=Math.min,hk=function(){return nte.Date.now()};function ate(t,e,n){var r,s,i,o,a,l,u=0,c=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(N8);e=fP(e)||0,v1(n)&&(c=!!n.leading,h="maxWait"in n,i=h?ite(fP(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function d(S){var k=r,I=s;return r=s=void 0,u=S,o=t.apply(I,k),o}function p(S){return u=S,a=setTimeout(y,e),c?d(S):o}function m(S){var k=S-l,I=S-u,T=e-k;return h?ote(T,i-I):T}function g(S){var k=S-l,I=S-u;return l===void 0||k>=e||k<0||h&&I>=i}function y(){var S=hk();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?d(S):(r=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=s=a=void 0}function x(){return a===void 0?o:v(hk())}function w(){var S=hk(),k=g(S);if(r=arguments,s=this,l=S,k){if(a===void 0)return p(l);if(h)return a=setTimeout(y,e),d(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=b,w.flush=x,w}function lte(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(N8);return v1(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),ate(t,e,{leading:r,maxWait:e,trailing:s})}function v1(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ute(t){return!!t&&typeof t=="object"}function cte(t){return typeof t=="symbol"||ute(t)&&ste.call(t)==Kee}function fP(t){if(typeof t=="number")return t;if(cte(t))return hP;if(v1(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=v1(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Xee,"");var n=Qee.test(t);return n||Jee.test(t)?Zee(t.slice(2),n?2:8):Yee.test(t)?hP:+t}var hte=lte,fte="Expected a function",dP=0/0,dte="[object Symbol]",pte=/^\s+|\s+$/g,mte=/^[-+]0x[0-9a-f]+$/i,gte=/^0b[01]+$/i,yte=/^0o[0-7]+$/i,vte=parseInt,xte=typeof Dt=="object"&&Dt&&Dt.Object===Object&&Dt,bte=typeof self=="object"&&self&&self.Object===Object&&self,wte=xte||bte||Function("return this")(),Ste=Object.prototype,kte=Ste.toString,Ite=Math.max,Cte=Math.min,fk=function(){return wte.Date.now()};function Tte(t,e,n){var r,s,i,o,a,l,u=0,c=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(fte);e=pP(e)||0,PC(n)&&(c=!!n.leading,h="maxWait"in n,i=h?Ite(pP(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function d(S){var k=r,I=s;return r=s=void 0,u=S,o=t.apply(I,k),o}function p(S){return u=S,a=setTimeout(y,e),c?d(S):o}function m(S){var k=S-l,I=S-u,T=e-k;return h?Cte(T,i-I):T}function g(S){var k=S-l,I=S-u;return l===void 0||k>=e||k<0||h&&I>=i}function y(){var S=fk();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?d(S):(r=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=s=a=void 0}function x(){return a===void 0?o:v(fk())}function w(){var S=fk(),k=g(S);if(r=arguments,s=this,l=S,k){if(a===void 0)return p(l);if(h)return a=setTimeout(y,e),d(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=b,w.flush=x,w}function PC(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function $te(t){return!!t&&typeof t=="object"}function Nte(t){return typeof t=="symbol"||$te(t)&&kte.call(t)==dte}function pP(t){if(typeof t=="number")return t;if(Nte(t))return dP;if(PC(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=PC(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(pte,"");var n=gte.test(t);return n||yte.test(t)?vte(t.slice(2),n?2:8):mte.test(t)?dP:+t}var mP=Tte,E8=function(){};function _8(t){var e=void 0,n=void 0,r=void 0;for(e=0;e<t.length;e+=1)if(n=t[e],n.dataset&&n.dataset.aos||(r=n.children&&_8(n.children),r))return!0;return!1}function Ete(t){!t||t.forEach(function(e){var n=Array.prototype.slice.call(e.addedNodes),r=Array.prototype.slice.call(e.removedNodes),s=n.concat(r);if(_8(s))return E8()})}function A8(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function _te(){return!!A8()}function Ate(t,e){var n=window.document,r=A8(),s=new r(Ete);E8=e,s.observe(n.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}var gP={isSupported:_te,ready:Ate},Ote=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Rte=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Dte=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pte=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,Mte=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,Fte=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,Lte=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;function yP(){return navigator.userAgent||navigator.vendor||window.opera||""}var Bte=function(){function t(){Ote(this,t)}return Rte(t,[{key:"phone",value:function(){var n=yP();return!!(Pte.test(n)||Mte.test(n.substr(0,4)))}},{key:"mobile",value:function(){var n=yP();return!!(Fte.test(n)||Lte.test(n.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}},{key:"ie11",value:function(){return"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style}}]),t}(),gv=new Bte,zte=function(e,n){return n&&n.forEach(function(r){return e.classList.add(r)})},Vte=function(e,n){return n&&n.forEach(function(r){return e.classList.remove(r)})},C0=function(e,n){var r=void 0;return gv.ie11()?(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,{detail:n})):r=new CustomEvent(e,{detail:n}),document.dispatchEvent(r)},Ute=function(e,n){var r=e.options,s=e.position,i=e.node;e.data;var o=function(){!e.animated||(Vte(i,r.animatedClassNames),C0("aos:out",i),e.options.id&&C0("aos:in:"+e.options.id,i),e.animated=!1)},a=function(){e.animated||(zte(i,r.animatedClassNames),C0("aos:in",i),e.options.id&&C0("aos:in:"+e.options.id,i),e.animated=!0)};r.mirror&&n>=s.out&&!r.once?o():n>=s.in?a():e.animated&&!r.once&&o()},vP=function(e){return e.forEach(function(n,r){return Ute(n,window.pageYOffset)})},O8=function(e){for(var n=0,r=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft-(e.tagName!="BODY"?e.scrollLeft:0),r+=e.offsetTop-(e.tagName!="BODY"?e.scrollTop:0),e=e.offsetParent;return{top:r,left:n}},$l=function(t,e,n){var r=t.getAttribute("data-aos-"+e);if(typeof r<"u"){if(r==="true")return!0;if(r==="false")return!1}return r||n},Wte=function(e,n,r){var s=window.innerHeight,i=$l(e,"anchor"),o=$l(e,"anchor-placement"),a=Number($l(e,"offset",o?0:n)),l=o||r,u=e;i&&document.querySelectorAll(i)&&(u=document.querySelectorAll(i)[0]);var c=O8(u).top-s;switch(l){case"top-bottom":break;case"center-bottom":c+=u.offsetHeight/2;break;case"bottom-bottom":c+=u.offsetHeight;break;case"top-center":c+=s/2;break;case"center-center":c+=s/2+u.offsetHeight/2;break;case"bottom-center":c+=s/2+u.offsetHeight;break;case"top-top":c+=s;break;case"bottom-top":c+=s+u.offsetHeight;break;case"center-top":c+=s+u.offsetHeight/2;break}return c+a},jte=function(e,n){var r=$l(e,"anchor"),s=$l(e,"offset",n),i=e;r&&document.querySelectorAll(r)&&(i=document.querySelectorAll(r)[0]);var o=O8(i).top;return o+i.offsetHeight-s},Gte=function(e,n){return e.forEach(function(r,s){var i=$l(r.node,"mirror",n.mirror),o=$l(r.node,"once",n.once),a=$l(r.node,"id"),l=n.useClassNames&&r.node.getAttribute("data-aos"),u=[n.animatedClassName].concat(l?l.split(" "):[]).filter(function(c){return typeof c=="string"});n.initClassName&&r.node.classList.add(n.initClassName),r.position={in:Wte(r.node,n.offset,n.anchorPlacement),out:i&&jte(r.node,n.offset)},r.options={once:o,mirror:i,animatedClassNames:u,id:a}}),e},R8=function(){var t=document.querySelectorAll("[data-aos]");return Array.prototype.map.call(t,function(e){return{node:e}})},ba=[],xP=!1,Ln={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,mirror:!1,anchorPlacement:"top-bottom",startEvent:"DOMContentLoaded",animatedClassName:"aos-animate",initClassName:"aos-init",useClassNames:!1,disableMutationObserver:!1,throttleDelay:99,debounceDelay:50},D8=function(){return document.all&&!window.atob},Hte=function(){return ba=Gte(ba,Ln),vP(ba),window.addEventListener("scroll",hte(function(){vP(ba,Ln.once)},Ln.throttleDelay)),ba},Lu=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;e&&(xP=!0),xP&&Hte()},P8=function(){if(ba=R8(),F8(Ln.disable)||D8())return M8();Lu()},M8=function(){ba.forEach(function(e,n){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay"),Ln.initClassName&&e.node.classList.remove(Ln.initClassName),Ln.animatedClassName&&e.node.classList.remove(Ln.animatedClassName)})},F8=function(e){return e===!0||e==="mobile"&&gv.mobile()||e==="phone"&&gv.phone()||e==="tablet"&&gv.tablet()||typeof e=="function"&&e()===!0},qte=function(e){return Ln=Dte(Ln,e),ba=R8(),!Ln.disableMutationObserver&&!gP.isSupported()&&(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),Ln.disableMutationObserver=!0),Ln.disableMutationObserver||gP.ready("[data-aos]",P8),F8(Ln.disable)||D8()?M8():(document.querySelector("body").setAttribute("data-aos-easing",Ln.easing),document.querySelector("body").setAttribute("data-aos-duration",Ln.duration),document.querySelector("body").setAttribute("data-aos-delay",Ln.delay),["DOMContentLoaded","load"].indexOf(Ln.startEvent)===-1?document.addEventListener(Ln.startEvent,function(){Lu(!0)}):window.addEventListener("load",function(){Lu(!0)}),Ln.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1&&Lu(!0),window.addEventListener("resize",mP(Lu,Ln.debounceDelay,!0)),window.addEventListener("orientationchange",mP(Lu,Ln.debounceDelay,!0)),ba)},Kte={init:qte,refresh:Lu,refreshHard:P8};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Xte=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},B8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,d=u&63;l||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(L8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Xte(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw Error();const f=i<<2|a>>4;if(r.push(f),u!==64){const d=a<<4&240|u>>2;if(r.push(d),h!==64){const p=u<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Yte=function(t){const e=L8(t);return B8.encodeByteArray(e,!0)},z8=function(t){return Yte(t).replace(/\./g,"")},Qte=function(t){try{return B8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jte{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rr())}function U8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function W8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zte(){return Rr().indexOf("Electron/")>=0}function j8(){const t=Rr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ene(){return Rr().indexOf("MSAppHost/")>=0}function tne(){return typeof indexedDB=="object"}function nne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rne="FirebaseError";class qc extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rne,Object.setPrototypeOf(this,qc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tg.prototype.create)}}class tg{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?sne(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new qc(s,a,r)}}function sne(t,e){return t.replace(ine,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ine=/\{\$([^}]+)}/g;function one(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function x1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(bP(i)&&bP(o)){if(!x1(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function vp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ane(t,e){const n=new lne(t,e);return n.subscribe.bind(n)}class lne{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");une(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dk),s.error===void 0&&(s.error=dk),s.complete===void 0&&(s.complete=dk);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function une(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dk(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){return t&&t._delegate?t._delegate:t}class vc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cne{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Jte;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fne(e))try{this.getOrInitializeService({instanceIdentifier:Ru})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ru){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ru){return this.instances.has(e)}getOptions(e=Ru){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hne(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ru){return this.component?this.component.multipleInstances?e:Ru:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hne(t){return t===Ru?void 0:t}function fne(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cne(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Vt||(Vt={}));const pne={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},mne=Vt.INFO,gne={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},yne=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=gne[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $E{constructor(e){this.name=e,this._logLevel=mne,this._logHandler=yne,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...e),this._logHandler(this,Vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...e),this._logHandler(this,Vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...e),this._logHandler(this,Vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...e),this._logHandler(this,Vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...e),this._logHandler(this,Vt.ERROR,...e)}}const vne=(t,e)=>e.some(n=>t instanceof n);let wP,SP;function xne(){return wP||(wP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bne(){return SP||(SP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G8=new WeakMap,MC=new WeakMap,H8=new WeakMap,pk=new WeakMap,NE=new WeakMap;function wne(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Nl(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&G8.set(n,t)}).catch(()=>{}),NE.set(e,t),e}function Sne(t){if(MC.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});MC.set(t,e)}let FC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return MC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||H8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kne(t){FC=t(FC)}function Ine(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mk(this),e,...n);return H8.set(r,e.sort?e.sort():[e]),Nl(r)}:bne().includes(t)?function(...e){return t.apply(mk(this),e),Nl(G8.get(this))}:function(...e){return Nl(t.apply(mk(this),e))}}function Cne(t){return typeof t=="function"?Ine(t):(t instanceof IDBTransaction&&Sne(t),vne(t,xne())?new Proxy(t,FC):t)}function Nl(t){if(t instanceof IDBRequest)return wne(t);if(pk.has(t))return pk.get(t);const e=Cne(t);return e!==t&&(pk.set(t,e),NE.set(e,t)),e}const mk=t=>NE.get(t);function Tne(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Nl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Nl(o.result),l.oldVersion,l.newVersion,Nl(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const $ne=["get","getKey","getAll","getAllKeys","count"],Nne=["put","add","delete","clear"],gk=new Map;function kP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gk.get(e))return gk.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Nne.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$ne.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return gk.set(e,i),i}kne(t=>({...t,get:(e,n,r)=>kP(e,n)||t.get(e,n,r),has:(e,n)=>!!kP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ene{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_ne(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _ne(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const LC="@firebase/app",IP="0.7.28";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new $E("@firebase/app"),Ane="@firebase/app-compat",One="@firebase/analytics-compat",Rne="@firebase/analytics",Dne="@firebase/app-check-compat",Pne="@firebase/app-check",Mne="@firebase/auth",Fne="@firebase/auth-compat",Lne="@firebase/database",Bne="@firebase/database-compat",zne="@firebase/functions",Vne="@firebase/functions-compat",Une="@firebase/installations",Wne="@firebase/installations-compat",jne="@firebase/messaging",Gne="@firebase/messaging-compat",Hne="@firebase/performance",qne="@firebase/performance-compat",Kne="@firebase/remote-config",Xne="@firebase/remote-config-compat",Yne="@firebase/storage",Qne="@firebase/storage-compat",Jne="@firebase/firestore",Zne="@firebase/firestore-compat",ere="firebase",tre="9.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8="[DEFAULT]",nre={[LC]:"fire-core",[Ane]:"fire-core-compat",[Rne]:"fire-analytics",[One]:"fire-analytics-compat",[Pne]:"fire-app-check",[Dne]:"fire-app-check-compat",[Mne]:"fire-auth",[Fne]:"fire-auth-compat",[Lne]:"fire-rtdb",[Bne]:"fire-rtdb-compat",[zne]:"fire-fn",[Vne]:"fire-fn-compat",[Une]:"fire-iid",[Wne]:"fire-iid-compat",[jne]:"fire-fcm",[Gne]:"fire-fcm-compat",[Hne]:"fire-perf",[qne]:"fire-perf-compat",[Kne]:"fire-rc",[Xne]:"fire-rc-compat",[Yne]:"fire-gcs",[Qne]:"fire-gcs-compat",[Jne]:"fire-fst",[Zne]:"fire-fst-compat","fire-js":"fire-js",[ere]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new Map,BC=new Map;function rre(t,e){try{t.container.addComponent(e)}catch(n){EE.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xf(t){const e=t.name;if(BC.has(e))return EE.debug(`There were multiple attempts to register component ${e}.`),!1;BC.set(e,t);for(const n of b1.values())rre(n,t);return!0}function _E(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sre={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},xc=new tg("app","Firebase",sre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ire{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=tre;function ore(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:q8,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw xc.create("bad-app-name",{appName:String(r)});const s=b1.get(r);if(s){if(x1(t,s.options)&&x1(n,s.config))return s;throw xc.create("duplicate-app",{appName:r})}const i=new dne(r);for(const a of BC.values())i.addComponent(a);const o=new ire(t,n,i);return b1.set(r,o),o}function K8(t=q8){const e=b1.get(t);if(!e)throw xc.create("no-app",{appName:t});return e}function El(t,e,n){var r;let s=(r=nre[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),EE.warn(a.join(" "));return}xf(new vc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const are="firebase-heartbeat-database",lre=1,dm="firebase-heartbeat-store";let yk=null;function X8(){return yk||(yk=Tne(are,lre,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(dm)}}}).catch(t=>{throw xc.create("storage-open",{originalErrorMessage:t.message})})),yk}async function ure(t){var e;try{return(await X8()).transaction(dm).objectStore(dm).get(Y8(t))}catch(n){throw xc.create("storage-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message})}}async function CP(t,e){var n;try{const s=(await X8()).transaction(dm,"readwrite");return await s.objectStore(dm).put(e,Y8(t)),s.done}catch(r){throw xc.create("storage-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message})}}function Y8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre=1024,hre=30*24*60*60*1e3;class fre{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pre(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=TP();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=hre}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=TP(),{heartbeatsToSend:n,unsentEntries:r}=dre(this._heartbeatsCache.heartbeats),s=z8(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function TP(){return new Date().toISOString().substring(0,10)}function dre(t,e=cre){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$P(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$P(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tne()?nne().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await ure(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return CP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return CP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $P(t){return z8(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mre(t){xf(new vc("platform-logger",e=>new Ene(e),"PRIVATE")),xf(new vc("heartbeat",e=>new fre(e),"PRIVATE")),El(LC,IP,t),El(LC,IP,"esm2017"),El("fire-js","")}mre("");function AE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Q8(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gre=Q8,J8=new tg("auth","Firebase",Q8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=new $E("@firebase/auth");function yv(t,...e){NP.logLevel<=Vt.ERROR&&NP.error(`Auth (${rg}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,...e){throw OE(t,...e)}function Ho(t,...e){return OE(t,...e)}function yre(t,e,n){const r=Object.assign(Object.assign({},gre()),{[e]:n});return new tg("auth","Firebase",r).create(e,{appName:t.name})}function OE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return J8.create(t,...e)}function Ye(t,e,...n){if(!t)throw OE(e,...n)}function Ia(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yv(e),new Error(e)}function Ba(t,e){t||Ia(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=new Map;function Ca(t){Ba(t instanceof Function,"Expected a class definition");let e=EP.get(t);return e?(Ba(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EP.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vre(t,e){const n=_E(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(x1(i,e!=null?e:{}))return s;ko(s,"already-initialized")}return n.initialize({options:e})}function xre(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ca);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bre(){return _P()==="http:"||_P()==="https:"}function _P(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wre(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bre()||U8()||"connection"in navigator)?navigator.onLine:!0}function Sre(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ba(n>e,"Short delay should be less than long delay!"),this.isMobile=V8()||W8()}get(){return wre()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,e){Ba(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Ia("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Ia("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Ia("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kre={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ire=new sg(3e4,6e4);function id(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function od(t,e,n,r,s={}){return eV(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ng(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Z8.fetch()(tV(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function eV(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kre),e);try{const s=new Cre(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw T0(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw T0(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw T0(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw T0(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw yre(t,c,u);ko(t,c)}}catch(s){if(s instanceof qc)throw s;ko(t,"network-request-failed")}}async function ig(t,e,n,r,s={}){const i=await od(t,e,n,r,s);return"mfaPendingCredential"in i&&ko(t,"multi-factor-auth-required",{_serverResponse:i}),i}function tV(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?RE(t.config,s):`${t.config.apiScheme}://${s}`}class Cre{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ho(this.auth,"network-request-failed")),Ire.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function T0(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ho(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tre(t,e){return od(t,"POST","/v1/accounts:delete",e)}async function $re(t,e){return od(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nre(t,e=!1){const n=vs(t),r=await n.getIdToken(e),s=DE(r);Ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Bp(vk(s.auth_time)),issuedAtTime:Bp(vk(s.iat)),expirationTime:Bp(vk(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vk(t){return Number(t)*1e3}function DE(t){var e;const[n,r,s]=t.split(".");if(n===void 0||r===void 0||s===void 0)return yv("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qte(r);return i?JSON.parse(i):(yv("Failed to decode base64 JWT payload"),null)}catch(i){return yv("Caught error parsing JWT payload as JSON",(e=i)===null||e===void 0?void 0:e.toString()),null}}function Ere(t){const e=DE(t);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pm(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qc&&_re(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _re({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(n){((e=n)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bp(this.lastLoginAt),this.creationTime=Bp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pm(t,$re(n,{idToken:r}));Ye(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Dre(i.providerUserInfo):[],a=Rre(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new nV(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function Ore(t){const e=vs(t);await w1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Rre(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Dre(t){return t.map(e=>{var{providerId:n}=e,r=AE(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pre(t,e){const n=await eV(t,{},async()=>{const r=ng({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=tV(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Z8.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ere(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Ye(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Pre(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new mm;return r&&(Ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mm,this.toJSON())}_performRefresh(){return Ia("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,e){Ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sc{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=AE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Are(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nV(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pm(this,this.stsTokenManager.getToken(this.auth,e));return Ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Nre(this,e)}reload(){return Ore(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new sc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await w1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await pm(this,Tre(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,d=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:S,stsTokenManager:k}=n;Ye(b&&k,e,"internal-error");const I=mm.fromJSON(this.name,k);Ye(typeof b=="string",e,"internal-error"),Za(h,e.name),Za(f,e.name),Ye(typeof x=="boolean",e,"internal-error"),Ye(typeof w=="boolean",e,"internal-error"),Za(d,e.name),Za(p,e.name),Za(m,e.name),Za(g,e.name),Za(y,e.name),Za(v,e.name);const T=new sc({uid:b,auth:e,email:f,emailVerified:x,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(T.providerData=S.map(N=>Object.assign({},N))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new mm;s.updateFromServerResponse(n);const i=new sc({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await w1(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rV.type="NONE";const AP=rV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e,n){return`firebase:${t}:${e}:${n}`}class ef{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vv(this.userKey,s.apiKey,i),this.fullPersistenceKey=vv("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ef(Ca(AP),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ca(AP);const o=vv(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=sc._fromJSON(e,c);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ef(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ef(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lV(e))return"Blackberry";if(uV(e))return"Webos";if(PE(e))return"Safari";if((e.includes("chrome/")||iV(e))&&!e.includes("edge/"))return"Chrome";if(aV(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sV(t=Rr()){return/firefox\//i.test(t)}function PE(t=Rr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iV(t=Rr()){return/crios\//i.test(t)}function oV(t=Rr()){return/iemobile/i.test(t)}function aV(t=Rr()){return/android/i.test(t)}function lV(t=Rr()){return/blackberry/i.test(t)}function uV(t=Rr()){return/webos/i.test(t)}function Nb(t=Rr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Mre(t=Rr()){var e;return Nb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Fre(){return j8()&&document.documentMode===10}function cV(t=Rr()){return Nb(t)||aV(t)||uV(t)||lV(t)||/windows phone/i.test(t)||oV(t)}function Lre(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t,e=[]){let n;switch(t){case"Browser":n=OP(Rr());break;case"Worker":n=`${OP(Rr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rg}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){var n;if(this.auth.currentUser===e)return;const r=[];try{for(const s of this.queue)await s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(n=s)===null||n===void 0?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zre{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RP(this),this.idTokenSubscription=new RP(this),this.beforeStateQueue=new Bre(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J8,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ca(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ef.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){var n;try{await w1(e)}catch(r){if(((n=r)===null||n===void 0?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sre()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?vs(e):null;return n&&Ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ca(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tg("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ca(e)||this._popupRedirectResolver;Ye(n,this,"argument-error"),this.redirectPersistenceManager=await ef.create(this,[Ca(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ye(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Eb(t){return vs(t)}class RP{constructor(e){this.auth=e,this.observer=null,this.addObserver=ane(n=>this.observer=n)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ia("not implemented")}_getIdTokenResponse(e){return Ia("not implemented")}_linkToIdToken(e,n){return Ia("not implemented")}_getReauthenticationResolver(e){return Ia("not implemented")}}async function Vre(t,e){return od(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ure(t,e){return ig(t,"POST","/v1/accounts:signInWithPassword",id(t,e))}async function Wre(t,e){return od(t,"POST","/v1/accounts:sendOobCode",id(t,e))}async function jre(t,e){return Wre(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gre(t,e){return ig(t,"POST","/v1/accounts:signInWithEmailLink",id(t,e))}async function Hre(t,e){return ig(t,"POST","/v1/accounts:signInWithEmailLink",id(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends ME{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new gm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ure(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Gre(e,{email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Vre(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Hre(e,{idToken:n,email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(t,e){return ig(t,"POST","/v1/accounts:signInWithIdp",id(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qre="http://localhost";class bc extends ME{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ko("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=AE(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new bc(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return tf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,tf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,tf(e,n)}buildRequest(){const e={requestUri:qre,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ng(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kre(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xre(t){const e=yp(vp(t)).link,n=e?yp(vp(e)).deep_link_id:null,r=yp(vp(t)).deep_link_id;return(r?yp(vp(r)).link:null)||r||n||e||t}class FE{constructor(e){var n,r,s,i,o,a;const l=yp(vp(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=Kre((s=l.mode)!==null&&s!==void 0?s:null);Ye(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Xre(e);try{return new FE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.providerId=ad.PROVIDER_ID}static credential(e,n){return gm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=FE.parseLink(n);return Ye(r,"argument-error"),gm._fromEmailAndCode(e,r.code,r.tenantId)}}ad.PROVIDER_ID="password";ad.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ad.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends fV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends og{constructor(){super("facebook.com")}static credential(e){return bc._fromParams({providerId:al.PROVIDER_ID,signInMethod:al.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return al.credentialFromTaggedObject(e)}static credentialFromError(e){return al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return al.credential(e.oauthAccessToken)}catch{return null}}}al.FACEBOOK_SIGN_IN_METHOD="facebook.com";al.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends og{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bc._fromParams({providerId:ll.PROVIDER_ID,signInMethod:ll.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ll.credentialFromTaggedObject(e)}static credentialFromError(e){return ll.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ll.credential(n,r)}catch{return null}}}ll.GOOGLE_SIGN_IN_METHOD="google.com";ll.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends og{constructor(){super("github.com")}static credential(e){return bc._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ul.credential(e.oauthAccessToken)}catch{return null}}}ul.GITHUB_SIGN_IN_METHOD="github.com";ul.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends og{constructor(){super("twitter.com")}static credential(e,n){return bc._fromParams({providerId:cl.PROVIDER_ID,signInMethod:cl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cl.credentialFromTaggedObject(e)}static credentialFromError(e){return cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cl.credential(n,r)}catch{return null}}}cl.TWITTER_SIGN_IN_METHOD="twitter.com";cl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yre(t,e){return ig(t,"POST","/v1/accounts:signUp",id(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sc._fromIdTokenResponse(e,r,s),o=DP(r);return new wc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=DP(r);return new wc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function DP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends qc{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,S1.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new S1(e,n,r,s)}}function dV(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?S1._fromErrorAndOperation(t,i,e,r):i})}async function Qre(t,e,n=!1){const r=await pm(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jre(t,e,n=!1){var r;const{auth:s}=t,i="reauthenticate";try{const o=await pm(t,dV(s,i,e,t),n);Ye(o.idToken,s,"internal-error");const a=DE(o.idToken);Ye(a,s,"internal-error");const{sub:l}=a;return Ye(t.uid===l,s,"user-mismatch"),wc._forOperation(t,i,o)}catch(o){throw((r=o)===null||r===void 0?void 0:r.code)==="auth/user-not-found"&&ko(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(t,e,n=!1){const r="signIn",s=await dV(t,r,e),i=await wc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Zre(t,e){return pV(Eb(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ese(t,e,n){var r;Ye(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Ye(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ye(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ye(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function tse(t,e,n){const r=Eb(t),s=await Yre(r,{returnSecureToken:!0,email:e,password:n}),i=await wc._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(i.user),i}function nse(t,e,n){return Zre(vs(t),ad.credential(e,n))}async function rse(t,e){const n=vs(t),r=await t.getIdToken(),s={requestType:"VERIFY_EMAIL",idToken:r};e&&ese(n.auth,s,e);const{email:i}=await jre(n.auth,s);i!==t.email&&await t.reload()}function sse(t,e,n,r){return vs(t).onAuthStateChanged(e,n,r)}function ise(t){return vs(t).signOut()}const k1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(k1,"1"),this.storage.removeItem(k1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ose(){const t=Rr();return PE(t)||Nb(t)}const ase=1e3,lse=10;class gV extends mV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=ose()&&Lre(),this.fallbackToPolling=cV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Fre()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lse):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ase)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gV.type="LOCAL";const use=gV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV extends mV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yV.type="SESSION";const vV=yV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cse(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _b(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await cse(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_b.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=LE("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(){return window}function fse(t){qo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){return typeof qo().WorkerGlobalScope<"u"&&typeof qo().importScripts=="function"}async function dse(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pse(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mse(){return xV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="firebaseLocalStorageDb",gse=1,I1="firebaseLocalStorage",wV="fbase_key";class ag{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ab(t,e){return t.transaction([I1],e?"readwrite":"readonly").objectStore(I1)}function yse(){const t=indexedDB.deleteDatabase(bV);return new ag(t).toPromise()}function VC(){const t=indexedDB.open(bV,gse);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(I1,{keyPath:wV})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(I1)?e(r):(r.close(),await yse(),e(await VC()))})})}async function PP(t,e,n){const r=Ab(t,!0).put({[wV]:e,value:n});return new ag(r).toPromise()}async function vse(t,e){const n=Ab(t,!1).get(e),r=await new ag(n).toPromise();return r===void 0?null:r.value}function MP(t,e){const n=Ab(t,!0).delete(e);return new ag(n).toPromise()}const xse=800,bse=3;class SV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await VC(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bse)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_b._getInstance(mse()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dse(),!this.activeServiceWorker)return;this.sender=new hse(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pse()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await VC();return await PP(e,k1,"1"),await MP(e,k1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vse(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>MP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ab(s,!1).getAll();return new ag(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SV.type="LOCAL";const wse=SV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sse(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function kse(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ho("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Sse().appendChild(r)})}function Ise(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new sg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cse(t,e){return e?Ca(e):(Ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends ME{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Tse(t){return pV(t.auth,new BE(t),t.bypassAuthState)}function $se(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),Jre(n,new BE(t),t.bypassAuthState)}async function Nse(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),Qre(n,new BE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tse;case"linkViaPopup":case"linkViaRedirect":return Nse;case"reauthViaPopup":case"reauthViaRedirect":return $se;default:ko(this.auth,"internal-error")}}resolve(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ese=new sg(2e3,1e4);class zh extends kV{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,zh.currentPopupAction&&zh.currentPopupAction.cancel(),zh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){Ba(this.filter.length===1,"Popup operations only handle one event");const e=LE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ho(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ho(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ho(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Ese.get())};e()}}zh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _se="pendingRedirect",xv=new Map;class Ase extends kV{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xv.get(this.auth._key());if(!e){try{const r=await Ose(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xv.set(this.auth._key(),e)}return this.bypassAuthState||xv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ose(t,e){const n=Pse(e),r=Dse(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Rse(t,e){xv.set(t._key(),e)}function Dse(t){return Ca(t._redirectPersistence)}function Pse(t){return vv(_se,t.config.apiKey,t.name)}async function Mse(t,e,n=!1){const r=Eb(t),s=Cse(r,e),o=await new Ase(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fse=10*60*1e3;class Lse{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bse(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!IV(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ho(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fse&&this.cachedEventUids.clear(),this.cachedEventUids.has(FP(e))}saveEventToCache(e){this.cachedEventUids.add(FP(e)),this.lastProcessedEventTime=Date.now()}}function FP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Bse(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zse(t,e={}){return od(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Use=/^https?/;async function Wse(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zse(t);for(const n of e)try{if(jse(n))return}catch{}ko(t,"unauthorized-domain")}function jse(t){const e=zC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Use.test(n))return!1;if(Vse.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gse=new sg(3e4,6e4);function LP(){const t=qo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Hse(t){return new Promise((e,n)=>{var r,s,i;function o(){LP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LP(),n(Ho(t,"network-request-failed"))},timeout:Gse.get()})}if(!((s=(r=qo().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=qo().gapi)===null||i===void 0)&&i.load)o();else{const a=Ise("iframefcb");return qo()[a]=()=>{gapi.load?o():n(Ho(t,"network-request-failed"))},kse(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw bv=null,e})}let bv=null;function qse(t){return bv=bv||Hse(t),bv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=new sg(5e3,15e3),Xse="__/auth/iframe",Yse="emulator/auth/iframe",Qse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jse=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zse(t){const e=t.config;Ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?RE(e,Yse):`https://${t.config.authDomain}/${Xse}`,r={apiKey:e.apiKey,appName:t.name,v:rg},s=Jse.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ng(r).slice(1)}`}async function eie(t){const e=await qse(t),n=qo().gapi;return Ye(n,t,"internal-error"),e.open({where:document.body,url:Zse(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qse,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ho(t,"network-request-failed"),a=qo().setTimeout(()=>{i(o)},Kse.get());function l(){qo().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tie={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nie=500,rie=600,sie="_blank",iie="http://localhost";class BP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oie(t,e,n,r=nie,s=rie){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},tie),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Rr().toLowerCase();n&&(a=iV(u)?sie:n),sV(u)&&(e=e||iie,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[d,p])=>`${f}${d}=${p},`,"");if(Mre(u)&&a!=="_self")return aie(e||"",a),new BP(null);const h=window.open(e||"",a,c);Ye(h,t,"popup-blocked");try{h.focus()}catch{}return new BP(h)}function aie(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lie="__/auth/handler",uie="emulator/auth/handler";function zP(t,e,n,r,s,i){Ye(t.config.authDomain,t,"auth-domain-config-required"),Ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rg,eventId:s};if(e instanceof fV){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",one(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(i||{}))o[l]=u}if(e instanceof og){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${cie(t)}?${ng(a).slice(1)}`}function cie({config:t}){return t.emulator?RE(t,uie):`https://${t.authDomain}/${lie}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="webStorageSupport";class hie{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vV,this._completeRedirectFn=Mse,this._overrideRedirectResult=Rse}async _openPopup(e,n,r,s){var i;Ba((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=zP(e,n,r,zC(),s);return oie(e,o,LE())}async _openRedirect(e,n,r,s){return await this._originValidation(e),fse(zP(e,n,r,zC(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ba(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await eie(e),r=new Lse(e);return n.register("authEvent",s=>(Ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xk,{type:xk},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xk];o!==void 0&&n(!!o),ko(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Wse(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cV()||PE()||Nb()}}const fie=hie;var VP="@firebase/auth",UP="0.20.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class die{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var s;e(((s=r)===null||s===void 0?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pie(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function mie(t){xf(new vc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:i,authDomain:o}=r.options;return((a,l)=>{Ye(i&&!i.includes(":"),"invalid-api-key",{appName:a.name}),Ye(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hV(t)},c=new zre(a,l,u);return xre(c,n),c})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xf(new vc("auth-internal",e=>{const n=Eb(e.getProvider("auth").getImmediate());return(r=>new die(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),El(VP,UP,pie(t)),El(VP,UP,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(t=K8()){const e=_E(t,"auth");return e.isInitialized()?e.getImmediate():vre(t,{popupRedirectResolver:fie,persistence:[wse,use,vV]})}mie("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function CV(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function TV(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vh=function(){return Vh=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vh.apply(this,arguments)},$V=function(t){return{loading:t==null,value:t}},yie=function(){return function(t,e){switch(e.type){case"error":return Vh(Vh({},t),{error:e.error,loading:!1,value:void 0});case"reset":return $V(e.defaultValue);case"value":return Vh(Vh({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},vie=function(t){var e=t?t():void 0,n=ae.exports.useReducer(yie(),$V(e)),r=n[0],s=n[1],i=function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},o=function(l){s({type:"error",error:l})},a=function(l){s({type:"value",value:l})};return ae.exports.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Ob=function(t,e){var n=vie(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;ae.exports.useEffect(function(){var u=sse(t,function(c){return CV(void 0,void 0,void 0,function(){var h;return TV(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),i(h),[3,4];case 4:return o(c),[2]}})})},i);return function(){u()}},[t]);var l=[a,s,r];return ae.exports.useMemo(function(){return l},l)},xie=function(t,e){var n=ae.exports.useState(),r=n[0],s=n[1],i=ae.exports.useState(),o=i[0],a=i[1],l=ae.exports.useState(!1),u=l[0],c=l[1],h=function(d,p){return CV(void 0,void 0,void 0,function(){var m,g;return TV(this,function(y){switch(y.label){case 0:c(!0),s(void 0),y.label=1;case 1:return y.trys.push([1,5,6,7]),[4,tse(t,d,p)];case 2:return m=y.sent(),e&&e.sendEmailVerification&&m.user?[4,rse(m.user,e.emailVerificationOptions)]:[3,4];case 3:y.sent(),y.label=4;case 4:return a(m),[3,7];case 5:return g=y.sent(),s(g),[3,7];case 6:return c(!1),[7];case 7:return[2]}})})},f=[h,o,u,r];return ae.exports.useMemo(function(){return f},f)},bie="firebase",wie="9.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */El(bie,wie,"app");var Sie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Me,zE=zE||{},nt=Sie||self;function C1(){}function UC(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function lg(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function kie(t){return Object.prototype.hasOwnProperty.call(t,bk)&&t[bk]||(t[bk]=++Iie)}var bk="closure_uid_"+(1e9*Math.random()>>>0),Iie=0;function Cie(t,e,n){return t.call.apply(t.bind,arguments)}function Tie(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Yr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Yr=Cie:Yr=Tie,Yr.apply(null,arguments)}function $0(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ns(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function ou(){this.s=this.s,this.o=this.o}var $ie=0;ou.prototype.s=!1;ou.prototype.na=function(){!this.s&&(this.s=!0,this.M(),$ie!=0)&&kie(this)};ou.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NV=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},EV=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)i in s&&e.call(n,s[i],i,t)};function Nie(t){e:{var e=xoe;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function WP(t){return Array.prototype.concat.apply([],arguments)}function VE(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function T1(t){return/^[\s\xa0]*$/.test(t)}var jP=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Cs(t,e){return t.indexOf(e)!=-1}function wk(t,e){return t<e?-1:t>e?1:0}var Ts;e:{var GP=nt.navigator;if(GP){var HP=GP.userAgent;if(HP){Ts=HP;break e}}Ts=""}function UE(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function _V(t){const e={};for(const n in t)e[n]=t[n];return e}var qP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AV(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<qP.length;i++)n=qP[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function WE(t){return WE[" "](t),t}WE[" "]=C1;function Eie(t){var e=Oie;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var _ie=Cs(Ts,"Opera"),bf=Cs(Ts,"Trident")||Cs(Ts,"MSIE"),OV=Cs(Ts,"Edge"),WC=OV||bf,RV=Cs(Ts,"Gecko")&&!(Cs(Ts.toLowerCase(),"webkit")&&!Cs(Ts,"Edge"))&&!(Cs(Ts,"Trident")||Cs(Ts,"MSIE"))&&!Cs(Ts,"Edge"),Aie=Cs(Ts.toLowerCase(),"webkit")&&!Cs(Ts,"Edge");function DV(){var t=nt.document;return t?t.documentMode:void 0}var $1;e:{var Sk="",kk=function(){var t=Ts;if(RV)return/rv:([^\);]+)(\)|;)/.exec(t);if(OV)return/Edge\/([\d\.]+)/.exec(t);if(bf)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Aie)return/WebKit\/(\S+)/.exec(t);if(_ie)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(kk&&(Sk=kk?kk[1]:""),bf){var Ik=DV();if(Ik!=null&&Ik>parseFloat(Sk)){$1=String(Ik);break e}}$1=Sk}var Oie={};function Rie(){return Eie(function(){let t=0;const e=jP(String($1)).split("."),n=jP("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=wk(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||wk(s[2].length==0,i[2].length==0)||wk(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var jC;if(nt.document&&bf){var KP=DV();jC=KP||parseInt($1,10)||void 0}else jC=void 0;var Die=jC,Pie=function(){if(!nt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{nt.addEventListener("test",C1,e),nt.removeEventListener("test",C1,e)}catch{}return t}();function gs(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}gs.prototype.h=function(){this.defaultPrevented=!0};function ym(t,e){if(gs.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(RV){e:{try{WE(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Mie[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ym.Z.h.call(this)}}ns(ym,gs);var Mie={2:"touch",3:"pen",4:"mouse"};ym.prototype.h=function(){ym.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ug="closure_listenable_"+(1e6*Math.random()|0),Fie=0;function Lie(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++Fie,this.ca=this.fa=!1}function Rb(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Db(t){this.src=t,this.g={},this.h=0}Db.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=HC(t,e,r,s);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new Lie(e,this.src,i,!!r,s),e.fa=n,t.push(e)),e};function GC(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=NV(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Rb(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function HC(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return s}return-1}var jE="closure_lm_"+(1e6*Math.random()|0),Ck={};function PV(t,e,n,r,s){if(r&&r.once)return FV(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)PV(t,e[i],n,r,s);return null}return n=qE(n),t&&t[ug]?t.N(e,n,lg(r)?!!r.capture:!!r,s):MV(t,e,n,!1,r,s)}function MV(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=lg(s)?!!s.capture:!!s,a=HE(t);if(a||(t[jE]=a=new Db(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=Bie(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Pie||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(BV(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Bie(){function t(n){return e.call(t.src,t.listener,n)}var e=zie;return t}function FV(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)FV(t,e[i],n,r,s);return null}return n=qE(n),t&&t[ug]?t.O(e,n,lg(r)?!!r.capture:!!r,s):MV(t,e,n,!0,r,s)}function LV(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)LV(t,e[i],n,r,s);else r=lg(r)?!!r.capture:!!r,n=qE(n),t&&t[ug]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=HC(i,n,r,s),-1<n&&(Rb(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=HE(t))&&(e=t.g[e.toString()],t=-1,e&&(t=HC(e,n,r,s)),(n=-1<t?e[t]:null)&&GE(n))}function GE(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[ug])GC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(BV(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=HE(e))?(GC(n,t),n.h==0&&(n.src=null,e[jE]=null)):Rb(t)}}}function BV(t){return t in Ck?Ck[t]:Ck[t]="on"+t}function zie(t,e){if(t.ca)t=!0;else{e=new ym(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&GE(t),t=n.call(r,e)}return t}function HE(t){return t=t[jE],t instanceof Db?t:null}var Tk="__closure_events_fn_"+(1e9*Math.random()>>>0);function qE(t){return typeof t=="function"?t:(t[Tk]||(t[Tk]=function(e){return t.handleEvent(e)}),t[Tk])}function Dr(){ou.call(this),this.i=new Db(this),this.P=this,this.I=null}ns(Dr,ou);Dr.prototype[ug]=!0;Dr.prototype.removeEventListener=function(t,e,n,r){LV(this,t,e,n,r)};function Qr(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new gs(e,t);else if(e instanceof gs)e.target=e.target||t;else{var s=e;e=new gs(r,t),AV(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=N0(o,r,!0,e)&&s}if(o=e.g=t,s=N0(o,r,!0,e)&&s,s=N0(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=N0(o,r,!1,e)&&s}Dr.prototype.M=function(){if(Dr.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Rb(n[r]);delete t.g[e],t.h--}}this.I=null};Dr.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Dr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function N0(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&GC(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var KE=nt.JSON.stringify;function Vie(){var t=VV;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Uie{constructor(){this.h=this.g=null}add(e,n){const r=zV.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var zV=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Wie,t=>t.reset());class Wie{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function jie(t){nt.setTimeout(()=>{throw t},0)}function XE(t,e){qC||Gie(),KC||(qC(),KC=!0),VV.add(t,e)}var qC;function Gie(){var t=nt.Promise.resolve(void 0);qC=function(){t.then(Hie)}}var KC=!1,VV=new Uie;function Hie(){for(var t;t=Vie();){try{t.h.call(t.g)}catch(n){jie(n)}var e=zV;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}KC=!1}function Pb(t,e){Dr.call(this),this.h=t||1,this.g=e||nt,this.j=Yr(this.kb,this),this.l=Date.now()}ns(Pb,Dr);Me=Pb.prototype;Me.da=!1;Me.S=null;Me.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(YE(this),this.start()))}};Me.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function YE(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}Me.M=function(){Pb.Z.M.call(this),YE(this),delete this.g};function QE(t,e,n){if(typeof t=="function")n&&(t=Yr(t,n));else if(t&&typeof t.handleEvent=="function")t=Yr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:nt.setTimeout(t,e||0)}function UV(t){t.g=QE(()=>{t.g=null,t.i&&(t.i=!1,UV(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class qie extends ou{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:UV(this)}M(){super.M(),this.g&&(nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vm(t){ou.call(this),this.h=t,this.g={}}ns(vm,ou);var XP=[];function WV(t,e,n,r){Array.isArray(n)||(n&&(XP[0]=n.toString()),n=XP);for(var s=0;s<n.length;s++){var i=PV(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function jV(t){UE(t.g,function(e,n){this.g.hasOwnProperty(n)&&GE(e)},t),t.g={}}vm.prototype.M=function(){vm.Z.M.call(this),jV(this)};vm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Mb(){this.g=!0}Mb.prototype.Aa=function(){this.g=!1};function Kie(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function Xie(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Uh(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Qie(t,n)+(r?" "+r:"")})}function Yie(t,e){t.info(function(){return"TIMEOUT: "+e})}Mb.prototype.info=function(){};function Qie(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return KE(n)}catch{return e}}var Kc={},YP=null;function Fb(){return YP=YP||new Dr}Kc.Ma="serverreachability";function GV(t){gs.call(this,Kc.Ma,t)}ns(GV,gs);function xm(t){const e=Fb();Qr(e,new GV(e))}Kc.STAT_EVENT="statevent";function HV(t,e){gs.call(this,Kc.STAT_EVENT,t),this.stat=e}ns(HV,gs);function _s(t){const e=Fb();Qr(e,new HV(e,t))}Kc.Na="timingevent";function qV(t,e){gs.call(this,Kc.Na,t),this.size=e}ns(qV,gs);function cg(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return nt.setTimeout(function(){t()},e)}var Lb={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},KV={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function JE(){}JE.prototype.h=null;function QP(t){return t.h||(t.h=t.i())}function XV(){}var hg={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ZE(){gs.call(this,"d")}ns(ZE,gs);function e_(){gs.call(this,"c")}ns(e_,gs);var XC;function Bb(){}ns(Bb,JE);Bb.prototype.g=function(){return new XMLHttpRequest};Bb.prototype.i=function(){return{}};XC=new Bb;function fg(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new vm(this),this.P=Jie,t=WC?125:void 0,this.W=new Pb(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new YV}function YV(){this.i=null,this.g="",this.h=!1}var Jie=45e3,YC={},N1={};Me=fg.prototype;Me.setTimeout=function(t){this.P=t};function QC(t,e,n){t.K=1,t.v=Vb(za(e)),t.s=n,t.U=!0,QV(t,null)}function QV(t,e){t.F=Date.now(),dg(t),t.A=za(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),sU(n.h,"t",r),t.C=0,n=t.l.H,t.h=new YV,t.g=IU(t.l,n?e:null,!t.s),0<t.O&&(t.L=new qie(Yr(t.Ia,t,t.g),t.O)),WV(t.V,t.g,"readystatechange",t.gb),e=t.H?_V(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),xm(),Kie(t.j,t.u,t.A,t.m,t.X,t.s)}Me.gb=function(t){t=t.target;const e=this.L;e&&Ta(t)==3?e.l():this.Ia(t)};Me.Ia=function(t){try{if(t==this.g)e:{const c=Ta(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||WC||this.g&&(this.h.h||this.g.ga()||tM(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?xm(3):xm(2)),zb(this);var n=this.g.ba();this.N=n;t:if(JV(this)){var r=tM(this.g);t="";var s=r.length,i=Ta(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ku(this),zp(this);var o="";break t}this.h.i=new nt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,Xie(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T1(a)){var u=a;break t}}u=null}if(n=u)Uh(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,JC(this,n);else{this.i=!1,this.o=3,_s(12),Ku(this),zp(this);break e}}this.U?(ZV(this,c,o),WC&&this.i&&c==3&&(WV(this.V,this.W,"tick",this.fb),this.W.start())):(Uh(this.j,this.m,o,null),JC(this,o)),c==4&&Ku(this),this.i&&!this.I&&(c==4?bU(this.l,this):(this.i=!1,dg(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,_s(12)):(this.o=0,_s(13)),Ku(this),zp(this)}}}catch{}finally{}};function JV(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function ZV(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=Zie(t,n),s==N1){e==4&&(t.o=4,_s(14),r=!1),Uh(t.j,t.m,null,"[Incomplete Response]");break}else if(s==YC){t.o=4,_s(15),Uh(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Uh(t.j,t.m,s,null),JC(t,s);JV(t)&&s!=N1&&s!=YC&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,_s(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),u_(e),e.L=!0,_s(11))):(Uh(t.j,t.m,n,"[Invalid Chunked Response]"),Ku(t),zp(t))}Me.fb=function(){if(this.g){var t=Ta(this.g),e=this.g.ga();this.C<e.length&&(zb(this),ZV(this,t,e),this.i&&t!=4&&dg(this))}};function Zie(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?N1:(n=Number(e.substring(n,r)),isNaN(n)?YC:(r+=1,r+n>e.length?N1:(e=e.substr(r,n),t.C=r+n,e)))}Me.cancel=function(){this.I=!0,Ku(this)};function dg(t){t.Y=Date.now()+t.P,eU(t,t.P)}function eU(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=cg(Yr(t.eb,t),e)}function zb(t){t.B&&(nt.clearTimeout(t.B),t.B=null)}Me.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Yie(this.j,this.A),this.K!=2&&(xm(),_s(17)),Ku(this),this.o=2,zp(this)):eU(this,this.Y-t)};function zp(t){t.l.G==0||t.I||bU(t.l,t)}function Ku(t){zb(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,YE(t.W),jV(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function JC(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ZC(n.i,t))){if(n.I=t.N,!t.J&&ZC(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)O1(n),jb(n);else break e;l_(n),_s(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=cg(Yr(n.ab,n),6e3));if(1>=aU(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Xu(n,11)}else if((t.J||n.g==t)&&O1(n),!T1(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.U=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.J=u[1],n.la=u[2];const c=u[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=u[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=t.g;if(d){const p=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var i=r.i;!i.g&&(Cs(p,"spdy")||Cs(p,"quic")||Cs(p,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(r_(i,i.h),i.h=null))}if(r.D){const m=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.sa=m,In(r.F,r.D,m))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=kU(r,r.H?r.la:null,r.W),o.J){lU(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(zb(a),dg(a)),r.g=o}else vU(r);0<n.l.length&&Gb(n)}else u[0]!="stop"&&u[0]!="close"||Xu(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Xu(n,7):a_(n):u[0]!="noop"&&n.j&&n.j.wa(u),n.A=0)}}xm(4)}catch{}}function eoe(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(UC(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function t_(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(UC(t)||typeof t=="string")EV(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(UC(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=eoe(t),s=r.length;for(var i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}}function ld(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ld)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}Me=ld.prototype;Me.R=function(){n_(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};Me.T=function(){return n_(this),this.g.concat()};function n_(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Sc(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],Sc(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}Me.get=function(t,e){return Sc(this.h,t)?this.h[t]:e};Me.set=function(t,e){Sc(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};Me.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);t.call(e,i,s,this)}};function Sc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var tU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function toe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function kc(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof kc){this.g=e!==void 0?e:t.g,E1(this,t.j),this.s=t.s,_1(this,t.i),A1(this,t.m),this.l=t.l,e=t.h;var n=new bm;n.i=e.i,e.g&&(n.g=new ld(e.g),n.h=e.h),JP(this,n),this.o=t.o}else t&&(n=String(t).match(tU))?(this.g=!!e,E1(this,n[1]||"",!0),this.s=Vp(n[2]||""),_1(this,n[3]||"",!0),A1(this,n[4]),this.l=Vp(n[5]||"",!0),JP(this,n[6]||"",!0),this.o=Vp(n[7]||"")):(this.g=!!e,this.h=new bm(null,this.g))}kc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xp(e,ZP,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(xp(e,ZP,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(xp(n,n.charAt(0)=="/"?ooe:ioe,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xp(n,loe)),t.join("")};function za(t){return new kc(t)}function E1(t,e,n){t.j=n?Vp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function _1(t,e,n){t.i=n?Vp(e,!0):e}function A1(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function JP(t,e,n){e instanceof bm?(t.h=e,uoe(t.h,t.g)):(n||(e=xp(e,aoe)),t.h=new bm(e,t.g))}function In(t,e,n){t.h.set(e,n)}function Vb(t){return In(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function noe(t){return t instanceof kc?za(t):new kc(t,void 0)}function roe(t,e,n,r){var s=new kc(null,void 0);return t&&E1(s,t),e&&_1(s,e),n&&A1(s,n),r&&(s.l=r),s}function Vp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xp(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,soe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function soe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ZP=/[#\/\?@]/g,ioe=/[#\?:]/g,ooe=/[#\?]/g,aoe=/[#\?@]/g,loe=/#/g;function bm(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function au(t){t.g||(t.g=new ld,t.h=0,t.i&&toe(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Me=bm.prototype;Me.add=function(t,e){au(this),this.i=null,t=ud(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nU(t,e){au(t),e=ud(t,e),Sc(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Sc(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&n_(t)))}function rU(t,e){return au(t),e=ud(t,e),Sc(t.g.h,e)}Me.forEach=function(t,e){au(this),this.g.forEach(function(n,r){EV(n,function(s){t.call(e,s,r,this)},this)},this)};Me.T=function(){au(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],i=0;i<s.length;i++)n.push(e[r]);return n};Me.R=function(t){au(this);var e=[];if(typeof t=="string")rU(this,t)&&(e=WP(e,this.g.get(ud(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=WP(e,t[n])}return e};Me.set=function(t,e){return au(this),this.i=null,t=ud(this,t),rU(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Me.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function sU(t,e,n){nU(t,e),0<n.length&&(t.i=null,t.g.set(ud(t,e),VE(n)),t.h+=n.length)}Me.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;r[i]!==""&&(o+="="+encodeURIComponent(String(r[i]))),t.push(o)}}return this.i=t.join("&")};function ud(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function uoe(t,e){e&&!t.j&&(au(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(nU(this,r),sU(this,s,n))},t)),t.j=e}var coe=class{constructor(t,e){this.h=t,this.g=e}};function iU(t){this.l=t||hoe,nt.PerformanceNavigationTiming?(t=nt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(nt.g&&nt.g.Ea&&nt.g.Ea()&&nt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hoe=10;function oU(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function aU(t){return t.h?1:t.g?t.g.size:0}function ZC(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function r_(t,e){t.g?t.g.add(e):t.h=e}function lU(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}iU.prototype.cancel=function(){if(this.i=uU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function uU(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return VE(t.i)}function s_(){}s_.prototype.stringify=function(t){return nt.JSON.stringify(t,void 0)};s_.prototype.parse=function(t){return nt.JSON.parse(t,void 0)};function foe(){this.g=new s_}function doe(t,e,n){const r=n||"";try{t_(t,function(s,i){let o=s;lg(s)&&(o=KE(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function poe(t,e){const n=new Mb;if(nt.Image){const r=new Image;r.onload=$0(E0,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$0(E0,n,r,"TestLoadImage: error",!1,e),r.onabort=$0(E0,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$0(E0,n,r,"TestLoadImage: timeout",!1,e),nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function E0(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function pg(t){this.l=t.$b||null,this.j=t.ib||!1}ns(pg,JE);pg.prototype.g=function(){return new Ub(this.l,this.j)};pg.prototype.i=function(t){return function(){return t}}({});function Ub(t,e){Dr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=i_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ns(Ub,Dr);var i_=0;Me=Ub.prototype;Me.open=function(t,e){if(this.readyState!=i_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,wm(this)};Me.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};Me.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mg(this)),this.readyState=i_};Me.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,wm(this)),this.g&&(this.readyState=3,wm(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof nt.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cU(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function cU(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}Me.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mg(this):wm(this),this.readyState==3&&cU(this)}};Me.Ua=function(t){this.g&&(this.response=this.responseText=t,mg(this))};Me.Ta=function(t){this.g&&(this.response=t,mg(this))};Me.ha=function(){this.g&&mg(this)};function mg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,wm(t)}Me.setRequestHeader=function(t,e){this.v.append(t,e)};Me.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Me.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function wm(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ub.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var moe=nt.JSON.parse;function lr(t){Dr.call(this),this.headers=new ld,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hU,this.K=this.L=!1}ns(lr,Dr);var hU="",goe=/^https?$/i,yoe=["POST","PUT"];Me=lr.prototype;Me.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():XC.g(),this.C=this.u?QP(this.u):QP(XC),this.g.onreadystatechange=Yr(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){eM(this,i);return}t=n||"";const s=new ld(this.headers);r&&t_(r,function(i,o){s.set(o,i)}),r=Nie(s.T()),n=nt.FormData&&t instanceof nt.FormData,!(0<=NV(yoe,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(i,o){this.g.setRequestHeader(o,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pU(this),0<this.B&&((this.K=voe(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.pa,this)):this.A=QE(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){eM(this,i)}};function voe(t){return bf&&Rie()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function xoe(t){return t.toLowerCase()=="content-type"}Me.pa=function(){typeof zE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))};function eM(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fU(t),Wb(t)}function fU(t){t.D||(t.D=!0,Qr(t,"complete"),Qr(t,"error"))}Me.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Qr(this,"complete"),Qr(this,"abort"),Wb(this))};Me.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wb(this,!0)),lr.Z.M.call(this)};Me.Fa=function(){this.s||(this.F||this.v||this.l?dU(this):this.cb())};Me.cb=function(){dU(this)};function dU(t){if(t.h&&typeof zE<"u"&&(!t.C[1]||Ta(t)!=4||t.ba()!=2)){if(t.v&&Ta(t)==4)QE(t.Fa,0,t);else if(Qr(t,"readystatechange"),Ta(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(tU)[1]||null;if(!s&&nt.self&&nt.self.location){var i=nt.self.location.protocol;s=i.substr(0,i.length-1)}r=!goe.test(s?s.toLowerCase():"")}n=r}if(n)Qr(t,"complete"),Qr(t,"success");else{t.m=6;try{var o=2<Ta(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",fU(t)}}finally{Wb(t)}}}}function Wb(t,e){if(t.g){pU(t);const n=t.g,r=t.C[0]?C1:null;t.g=null,t.C=null,e||Qr(t,"ready");try{n.onreadystatechange=r}catch{}}}function pU(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(nt.clearTimeout(t.A),t.A=null)}function Ta(t){return t.g?t.g.readyState:0}Me.ba=function(){try{return 2<Ta(this)?this.g.status:-1}catch{return-1}};Me.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};Me.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),moe(e)}};function tM(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case hU:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}Me.Da=function(){return this.m};Me.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function boe(t){let e="";return UE(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function o_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=boe(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):In(t,e,n))}function Zd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function mU(t){this.za=0,this.l=[],this.h=new Mb,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zd("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zd("baseRetryDelayMs",5e3,t),this.$a=Zd("retryDelaySeedMs",1e4,t),this.Ya=Zd("forwardChannelMaxRetries",2,t),this.ra=Zd("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new iU(t&&t.concurrentRequestLimit),this.Ca=new foe,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}Me=mU.prototype;Me.ma=8;Me.G=1;function a_(t){if(gU(t),t.G==3){var e=t.V++,n=za(t.F);In(n,"SID",t.J),In(n,"RID",e),In(n,"TYPE","terminate"),gg(t,n),e=new fg(t,t.h,e,void 0),e.K=2,e.v=Vb(za(n)),n=!1,nt.navigator&&nt.navigator.sendBeacon&&(n=nt.navigator.sendBeacon(e.v.toString(),"")),!n&&nt.Image&&(new Image().src=e.v,n=!0),n||(e.g=IU(e.l,null),e.g.ea(e.v)),e.F=Date.now(),dg(e)}SU(t)}Me.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function jb(t){t.g&&(u_(t),t.g.cancel(),t.g=null)}function gU(t){jb(t),t.u&&(nt.clearTimeout(t.u),t.u=null),O1(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&nt.clearTimeout(t.m),t.m=null)}function $k(t,e){t.l.push(new coe(t.Za++,e)),t.G==3&&Gb(t)}function Gb(t){oU(t.i)||t.m||(t.m=!0,XE(t.Ha,t),t.C=0)}function woe(t,e){return aU(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=cg(Yr(t.Ha,t,e),wU(t,t.C)),t.C++,!0)}Me.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new fg(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=_V(i),AV(i,this.P)):i=this.P),this.o===null&&(s.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=yU(this,s,e),n=za(this.F),In(n,"RID",t),In(n,"CVER",22),this.D&&In(n,"X-HTTP-Session-Id",this.D),gg(this,n),this.o&&i&&o_(n,this.o,i),r_(this.i,s),this.Ra&&In(n,"TYPE","init"),this.ja?(In(n,"$req",e),In(n,"SID","null"),s.$=!0,QC(s,n,null)):QC(s,n,e),this.G=2}}else this.G==3&&(t?nM(this,t):this.l.length==0||oU(this.i)||nM(this))};function nM(t,e){var n;e?n=e.m:n=t.V++;const r=za(t.F);In(r,"SID",t.J),In(r,"RID",n),In(r,"AID",t.U),gg(t,r),t.o&&t.s&&o_(r,t.o,t.s),n=new fg(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=yU(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),r_(t.i,n),QC(n,r,e)}function gg(t,e){t.j&&t_({},function(n,r){In(e,r,n)})}function yU(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Yr(t.j.Oa,t.j,t):null;e:{var s=t.l;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].h;const c=s[l].g;if(u-=i,0>u)i=Math.max(0,s[l].h-100),a=!1;else try{doe(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function vU(t){t.g||t.u||(t.Y=1,XE(t.Ga,t),t.A=0)}function l_(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=cg(Yr(t.Ga,t),wU(t,t.A)),t.A++,!0)}Me.Ga=function(){if(this.u=null,xU(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=cg(Yr(this.bb,this),t)}};Me.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_s(10),jb(this),xU(this))};function u_(t){t.B!=null&&(nt.clearTimeout(t.B),t.B=null)}function xU(t){t.g=new fg(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=za(t.oa);In(e,"RID","rpc"),In(e,"SID",t.J),In(e,"CI",t.N?"0":"1"),In(e,"AID",t.U),gg(t,e),In(e,"TYPE","xmlhttp"),t.o&&t.s&&o_(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Vb(za(e)),n.s=null,n.U=!0,QV(n,t)}Me.ab=function(){this.v!=null&&(this.v=null,jb(this),l_(this),_s(19))};function O1(t){t.v!=null&&(nt.clearTimeout(t.v),t.v=null)}function bU(t,e){var n=null;if(t.g==e){O1(t),u_(t),t.g=null;var r=2}else if(ZC(t.i,e))n=e.D,lU(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=Fb(),Qr(r,new qV(r,n)),Gb(t)}else vU(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&woe(t,e)||r==2&&l_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Xu(t,5);break;case 4:Xu(t,10);break;case 3:Xu(t,6);break;default:Xu(t,2)}}}function wU(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Xu(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=Yr(t.jb,t);n||(n=new kc("//www.google.com/images/cleardot.gif"),nt.location&&nt.location.protocol=="http"||E1(n,"https"),Vb(n)),poe(n.toString(),r)}else _s(2);t.G=0,t.j&&t.j.va(e),SU(t),gU(t)}Me.jb=function(t){t?(this.h.info("Successfully pinged google.com"),_s(2)):(this.h.info("Failed to ping google.com"),_s(1))};function SU(t){t.G=0,t.I=-1,t.j&&((uU(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,VE(t.l),t.l.length=0),t.j.ua())}function kU(t,e,n){let r=noe(n);if(r.i!="")e&&_1(r,e+"."+r.i),A1(r,r.m);else{const s=nt.location;r=roe(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&UE(t.aa,function(s,i){In(r,i,s)}),e=t.D,n=t.sa,e&&n&&In(r,e,n),In(r,"VER",t.ma),gg(t,r),r}function IU(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new lr(new pg({ib:!0})):new lr(t.qa),e.L=t.H,e}function CU(){}Me=CU.prototype;Me.xa=function(){};Me.wa=function(){};Me.va=function(){};Me.ua=function(){};Me.Oa=function(){};function R1(){if(bf&&!(10<=Number(Die)))throw Error("Environmental error: no available transport.")}R1.prototype.g=function(t,e){return new xi(t,e)};function xi(t,e){Dr.call(this),this.g=new mU(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!T1(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!T1(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new cd(this)}ns(xi,Dr);xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),XE(Yr(t.hb,t,e))),_s(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=kU(t,null,t.W),Gb(t)};xi.prototype.close=function(){a_(this.g)};xi.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,$k(this.g,e)}else this.v?(e={},e.__data__=KE(t),$k(this.g,e)):$k(this.g,t)};xi.prototype.M=function(){this.g.j=null,delete this.j,a_(this.g),delete this.g,xi.Z.M.call(this)};function TU(t){ZE.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ns(TU,ZE);function $U(){e_.call(this),this.status=1}ns($U,e_);function cd(t){this.g=t}ns(cd,CU);cd.prototype.xa=function(){Qr(this.g,"a")};cd.prototype.wa=function(t){Qr(this.g,new TU(t))};cd.prototype.va=function(t){Qr(this.g,new $U)};cd.prototype.ua=function(){Qr(this.g,"b")};R1.prototype.createWebChannel=R1.prototype.g;xi.prototype.send=xi.prototype.u;xi.prototype.open=xi.prototype.m;xi.prototype.close=xi.prototype.close;Lb.NO_ERROR=0;Lb.TIMEOUT=8;Lb.HTTP_ERROR=6;KV.COMPLETE="complete";XV.EventType=hg;hg.OPEN="a";hg.CLOSE="b";hg.ERROR="c";hg.MESSAGE="d";Dr.prototype.listen=Dr.prototype.N;lr.prototype.listenOnce=lr.prototype.O;lr.prototype.getLastError=lr.prototype.La;lr.prototype.getLastErrorCode=lr.prototype.Da;lr.prototype.getStatus=lr.prototype.ba;lr.prototype.getResponseJson=lr.prototype.Qa;lr.prototype.getResponseText=lr.prototype.ga;lr.prototype.send=lr.prototype.ea;var Soe=function(){return new R1},koe=function(){return Fb()},Nk=Lb,Ioe=KV,Coe=Kc,rM={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Toe=pg,_0=XV,$oe=lr;const sM="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ws.UNAUTHENTICATED=new Ws(null),Ws.GOOGLE_CREDENTIALS=new Ws("google-credentials-uid"),Ws.FIRST_PARTY=new Ws("first-party-uid"),Ws.MOCK_USER=new Ws("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd="9.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new $E("@firebase/firestore");function iM(){return Ic.logLevel}function We(t,...e){if(Ic.logLevel<=Vt.DEBUG){const n=e.map(c_);Ic.debug(`Firestore (${hd}): ${t}`,...n)}}function Wl(t,...e){if(Ic.logLevel<=Vt.ERROR){const n=e.map(c_);Ic.error(`Firestore (${hd}): ${t}`,...n)}}function oM(t,...e){if(Ic.logLevel<=Vt.WARN){const n=e.map(c_);Ic.warn(`Firestore (${hd}): ${t}`,...n)}}function c_(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t="Unexpected state"){const e=`FIRESTORE (${hd}) INTERNAL ASSERTION FAILED: `+t;throw Wl(e),new Error(e)}function fn(t,e){t||at()}function ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends qc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Noe{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Eoe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ws.UNAUTHENTICATED))}shutdown(){}}class _oe{constructor(e){this.t=e,this.currentUser=Ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ic;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ic,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ic)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fn(typeof r.accessToken=="string"),new Noe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fn(e===null||typeof e=="string"),new Ws(e)}}class Aoe{constructor(e,n,r){this.type="FirstParty",this.user=Ws.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Ooe{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Aoe(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Ws.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Roe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Doe{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=i=>{i.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.p;return this.p=i.token,We("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?s(i):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fn(typeof n.token=="string"),this.p=n.token,new Roe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Poe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Poe(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function jt(t,e){return t<e?-1:t>e?1:0}function wf(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Qe(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qe(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Qe(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new yr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new yr(0,0))}static max(){return new vt(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r){n===void 0?n=0:n>e.length&&at(),r===void 0?r=e.length-n:r>e.length-n&&at(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sm.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sm?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Cn extends Sm{construct(e,n,r){return new Cn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Qe(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Cn(n)}static emptyPath(){return new Cn([])}}const Moe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends Sm{construct(e,n,r){return new fs(e,n,r)}static isValidIdentifier(e){return Moe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new fs(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Qe(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Qe(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Qe(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Qe(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(n)}static emptyPath(){return new fs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(Cn.fromString(e))}static fromName(e){return new Ke(Cn.fromString(e).popFirst(5))}static empty(){return new Ke(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new Cn(e.slice()))}}function Foe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=vt.fromTimestamp(r===1e9?new yr(n+1,0):new yr(n,r));return new jl(s,Ke.empty(),e)}function Loe(t){return new jl(t.readTime,t.key,-1)}class jl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jl(vt.min(),Ke.empty(),-1)}static max(){return new jl(vt.max(),Ke.empty(),-1)}}function Boe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ke.comparator(t.documentKey,e.documentKey),n!==0?n:jt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zoe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Voe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(t){if(t.code!==ke.FAILED_PRECONDITION||t.message!==zoe)throw t;We("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Se((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Se?n:Se.resolve(n)}catch(n){return Se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Se.reject(n)}static resolve(e){return new Se((n,r)=>{n(e)})}static reject(e){return new Se((n,r)=>{r(e)})}static waitFor(e){return new Se((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=Se.resolve(!1);for(const r of e)n=n.next(s=>s?Se.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Se((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new Se((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function vg(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fd(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */h_.ot=-1;class br{constructor(e,n){this.comparator=e,this.root=n||Gr.EMPTY}insert(e,n){return new br(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new A0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new A0(this.root,e,this.comparator,!1)}getReverseIterator(){return new A0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new A0(this.root,e,this.comparator,!0)}}class A0{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:Gr.RED,this.left=s!=null?s:Gr.EMPTY,this.right=i!=null?i:Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Gr(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Gr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1;Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Gr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lM(this.data.getIterator())}getIteratorFrom(e){return new lM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vr(this.comparator);return n.data=e,n}}class lM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.fields=e,e.sort(fs.comparator)}static empty(){return new Ko([])}unionWith(e){let n=new vr(fs.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ko(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Zr(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new Zr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const Uoe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gl(t){if(fn(!!t),typeof t=="string"){let e=0;const n=Uoe.exec(t);if(fn(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(t.seconds),nanos:er(t.nanos)}}function er(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sf(t){return typeof t=="string"?Zr.fromBase64String(t):Zr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function AU(t){const e=t.mapValue.fields.__previous_value__;return _U(e)?AU(e):e}function km(t){const e=Gl(t.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Woe{constructor(e,n,r,s,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class kf{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new kf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof kf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t){return t==null}function D1(t){return t===0&&1/t==-1/0}function joe(t){return typeof t=="number"&&Number.isInteger(t)&&!D1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Cc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_U(t)?4:Goe(t)?9007199254740991:10:at()}function ra(t,e){if(t===e)return!0;const n=Cc(t);if(n!==Cc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return km(t).isEqual(km(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Gl(r.timestampValue),o=Gl(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Sf(r.bytesValue).isEqual(Sf(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return er(r.geoPointValue.latitude)===er(s.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return er(r.integerValue)===er(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=er(r.doubleValue),o=er(s.doubleValue);return i===o?D1(i)===D1(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return wf(t.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(aM(i)!==aM(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!ra(i[a],o[a])))return!1;return!0}(t,e);default:return at()}}function Im(t,e){return(t.values||[]).find(n=>ra(n,e))!==void 0}function If(t,e){if(t===e)return 0;const n=Cc(t),r=Cc(e);if(n!==r)return jt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jt(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=er(s.integerValue||s.doubleValue),a=er(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return uM(t.timestampValue,e.timestampValue);case 4:return uM(km(t),km(e));case 5:return jt(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Sf(s),a=Sf(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=jt(o[l],a[l]);if(u!==0)return u}return jt(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=jt(er(s.latitude),er(i.latitude));return o!==0?o:jt(er(s.longitude),er(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=If(o[l],a[l]);if(u)return u}return jt(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===O0.mapValue&&i===O0.mapValue)return 0;if(s===O0.mapValue)return 1;if(i===O0.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=jt(a[c],u[c]);if(h!==0)return h;const f=If(o[a[c]],l[u[c]]);if(f!==0)return f}return jt(a.length,u.length)}(t.mapValue,e.mapValue);default:throw at()}}function uM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return jt(t,e);const n=Gl(t),r=Gl(e),s=jt(n.seconds,r.seconds);return s!==0?s:jt(n.nanos,r.nanos)}function nf(t){return eT(t)}function eT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Gl(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Sf(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ke.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=eT(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${eT(r.fields[a])}`;return i+"}"}(t.mapValue):at();var e,n}function tT(t){return!!t&&"integerValue"in t}function f_(t){return!!t&&"arrayValue"in t}function cM(t){return!!t&&"nullValue"in t}function hM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wv(t){return!!t&&"mapValue"in t}function Up(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fd(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Up(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Up(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Goe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.value=e}static empty(){return new Fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Up(n)}setAll(e){let n=fs.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Up(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fd(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Fi(Up(this.value))}}function OU(t){const e=[];return fd(t.fields,(n,r)=>{const s=new fs([n]);if(wv(r)){const i=OU(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ko(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Hr(e,0,vt.min(),vt.min(),Fi.empty(),0)}static newFoundDocument(e,n,r){return new Hr(e,1,n,vt.min(),r,0)}static newNoDocument(e,n){return new Hr(e,2,n,vt.min(),Fi.empty(),0)}static newUnknownDocument(e,n){return new Hr(e,3,n,vt.min(),Fi.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ut=null}}function fM(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Hoe(t,e,n,r,s,i,o)}function d_(t){const e=ct(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+nf(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hb(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nf(r)).join(",")),e.ut=n}return e.ut}function qoe(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${nf(r.value)}`;var r}).join(", ")}]`),Hb(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>nf(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>nf(n)).join(",")),`Target(${e})`}function p_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!tae(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!ra(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pM(t.startAt,e.startAt)&&pM(t.endAt,e.endAt)}function nT(t){return Ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ks extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,r):new Koe(e,n,r):n==="array-contains"?new Qoe(e,r):n==="in"?new Joe(e,r):n==="not-in"?new Zoe(e,r):n==="array-contains-any"?new eae(e,r):new Ks(e,n,r)}static ct(e,n,r){return n==="in"?new Xoe(e,r):new Yoe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(If(n,this.value)):n!==null&&Cc(this.value)===Cc(n)&&this.at(If(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Koe extends Ks{constructor(e,n,r){super(e,n,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const n=Ke.comparator(e.key,this.key);return this.at(n)}}class Xoe extends Ks{constructor(e,n){super(e,"in",n),this.keys=RU("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Yoe extends Ks{constructor(e,n){super(e,"not-in",n),this.keys=RU("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function RU(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class Qoe extends Ks{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return f_(n)&&Im(n.arrayValue,this.value)}}class Joe extends Ks{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Im(this.value.arrayValue,n)}}class Zoe extends Ks{constructor(e,n){super(e,"not-in",n)}matches(e){if(Im(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Im(this.value.arrayValue,n)}}class eae extends Ks{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!f_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Im(this.value.arrayValue,r))}}class P1{constructor(e,n){this.position=e,this.inclusive=n}}class Wp{constructor(e,n="asc"){this.field=e,this.dir=n}}function tae(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function dM(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ke.comparator(Ke.fromName(o.referenceValue),n.key):r=If(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function pM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ra(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.lt=null,this.ft=null,this.startAt,this.endAt}}function nae(t,e,n,r,s,i,o,a){return new qb(t,e,n,r,s,i,o,a)}function m_(t){return new qb(t)}function rae(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sae(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function iae(t){for(const e of t.filters)if(e.ht())return e.field;return null}function oae(t){return t.collectionGroup!==null}function Cm(t){const e=ct(t);if(e.lt===null){e.lt=[];const n=iae(e),r=sae(e);if(n!==null&&r===null)n.isKeyField()||e.lt.push(new Wp(n)),e.lt.push(new Wp(fs.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.lt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Wp(fs.keyField(),i))}}}return e.lt}function Tc(t){const e=ct(t);if(!e.ft)if(e.limitType==="F")e.ft=fM(e.path,e.collectionGroup,Cm(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Cm(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Wp(i.field,o))}const r=e.endAt?new P1(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new P1(e.startAt.position,e.startAt.inclusive):null;e.ft=fM(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.ft}function aae(t,e,n){return new qb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xg(t,e){return p_(Tc(t),Tc(e))&&t.limitType===e.limitType}function DU(t){return`${d_(Tc(t))}|lt:${t.limitType}`}function rT(t){return`Query(target=${qoe(Tc(t))}; limitType=${t.limitType})`}function g_(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ke.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=dM(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,Cm(n),r)||n.endAt&&!function(s,i,o){const a=dM(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,Cm(n),r))}(t,e)}function lae(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PU(t){return(e,n)=>{let r=!1;for(const s of Cm(t)){const i=uae(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function uae(t,e,n){const r=t.field.isKeyField()?Ke.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?If(a,l):at()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D1(e)?"-0":e}}function FU(t){return{integerValue:""+t}}function cae(t,e){return joe(e)?FU(e):MU(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this._=void 0}}function hae(t,e,n){return t instanceof M1?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Tm?BU(t,e):t instanceof $m?zU(t,e):function(r,s){const i=LU(r,s),o=mM(i)+mM(r._t);return tT(i)&&tT(r._t)?FU(o):MU(r.wt,o)}(t,e)}function fae(t,e,n){return t instanceof Tm?BU(t,e):t instanceof $m?zU(t,e):n}function LU(t,e){return t instanceof F1?tT(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class M1 extends Kb{}class Tm extends Kb{constructor(e){super(),this.elements=e}}function BU(t,e){const n=VU(e);for(const r of t.elements)n.some(s=>ra(s,r))||n.push(r);return{arrayValue:{values:n}}}class $m extends Kb{constructor(e){super(),this.elements=e}}function zU(t,e){let n=VU(e);for(const r of t.elements)n=n.filter(s=>!ra(s,r));return{arrayValue:{values:n}}}class F1 extends Kb{constructor(e,n){super(),this.wt=e,this._t=n}}function mM(t){return er(t.integerValue||t.doubleValue)}function VU(t){return f_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dae(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Tm&&r instanceof Tm||n instanceof $m&&r instanceof $m?wf(n.elements,r.elements,ra):n instanceof F1&&r instanceof F1?ra(n._t,r._t):n instanceof M1&&r instanceof M1}(t.transform,e.transform)}class pae{constructor(e,n){this.version=e,this.transformResults=n}}class Oa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oa}static exists(e){return new Oa(void 0,e)}static updateTime(e){return new Oa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xb{}function UU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jU(t.key,Oa.none()):new bg(t.key,t.data,Oa.none());{const n=t.data,r=Fi.empty();let s=new vr(fs.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Xc(t.key,r,new Ko(s.toArray()),Oa.none())}}function mae(t,e,n){t instanceof bg?function(r,s,i){const o=r.value.clone(),a=yM(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Xc?function(r,s,i){if(!Sv(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=yM(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(WU(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function jp(t,e,n,r){return t instanceof bg?function(s,i,o,a){if(!Sv(s.precondition,i))return o;const l=s.value.clone(),u=vM(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xc?function(s,i,o,a){if(!Sv(s.precondition,i))return o;const l=vM(s.fieldTransforms,a,i),u=i.data;return u.setAll(WU(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return Sv(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function gae(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=LU(r.transform,s||null);i!=null&&(n===null&&(n=Fi.empty()),n.set(r.field,i))}return n||null}function gM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&wf(n,r,(s,i)=>dae(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bg extends Xb{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xc extends Xb{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WU(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yM(t,e,n){const r=new Map;fn(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,fae(o,a,n[s]))}return r}function vM(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,hae(i,o,e))}return r}class jU extends Xb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yae extends Xb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn,_t;function xae(t){switch(t){default:return at();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function GU(t){if(t===void 0)return Wl("GRPC error has no .code"),ke.UNKNOWN;switch(t){case Jn.OK:return ke.OK;case Jn.CANCELLED:return ke.CANCELLED;case Jn.UNKNOWN:return ke.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return ke.INTERNAL;case Jn.UNAVAILABLE:return ke.UNAVAILABLE;case Jn.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Jn.NOT_FOUND:return ke.NOT_FOUND;case Jn.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Jn.ABORTED:return ke.ABORTED;case Jn.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Jn.DATA_LOSS:return ke.DATA_LOSS;default:return at()}}(_t=Jn||(Jn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fd(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return EU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bae=new br(Ke.comparator);function Va(){return bae}const HU=new br(Ke.comparator);function bp(...t){let e=HU;for(const n of t)e=e.insert(n.key,n);return e}function qU(t){let e=HU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yu(){return Gp()}function KU(){return Gp()}function Gp(){return new dd(t=>t.toString(),(t,e)=>t.isEqual(e))}const wae=new br(Ke.comparator),Sae=new vr(Ke.comparator);function It(...t){let e=Sae;for(const n of t)e=e.add(n);return e}const kae=new vr(jt);function XU(){return kae}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,wg.createSynthesizedTargetChangeForCurrentChange(e,n)),new Yb(vt.min(),r,XU(),Va(),It())}}class wg{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new wg(Zr.EMPTY_BYTE_STRING,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,r,s){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=s}}class YU{constructor(e,n){this.targetId=e,this.It=n}}class QU{constructor(e,n,r=Zr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class xM{constructor(){this.Tt=0,this.Et=wM(),this.At=Zr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=It(),n=It(),r=It();return this.Et.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:at()}}),new wg(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=wM()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Iae{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Va(),this.Bt=bM(),this.Lt=new vr(jt)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:at()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,s)=>{this.jt(s)&&n(s)})}zt(e){const n=e.targetId,r=e.It.count,s=this.Ht(n);if(s){const i=s.target;if(nT(i))if(r===0){const o=new Ke(i.path);this.Kt(n,o,Hr.newNoDocument(o,vt.min()))}else fn(r===1);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((i,o)=>{const a=this.Ht(o);if(a){if(i.current&&nT(a.target)){const l=new Ke(a.target.path);this.$t.get(l)!==null||this.Xt(o,l)||this.Kt(o,l,Hr.newNoDocument(l,e))}i.vt&&(n.set(o,i.St()),i.Dt())}});let r=It();this.Bt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ht(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.$t.forEach((i,o)=>o.setReadTime(e));const s=new Yb(e,n,this.Lt,this.$t,r);return this.$t=Va(),this.Bt=bM(),this.Lt=new vr(jt),s}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const s=this.Qt(e);this.Xt(e,n)?s.Ct(n,1):s.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new xM,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new vr(jt),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=this.Ht(e)!==null;return n||We("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new xM),this.Mt.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Mt.getRemoteKeysForTarget(e).has(n)}}function bM(){return new br(Ke.comparator)}function wM(){return new br(Ke.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cae=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Tae=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class $ae{constructor(e,n){this.databaseId=e,this.dt=n}}function L1(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JU(t,e){return t.dt?e.toBase64():e.toUint8Array()}function Nae(t,e){return L1(t,e.toTimestamp())}function Ra(t){return fn(!!t),vt.fromTimestamp(function(e){const n=Gl(e);return new yr(n.seconds,n.nanos)}(t))}function y_(t,e){return function(n){return new Cn(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function ZU(t){const e=Cn.fromString(t);return fn(n9(e)),e}function sT(t,e){return y_(t.databaseId,e.path)}function Ek(t,e){const n=ZU(e);if(n.get(1)!==t.databaseId.projectId)throw new Qe(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Qe(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ke(e9(n))}function iT(t,e){return y_(t.databaseId,e)}function Eae(t){const e=ZU(t);return e.length===4?Cn.emptyPath():e9(e)}function oT(t){return new Cn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function e9(t){return fn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function SM(t,e,n){return{name:sT(t,e),fields:n.value.mapValue.fields}}function _ae(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:at()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.dt?(fn(u===void 0||typeof u=="string"),Zr.fromBase64String(u||"")):(fn(u===void 0||u instanceof Uint8Array),Zr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?ke.UNKNOWN:GU(l.code);return new Qe(u,l.message||"")}(o);n=new QU(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ek(t,r.document.name),i=Ra(r.document.updateTime),o=new Fi({mapValue:{fields:r.document.fields}}),a=Hr.newFoundDocument(s,i,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new kv(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ek(t,r.document),i=r.readTime?Ra(r.readTime):vt.min(),o=Hr.newNoDocument(s,i),a=r.removedTargetIds||[];n=new kv([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ek(t,r.document),i=r.removedTargetIds||[];n=new kv([],i,s,null)}else{if(!("filter"in e))return at();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new vae(s),o=r.targetId;n=new YU(o,i)}}return n}function Aae(t,e){let n;if(e instanceof bg)n={update:SM(t,e.key,e.value)};else if(e instanceof jU)n={delete:sT(t,e.key)};else if(e instanceof Xc)n={update:SM(t,e.key,e.data),updateMask:Vae(e.fieldMask)};else{if(!(e instanceof yae))return at();n={verify:sT(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof M1)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Tm)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof $m)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof F1)return{fieldPath:i.field.canonicalString(),increment:o._t};throw at()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Nae(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:at()}(t,e.precondition)),n}function Oae(t,e){return t&&t.length>0?(fn(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Ra(r.updateTime):Ra(s);return i.isEqual(vt.min())&&(i=Ra(s)),new pae(i,r.transformResults||[])}(n,e))):[]}function Rae(t,e){return{documents:[iT(t,e.path)]}}function Dae(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=iT(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=iT(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(hM(h.value))return{unaryFilter:{field:ph(h.field),op:"IS_NAN"}};if(cM(h.value))return{unaryFilter:{field:ph(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(hM(h.value))return{unaryFilter:{field:ph(h.field),op:"IS_NOT_NAN"}};if(cM(h.value))return{unaryFilter:{field:ph(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ph(h.field),op:Lae(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:ph(c.field),direction:Fae(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.dt||Hb(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function Pae(t){let e=Eae(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fn(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=t9(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Wp(Wh(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Hb(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,f=c.values||[];return new P1(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,f=c.values||[];return new P1(f,h)}(n.endAt)),nae(e,s,o,i,a,"F",l,u)}function Mae(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function t9(t){return t?t.unaryFilter!==void 0?[zae(t)]:t.fieldFilter!==void 0?[Bae(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>t9(e)).reduce((e,n)=>e.concat(n)):at():[]}function Fae(t){return Cae[t]}function Lae(t){return Tae[t]}function ph(t){return{fieldPath:t.canonicalString()}}function Wh(t){return fs.fromServerFormat(t.fieldPath)}function Bae(t){return Ks.create(Wh(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(t.fieldFilter.op),t.fieldFilter.value)}function zae(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Wh(t.unaryFilter.field);return Ks.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Wh(t.unaryFilter.field);return Ks.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wh(t.unaryFilter.field);return Ks.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Wh(t.unaryFilter.field);return Ks.create(s,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function Vae(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function n9(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uae{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&mae(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KU();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=UU(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),It())}isEqual(e){return this.batchId===e.batchId&&wf(this.mutations,e.mutations,(n,r)=>gM(n,r))&&wf(this.baseMutations,e.baseMutations,(n,r)=>gM(n,r))}}class v_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fn(e.mutations.length===r.length);let s=wae;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new v_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wae{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r,s,i=vt.min(),o=vt.min(),a=Zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new oc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jae{constructor(e){this.ne=e}}function Gae(t){const e=Pae({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?aae(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hae{constructor(){this.ze=new qae}addToCollectionParentIndex(e,n){return this.ze.add(n),Se.resolve()}getCollectionParents(e,n){return Se.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return Se.resolve()}deleteFieldIndex(e,n){return Se.resolve()}getDocumentsMatchingTarget(e,n){return Se.resolve(null)}getIndexType(e,n){return Se.resolve(0)}getFieldIndexes(e,n){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,n){return Se.resolve(jl.min())}getMinOffsetFromCollectionGroup(e,n){return Se.resolve(jl.min())}updateCollectionGroup(e,n,r){return Se.resolve()}updateIndexEntries(e,n){return Se.resolve()}}class qae{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new vr(Cn.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new vr(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Cf(0)}static Rn(){return new Cf(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kae{constructor(){this.changes=new dd(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Hr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xae{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yae{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.getBaseDocument(e,n,r))).next(s=>(r!==null&&jp(r.mutation,s,Ko.empty(),yr.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,It()).next(()=>r))}getLocalViewOfDocuments(e,n,r=It()){const s=Yu();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=bp();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,It()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Va();const o=Gp(),a=Gp();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Xc)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),jp(c.mutation,u,c.mutation.getFieldMask(),yr.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new Xae(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Gp();let s=new br((o,a)=>o-a),i=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Ko.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||It()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=KU();c.forEach(f=>{if(!i.has(f)){const d=UU(n.get(f),r.get(f));d!==null&&h.set(f,d),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return Ke.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oae(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Se.resolve(Yu());let a=-1,l=i;return o.next(u=>Se.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?Se.resolve():this.getBaseDocument(e,c,h).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,It())).next(c=>({batchId:a,changes:qU(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ke(n)).next(r=>{let s=bp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=bp();return this.indexManager.getCollectionParents(e,s).next(o=>Se.forEach(o,a=>{const l=function(u,c){return new qb(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,Hr.newInvalidDocument(u)))});let o=bp();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&jp(u.mutation,l,Ko.empty(),yr.now()),g_(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):Se.resolve(Hr.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qae{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return Se.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:Ra(r.createTime)}),Se.resolve()}getNamedQuery(e,n){return Se.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(r){return{name:r.name,query:Gae(r.bundledQuery),readTime:Ra(r.readTime)}}(n)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jae{constructor(){this.overlays=new br(Ke.comparator),this.Xn=new Map}getOverlay(e,n){return Se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yu();return Se.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ie(e,n,i)}),Se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Xn.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Xn.delete(r)),Se.resolve()}getOverlaysForCollection(e,n,r){const s=Yu(),i=n.length+1,o=new Ke(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new br((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=Yu(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Yu(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return Se.resolve(a)}ie(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Xn.get(s.largestBatchId).delete(r.key);this.Xn.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Wae(n,r));let i=this.Xn.get(n);i===void 0&&(i=It(),this.Xn.set(n,i)),this.Xn.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.Zn=new vr(Tr.ts),this.es=new vr(Tr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new Tr(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new Tr(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new Ke(new Cn([])),r=new Tr(n,e),s=new Tr(n,e+1),i=[];return this.es.forEachInRange([r,s],o=>{this.rs(o),i.push(o.key)}),i}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new Ke(new Cn([])),r=new Tr(n,e),s=new Tr(n,e+1);let i=It();return this.es.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Tr(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tr{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return Ke.comparator(e.key,n.key)||jt(e.ls,n.ls)}static ns(e,n){return jt(e.ls,n.ls)||Ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zae{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new vr(Tr.ts)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Uae(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.ds=this.ds.add(new Tr(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Se.resolve(o)}lookupMutationBatch(e,n){return Se.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ws(r),i=s<0?0:s;return Se.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tr(n,0),s=new Tr(n,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([r,s],o=>{const a=this._s(o.ls);i.push(a)}),Se.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vr(jt);return n.forEach(s=>{const i=new Tr(s,0),o=new Tr(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([i,o],a=>{r=r.add(a.ls)})}),Se.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ke.isDocumentKey(i)||(i=i.child(""));const o=new Tr(new Ke(i),0);let a=new vr(jt);return this.ds.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.ls)),!0)},o),Se.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(r=>{const s=this._s(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fn(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ds;return Se.forEach(n.mutations,s=>{const i=new Tr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new Tr(n,0),s=this.ds.firstAfterOrEqual(r);return Se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ele{constructor(e){this.ps=e,this.docs=new br(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Se.resolve(r?r.document.mutableCopy():Hr.newInvalidDocument(n))}getEntries(e,n){let r=Va();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Hr.newInvalidDocument(s))}),Se.resolve(r)}getAllFromCollection(e,n,r){let s=Va();const i=new Ke(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Boe(Loe(l),r)<=0||(s=s.insert(l.key,l.mutableCopy()))}return Se.resolve(s)}getAllFromCollectionGroup(e,n,r,s){at()}Is(e,n){return Se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tle(this)}getSize(e){return Se.resolve(this.size)}}class tle extends Kae{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.zn.addEntry(e,s)):this.zn.removeEntry(r)}),Se.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nle{constructor(e){this.persistence=e,this.Ts=new dd(n=>d_(n),p_),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Es=0,this.As=new x_,this.targetCount=0,this.Rs=Cf.An()}forEachTarget(e,n){return this.Ts.forEach((r,s)=>n(s)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),Se.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Cf(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,Se.resolve()}updateTargetData(e,n){return this.vn(n),Se.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Ts.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Se.waitFor(i).next(()=>s)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return Se.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),Se.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Se.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),Se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return Se.resolve(r)}containsKey(e,n){return Se.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rle{constructor(e,n){this.bs={},this.overlays={},this.Ps=new h_(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new nle(this),this.indexManager=new Hae,this.remoteDocumentCache=function(r){return new ele(r)}(r=>this.referenceDelegate.Ss(r)),this.wt=new jae(n),this.Ds=new Qae(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jae,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new Zae(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){We("MemoryPersistence","Starting transaction:",e);const s=new sle(this.Ps.next());return this.referenceDelegate.Cs(),r(s).next(i=>this.referenceDelegate.xs(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ns(e,n){return Se.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class sle extends Voe{constructor(e){super(),this.currentSequenceNumber=e}}class b_{constructor(e){this.persistence=e,this.ks=new x_,this.Os=null}static Ms(e){return new b_(e)}get Fs(){if(this.Os)return this.Os;throw at()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),Se.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),Se.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(s=>this.Fs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Fs.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Os=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Fs,r=>{const s=Ke.fromPath(r);return this.$s(e,s).next(i=>{i||n.removeEntry(s,vt.min())})}).next(()=>(this.Os=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return Se.or([()=>Se.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=s}static Vi(e,n){let r=It(),s=It();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new w_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ile{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ci(e,n).next(i=>i||this.xi(e,n,s,r)).next(i=>i||this.Ni(e,n))}Ci(e,n){return Se.resolve(null)}xi(e,n,r,s){return rae(n)||s.isEqual(vt.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(i=>{const o=this.ki(n,i);return this.Oi(n,o,r,s)?this.Ni(e,n):(iM()<=Vt.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rT(n)),this.Mi(e,o,n,Foe(s,-1)))})}ki(e,n){let r=new vr(PU(e));return n.forEach((s,i)=>{g_(e,i)&&(r=r.add(i))}),r}Oi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ni(e,n){return iM()<=Vt.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",rT(n)),this.Di.getDocumentsMatchingQuery(e,n,jl.min())}Mi(e,n,r,s){return this.Di.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ole{constructor(e,n,r,s){this.persistence=e,this.Fi=n,this.wt=s,this.$i=new br(jt),this.Bi=new dd(i=>d_(i),p_),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yae(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function ale(t,e,n,r){return new ole(t,e,n,r)}async function r9(t,e){const n=ct(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=It();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ki:u,removedBatchIds:o,addedBatchIds:a}))})})}function lle(t,e){const n=ct(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let f=Se.resolve();return h.forEach(d=>{f=f.next(()=>u.getEntry(a,d)).next(p=>{const m=l.docVersions.get(d);fn(m!==null),p.version.compareTo(m)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=It();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function s9(t){const e=ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function ule(t,e){const n=ct(t),r=e.snapshotVersion;let s=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});s=n.$i;const a=[];e.targetChanges.forEach((c,h)=>{const f=s.get(h);if(!f)return;a.push(n.Vs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Vs.addMatchingKeys(i,c.addedDocuments,h)));let d=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?d=d.withResumeToken(Zr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,r)),s=s.insert(h,d),function(p,m,g){return p.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,d,c)&&a.push(n.Vs.updateTargetData(i,d))});let l=Va(),u=It();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(cle(i,o,e.documentUpdates).next(c=>{l=c.Gi,u=c.Qi})),!r.isEqual(vt.min())){const c=n.Vs.getLastRemoteSnapshotVersion(i).next(h=>n.Vs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return Se.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.$i=s,i))}function cle(t,e,n){let r=It(),s=It();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Va();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(vt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):We("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Gi:o,Qi:s}})}function hle(t,e){const n=ct(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fle(t,e){const n=ct(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Vs.getTargetData(r,e).next(i=>i?(s=i,Se.resolve(s)):n.Vs.allocateTargetId(r).next(o=>(s=new oc(e,o,0,r.currentSequenceNumber),n.Vs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.$i.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}async function aT(t,e,n){const r=ct(t),s=r.$i.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!vg(o))throw o;We("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(s.target)}function kM(t,e,n){const r=ct(t);let s=vt.min(),i=It();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=ct(a),h=c.Bi.get(u);return h!==void 0?Se.resolve(c.$i.get(h)):c.Vs.getTargetData(l,u)}(r,o,Tc(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,n?s:vt.min(),n?i:It())).next(a=>(dle(r,lae(e),a),{documents:a,ji:i})))}function dle(t,e,n){let r=vt.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Li.set(e,r)}class IM{constructor(){this.activeTargetIds=XU()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ple{constructor(){this.Fr=new IM,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new IM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mle{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){We("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){We("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gle={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yle{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vle extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,s,i){const o=this.oo(e,n);We("RestConnection","Sending: ",o,r);const a={};return this.uo(a,s,i),this.co(e,o,a,r).then(l=>(We("RestConnection","Received: ",l),l),l=>{throw oM("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}ao(e,n,r,s,i,o){return this.ro(e,n,r,s,i)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+hd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}oo(e,n){const r=gle[e];return`${this.so}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,s){return new Promise((i,o)=>{const a=new $oe;a.listenOnce(Ioe.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Nk.NO_ERROR:const u=a.getResponseJson();We("Connection","XHR received:",JSON.stringify(u)),i(u);break;case Nk.TIMEOUT:We("Connection",'RPC "'+e+'" timed out'),o(new Qe(ke.DEADLINE_EXCEEDED,"Request time out"));break;case Nk.HTTP_ERROR:const c=a.getStatus();if(We("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const f=function(d){const p=d.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(p)>=0?p:ke.UNKNOWN}(h.status);o(new Qe(f,h.message))}else o(new Qe(ke.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Qe(ke.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{We("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(n,"POST",l,r,15)})}ho(e,n,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Soe(),o=koe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Toe({})),this.uo(a.initMessageHeaders,n,r),V8()||W8()||Zte()||j8()||ene()||U8()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=s.join("");We("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const f=new yle({jr:p=>{h?We("Connection","Not sending because WebChannel is closed:",p):(c||(We("Connection","Opening WebChannel transport."),u.open(),c=!0),We("Connection","WebChannel sending:",p),u.send(p))},Wr:()=>u.close()}),d=(p,m,g)=>{p.listen(m,y=>{try{g(y)}catch(v){setTimeout(()=>{throw v},0)}})};return d(u,_0.EventType.OPEN,()=>{h||We("Connection","WebChannel transport opened.")}),d(u,_0.EventType.CLOSE,()=>{h||(h=!0,We("Connection","WebChannel transport closed"),f.eo())}),d(u,_0.EventType.ERROR,p=>{h||(h=!0,oM("Connection","WebChannel transport errored:",p),f.eo(new Qe(ke.UNAVAILABLE,"The operation could not be completed")))}),d(u,_0.EventType.MESSAGE,p=>{var m;if(!h){const g=p.data[0];fn(!!g);const y=g,v=y.error||((m=y[0])===null||m===void 0?void 0:m.error);if(v){We("Connection","WebChannel received error:",v);const b=v.status;let x=function(S){const k=Jn[S];if(k!==void 0)return GU(k)}(b),w=v.message;x===void 0&&(x=ke.INTERNAL,w="Unknown error status: "+b+" with message "+v.message),h=!0,f.eo(new Qe(x,w)),u.close()}else We("Connection","WebChannel received:",g),f.no(g)}}),d(o,Coe.STAT_EVENT,p=>{p.stat===rM.PROXY?We("Connection","Detected buffering proxy"):p.stat===rM.NOPROXY&&We("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.Zr()},0),f}}function _k(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){return new $ae(t,!0)}class i9{constructor(e,n,r=1e3,s=1.5,i=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=s,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,n-r);s>0&&We("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,n,r,s,i,o,a,l){this.js=e,this.Ao=r,this.Ro=s,this.bo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new i9(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}async Oo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(Wl(n.toString()),Wl("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===n&&this.Uo(r,s)},r=>{e(()=>{const s=new Qe(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return We("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(We("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xle extends o9{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.wt=i}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=_ae(this.wt,e),r=function(s){if(!("targetChange"in s))return vt.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?vt.min():i.readTime?Ra(i.readTime):vt.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=oT(this.wt),n.addTarget=function(s,i){let o;const a=i.target;return o=nT(a)?{documents:Rae(s,a)}:{query:Dae(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=JU(s,i.resumeToken):i.snapshotVersion.compareTo(vt.min())>0&&(o.readTime=L1(s,i.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=Mae(this.wt,e);r&&(n.labels=r),this.Mo(n)}jo(e){const n={};n.database=oT(this.wt),n.removeTarget=e,this.Mo(n)}}class ble extends o9{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.wt=i,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=Oae(e.writeResults,e.commitTime),r=Ra(e.commitTime);return this.listener.Jo(r,n)}return fn(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=oT(this.wt),this.Mo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Aae(this.wt,r))};this.Mo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wle extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new Qe(ke.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.bo.ro(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qe(ke.UNKNOWN,s.toString())})}ao(e,n,r,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ao(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Qe(ke.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class Sle{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Wl(n),this.su=!1):We("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kle{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br(o=>{r.enqueueAndForget(async()=>{Yc(this)&&(We("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ct(a);l.lu.add(4),await Sg(l),l._u.set("Unknown"),l.lu.delete(4),await Jb(l)}(this))})}),this._u=new Sle(r,s)}}async function Jb(t){if(Yc(t))for(const e of t.fu)await e(!0)}async function Sg(t){for(const e of t.fu)await e(!1)}function a9(t,e){const n=ct(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),I_(n)?k_(n):pd(n).Co()&&S_(n,e))}function l9(t,e){const n=ct(t),r=pd(n);n.hu.delete(e),r.Co()&&u9(n,e),n.hu.size===0&&(r.Co()?r.ko():Yc(n)&&n._u.set("Unknown"))}function S_(t,e){t.wu.Nt(e.targetId),pd(t).Qo(e)}function u9(t,e){t.wu.Nt(e),pd(t).jo(e)}function k_(t){t.wu=new Iae({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),pd(t).start(),t._u.iu()}function I_(t){return Yc(t)&&!pd(t).Do()&&t.hu.size>0}function Yc(t){return ct(t).lu.size===0}function c9(t){t.wu=void 0}async function Ile(t){t.hu.forEach((e,n)=>{S_(t,e)})}async function Cle(t,e){c9(t),I_(t)?(t._u.uu(e),k_(t)):t._u.set("Unknown")}async function Tle(t,e,n){if(t._u.set("Online"),e instanceof QU&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.hu.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.hu.delete(o),r.wu.removeTarget(o))}(t,e)}catch(r){We("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await B1(t,r)}else if(e instanceof kv?t.wu.Ut(e):e instanceof YU?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(vt.min()))try{const r=await s9(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.wu.Yt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.hu.get(l);u&&s.hu.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=s.hu.get(a);if(!l)return;s.hu.set(a,l.withResumeToken(Zr.EMPTY_BYTE_STRING,l.snapshotVersion)),u9(s,a);const u=new oc(l.target,a,1,l.sequenceNumber);S_(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){We("RemoteStore","Failed to raise snapshot:",r),await B1(t,r)}}async function B1(t,e,n){if(!vg(e))throw e;t.lu.add(1),await Sg(t),t._u.set("Offline"),n||(n=()=>s9(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{We("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await Jb(t)})}function h9(t,e){return e().catch(n=>B1(t,n,e))}async function Zb(t){const e=ct(t),n=Hl(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;$le(e);)try{const s=await hle(e.localStore,r);if(s===null){e.au.length===0&&n.ko();break}r=s.batchId,Nle(e,s)}catch(s){await B1(e,s)}f9(e)&&d9(e)}function $le(t){return Yc(t)&&t.au.length<10}function Nle(t,e){t.au.push(e);const n=Hl(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function f9(t){return Yc(t)&&!Hl(t).Do()&&t.au.length>0}function d9(t){Hl(t).start()}async function Ele(t){Hl(t).Xo()}async function _le(t){const e=Hl(t);for(const n of t.au)e.Ho(n.mutations)}async function Ale(t,e,n){const r=t.au.shift(),s=v_.from(r,e,n);await h9(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zb(t)}async function Ole(t,e){e&&Hl(t).zo&&await async function(n,r){if(s=r.code,xae(s)&&s!==ke.ABORTED){const i=n.au.shift();Hl(n).No(),await h9(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Zb(n)}var s}(t,e),f9(t)&&d9(t)}async function TM(t,e){const n=ct(t);n.asyncQueue.verifyOperationInProgress(),We("RemoteStore","RemoteStore received new credentials");const r=Yc(n);n.lu.add(3),await Sg(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await Jb(n)}async function Rle(t,e){const n=ct(t);e?(n.lu.delete(2),await Jb(n)):e||(n.lu.add(2),await Sg(n),n._u.set("Unknown"))}function pd(t){return t.mu||(t.mu=function(e,n,r){const s=ct(e);return s.tu(),new xle(n,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(t.datastore,t.asyncQueue,{zr:Ile.bind(null,t),Jr:Cle.bind(null,t),Go:Tle.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),I_(t)?k_(t):t._u.set("Unknown")):(await t.mu.stop(),c9(t))})),t.mu}function Hl(t){return t.gu||(t.gu=function(e,n,r){const s=ct(e);return s.tu(),new ble(n,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(t.datastore,t.asyncQueue,{zr:Ele.bind(null,t),Jr:Ole.bind(null,t),Yo:_le.bind(null,t),Jo:Ale.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await Zb(t)):(await t.gu.stop(),t.au.length>0&&(We("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ic,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new C_(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(t,e){if(Wl("AsyncQueue",`${e}: ${t}`),vg(t))return new Qe(ke.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ke.comparator(n.key,r.key):(n,r)=>Ke.comparator(n.key,r.key),this.keyedMap=bp(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new rf(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new rf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.yu=new br(Ke.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?e.type!==0&&r.type===3?this.yu=this.yu.insert(n,e):e.type===3&&r.type!==1?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.yu=this.yu.remove(n):e.type===1&&r.type===2?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):at():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tf{constructor(e,n,r,s,i,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Tf(e,n,rf.emptySet(n),i,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dle{constructor(){this.Iu=void 0,this.listeners=[]}}class Ple{constructor(){this.queries=new dd(e=>DU(e),xg),this.onlineState="Unknown",this.Tu=new Set}}async function Mle(t,e){const n=ct(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Dle),s)try{i.Iu=await n.onListen(r)}catch(o){const a=T_(o,`Initialization of query '${rT(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.Eu(n.onlineState),i.Iu&&e.Au(i.Iu)&&$_(n)}async function Fle(t,e){const n=ct(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Lle(t,e){const n=ct(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Au(s)&&(r=!0);o.Iu=s}}r&&$_(n)}function Ble(t,e,n){const r=ct(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function $_(t){t.Tu.forEach(e=>{e.next()})}class zle{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Tf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Du||!r)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Su(e){e=Tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.key=e}}class m9{constructor(e){this.key=e}}class Vle{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=It(),this.mutatedKeys=It(),this.Lu=PU(e),this.Uu=new rf(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new $M,s=n?n.Uu:this.Uu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const f=s.get(c),d=g_(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let g=!1;f&&d?f.data.isEqual(d.data)?p!==m&&(r.track({type:3,doc:d}),g=!0):this.Qu(f,d)||(r.track({type:2,doc:d}),g=!0,(l&&this.Lu(d,l)>0||u&&this.Lu(d,u)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),g=!0):f&&!d&&(r.track({type:1,doc:f}),g=!0,(l||u)&&(a=!0)),g&&(d?(o=o.add(d),i=m?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Oi:a,mutatedKeys:i}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const i=e.Gu.pu();i.sort((u,c)=>function(h,f){const d=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return d(h)-d(f)}(u.type,c.type)||this.Lu(u.doc,c.doc)),this.ju(r);const o=n?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,l=a!==this.$u;return this.$u=a,i.length!==0||l?{snapshot:new Tf(this.query,e.Uu,s,i,e.mutatedKeys,a===0,l,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new $M,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=It(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new m9(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new p9(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=It();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return Tf.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class Ule{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Wle{constructor(e){this.key=e,this.Xu=!1}}class jle{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new dd(a=>DU(a),xg),this.ec=new Map,this.nc=new Set,this.sc=new br(Ke.comparator),this.ic=new Map,this.rc=new x_,this.oc={},this.uc=new Map,this.cc=Cf.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function Gle(t,e){const n=tue(t);let r,s;const i=n.tc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Yu();else{const o=await fle(n.localStore,Tc(e));n.isPrimaryClient&&a9(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await Hle(n,e,r,a==="current")}return s}async function Hle(t,e,n,r){t.hc=(c,h,f)=>async function(d,p,m,g){let y=p.view.Ku(m);y.Oi&&(y=await kM(d.localStore,p.query,!1).then(({documents:x})=>p.view.Ku(x,y)));const v=g&&g.targetChanges.get(p.targetId),b=p.view.applyChanges(y,d.isPrimaryClient,v);return EM(d,p.targetId,b.zu),b.snapshot}(t,c,h,f);const s=await kM(t.localStore,e,!0),i=new Vle(e,s.ji),o=i.Ku(s.documents),a=wg.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=i.applyChanges(o,t.isPrimaryClient,a);EM(t,n,l.zu);const u=new Ule(e,n,i);return t.tc.set(e,u),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),l.snapshot}async function qle(t,e){const n=ct(t),r=n.tc.get(e),s=n.ec.get(r.targetId);if(s.length>1)return n.ec.set(r.targetId,s.filter(i=>!xg(i,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await aT(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),l9(n.remoteStore,r.targetId),lT(n,r.targetId)}).catch(yg)):(lT(n,r.targetId),await aT(n.localStore,r.targetId,!0))}async function Kle(t,e,n){const r=nue(t);try{const s=await function(i,o){const a=ct(i),l=yr.now(),u=o.reduce((f,d)=>f.add(d.key),It());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let d=Va(),p=It();return a.Ui.getEntries(f,u).next(m=>{d=m,d.forEach((g,y)=>{y.isValidDocument()||(p=p.add(g))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,d)).next(m=>{c=m;const g=[];for(const y of o){const v=gae(y,c.get(y.key).overlayedDocument);v!=null&&g.push(new Xc(y.key,v,OU(v.value.mapValue),Oa.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,g,o)}).next(m=>{h=m;const g=m.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(f,m.batchId,g)})}).then(()=>({batchId:h.batchId,changes:qU(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.oc[i.currentUser.toKey()];l||(l=new br(jt)),l=l.insert(o,a),i.oc[i.currentUser.toKey()]=l}(r,s.batchId,n),await kg(r,s.changes),await Zb(r.remoteStore)}catch(s){const i=T_(s,"Failed to persist write");n.reject(i)}}async function g9(t,e){const n=ct(t);try{const r=await ule(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.ic.get(i);o&&(fn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Xu=!0:s.modifiedDocuments.size>0?fn(o.Xu):s.removedDocuments.size>0&&(fn(o.Xu),o.Xu=!1))}),await kg(n,r,e)}catch(r){await yg(r)}}function NM(t,e,n){const r=ct(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.tc.forEach((i,o)=>{const a=o.view.Eu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=ct(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Eu(o)&&(l=!0)}),l&&$_(a)}(r.eventManager,e),s.length&&r.Zu.Go(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Xle(t,e,n){const r=ct(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.ic.get(e),i=s&&s.key;if(i){let o=new br(Ke.comparator);o=o.insert(i,Hr.newNoDocument(i,vt.min()));const a=It().add(i),l=new Yb(vt.min(),new Map,new vr(jt),o,a);await g9(r,l),r.sc=r.sc.remove(i),r.ic.delete(e),N_(r)}else await aT(r.localStore,e,!1).then(()=>lT(r,e,n)).catch(yg)}async function Yle(t,e){const n=ct(t),r=e.batch.batchId;try{const s=await lle(n.localStore,e);v9(n,r,null),y9(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kg(n,s)}catch(s){await yg(s)}}async function Qle(t,e,n){const r=ct(t);try{const s=await function(i,o){const a=ct(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(fn(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);v9(r,e,n),y9(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kg(r,s)}catch(s){await yg(s)}}function y9(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function v9(t,e,n){const r=ct(t);let s=r.oc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.oc[r.currentUser.toKey()]=s}}function lT(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||x9(t,r)})}function x9(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);n!==null&&(l9(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),N_(t))}function EM(t,e,n){for(const r of n)r instanceof p9?(t.rc.addReference(r.key,e),Jle(t,r)):r instanceof m9?(We("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||x9(t,r.key)):at()}function Jle(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(We("SyncEngine","New document in limbo: "+n),t.nc.add(r),N_(t))}function N_(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new Ke(Cn.fromString(e)),r=t.cc.next();t.ic.set(r,new Wle(n)),t.sc=t.sc.insert(n,r),a9(t.remoteStore,new oc(Tc(m_(n.path)),r,2,h_.ot))}}async function kg(t,e,n){const r=ct(t),s=[],i=[],o=[];r.tc.isEmpty()||(r.tc.forEach((a,l)=>{o.push(r.hc(l,e,n).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),s.push(u);const c=w_.Vi(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.Zu.Go(s),await async function(a,l){const u=ct(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>Se.forEach(l,h=>Se.forEach(h.Pi,f=>u.persistence.referenceDelegate.addReference(c,h.targetId,f)).next(()=>Se.forEach(h.vi,f=>u.persistence.referenceDelegate.removeReference(c,h.targetId,f)))))}catch(c){if(!vg(c))throw c;We("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const f=u.$i.get(h),d=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(d);u.$i=u.$i.insert(h,p)}}}(r.localStore,i))}async function Zle(t,e){const n=ct(t);if(!n.currentUser.isEqual(e)){We("SyncEngine","User change. New user:",e.toKey());const r=await r9(n.localStore,e);n.currentUser=e,function(s,i){s.uc.forEach(o=>{o.forEach(a=>{a.reject(new Qe(ke.CANCELLED,i))})}),s.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kg(n,r.Ki)}}function eue(t,e){const n=ct(t),r=n.ic.get(e);if(r&&r.Xu)return It().add(r.key);{let s=It();const i=n.ec.get(e);if(!i)return s;for(const o of i){const a=n.tc.get(o);s=s.unionWith(a.view.qu)}return s}}function tue(t){const e=ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=g9.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xle.bind(null,e),e.Zu.Go=Lle.bind(null,e.eventManager),e.Zu.lc=Ble.bind(null,e.eventManager),e}function nue(t){const e=ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yle.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qle.bind(null,e),e}class rue{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=Qb(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return ale(this.persistence,new ile,e.initialUser,this.wt)}_c(e){return new rle(b_.Ms,this.wt)}dc(e){return new ple}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sue{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zle.bind(null,this.syncEngine),await Rle(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ple}createDatastore(e){const n=Qb(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new vle(s));var s;return function(i,o,a,l){return new wle(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>NM(this.syncEngine,a,0),o=CM.V()?new CM:new mle,new kle(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new jle(r,s,i,o,a,l);return u&&(c.ac=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ct(e);We("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await Sg(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iue{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oue{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ws.UNAUTHENTICATED,this.clientId=NU.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{We("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(We("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qe(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ic;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=T_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function aue(t,e){t.asyncQueue.verifyOperationInProgress(),We("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await r9(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function lue(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uue(t);We("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>TM(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>TM(e.remoteStore,i)),t.onlineComponents=e}async function uue(t){return t.offlineComponents||(We("FirestoreClient","Using default OfflineComponentProvider"),await aue(t,new rue)),t.offlineComponents}async function b9(t){return t.onlineComponents||(We("FirestoreClient","Using default OnlineComponentProvider"),await lue(t,new sue)),t.onlineComponents}function cue(t){return b9(t).then(e=>e.syncEngine)}async function _M(t){const e=await b9(t),n=e.eventManager;return n.onListen=Gle.bind(null,e.syncEngine),n.onUnlisten=qle.bind(null,e.syncEngine),n}const AM=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(t,e,n){if(!n)throw new Qe(ke.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hue(t,e,n,r){if(e===!0&&r===!0)throw new Qe(ke.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OM(t){if(!Ke.isDocumentKey(t))throw new Qe(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RM(t){if(Ke.isDocumentKey(t))throw new Qe(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function E_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":at()}function Hp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qe(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=E_(t);throw new Qe(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Qe(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DM({}),this._settingsFrozen=!1,e instanceof kf?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Qe(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kf(s.options.projectId)}(e))}get app(){if(!this._app)throw new Qe(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Qe(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DM(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Eoe;switch(n.type){case"gapi":const r=n.client;return fn(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Ooe(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new Qe(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=AM.get(e);n&&(We("ComponentProvider","Removing Datastore"),AM.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gi(this.firestore,e,this._key)}}class $f{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $f(this.firestore,e,this._query)}}class _l extends $f{constructor(e,n,r){super(e,n,m_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gi(this.firestore,null,new Ke(e))}withConverter(e){return new _l(this.firestore,e,this._path)}}function fue(t,e,...n){if(t=vs(t),w9("collection","path",e),t instanceof __){const r=Cn.fromString(e,...n);return RM(r),new _l(t,null,r)}{if(!(t instanceof gi||t instanceof _l))throw new Qe(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Cn.fromString(e,...n));return RM(r),new _l(t.firestore,null,r)}}function due(t,e,...n){if(t=vs(t),arguments.length===1&&(e=NU.I()),w9("doc","path",e),t instanceof __){const r=Cn.fromString(e,...n);return OM(r),new gi(t,null,new Ke(r))}{if(!(t instanceof gi||t instanceof _l))throw new Qe(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Cn.fromString(e,...n));return OM(r),new gi(t.firestore,t instanceof _l?t.converter:null,new Ke(r))}}function pue(t,e){return t=vs(t),e=vs(e),t instanceof $f&&e instanceof $f&&t.firestore===e.firestore&&xg(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mue{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new i9(this,"async_queue_retry"),this.Kc=()=>{const n=_k();n&&We("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=_k();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=_k();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new ic;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}async jc(){if(this.Mc.length!==0){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(e){if(!vg(e))throw e;We("AsyncQueue","Operation failed with retryable error: "+e)}this.Mc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{this.Bc=r,this.Lc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Wl("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Lc=!1,r))));return this.Oc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const s=C_.createAndSchedule(this,e,n,r,i=>this.Wc(i));return this.$c.push(s),s}Gc(){this.Bc&&at()}verifyOperationInProgress(){}async zc(){let e;do e=this.Oc,await e;while(e!==this.Oc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function PM(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class z1 extends __{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new mue,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||k9(this),this._firestoreClient.terminate()}}function gue(t=K8()){return _E(t,"firestore").getImmediate()}function S9(t){return t._firestoreClient||k9(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function k9(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new Woe(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new oue(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Qe(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nf(Zr.fromBase64String(e))}catch(n){throw new Qe(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nf(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Qe(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Qe(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yue=/^__.*__$/;class vue{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xc(e,this.data,this.fieldMask,n,this.fieldTransforms):new bg(e,this.data,n,this.fieldTransforms)}}function C9(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class R_{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new R_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ta({path:r,na:!1});return s.sa(e),s}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ta({path:r,na:!1});return s.Xc(),s}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return V1(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(C9(this.Zc)&&yue.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class xue{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||Qb(e)}aa(e,n,r,s=!1){return new R_({Zc:e,methodName:n,ca:r,path:fs.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function bue(t){const e=t._freezeSettings(),n=Qb(t._databaseId);return new xue(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wue(t,e,n,r,s,i={}){const o=t.aa(i.merge||i.mergeFields?2:0,e,n,s);E9("Data must be an object, but it was:",o,r);const a=$9(r,o);let l,u;if(i.merge)l=new Ko(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const f=Sue(e,h,n);if(!o.contains(f))throw new Qe(ke.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Iue(c,f)||c.push(f)}l=new Ko(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new vue(new Fi(a),l,u)}function T9(t,e){if(N9(t=vs(t)))return E9("Unsupported field value:",e,t),$9(t,e);if(t instanceof I9)return function(n,r){if(!C9(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=T9(o,r.ra(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=vs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return cae(r.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=yr.fromDate(n);return{timestampValue:L1(r.wt,s)}}if(n instanceof yr){const s=new yr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:L1(r.wt,s)}}if(n instanceof O_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Nf)return{bytesValue:JU(r.wt,n._byteString)};if(n instanceof gi){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.oa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:y_(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${E_(n)}`)}(t,e)}function $9(t,e){const n={};return EU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fd(t,(r,s)=>{const i=T9(s,e.ea(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function N9(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yr||t instanceof O_||t instanceof Nf||t instanceof gi||t instanceof I9)}function E9(t,e,n){if(!N9(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=E_(n);throw r==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function Sue(t,e,n){if((e=vs(e))instanceof A_)return e._internalPath;if(typeof e=="string")return _9(t,e);throw V1("Field path arguments must be of type string or ",t,!1,void 0,n)}const kue=new RegExp("[~\\*/\\[\\]]");function _9(t,e,n){if(e.search(kue)>=0)throw V1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new A_(...e.split("."))._internalPath}catch{throw V1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function V1(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Qe(ke.INVALID_ARGUMENT,a+t+l)}function Iue(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Cue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(O9("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Cue extends A9{data(){return super.data()}}function O9(t,e){return typeof e=="string"?_9(t,e):e instanceof A_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class R9 extends A9{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(O9("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Iv extends R9{data(e={}){return super.data(e)}}class Tue{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Iv(this._firestore,this._userDataWriter,r.key,r,new wp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qe(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Iv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wp(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:i++}))}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Iv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wp(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:$ue(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $ue(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nue(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Qe(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{convertValue(e,n="none"){switch(Cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw at()}}convertObject(e,n){const r={};return fd(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new O_(er(e.latitude),er(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=AU(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(km(e));default:return null}}convertTimestamp(e){const n=Gl(e);return new yr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Cn.fromString(e);fn(n9(r));const s=new kf(r.get(1),r.get(3)),i=new Ke(r.popFirst(5));return s.isEqual(n)||Wl(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ue(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class D9 extends Eue{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nf(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,n)}}function Aue(t,e,n){t=Hp(t,gi);const r=Hp(t.firestore,z1),s=_ue(t.converter,e,n);return Oue(r,[wue(bue(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Oa.none())])}function MM(t,...e){var n,r,s;t=vs(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||PM(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(PM(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,u,c;if(t instanceof gi)u=Hp(t.firestore,z1),c=m_(t._key.path),l={next:h=>{e[o]&&e[o](Rue(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Hp(t,$f);u=Hp(h.firestore,z1),c=h._query;const f=new D9(u);l={next:d=>{e[o]&&e[o](new Tue(u,f,h,d))},error:e[o+1],complete:e[o+2]},Nue(t._query)}return function(h,f,d,p){const m=new iue(p),g=new zle(f,m,d);return h.asyncQueue.enqueueAndForget(async()=>Mle(await _M(h),g)),()=>{m.Tc(),h.asyncQueue.enqueueAndForget(async()=>Fle(await _M(h),g))}}(S9(u),c,a,l)}function Oue(t,e){return function(n,r){const s=new ic;return n.asyncQueue.enqueueAndForget(async()=>Kle(await cue(n),r,s)),s.promise}(S9(t),e)}function Rue(t,e,n){const r=n.docs.get(e._key),s=new D9(t);return new R9(t,s,e._key,r,new wp(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){hd=n})(rg),xf(new vc("firestore",(n,{options:r})=>{const s=n.getProvider("app").getImmediate(),i=new z1(s,new _oe(n.getProvider("auth-internal")),new Doe(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),i._setSettings(r),i},"PUBLIC")),El(sM,"3.4.12",t),El(sM,"3.4.12","esm2017")})();const Due={apiKey:"AIzaSyA2-hbp75CZleQKl9mVwh-BzpPm1-Bm-_A",authDomain:"aasanai.firebaseapp.com",projectId:"aasanai",storageBucket:"aasanai.appspot.com",messagingSenderId:"196459694291",appId:"1:196459694291:web:1ba9585d3b2165234cec26",measurementId:"G-B2W0DCR9SP"},P9=ore(Due),M9=gue(P9),$c=gie(P9);var ew={exports:{}},tw={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pue=ae.exports,Mue=Symbol.for("react.element"),Fue=Symbol.for("react.fragment"),Lue=Object.prototype.hasOwnProperty,Bue=Pue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zue={key:!0,ref:!0,__self:!0,__source:!0};function F9(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Lue.call(e,r)&&!zue.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Mue,type:t,key:i,ref:o,props:s,_owner:Bue.current}}tw.Fragment=Fue;tw.jsx=F9;tw.jsxs=F9;(function(t){t.exports=tw})(ew);const L9=ew.exports.Fragment,D=ew.exports.jsx,ue=ew.exports.jsxs;function Ef(){const t=()=>{ise($c)},[e,n,r]=Ob($c),[s,i]=ae.exports.useState(!0);return ae.exports.useEffect(()=>{const o=()=>{window.pageYOffset>10?i(!1):i(!0)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[s]),D("header",{className:`fixed w-full z-30 md:bg-opacity-90 transition duration-300 ease-in-out ${!s&&"bg-white backdrop-blur-sm shadow-lg"}`,children:D("div",{className:"max-w-6xl mx-auto px-5 sm:px-6",children:ue("div",{className:"flex items-center justify-between h-16 md:h-20",children:[D("div",{className:"flex-shrink-0 mr-4",children:D(xa,{to:"/",className:"block","aria-label":"AasanAI",children:ue("svg",{xmlns:"http://www.w3.org/2000/svg",zoomAndPan:"magnify",viewBox:"0 0 450 449.999984",preserveAspectRatio:"xMidYMid meet",version:"1.0",className:"w-20 h-20",children:[ue("defs",{children:[D("filter",{x:"0%",y:"0%",width:"100%",height:"100%",id:"id1",children:D("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0","color-interpolation-filters":"sRGB"})}),D("mask",{id:"id2",children:D("g",{filter:"url(#id1)",children:D("rect",{x:"-45",width:"540",fill:"#000000",y:"-44.999998",height:"539.99998","fill-opacity":"0.4863"})})}),D("clipPath",{id:"id3",children:D("path",{d:"M 0.320312 0.320312 L 337.316406 0.320312 L 337.316406 337.316406 L 0.320312 337.316406 Z M 0.320312 0.320312 ","clip-rule":"nonzero"})}),D("clipPath",{id:"id4",children:D("rect",{x:"0",width:"338",y:"0",height:"338"})}),D("clipPath",{id:"id5",children:D("path",{d:"M 112.285156 114.257812 L 336.949219 114.257812 L 336.949219 336.53125 L 112.285156 336.53125 Z M 112.285156 114.257812 ","clip-rule":"nonzero"})})]}),D("g",{mask:"url(#id2)",children:D("g",{transform:"matrix(1, 0, 0, 1, 56, 56)",children:D("g",{"clip-path":"url(#id4)",children:D("g",{"clip-path":"url(#id3)",children:D("path",{fill:"#ffbd59",d:"M 168.820312 0.320312 C 75.761719 0.320312 0.320312 75.761719 0.320312 168.820312 C 0.320312 261.878906 75.761719 337.316406 168.820312 337.316406 C 261.878906 337.316406 337.316406 261.878906 337.316406 168.820312 C 337.316406 75.761719 261.878906 0.320312 168.820312 0.320312 ","fill-opacity":"1","fill-rule":"nonzero"})})})})}),D("g",{"clip-path":"url(#id5)",children:D("path",{fill:"#545454",d:"M 313.597656 291.324219 L 304.359375 291.324219 L 272.941406 269.160156 C 270.5 267.453125 268.878906 264.90625 268.367188 261.933594 L 263.222656 233.503906 C 264.597656 228.085938 264.6875 222.4375 263.3125 216.902344 L 259.335938 200.90625 L 262.027344 200.90625 C 265.269531 200.90625 268.382812 202.082031 270.765625 204.21875 C 273.191406 206.394531 274.753906 209.351562 275.148438 212.5625 L 280.761719 257.886719 C 280.863281 258.710938 281.242188 259.492188 281.828125 260.078125 L 304.273438 282.683594 C 304.972656 283.390625 305.925781 283.789062 306.917969 283.789062 L 321.882812 283.789062 C 322.277344 283.789062 322.6875 283.714844 323.066406 283.597656 L 329.363281 281.476562 L 329.363281 288.996094 L 324.746094 291.324219 Z M 250.804688 328.996094 L 250.804688 311.527344 L 303.617188 298.855469 L 313.597656 298.855469 C 319.632812 298.855469 324.996094 302.183594 327.625 307.039062 C 327.652344 307.082031 327.667969 307.128906 327.699219 307.15625 C 328.019531 307.773438 328.269531 308.421875 328.5 309.085938 C 328.632812 309.46875 328.765625 309.851562 328.851562 310.246094 C 328.984375 310.6875 329.058594 311.144531 329.128906 311.617188 C 329.21875 312.132812 329.261719 312.660156 329.289062 313.175781 C 329.304688 313.71875 329.304688 314.25 329.277344 314.78125 C 329.246094 315.296875 329.203125 315.808594 329.128906 316.308594 C 329.042969 316.796875 328.941406 317.296875 328.808594 317.78125 C 328.675781 318.28125 328.53125 318.78125 328.339844 319.269531 C 328.179688 319.722656 327.976562 320.152344 327.757812 320.59375 C 327.523438 321.050781 327.289062 321.503906 327.027344 321.945312 C 326.75 322.375 326.425781 322.785156 326.105469 323.199219 C 325.8125 323.582031 325.519531 323.976562 325.183594 324.332031 C 324.804688 324.726562 324.367188 325.082031 323.941406 325.433594 C 323.605469 325.714844 323.300781 326.023438 322.933594 326.273438 C 322.394531 326.65625 321.808594 326.949219 321.222656 327.257812 C 320.933594 327.421875 320.65625 327.613281 320.347656 327.746094 C 319.601562 328.070312 318.796875 328.304688 317.996094 328.511719 C 317.820312 328.554688 317.660156 328.628906 317.484375 328.671875 C 316.476562 328.878906 315.4375 328.996094 314.398438 328.996094 Z M 179.726562 328.996094 C 177.664062 328.996094 175.984375 327.304688 175.984375 325.226562 C 175.984375 323.152344 177.664062 321.460938 179.726562 321.460938 L 183.464844 321.460938 C 183.949219 321.460938 184.414062 321.371094 184.855469 321.195312 L 211.273438 310.554688 C 213.203125 309.777344 215.277344 309.820312 217.148438 310.703125 C 219.019531 311.570312 220.421875 313.144531 221.066406 315.117188 C 221.679688 316.972656 223.621094 318.046875 225.480469 317.589844 L 243.320312 313.308594 L 243.320312 328.996094 Z M 132.011719 328.714844 C 131.75 328.65625 131.488281 328.570312 131.222656 328.496094 C 130.550781 328.332031 129.894531 328.140625 129.265625 327.890625 C 129.046875 327.804688 128.839844 327.699219 128.636719 327.613281 C 127.980469 327.304688 127.335938 326.949219 126.738281 326.566406 C 126.5625 326.449219 126.386719 326.332031 126.226562 326.214844 C 125.394531 325.625 124.648438 324.949219 123.960938 324.214844 C 123.375 323.582031 122.820312 322.917969 122.367188 322.210938 C 122.121094 321.859375 121.945312 321.460938 121.738281 321.078125 C 121.476562 320.578125 121.199219 320.09375 120.980469 319.578125 C 120.804688 319.121094 120.6875 318.636719 120.542969 318.148438 C 120.394531 317.648438 120.234375 317.164062 120.148438 316.648438 C 120.058594 316.207031 120.042969 315.75 120.015625 315.296875 C 119.957031 314.691406 119.898438 314.089844 119.914062 313.457031 C 119.957031 311.835938 120.292969 310.292969 120.804688 308.835938 C 120.964844 308.421875 121.097656 307.996094 121.300781 307.613281 C 121.34375 307.511719 121.402344 307.421875 121.449219 307.320312 C 123.769531 302.773438 128.460938 299.546875 133.75 298.976562 C 133.941406 298.960938 134.117188 298.914062 134.292969 298.914062 C 134.746094 298.886719 135.183594 298.855469 135.621094 298.855469 L 145.617188 298.855469 L 192.351562 310.054688 L 182.75 313.925781 L 179.726562 313.925781 C 173.527344 313.925781 168.5 318.988281 168.5 325.226562 C 168.5 326.554688 168.78125 327.820312 169.1875 328.996094 L 134.832031 328.996094 C 133.867188 328.996094 132.917969 328.878906 132.011719 328.714844 Z M 124.5 291.324219 L 119.867188 288.996094 L 119.867188 281.476562 L 126.167969 283.597656 C 126.546875 283.714844 126.957031 283.789062 127.351562 283.789062 L 142.316406 283.789062 C 143.308594 283.789062 144.257812 283.390625 144.960938 282.683594 L 167.40625 260.078125 C 167.992188 259.492188 168.371094 258.710938 168.472656 257.886719 L 174.085938 212.5625 C 174.480469 209.351562 176.042969 206.394531 178.46875 204.21875 C 180.851562 202.082031 183.960938 200.90625 187.207031 200.90625 L 189.894531 200.90625 L 185.921875 216.902344 C 184.53125 222.507812 184.648438 228.261719 186.097656 233.753906 L 180.894531 265.023438 C 180.351562 268.292969 178.4375 271.132812 175.632812 272.839844 L 145.019531 291.324219 Z M 264.335938 291.324219 L 254.910156 272.351562 C 252.527344 267.542969 252.292969 261.917969 254.28125 256.914062 L 258.109375 247.292969 L 260.988281 263.257812 C 261.851562 268.203125 264.570312 272.5 268.675781 275.355469 L 291.3125 291.324219 Z M 188.273438 266.246094 L 191.34375 247.835938 L 194.953125 256.914062 C 196.9375 261.917969 196.707031 267.542969 194.324219 272.351562 L 184.898438 291.324219 L 159.558594 291.324219 L 179.476562 279.300781 C 184.183594 276.445312 187.382812 271.691406 188.273438 266.246094 Z M 246.199219 304.875 L 226.675781 309.554688 C 225.15625 307.097656 222.9375 305.097656 220.289062 303.875 C 216.59375 302.140625 212.296875 302.035156 208.5 303.550781 L 204.085938 305.332031 C 203.761719 305.125 203.425781 304.964844 203.03125 304.875 L 177.925781 298.855469 L 271.320312 298.855469 Z M 197.609375 200.90625 L 205.910156 200.90625 C 205.910156 201.496094 206.027344 202.070312 206.085938 202.65625 C 206.101562 202.847656 206.117188 203.054688 206.144531 203.246094 C 207.007812 210.105469 211.464844 215.84375 217.632812 218.34375 C 217.691406 218.375 217.75 218.402344 217.808594 218.433594 C 218.246094 218.59375 218.683594 218.742188 219.164062 218.902344 C 219.574219 219.050781 220 219.125 220.40625 219.214844 C 220.628906 219.273438 220.847656 219.34375 221.066406 219.390625 C 221.648438 219.507812 222.234375 219.609375 222.820312 219.65625 C 223.390625 219.699219 223.957031 219.726562 224.515625 219.726562 C 224.542969 219.726562 224.585938 219.742188 224.617188 219.742188 C 224.746094 219.742188 224.878906 219.699219 225.011719 219.699219 C 225.976562 219.683594 226.953125 219.582031 227.933594 219.40625 C 228.300781 219.34375 228.664062 219.242188 229.015625 219.152344 C 229.4375 219.066406 229.863281 218.992188 230.285156 218.875 C 230.621094 218.757812 230.886719 218.59375 231.207031 218.476562 C 231.6875 218.285156 232.140625 218.09375 232.59375 217.875 C 232.886719 217.742188 233.222656 217.636719 233.488281 217.492188 C 233.882812 217.269531 234.246094 217.003906 234.613281 216.769531 C 234.832031 216.625 235.066406 216.492188 235.285156 216.34375 C 237.066406 215.09375 238.617188 213.53125 239.902344 211.707031 C 240.078125 211.441406 240.238281 211.164062 240.414062 210.882812 C 240.648438 210.515625 240.894531 210.191406 241.101562 209.808594 C 241.246094 209.515625 241.320312 209.25 241.449219 208.96875 C 241.699219 208.46875 241.902344 207.957031 242.09375 207.441406 C 242.210938 207.132812 242.371094 206.835938 242.472656 206.527344 C 242.605469 206.117188 242.664062 205.675781 242.765625 205.261719 C 242.839844 204.953125 242.925781 204.660156 242.96875 204.351562 C 243.191406 203.214844 243.320312 202.082031 243.320312 200.90625 L 251.621094 200.90625 L 256.050781 218.726562 C 257.394531 224.15625 257.015625 229.75 254.953125 234.929688 L 247.339844 254.132812 C 244.5625 261.109375 244.886719 268.984375 248.214844 275.707031 L 255.976562 291.324219 L 193.257812 291.324219 L 201.015625 275.707031 C 204.347656 268.984375 204.667969 261.109375 201.894531 254.132812 L 194.28125 234.929688 C 192.21875 229.75 191.839844 224.15625 193.183594 218.726562 Z M 224.617188 185.835938 C 227.246094 185.835938 229.746094 185.351562 232.097656 184.527344 L 232.097656 188.058594 C 232.097656 191.871094 233.441406 195.625 235.839844 198.582031 L 235.839844 200.90625 C 235.839844 201.628906 235.75 202.320312 235.636719 202.996094 C 235.605469 203.15625 235.5625 203.320312 235.519531 203.46875 C 235.414062 203.921875 235.269531 204.363281 235.109375 204.804688 C 234.992188 205.128906 234.84375 205.46875 234.714844 205.761719 C 234.566406 206.042969 234.421875 206.308594 234.277344 206.570312 C 233.792969 207.382812 233.253906 208.160156 232.609375 208.824219 C 232.535156 208.882812 232.476562 208.941406 232.417969 209 C 231.761719 209.632812 231.03125 210.164062 230.242188 210.632812 C 229.949219 210.796875 229.671875 210.957031 229.378906 211.105469 C 229.132812 211.222656 228.882812 211.324219 228.636719 211.429688 C 228.226562 211.589844 227.800781 211.707031 227.363281 211.824219 C 227.027344 211.898438 226.675781 211.988281 226.328125 212.03125 C 225.976562 212.089844 225.609375 212.121094 225.257812 212.132812 C 224.835938 212.164062 224.425781 212.164062 224.003906 212.148438 C 223.492188 212.121094 222.996094 212.089844 222.511719 212.003906 C 222.4375 211.972656 222.367188 211.957031 222.292969 211.945312 C 222.234375 211.945312 222.191406 211.914062 222.148438 211.914062 C 221.605469 211.796875 221.078125 211.621094 220.570312 211.414062 L 220.453125 211.371094 C 220.378906 211.355469 220.335938 211.324219 220.320312 211.324219 C 216.171875 209.484375 213.394531 205.042969 213.394531 200.273438 L 213.394531 198.582031 C 215.789062 195.625 217.132812 191.871094 217.132812 188.058594 L 217.132812 184.527344 C 219.488281 185.351562 221.984375 185.835938 224.617188 185.835938 Z M 224.617188 121.792969 C 227.816406 121.792969 230.535156 123.835938 231.601562 126.691406 C 229.410156 125.972656 227.058594 125.558594 224.617188 125.558594 C 222.175781 125.558594 219.824219 125.972656 217.632812 126.691406 C 218.699219 123.835938 221.417969 121.792969 224.617188 121.792969 Z M 224.617188 133.09375 C 230.753906 133.09375 236.015625 136.832031 238.324219 142.160156 C 236.144531 141.171875 233.71875 140.628906 231.222656 140.628906 L 218.011719 140.628906 C 215.511719 140.628906 213.085938 141.171875 210.910156 142.160156 C 213.21875 136.832031 218.480469 133.09375 224.617188 133.09375 Z M 224.617188 178.300781 C 216.359375 178.300781 209.652344 171.546875 209.652344 163.234375 L 209.652344 153.035156 C 211.40625 150.046875 214.519531 148.164062 218.011719 148.164062 L 231.222656 148.164062 C 234.714844 148.164062 237.828125 150.046875 239.582031 153.035156 L 239.582031 163.234375 C 239.582031 171.546875 232.871094 178.300781 224.617188 178.300781 Z M 335.296875 273.191406 C 334.316406 272.484375 333.0625 272.292969 331.921875 272.675781 L 321.28125 276.253906 L 308.46875 276.253906 L 288.023438 255.664062 L 282.574219 211.632812 C 281.957031 206.601562 279.519531 201.964844 275.734375 198.582031 C 271.976562 195.226562 267.113281 193.371094 262.027344 193.371094 L 241.332031 193.371094 C 240.222656 191.828125 239.582031 189.972656 239.582031 188.058594 L 239.582031 180.039062 C 244.15625 175.890625 247.0625 169.914062 247.0625 163.234375 L 247.0625 148.164062 C 247.0625 141.421875 244.097656 135.375 239.433594 131.226562 C 239.507812 130.605469 239.582031 129.960938 239.582031 129.328125 C 239.582031 121.011719 232.871094 114.257812 224.617188 114.257812 C 216.359375 114.257812 209.652344 121.011719 209.652344 129.328125 C 209.652344 129.960938 209.726562 130.605469 209.796875 131.226562 C 205.136719 135.375 202.171875 141.421875 202.171875 148.164062 L 202.171875 163.234375 C 202.171875 169.914062 205.078125 175.890625 209.652344 180.039062 L 209.652344 188.058594 C 209.652344 189.972656 209.007812 191.828125 207.898438 193.371094 L 187.207031 193.371094 C 182.121094 193.371094 177.253906 195.226562 173.5 198.582031 C 169.714844 201.964844 167.273438 206.601562 166.660156 211.621094 L 161.210938 255.664062 L 140.765625 276.253906 L 127.964844 276.253906 L 117.3125 272.675781 C 116.171875 272.292969 114.914062 272.484375 113.9375 273.191406 C 112.972656 273.914062 112.386719 275.046875 112.386719 276.253906 L 112.386719 291.324219 C 112.386719 292.75 113.191406 294.042969 114.449219 294.691406 L 119.664062 297.3125 C 116.523438 300.210938 114.226562 303.992188 113.132812 308.277344 C 113.015625 308.703125 112.871094 309.113281 112.78125 309.570312 C 112.664062 310.203125 112.589844 310.835938 112.488281 311.617188 C 112.445312 311.96875 112.386719 312.453125 112.417969 313.042969 C 112.417969 313.132812 112.417969 313.207031 112.417969 313.292969 C 112.417969 313.5 112.386719 313.71875 112.386719 313.925781 C 112.386719 314.25 112.417969 314.558594 112.429688 314.867188 C 112.445312 315.148438 112.460938 315.414062 112.476562 315.664062 C 112.519531 316.191406 112.578125 316.691406 112.648438 317.195312 C 112.695312 317.445312 112.707031 317.679688 112.765625 317.929688 C 112.855469 318.472656 112.972656 319.003906 113.117188 319.535156 C 113.160156 319.722656 113.207031 319.914062 113.265625 320.105469 C 113.425781 320.679688 113.613281 321.242188 113.820312 321.800781 C 113.878906 321.945312 113.921875 322.09375 113.980469 322.242188 C 114.214844 322.816406 114.460938 323.375 114.738281 323.933594 C 114.796875 324.066406 114.855469 324.199219 114.914062 324.316406 C 115.191406 324.859375 115.5 325.390625 115.820312 325.890625 C 115.910156 326.039062 115.996094 326.183594 116.085938 326.316406 C 116.390625 326.789062 116.710938 327.230469 117.0625 327.671875 C 117.179688 327.847656 117.3125 328.023438 117.457031 328.199219 C 117.707031 328.523438 118 328.820312 118.261719 329.113281 C 118.496094 329.378906 118.699219 329.644531 118.949219 329.894531 C 119.285156 330.246094 119.636719 330.554688 119.984375 330.863281 L 120.554688 331.378906 C 120.644531 331.4375 120.730469 331.484375 120.804688 331.554688 C 121.621094 332.203125 122.484375 332.792969 123.375 333.324219 C 123.566406 333.441406 123.742188 333.558594 123.929688 333.675781 C 124.894531 334.207031 125.90625 334.660156 126.941406 335.058594 C 127.132812 335.132812 127.320312 335.207031 127.511719 335.28125 C 128.5625 335.632812 129.660156 335.941406 130.785156 336.132812 C 130.945312 336.175781 131.121094 336.191406 131.28125 336.222656 C 132.449219 336.414062 133.621094 336.53125 134.832031 336.53125 L 314.398438 336.53125 C 315.1875 336.53125 315.964844 336.484375 316.738281 336.414062 C 316.796875 336.398438 316.839844 336.382812 316.882812 336.382812 C 317.613281 336.296875 318.332031 336.191406 319.03125 336.03125 C 319.121094 336.015625 319.191406 336 319.25 335.984375 C 319.9375 335.824219 320.597656 335.664062 321.253906 335.441406 C 321.386719 335.398438 321.53125 335.339844 321.664062 335.292969 C 322.234375 335.089844 322.800781 334.882812 323.359375 334.648438 C 323.578125 334.542969 323.796875 334.425781 324.015625 334.324219 C 324.453125 334.101562 324.90625 333.894531 325.332031 333.644531 C 325.621094 333.484375 325.914062 333.308594 326.191406 333.117188 C 326.527344 332.910156 326.863281 332.703125 327.1875 332.484375 C 327.523438 332.25 327.84375 331.996094 328.152344 331.746094 C 328.414062 331.542969 328.675781 331.351562 328.925781 331.128906 C 329.246094 330.851562 329.570312 330.554688 329.90625 330.246094 C 330.109375 330.027344 330.328125 329.820312 330.53125 329.613281 C 330.695312 329.4375 330.867188 329.304688 331.015625 329.128906 C 331.160156 328.953125 331.292969 328.773438 331.4375 328.597656 C 331.628906 328.363281 331.820312 328.128906 332.023438 327.890625 C 332.285156 327.554688 332.535156 327.199219 332.785156 326.847656 C 332.988281 326.566406 333.179688 326.257812 333.367188 325.964844 C 333.558594 325.640625 333.761719 325.332031 333.9375 325.007812 C 334.171875 324.59375 334.375 324.183594 334.582031 323.773438 C 334.683594 323.519531 334.816406 323.300781 334.917969 323.050781 C 335.164062 322.492188 335.371094 321.933594 335.574219 321.359375 C 335.617188 321.226562 335.675781 321.109375 335.71875 320.976562 C 335.941406 320.285156 336.128906 319.59375 336.277344 318.886719 C 336.289062 318.839844 336.304688 318.796875 336.320312 318.769531 C 336.480469 318.03125 336.597656 317.296875 336.683594 316.546875 C 336.683594 316.515625 336.699219 316.488281 336.699219 316.441406 C 336.773438 315.796875 336.800781 315.132812 336.816406 314.472656 C 336.816406 314.324219 336.832031 314.191406 336.832031 314.058594 C 336.832031 314.015625 336.847656 313.96875 336.847656 313.925781 C 336.847656 313.398438 336.800781 312.882812 336.757812 312.351562 C 336.757812 312.144531 336.757812 311.925781 336.742188 311.71875 C 336.742188 311.703125 336.730469 311.691406 336.730469 311.660156 C 336.714844 311.410156 336.65625 311.175781 336.625 310.9375 C 336.554688 310.453125 336.496094 309.984375 336.40625 309.511719 C 335.472656 304.730469 333.003906 300.492188 329.570312 297.3125 L 334.785156 294.691406 C 336.042969 294.042969 336.847656 292.75 336.847656 291.324219 L 336.847656 276.253906 C 336.847656 275.046875 336.261719 273.914062 335.296875 273.191406 ","fill-opacity":"1","fill-rule":"nonzero"})})]})})}),e?D("nav",{className:"flex flex-grow",children:ue("ul",{className:"flex flex-grow justify-end flex-wrap items-center",children:[D("li",{children:D(xa,{to:"/",className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",onClick:t,children:"Sign Out"})}),D("li",{children:ue(xa,{to:"/profile",className:"btn-sm text-gray-200 bg-gray-900 hover:bg-gray-800 ml-3",children:[D("span",{children:"Profile"}),D("svg",{className:"w-3 h-3 fill-current text-gray-400 flex-shrink-0 ml-2 -mr-1",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.707 5.293L7 .586 5.586 2l3 3H0v2h8.586l-3 3L7 11.414l4.707-4.707a1 1 0 000-1.414z",fillRule:"nonzero"})})]})})]})}):D("nav",{className:"flex flex-grow",children:ue("ul",{className:"flex flex-grow justify-end flex-wrap items-center",children:[D("li",{children:D(xa,{to:"/signin",className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",children:"Sign in"})}),D("li",{children:ue(xa,{to:"/signup",className:"btn-sm text-gray-200 bg-gray-900 hover:bg-gray-800 ml-3",children:[D("span",{children:"Sign up"}),D("svg",{className:"w-3 h-3 fill-current text-gray-400 flex-shrink-0 ml-2 -mr-1",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.707 5.293L7 .586 5.586 2l3 3H0v2h8.586l-3 3L7 11.414l4.707-4.707a1 1 0 000-1.414z",fillRule:"nonzero"})})]})})]})})]})})})}function Vue(){return ue("section",{className:"relative",children:[D("div",{className:"absolute left-1/2 transform -translate-x-1/2 bottom-0 pointer-events-none","aria-hidden":"true",children:ue("svg",{width:"1360",height:"578",viewBox:"0 0 1360 578",xmlns:"http://www.w3.org/2000/svg",children:[D("defs",{children:ue("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"illustration-01",children:[D("stop",{stopColor:"#FFF",offset:"0%"}),D("stop",{stopColor:"#EAEAEA",offset:"77.402%"}),D("stop",{stopColor:"#DFDFDF",offset:"100%"})]})}),ue("g",{fill:"url(#illustration-01)",fillRule:"evenodd",children:[D("circle",{cx:"1232",cy:"128",r:"128"}),D("circle",{cx:"155",cy:"443",r:"64"})]})]})}),D("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:D("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:ue("div",{className:"text-center pb-12 md:pb-16",children:[D("h1",{className:"text-5xl md:text-6xl font-extrabold leading-tighter tracking-tighter mb-4 ","data-aos":"zoom-y-out",children:D("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-400",children:"AasanAI"})}),ue("div",{className:"max-w-3xl mx-auto",children:[D("p",{className:"text-xl text-gray-600 mb-8","data-aos":"zoom-y-out","data-aos-delay":"150",children:"Your Personal Yoga Trainer"}),ue("div",{className:"max-w-xs mx-auto sm:max-w-none sm:flex sm:justify-center","data-aos":"zoom-y-out","data-aos-delay":"300",children:[D("div",{children:D(xa,{className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full mb-4 sm:w-auto sm:mb-0",to:"/workout",children:"Start Workout"})}),D("div",{children:D(xa,{className:"btn text-white bg-yellow-700 hover:bg-yellow-800 w-full sm:w-auto sm:ml-4",to:"/tutorial",children:"Learn How To Use"})})]})]})]})})})]})}const B9="/assets/aasanai.9b879a1c.gif";function Uue(){return ue("section",{className:"relative",children:[D("div",{className:"absolute inset-0 bg-gray-100 pointer-events-none mb-16","aria-hidden":"true"}),D("div",{className:"absolute left-0 right-0 m-auto w-px p-px h-20 bg-gray-200 transform -translate-y-1/2"}),D("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6",children:ue("div",{className:"pt-12 md:pt-20",children:[ue("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-16",children:[D("h1",{className:"h2 mb-4",children:"Perform Yogasanas With AI"}),D("p",{className:"text-xl text-gray-600",children:"AasanAI is a Deep Learning-powered Web and Mobile application to help you during your yoga workouts"})]}),ue("div",{className:"md:grid md:grid-cols-12 md:gap-6",children:[ue("div",{className:"max-w-xl md:max-w-none md:w-full mx-auto md:col-span-7 lg:col-span-6 md:mt-6","data-aos":"fade-right",children:[ue("div",{className:"md:pr-4 lg:pr-12 xl:pr-16 mb-8",children:[D("h3",{className:"h3 mb-3",children:"An ecosystem for Yogasanas"}),D("p",{className:"text-xl text-gray-600",children:"AasanAI detects your Yogasana position and helps you perfect your posture by getting visual feedback"})]}),ue("div",{className:"mb-8 md:mb-0",children:[ue("a",{className:"flex items-center text-lg p-5 rounded border transition duration-300 ease-in-out mb-3 bg-white shadow-md border-gray-200 hover:shadow-lg",children:[ue("div",{children:[D("div",{className:"font-bold leading-snug tracking-tight mb-1",children:"Timer for each Aasana"}),D("div",{className:"text-gray-600",children:"A timer which keeps a track of your current and best times helps you gradually progress in your workout"})]}),D("div",{className:"flex justify-center items-center w-8 h-8 bg-white rounded-full shadow flex-shrink-0 ml-3",children:D("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.953 4.29a.5.5 0 00-.454-.292H6.14L6.984.62A.5.5 0 006.12.173l-6 7a.5.5 0 00.379.825h5.359l-.844 3.38a.5.5 0 00.864.445l6-7a.5.5 0 00.075-.534z"})})})]}),ue("a",{className:"flex items-center text-lg p-5 rounded border transition duration-300 ease-in-out mb-3 bg-white shadow-md border-gray-200 hover:shadow-lg",children:[ue("div",{children:[D("div",{className:"font-bold leading-snug tracking-tight mb-1",children:"Maintain your workout history"}),D("div",{className:"text-gray-600",children:"AasanAI maintains a history of your Yoga workout sessions thereby allowing you to improve gradually"})]}),D("div",{className:"flex justify-center items-center w-8 h-8 bg-white rounded-full shadow flex-shrink-0 ml-3",children:D("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.854.146a.5.5 0 00-.525-.116l-11 4a.5.5 0 00-.015.934l4.8 1.921 1.921 4.8A.5.5 0 007.5 12h.008a.5.5 0 00.462-.329l4-11a.5.5 0 00-.116-.525z",fillRule:"nonzero"})})})]}),ue("a",{className:"flex items-center text-lg p-5 rounded border transition duration-300 ease-in-out mb-3 bg-white shadow-md border-gray-200 hover:shadow-lg",children:[ue("div",{children:[D("div",{className:"font-bold leading-snug tracking-tight mb-1",children:"Participate in events and competitions"}),D("div",{className:"text-gray-600",children:"AasanAI aims to gamify this ecosystem to allow yoga events and competitions to take place virtually"})]}),D("div",{className:"flex justify-center items-center w-8 h-8 bg-white rounded-full shadow flex-shrink-0 ml-3",children:D("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.334 8.06a.5.5 0 00-.421-.237 6.023 6.023 0 01-5.905-6c0-.41.042-.82.125-1.221a.5.5 0 00-.614-.586 6 6 0 106.832 8.529.5.5 0 00-.017-.485z",fill:"#191919",fillRule:"nonzero"})})})]})]})]}),D("div",{className:"max-w-xl md:max-w-none md:w-full mx-auto md:col-span-5 lg:col-span-6 mb-8 md:mb-0 md:order-1","data-aos":"zoom-y-out",children:D("div",{className:"relative flex flex-col text-center lg:text-right",children:D("div",{className:"relative inline-flex flex-col",children:D("img",{className:"md:max-w-none mx-auto rounded mt-10",src:B9,width:"450",height:"462",alt:"AasanAI Logo GIF"})})})})]})]})})]})}function Wue(){return ue("section",{className:"relative",children:[D("div",{className:"absolute inset-0 top-1/2 md:mt-24 lg:mt-0 bg-gray-900 pointer-events-none","aria-hidden":"true"}),D("div",{className:"absolute left-0 right-0 bottom-0 m-auto w-px p-px h-20 bg-gray-200 transform translate-y-1/2"}),D("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6",children:ue("div",{className:"py-12 md:py-20",children:[ue("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-20",children:[D("h2",{className:"h2 mb-4",children:"How AasanAI works"}),D("p",{className:"text-xl text-gray-600",children:"An overview of the simple and user-friendly process you need to follow to get started"})]}),ue("div",{className:"max-w-sm mx-auto grid gap-6 md:grid-cols-2 lg:grid-cols-3 items-start md:max-w-2xl lg:max-w-none",children:[ue("div",{className:"relative flex flex-col items-center p-6 bg-white rounded shadow-xl",children:[D("svg",{className:"w-16 h-16 p-1 -mt-1 mb-2",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:ue("g",{fill:"none",fillRule:"evenodd",children:[D("rect",{className:"fill-current text-blue-600",width:"64",height:"64",rx:"32"}),ue("g",{strokeWidth:"2",children:[D("path",{className:"stroke-current text-blue-300",d:"M34.514 35.429l2.057 2.285h8M20.571 26.286h5.715l2.057 2.285"}),D("path",{className:"stroke-current text-white",d:"M20.571 37.714h5.715L36.57 26.286h8"}),D("path",{className:"stroke-current text-blue-300",strokeLinecap:"square",d:"M41.143 34.286l3.428 3.428-3.428 3.429"}),D("path",{className:"stroke-current text-white",strokeLinecap:"square",d:"M41.143 29.714l3.428-3.428-3.428-3.429"})]})]})}),D("h4",{className:"text-xl font-bold leading-snug tracking-tight mb-1",children:"Sign Up"}),D("p",{className:"text-gray-600 text-center",children:"Create an account and get yourself registered"})]}),ue("div",{className:"relative flex flex-col items-center p-6 bg-white rounded shadow-xl",children:[D("svg",{className:"w-16 h-16 p-1 -mt-1 mb-2",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:ue("g",{fill:"none",fillRule:"evenodd",children:[D("rect",{className:"fill-current text-blue-600",width:"64",height:"64",rx:"32"}),ue("g",{transform:"translate(22.857 19.429)",strokeWidth:"2",children:[D("path",{className:"stroke-current text-white",strokeLinecap:"square",d:"M12.571 4.571V0H0v25.143h12.571V20.57"}),D("path",{className:"stroke-current text-white",d:"M16 12.571h8"}),D("path",{className:"stroke-current text-white",strokeLinecap:"square",d:"M19.429 8L24 12.571l-4.571 4.572"}),D("circle",{className:"stroke-current text-blue-300",strokeLinecap:"square",cx:"12.571",cy:"12.571",r:"3.429"})]})]})}),D("h4",{className:"text-xl font-bold leading-snug tracking-tight mb-1",children:"Mobile App"}),D("p",{className:"text-gray-600 text-center",children:"Alternatively, you can also use our Android application"})]}),ue("div",{className:"relative flex flex-col items-center p-6 bg-white rounded shadow-xl",children:[D("svg",{className:"w-16 h-16 p-1 -mt-1 mb-2",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:ue("g",{fill:"none",fillRule:"evenodd",children:[D("rect",{className:"fill-current text-blue-600",width:"64",height:"64",rx:"32"}),ue("g",{strokeLinecap:"square",strokeWidth:"2",children:[D("path",{className:"stroke-current text-white",d:"M20.571 20.571h13.714v17.143H20.571z"}),D("path",{className:"stroke-current text-blue-300",d:"M38.858 26.993l6.397 1.73-4.473 16.549-13.24-3.58"})]})]})}),D("h4",{className:"text-xl font-bold leading-snug tracking-tight mb-1",children:"Tutorials"}),D("p",{className:"text-gray-600 text-center",children:"Follow the tutorials to get acquanited with AasanAI"})]}),ue("div",{className:"relative flex flex-col items-center p-6 bg-white rounded shadow-xl",children:[D("svg",{className:"w-16 h-16 p-1 -mt-1 mb-2",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:ue("g",{fill:"none",fillRule:"evenodd",children:[D("rect",{className:"fill-current text-blue-600",width:"64",height:"64",rx:"32"}),ue("g",{strokeWidth:"2",children:[D("path",{className:"stroke-current text-white",d:"M32 37.714A5.714 5.714 0 0037.714 32a5.714 5.714 0 005.715 5.714"}),D("path",{className:"stroke-current text-white",d:"M32 37.714a5.714 5.714 0 015.714 5.715 5.714 5.714 0 015.715-5.715M20.571 26.286a5.714 5.714 0 005.715-5.715A5.714 5.714 0 0032 26.286"}),D("path",{className:"stroke-current text-white",d:"M20.571 26.286A5.714 5.714 0 0126.286 32 5.714 5.714 0 0132 26.286"}),D("path",{className:"stroke-current text-blue-300",d:"M21.714 40h4.572M24 37.714v4.572M37.714 24h4.572M40 21.714v4.572",strokeLinecap:"square"})]})]})}),D("h4",{className:"text-xl font-bold leading-snug tracking-tight mb-1",children:"Workout"}),D("p",{className:"text-gray-600 text-center",children:"Start working out with the recommended Asanas"})]}),ue("div",{className:"relative flex flex-col items-center p-6 bg-white rounded shadow-xl",children:[D("svg",{className:"w-16 h-16 p-1 -mt-1 mb-2",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:ue("g",{fill:"none",fillRule:"evenodd",children:[D("rect",{className:"fill-current text-blue-600",width:"64",height:"64",rx:"32"}),ue("g",{strokeWidth:"2",transform:"translate(19.429 20.571)",children:[D("circle",{className:"stroke-current text-white",strokeLinecap:"square",cx:"12.571",cy:"12.571",r:"1.143"}),D("path",{className:"stroke-current text-white",d:"M19.153 23.267c3.59-2.213 5.99-6.169 5.99-10.696C25.143 5.63 19.514 0 12.57 0 5.63 0 0 5.629 0 12.571c0 4.527 2.4 8.483 5.99 10.696"}),D("path",{className:"stroke-current text-blue-300",d:"M16.161 18.406a6.848 6.848 0 003.268-5.835 6.857 6.857 0 00-6.858-6.857 6.857 6.857 0 00-6.857 6.857 6.848 6.848 0 003.268 5.835"})]})]})}),D("h4",{className:"text-xl font-bold leading-snug tracking-tight mb-1",children:"Review Workouts"}),D("p",{className:"text-gray-600 text-center",children:"Review your workout history regularly to keep a track of your progress"})]}),ue("div",{className:"relative flex flex-col items-center p-6 bg-white rounded shadow-xl",children:[D("svg",{className:"w-16 h-16 p-1 -mt-1 mb-2",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:ue("g",{fill:"none",fillRule:"evenodd",children:[D("rect",{className:"fill-current text-blue-600",width:"64",height:"64",rx:"32"}),ue("g",{strokeLinecap:"square",strokeWidth:"2",children:[D("path",{className:"stroke-current text-blue-300",d:"M38.826 22.504a9.128 9.128 0 00-13.291-.398M35.403 25.546a4.543 4.543 0 00-6.635-.207"}),D("path",{className:"stroke-current text-white",d:"M19.429 25.143A6.857 6.857 0 0126.286 32v1.189L28 37.143l-1.714.571V40A2.286 2.286 0 0124 42.286h-2.286v2.285M44.571 25.143A6.857 6.857 0 0037.714 32v1.189L36 37.143l1.714.571V40A2.286 2.286 0 0040 42.286h2.286v2.285"})]})]})}),D("h4",{className:"text-xl font-bold leading-snug tracking-tight mb-1",children:"Improve"}),D("p",{className:"text-gray-600 text-center",children:"Improve yourself & consult Yoga experts for further improvements"})]})]})]})})]})}function jue(){return D("section",{className:"relative",children:D("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:D("div",{className:"py-12 md:py-20",children:ue("div",{className:"max-w-3xl mx-auto text-center",children:[D("h2",{className:"h2 mb-4",children:"So, what are you waiting for?"}),D("p",{className:"text-xl text-gray-600","data-aos":"zoom-y-out",children:"Sign up and start your procrastinated Yoga workout!"})]})})})})}function Gue(){return D("footer",{children:D("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:ue("div",{className:"md:flex md:items-center md:justify-between py-4 md:py-8 border-t border-gray-200",children:[D("ul",{className:"flex mb-4 md:order-1 md:ml-4 md:mb-0"}),D("div",{className:"text-sm text-gray-600 mr-4",children:"Group 6 | Ananya Bangera | Archita Sehgal  | Grishma Barule | Avishkar Chavle"})]})})})}function Hue(){return ue("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[D(Ef,{}),ue("main",{className:"flex-grow",children:[D(Vue,{}),D(Uue,{}),D(Wue,{}),D(jue,{})]}),D(Gue,{})]})}function que(){let t=TE();Ob($c);const[e,n]=ae.exports.useState(""),[r,s]=ae.exports.useState(""),i=()=>{nse($c,e,r)};return ue("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[D(Ef,{}),D("main",{className:"flex-grow",children:D("section",{className:"bg-gradient-to-b from-gray-100 to-white",children:D("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:ue("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:[D("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-20",children:D("h1",{className:"h1",children:"Welcome back"})}),ue("div",{className:"max-w-sm mx-auto",children:[ue("form",{onSubmit:async a=>{a.preventDefault(),i(),t("/",{replace:!0})},children:[D("div",{className:"flex flex-wrap -mx-3 mb-4",children:ue("div",{className:"w-full px-3",children:[D("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"email",children:"Email"}),D("input",{id:"email",type:"email",className:"form-input w-full text-gray-800",placeholder:"Enter your email address",value:e,onChange:a=>{n(a.target.value)},required:!0})]})}),D("div",{className:"flex flex-wrap -mx-3 mb-4",children:ue("div",{className:"w-full px-3",children:[D("div",{className:"flex justify-between",children:D("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"password",children:"Password"})}),D("input",{id:"password",type:"password",className:"form-input w-full text-gray-800",placeholder:"Enter your password",value:r,onChange:a=>{s(a.target.value)},required:!0})]})}),D("div",{className:"flex flex-wrap -mx-3 mt-6",children:D("div",{className:"w-full px-3",children:D("button",{className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full",children:"Sign in"})})})]}),ue("div",{className:"text-gray-600 text-center mt-6",children:["Don\u2019t have an account?"," ",D(xa,{to:"/signup",className:"text-blue-600 hover:underline transition duration-150 ease-in-out",children:"Sign up"})]})]})]})})})})]})}function Kue(){let t=TE();const[e,n,r,s]=xie($c),[i,o]=ae.exports.useState(""),[a,l]=ae.exports.useState("");return ue("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[D(Ef,{}),D("main",{className:"flex-grow",children:D("section",{className:"bg-gradient-to-b from-gray-100 to-white",children:D("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:ue("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:[D("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-20",children:D("h1",{className:"h1",children:"Welcome. Start your way to a healthy lifestyle"})}),ue("div",{className:"max-w-sm mx-auto",children:[ue("form",{onSubmit:async c=>{c.preventDefault(),e(i,a),t("/",{replace:!0})},children:[D("div",{className:"flex flex-wrap -mx-3 mb-4",children:ue("div",{className:"w-full px-3",children:[ue("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"email",children:["Email ",D("span",{className:"text-red-600",children:"*"})]}),D("input",{id:"email",type:"email",className:"form-input w-full text-gray-800",placeholder:"Enter your email address",value:i,onChange:c=>{o(c.target.value)},required:!0})]})}),D("div",{className:"flex flex-wrap -mx-3 mb-4",children:ue("div",{className:"w-full px-3",children:[ue("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"password",children:["Password ",D("span",{className:"text-red-600",children:"*"})]}),D("input",{id:"password",type:"password",className:"form-input w-full text-gray-800",placeholder:"Enter your password",value:a,onChange:c=>{l(c.target.value)},required:!0})]})}),D("div",{className:"flex flex-wrap -mx-3 mt-6",children:D("div",{className:"w-full px-3",children:D("button",{className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full",children:"Sign up"})})})]}),ue("div",{className:"text-gray-600 text-center mt-6",children:["Already have an account?"," ",D(xa,{to:"/signin",className:"text-blue-600 hover:underline transition duration-150 ease-in-out",children:"Sign in"})]})]})]})})})})]})}var z9={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],s=0;s<arguments.length;s++){var i=arguments[s];if(!!i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&r.push(a)}}else if(o==="object")if(i.toString===Object.prototype.toString)for(var l in i)e.call(i,l)&&i[l]&&r.push(l);else r.push(i.toString())}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(z9);const bn=z9.exports;function Xue(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ii=Xue;function Cv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cv=function(n){return typeof n}:Cv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cv(t)}var Yue=["viewBox","children"],Que=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","type","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],D_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Gt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(ae.exports.isValidElement(e)&&(s=e.props),!Ii(s))return null;var i={};return Object.keys(s).forEach(function(o){(Que.includes(o)||r&&Yue.includes(o)||n&&D_.includes(o))&&(i[o]=s[o])}),i},U1=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(ae.exports.isValidElement(e)&&(r=e.props),!Ii(r))return null;var s={};return Object.keys(r).forEach(function(i){D_.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},Jue=function(e,n,r){return function(s){return e(n,r,s),null}},V9=function(e,n,r){if(!Ii(e)||Cv(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];D_.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Jue(o,n,r))}),s};function Zue(t,e){if(t==null)return{};var n=ece(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function ece(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uT(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,i=t.className,o=t.style,a=Zue(t,["children","width","height","viewBox","className","style"]),l=s||{width:n,height:r,x:0,y:0},u=bn("recharts-surface",i);return D("svg",{...Gt(a,!0,!0),className:u,width:n,height:r,style:o,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height),version:"1.1",children:e})}function tce(t,e){if(t==null)return{};var n=nce(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function nce(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Zs(t){var e=t.children,n=t.className,r=tce(t,["children","className"]),s=bn("recharts-layer",n);return D("g",{className:s,...Gt(r,!0),children:e})}var rce=typeof Dt=="object"&&Dt&&Dt.Object===Object&&Dt,U9=rce,sce=U9,ice=typeof self=="object"&&self&&self.Object===Object&&self,oce=sce||ice||Function("return this")(),ca=oce,ace=ca,lce=ace.Symbol,Ig=lce,FM=Ig,W9=Object.prototype,uce=W9.hasOwnProperty,cce=W9.toString,ep=FM?FM.toStringTag:void 0;function hce(t){var e=uce.call(t,ep),n=t[ep];try{t[ep]=void 0;var r=!0}catch{}var s=cce.call(t);return r&&(e?t[ep]=n:delete t[ep]),s}var fce=hce,dce=Object.prototype,pce=dce.toString;function mce(t){return pce.call(t)}var gce=mce,LM=Ig,yce=fce,vce=gce,xce="[object Null]",bce="[object Undefined]",BM=LM?LM.toStringTag:void 0;function wce(t){return t==null?t===void 0?bce:xce:BM&&BM in Object(t)?yce(t):vce(t)}var lu=wce,Sce=lu,kce=Ii,Ice="[object AsyncFunction]",Cce="[object Function]",Tce="[object GeneratorFunction]",$ce="[object Proxy]";function Nce(t){if(!kce(t))return!1;var e=Sce(t);return e==Cce||e==Tce||e==Ice||e==$ce}var Ze=Nce;function Ece(){this.__data__=[],this.size=0}var _ce=Ece;function Ace(t,e){return t===e||t!==t&&e!==e}var P_=Ace,Oce=P_;function Rce(t,e){for(var n=t.length;n--;)if(Oce(t[n][0],e))return n;return-1}var nw=Rce,Dce=nw,Pce=Array.prototype,Mce=Pce.splice;function Fce(t){var e=this.__data__,n=Dce(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Mce.call(e,n,1),--this.size,!0}var Lce=Fce,Bce=nw;function zce(t){var e=this.__data__,n=Bce(e,t);return n<0?void 0:e[n][1]}var Vce=zce,Uce=nw;function Wce(t){return Uce(this.__data__,t)>-1}var jce=Wce,Gce=nw;function Hce(t,e){var n=this.__data__,r=Gce(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var qce=Hce,Kce=_ce,Xce=Lce,Yce=Vce,Qce=jce,Jce=qce;function md(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}md.prototype.clear=Kce;md.prototype.delete=Xce;md.prototype.get=Yce;md.prototype.has=Qce;md.prototype.set=Jce;var rw=md,Zce=rw;function ehe(){this.__data__=new Zce,this.size=0}var the=ehe;function nhe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var rhe=nhe;function she(t){return this.__data__.get(t)}var ihe=she;function ohe(t){return this.__data__.has(t)}var ahe=ohe,lhe=ca,uhe=lhe["__core-js_shared__"],che=uhe,Ak=che,zM=function(){var t=/[^.]+$/.exec(Ak&&Ak.keys&&Ak.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function hhe(t){return!!zM&&zM in t}var fhe=hhe,dhe=Function.prototype,phe=dhe.toString;function mhe(t){if(t!=null){try{return phe.call(t)}catch{}try{return t+""}catch{}}return""}var j9=mhe,ghe=Ze,yhe=fhe,vhe=Ii,xhe=j9,bhe=/[\\^$.*+?()[\]{}|]/g,whe=/^\[object .+?Constructor\]$/,She=Function.prototype,khe=Object.prototype,Ihe=She.toString,Che=khe.hasOwnProperty,The=RegExp("^"+Ihe.call(Che).replace(bhe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $he(t){if(!vhe(t)||yhe(t))return!1;var e=ghe(t)?The:whe;return e.test(xhe(t))}var Nhe=$he;function Ehe(t,e){return t==null?void 0:t[e]}var _he=Ehe,Ahe=Nhe,Ohe=_he;function Rhe(t,e){var n=Ohe(t,e);return Ahe(n)?n:void 0}var Qc=Rhe,Dhe=Qc,Phe=ca,Mhe=Dhe(Phe,"Map"),M_=Mhe,Fhe=Qc,Lhe=Fhe(Object,"create"),sw=Lhe,VM=sw;function Bhe(){this.__data__=VM?VM(null):{},this.size=0}var zhe=Bhe;function Vhe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Uhe=Vhe,Whe=sw,jhe="__lodash_hash_undefined__",Ghe=Object.prototype,Hhe=Ghe.hasOwnProperty;function qhe(t){var e=this.__data__;if(Whe){var n=e[t];return n===jhe?void 0:n}return Hhe.call(e,t)?e[t]:void 0}var Khe=qhe,Xhe=sw,Yhe=Object.prototype,Qhe=Yhe.hasOwnProperty;function Jhe(t){var e=this.__data__;return Xhe?e[t]!==void 0:Qhe.call(e,t)}var Zhe=Jhe,efe=sw,tfe="__lodash_hash_undefined__";function nfe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=efe&&e===void 0?tfe:e,this}var rfe=nfe,sfe=zhe,ife=Uhe,ofe=Khe,afe=Zhe,lfe=rfe;function gd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gd.prototype.clear=sfe;gd.prototype.delete=ife;gd.prototype.get=ofe;gd.prototype.has=afe;gd.prototype.set=lfe;var ufe=gd,UM=ufe,cfe=rw,hfe=M_;function ffe(){this.size=0,this.__data__={hash:new UM,map:new(hfe||cfe),string:new UM}}var dfe=ffe;function pfe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var mfe=pfe,gfe=mfe;function yfe(t,e){var n=t.__data__;return gfe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var iw=yfe,vfe=iw;function xfe(t){var e=vfe(this,t).delete(t);return this.size-=e?1:0,e}var bfe=xfe,wfe=iw;function Sfe(t){return wfe(this,t).get(t)}var kfe=Sfe,Ife=iw;function Cfe(t){return Ife(this,t).has(t)}var Tfe=Cfe,$fe=iw;function Nfe(t,e){var n=$fe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Efe=Nfe,_fe=dfe,Afe=bfe,Ofe=kfe,Rfe=Tfe,Dfe=Efe;function yd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}yd.prototype.clear=_fe;yd.prototype.delete=Afe;yd.prototype.get=Ofe;yd.prototype.has=Rfe;yd.prototype.set=Dfe;var F_=yd,Pfe=rw,Mfe=M_,Ffe=F_,Lfe=200;function Bfe(t,e){var n=this.__data__;if(n instanceof Pfe){var r=n.__data__;if(!Mfe||r.length<Lfe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ffe(r)}return n.set(t,e),this.size=n.size,this}var zfe=Bfe,Vfe=rw,Ufe=the,Wfe=rhe,jfe=ihe,Gfe=ahe,Hfe=zfe;function vd(t){var e=this.__data__=new Vfe(t);this.size=e.size}vd.prototype.clear=Ufe;vd.prototype.delete=Wfe;vd.prototype.get=jfe;vd.prototype.has=Gfe;vd.prototype.set=Hfe;var G9=vd,qfe="__lodash_hash_undefined__";function Kfe(t){return this.__data__.set(t,qfe),this}var Xfe=Kfe;function Yfe(t){return this.__data__.has(t)}var Qfe=Yfe,Jfe=F_,Zfe=Xfe,ede=Qfe;function W1(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Jfe;++e<n;)this.add(t[e])}W1.prototype.add=W1.prototype.push=Zfe;W1.prototype.has=ede;var H9=W1;function tde(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var q9=tde;function nde(t,e){return t.has(e)}var K9=nde,rde=H9,sde=q9,ide=K9,ode=1,ade=2;function lde(t,e,n,r,s,i){var o=n&ode,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=i.get(t),c=i.get(e);if(u&&c)return u==e&&c==t;var h=-1,f=!0,d=n&ade?new rde:void 0;for(i.set(t,e),i.set(e,t);++h<a;){var p=t[h],m=e[h];if(r)var g=o?r(m,p,h,e,t,i):r(p,m,h,t,e,i);if(g!==void 0){if(g)continue;f=!1;break}if(d){if(!sde(e,function(y,v){if(!ide(d,v)&&(p===y||s(p,y,n,r,i)))return d.push(v)})){f=!1;break}}else if(!(p===m||s(p,m,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}var X9=lde,ude=ca,cde=ude.Uint8Array,hde=cde;function fde(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var dde=fde;function pde(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var L_=pde,WM=Ig,jM=hde,mde=P_,gde=X9,yde=dde,vde=L_,xde=1,bde=2,wde="[object Boolean]",Sde="[object Date]",kde="[object Error]",Ide="[object Map]",Cde="[object Number]",Tde="[object RegExp]",$de="[object Set]",Nde="[object String]",Ede="[object Symbol]",_de="[object ArrayBuffer]",Ade="[object DataView]",GM=WM?WM.prototype:void 0,Ok=GM?GM.valueOf:void 0;function Ode(t,e,n,r,s,i,o){switch(n){case Ade:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _de:return!(t.byteLength!=e.byteLength||!i(new jM(t),new jM(e)));case wde:case Sde:case Cde:return mde(+t,+e);case kde:return t.name==e.name&&t.message==e.message;case Tde:case Nde:return t==e+"";case Ide:var a=yde;case $de:var l=r&xde;if(a||(a=vde),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=bde,o.set(t,e);var c=gde(a(t),a(e),r,s,i,o);return o.delete(t),c;case Ede:if(Ok)return Ok.call(t)==Ok.call(e)}return!1}var Rde=Ode;function Dde(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Y9=Dde,Pde=Array.isArray,Ht=Pde,Mde=Y9,Fde=Ht;function Lde(t,e,n){var r=e(t);return Fde(t)?r:Mde(r,n(t))}var Bde=Lde;function zde(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var Vde=zde;function Ude(){return[]}var Wde=Ude,jde=Vde,Gde=Wde,Hde=Object.prototype,qde=Hde.propertyIsEnumerable,HM=Object.getOwnPropertySymbols,Kde=HM?function(t){return t==null?[]:(t=Object(t),jde(HM(t),function(e){return qde.call(t,e)}))}:Gde,Xde=Kde;function Yde(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Qde=Yde;function Jde(t){return t!=null&&typeof t=="object"}var uu=Jde,Zde=lu,epe=uu,tpe="[object Arguments]";function npe(t){return epe(t)&&Zde(t)==tpe}var rpe=npe,qM=rpe,spe=uu,Q9=Object.prototype,ipe=Q9.hasOwnProperty,ope=Q9.propertyIsEnumerable,ape=qM(function(){return arguments}())?qM:function(t){return spe(t)&&ipe.call(t,"callee")&&!ope.call(t,"callee")},B_=ape,j1={exports:{}};function lpe(){return!1}var upe=lpe;(function(t,e){var n=ca,r=upe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(j1,j1.exports);var cpe=9007199254740991,hpe=/^(?:0|[1-9]\d*)$/;function fpe(t,e){var n=typeof t;return e=e==null?cpe:e,!!e&&(n=="number"||n!="symbol"&&hpe.test(t))&&t>-1&&t%1==0&&t<e}var z_=fpe,dpe=9007199254740991;function ppe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=dpe}var V_=ppe,mpe=lu,gpe=V_,ype=uu,vpe="[object Arguments]",xpe="[object Array]",bpe="[object Boolean]",wpe="[object Date]",Spe="[object Error]",kpe="[object Function]",Ipe="[object Map]",Cpe="[object Number]",Tpe="[object Object]",$pe="[object RegExp]",Npe="[object Set]",Epe="[object String]",_pe="[object WeakMap]",Ape="[object ArrayBuffer]",Ope="[object DataView]",Rpe="[object Float32Array]",Dpe="[object Float64Array]",Ppe="[object Int8Array]",Mpe="[object Int16Array]",Fpe="[object Int32Array]",Lpe="[object Uint8Array]",Bpe="[object Uint8ClampedArray]",zpe="[object Uint16Array]",Vpe="[object Uint32Array]",gn={};gn[Rpe]=gn[Dpe]=gn[Ppe]=gn[Mpe]=gn[Fpe]=gn[Lpe]=gn[Bpe]=gn[zpe]=gn[Vpe]=!0;gn[vpe]=gn[xpe]=gn[Ape]=gn[bpe]=gn[Ope]=gn[wpe]=gn[Spe]=gn[kpe]=gn[Ipe]=gn[Cpe]=gn[Tpe]=gn[$pe]=gn[Npe]=gn[Epe]=gn[_pe]=!1;function Upe(t){return ype(t)&&gpe(t.length)&&!!gn[mpe(t)]}var Wpe=Upe;function jpe(t){return function(e){return t(e)}}var J9=jpe,cT={exports:{}};(function(t,e){var n=U9,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(cT,cT.exports);var Gpe=Wpe,Hpe=J9,KM=cT.exports,XM=KM&&KM.isTypedArray,qpe=XM?Hpe(XM):Gpe,Z9=qpe,Kpe=Qde,Xpe=B_,Ype=Ht,Qpe=j1.exports,Jpe=z_,Zpe=Z9,eme=Object.prototype,tme=eme.hasOwnProperty;function nme(t,e){var n=Ype(t),r=!n&&Xpe(t),s=!n&&!r&&Qpe(t),i=!n&&!r&&!s&&Zpe(t),o=n||r||s||i,a=o?Kpe(t.length,String):[],l=a.length;for(var u in t)(e||tme.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Jpe(u,l)))&&a.push(u);return a}var rme=nme,sme=Object.prototype;function ime(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||sme;return t===n}var ome=ime;function ame(t,e){return function(n){return t(e(n))}}var lme=ame,ume=lme,cme=ume(Object.keys,Object),hme=cme,fme=ome,dme=hme,pme=Object.prototype,mme=pme.hasOwnProperty;function gme(t){if(!fme(t))return dme(t);var e=[];for(var n in Object(t))mme.call(t,n)&&n!="constructor"&&e.push(n);return e}var yme=gme,vme=Ze,xme=V_;function bme(t){return t!=null&&xme(t.length)&&!vme(t)}var Cg=bme,wme=rme,Sme=yme,kme=Cg;function Ime(t){return kme(t)?wme(t):Sme(t)}var ow=Ime,Cme=Bde,Tme=Xde,$me=ow;function Nme(t){return Cme(t,$me,Tme)}var Eme=Nme,YM=Eme,_me=1,Ame=Object.prototype,Ome=Ame.hasOwnProperty;function Rme(t,e,n,r,s,i){var o=n&_me,a=YM(t),l=a.length,u=YM(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:Ome.call(e,f)))return!1}var d=i.get(t),p=i.get(e);if(d&&p)return d==e&&p==t;var m=!0;i.set(t,e),i.set(e,t);for(var g=o;++h<l;){f=a[h];var y=t[f],v=e[f];if(r)var b=o?r(v,y,f,e,t,i):r(y,v,f,t,e,i);if(!(b===void 0?y===v||s(y,v,n,r,i):b)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(m=!1)}return i.delete(t),i.delete(e),m}var Dme=Rme,Pme=Qc,Mme=ca,Fme=Pme(Mme,"DataView"),Lme=Fme,Bme=Qc,zme=ca,Vme=Bme(zme,"Promise"),Ume=Vme,Wme=Qc,jme=ca,Gme=Wme(jme,"Set"),eW=Gme,Hme=Qc,qme=ca,Kme=Hme(qme,"WeakMap"),Xme=Kme,hT=Lme,fT=M_,dT=Ume,pT=eW,mT=Xme,tW=lu,xd=j9,QM="[object Map]",Yme="[object Object]",JM="[object Promise]",ZM="[object Set]",eF="[object WeakMap]",tF="[object DataView]",Qme=xd(hT),Jme=xd(fT),Zme=xd(dT),ege=xd(pT),tge=xd(mT),Du=tW;(hT&&Du(new hT(new ArrayBuffer(1)))!=tF||fT&&Du(new fT)!=QM||dT&&Du(dT.resolve())!=JM||pT&&Du(new pT)!=ZM||mT&&Du(new mT)!=eF)&&(Du=function(t){var e=tW(t),n=e==Yme?t.constructor:void 0,r=n?xd(n):"";if(r)switch(r){case Qme:return tF;case Jme:return QM;case Zme:return JM;case ege:return ZM;case tge:return eF}return e});var nge=Du,Rk=G9,rge=X9,sge=Rde,ige=Dme,nF=nge,rF=Ht,sF=j1.exports,oge=Z9,age=1,iF="[object Arguments]",oF="[object Array]",R0="[object Object]",lge=Object.prototype,aF=lge.hasOwnProperty;function uge(t,e,n,r,s,i){var o=rF(t),a=rF(e),l=o?oF:nF(t),u=a?oF:nF(e);l=l==iF?R0:l,u=u==iF?R0:u;var c=l==R0,h=u==R0,f=l==u;if(f&&sF(t)){if(!sF(e))return!1;o=!0,c=!1}if(f&&!c)return i||(i=new Rk),o||oge(t)?rge(t,e,n,r,s,i):sge(t,e,l,n,r,s,i);if(!(n&age)){var d=c&&aF.call(t,"__wrapped__"),p=h&&aF.call(e,"__wrapped__");if(d||p){var m=d?t.value():t,g=p?e.value():e;return i||(i=new Rk),s(m,g,n,r,i)}}return f?(i||(i=new Rk),ige(t,e,n,r,s,i)):!1}var cge=uge,hge=cge,lF=uu;function nW(t,e,n,r,s){return t===e?!0:t==null||e==null||!lF(t)&&!lF(e)?t!==t&&e!==e:hge(t,e,n,r,nW,s)}var U_=nW,fge=G9,dge=U_,pge=1,mge=2;function gge(t,e,n,r){var s=n.length,i=s,o=!r;if(t==null)return!i;for(t=Object(t);s--;){var a=n[s];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<i;){a=n[s];var l=a[0],u=t[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var h=new fge;if(r)var f=r(u,c,l,t,e,h);if(!(f===void 0?dge(c,u,pge|mge,r,h):f))return!1}}return!0}var yge=gge,vge=Ii;function xge(t){return t===t&&!vge(t)}var rW=xge,bge=rW,wge=ow;function Sge(t){for(var e=wge(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,bge(s)]}return e}var kge=Sge;function Ige(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var sW=Ige,Cge=yge,Tge=kge,$ge=sW;function Nge(t){var e=Tge(t);return e.length==1&&e[0][2]?$ge(e[0][0],e[0][1]):function(n){return n===t||Cge(n,t,e)}}var Ege=Nge,_ge=lu,Age=uu,Oge="[object Symbol]";function Rge(t){return typeof t=="symbol"||Age(t)&&_ge(t)==Oge}var bd=Rge,Dge=Ht,Pge=bd,Mge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fge=/^\w*$/;function Lge(t,e){if(Dge(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Pge(t)?!0:Fge.test(t)||!Mge.test(t)||e!=null&&t in Object(e)}var W_=Lge,iW=F_,Bge="Expected a function";function j_(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Bge);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(j_.Cache||iW),n}j_.Cache=iW;var zge=j_,Vge=zge,Uge=500;function Wge(t){var e=Vge(t,function(r){return n.size===Uge&&n.clear(),r}),n=e.cache;return e}var jge=Wge,Gge=jge,Hge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qge=/\\(\\)?/g,Kge=Gge(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Hge,function(n,r,s,i){e.push(s?i.replace(qge,"$1"):r||n)}),e}),Xge=Kge;function Yge(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var G_=Yge,uF=Ig,Qge=G_,Jge=Ht,Zge=bd,eye=1/0,cF=uF?uF.prototype:void 0,hF=cF?cF.toString:void 0;function oW(t){if(typeof t=="string")return t;if(Jge(t))return Qge(t,oW)+"";if(Zge(t))return hF?hF.call(t):"";var e=t+"";return e=="0"&&1/t==-eye?"-0":e}var tye=oW,nye=tye;function rye(t){return t==null?"":nye(t)}var aW=rye,sye=Ht,iye=W_,oye=Xge,aye=aW;function lye(t,e){return sye(t)?t:iye(t,e)?[t]:oye(aye(t))}var lW=lye,uye=bd,cye=1/0;function hye(t){if(typeof t=="string"||uye(t))return t;var e=t+"";return e=="0"&&1/t==-cye?"-0":e}var aw=hye,fye=lW,dye=aw;function pye(t,e){e=fye(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[dye(e[n++])];return n&&n==r?t:void 0}var H_=pye,mye=H_;function gye(t,e,n){var r=t==null?void 0:mye(t,e);return r===void 0?n:r}var yi=gye;function yye(t,e){return t!=null&&e in Object(t)}var vye=yye,xye=lW,bye=B_,wye=Ht,Sye=z_,kye=V_,Iye=aw;function Cye(t,e,n){e=xye(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=Iye(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&kye(s)&&Sye(o,s)&&(wye(t)||bye(t)))}var Tye=Cye,$ye=vye,Nye=Tye;function Eye(t,e){return t!=null&&Nye(t,e,$ye)}var _ye=Eye,Aye=U_,Oye=yi,Rye=_ye,Dye=W_,Pye=rW,Mye=sW,Fye=aw,Lye=1,Bye=2;function zye(t,e){return Dye(t)&&Pye(e)?Mye(Fye(t),e):function(n){var r=Oye(n,t);return r===void 0&&r===e?Rye(n,t):Aye(e,r,Lye|Bye)}}var Vye=zye;function Uye(t){return t}var wd=Uye;function Wye(t){return function(e){return e==null?void 0:e[t]}}var jye=Wye,Gye=H_;function Hye(t){return function(e){return Gye(e,t)}}var qye=Hye,Kye=jye,Xye=qye,Yye=W_,Qye=aw;function Jye(t){return Yye(t)?Kye(Qye(t)):Xye(t)}var Zye=Jye,e0e=Ege,t0e=Vye,n0e=wd,r0e=Ht,s0e=Zye;function i0e(t){return typeof t=="function"?t:t==null?n0e:typeof t=="object"?r0e(t)?t0e(t[0],t[1]):e0e(t):s0e(t)}var cu=i0e;function o0e(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var uW=o0e;function a0e(t){return t!==t}var l0e=a0e;function u0e(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var c0e=u0e,h0e=uW,f0e=l0e,d0e=c0e;function p0e(t,e,n){return e===e?d0e(t,e,n):h0e(t,f0e,n)}var m0e=p0e,g0e=m0e;function y0e(t,e){var n=t==null?0:t.length;return!!n&&g0e(t,e,0)>-1}var v0e=y0e;function x0e(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var b0e=x0e;function w0e(){}var S0e=w0e,Dk=eW,k0e=S0e,I0e=L_,C0e=1/0,T0e=Dk&&1/I0e(new Dk([,-0]))[1]==C0e?function(t){return new Dk(t)}:k0e,$0e=T0e,N0e=H9,E0e=v0e,_0e=b0e,A0e=K9,O0e=$0e,R0e=L_,D0e=200;function P0e(t,e,n){var r=-1,s=E0e,i=t.length,o=!0,a=[],l=a;if(n)o=!1,s=_0e;else if(i>=D0e){var u=e?null:O0e(t);if(u)return R0e(u);o=!1,s=A0e,l=new N0e}else l=e?[]:a;e:for(;++r<i;){var c=t[r],h=e?e(c):c;if(c=n||c!==0?c:0,o&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue e;e&&l.push(h),a.push(c)}else s(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}var M0e=P0e,F0e=cu,L0e=M0e;function B0e(t,e){return t&&t.length?L0e(t,F0e(e)):[]}var G1=B0e;function z0e(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var V0e=z0e,U0e=V0e;function W0e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:U0e(t,e,n)}var j0e=W0e,G0e="\\ud800-\\udfff",H0e="\\u0300-\\u036f",q0e="\\ufe20-\\ufe2f",K0e="\\u20d0-\\u20ff",X0e=H0e+q0e+K0e,Y0e="\\ufe0e\\ufe0f",Q0e="\\u200d",J0e=RegExp("["+Q0e+G0e+X0e+Y0e+"]");function Z0e(t){return J0e.test(t)}var cW=Z0e;function eve(t){return t.split("")}var tve=eve,hW="\\ud800-\\udfff",nve="\\u0300-\\u036f",rve="\\ufe20-\\ufe2f",sve="\\u20d0-\\u20ff",ive=nve+rve+sve,ove="\\ufe0e\\ufe0f",ave="["+hW+"]",gT="["+ive+"]",yT="\\ud83c[\\udffb-\\udfff]",lve="(?:"+gT+"|"+yT+")",fW="[^"+hW+"]",dW="(?:\\ud83c[\\udde6-\\uddff]){2}",pW="[\\ud800-\\udbff][\\udc00-\\udfff]",uve="\\u200d",mW=lve+"?",gW="["+ove+"]?",cve="(?:"+uve+"(?:"+[fW,dW,pW].join("|")+")"+gW+mW+")*",hve=gW+mW+cve,fve="(?:"+[fW+gT+"?",gT,dW,pW,ave].join("|")+")",dve=RegExp(yT+"(?="+yT+")|"+fve+hve,"g");function pve(t){return t.match(dve)||[]}var mve=pve,gve=tve,yve=cW,vve=mve;function xve(t){return yve(t)?vve(t):gve(t)}var bve=xve,wve=j0e,Sve=cW,kve=bve,Ive=aW;function Cve(t){return function(e){e=Ive(e);var n=Sve(e)?kve(e):void 0,r=n?n[0]:e.charAt(0),s=n?wve(n,1).join(""):e.slice(1);return r[t]()+s}}var Tve=Cve,$ve=Tve,Nve=$ve("toUpperCase"),lw=Nve;const vT=Math.PI,xT=2*vT,Pu=1e-6,Eve=xT-Pu;function bT(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function uw(){return new bT}bT.prototype=uw.prototype={constructor:bT,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,s,i){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+s)+","+(this._y1=+i)},arcTo:function(t,e,n,r,s){t=+t,e=+e,n=+n,r=+r,s=+s;var i=this._x1,o=this._y1,a=n-t,l=r-e,u=i-t,c=o-e,h=u*u+c*c;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Pu)if(!(Math.abs(c*a-l*u)>Pu)||!s)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var f=n-i,d=r-o,p=a*a+l*l,m=f*f+d*d,g=Math.sqrt(p),y=Math.sqrt(h),v=s*Math.tan((vT-Math.acos((p+h-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>Pu&&(this._+="L"+(t+b*u)+","+(e+b*c)),this._+="A"+s+","+s+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+x*a)+","+(this._y1=e+x*l)}},arc:function(t,e,n,r,s,i){t=+t,e=+e,n=+n,i=!!i;var o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,u=e+a,c=1^i,h=i?r-s:s-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>Pu||Math.abs(this._y1-u)>Pu)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%xT+xT),h>Eve?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>Pu&&(this._+="A"+n+","+n+",0,"+ +(h>=vT)+","+c+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=e+n*Math.sin(s))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function un(t){return function(){return t}}var H1=Math.PI,cw=2*H1;function q_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yW(t){this._context=t}yW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function hw(t){return new yW(t)}function vW(t){return t[0]}function xW(t){return t[1]}function bW(t,e){var n=un(!0),r=null,s=hw,i=null;t=typeof t=="function"?t:t===void 0?vW:un(t),e=typeof e=="function"?e:e===void 0?xW:un(e);function o(a){var l,u=(a=q_(a)).length,c,h=!1,f;for(r==null&&(i=s(f=uw())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(c,l,a),+e(c,l,a));if(f)return i=null,f+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:un(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:un(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:un(!!a),o):n},o.curve=function(a){return arguments.length?(s=a,r!=null&&(i=s(r)),o):s},o.context=function(a){return arguments.length?(a==null?r=i=null:i=s(r=a),o):r},o}function D0(t,e,n){var r=null,s=un(!0),i=null,o=hw,a=null;t=typeof t=="function"?t:t===void 0?vW:un(+t),e=typeof e=="function"?e:un(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?xW:un(+n);function l(c){var h,f,d,p=(c=q_(c)).length,m,g=!1,y,v=new Array(p),b=new Array(p);for(i==null&&(a=o(y=uw())),h=0;h<=p;++h){if(!(h<p&&s(m=c[h],h,c))===g)if(g=!g)f=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=h-1;d>=f;--d)a.point(v[d],b[d]);a.lineEnd(),a.areaEnd()}g&&(v[h]=+t(m,h,c),b[h]=+e(m,h,c),a.point(r?+r(m,h,c):v[h],n?+n(m,h,c):b[h]))}if(y)return a=null,y+""||null}function u(){return bW().defined(s).curve(o).context(i)}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:un(+c),r=null,l):t},l.x0=function(c){return arguments.length?(t=typeof c=="function"?c:un(+c),l):t},l.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:un(+c),l):r},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:un(+c),n=null,l):e},l.y0=function(c){return arguments.length?(e=typeof c=="function"?c:un(+c),l):e},l.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:un(+c),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(r).y(e)},l.defined=function(c){return arguments.length?(s=typeof c=="function"?c:un(!!c),l):s},l.curve=function(c){return arguments.length?(o=c,i!=null&&(a=o(i)),l):o},l.context=function(c){return arguments.length?(c==null?i=a=null:a=o(i=c),l):i},l}const K_={draw:function(t,e){var n=Math.sqrt(e/H1);t.moveTo(n,0),t.arc(0,0,n,0,cw)}},_ve={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var wW=Math.sqrt(1/3),Ave=wW*2;const Ove={draw:function(t,e){var n=Math.sqrt(e/Ave),r=n*wW;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}};var Rve=.8908130915292852,SW=Math.sin(H1/10)/Math.sin(7*H1/10),Dve=Math.sin(cw/10)*SW,Pve=-Math.cos(cw/10)*SW;const Mve={draw:function(t,e){var n=Math.sqrt(e*Rve),r=Dve*n,s=Pve*n;t.moveTo(0,-n),t.lineTo(r,s);for(var i=1;i<5;++i){var o=cw*i/5,a=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*s,l*r+a*s)}t.closePath()}},Fve={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}};var Pk=Math.sqrt(3);const Lve={draw:function(t,e){var n=-Math.sqrt(e/(Pk*3));t.moveTo(0,n*2),t.lineTo(-Pk*n,-n),t.lineTo(Pk*n,-n),t.closePath()}};var Ni=-.5,Ei=Math.sqrt(3)/2,wT=1/Math.sqrt(12),Bve=(wT/2+1)*3;const zve={draw:function(t,e){var n=Math.sqrt(e/Bve),r=n/2,s=n*wT,i=r,o=n*wT+n,a=-i,l=o;t.moveTo(r,s),t.lineTo(i,o),t.lineTo(a,l),t.lineTo(Ni*r-Ei*s,Ei*r+Ni*s),t.lineTo(Ni*i-Ei*o,Ei*i+Ni*o),t.lineTo(Ni*a-Ei*l,Ei*a+Ni*l),t.lineTo(Ni*r+Ei*s,Ni*s-Ei*r),t.lineTo(Ni*i+Ei*o,Ni*o-Ei*i),t.lineTo(Ni*a+Ei*l,Ni*l-Ei*a),t.closePath()}};function Vve(t,e){var n=null;t=typeof t=="function"?t:un(t||K_),e=typeof e=="function"?e:un(e===void 0?64:+e);function r(){var s;if(n||(n=s=uw()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:un(s),r):t},r.size=function(s){return arguments.length?(e=typeof s=="function"?s:un(+s),r):e},r.context=function(s){return arguments.length?(n=s==null?null:s,r):n},r}function q1(){}function K1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function kW(t){this._context=t}kW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:K1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:K1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Uve(t){return new kW(t)}function IW(t){this._context=t}IW.prototype={areaStart:q1,areaEnd:q1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:K1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Wve(t){return new IW(t)}function CW(t){this._context=t}CW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:K1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jve(t){return new CW(t)}function TW(t){this._context=t}TW.prototype={areaStart:q1,areaEnd:q1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Gve(t){return new TW(t)}function fF(t){return t<0?-1:1}function dF(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),a=(i*s+o*r)/(r+s);return(fF(i)+fF(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function pF(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Mk(t,e,n){var r=t._x0,s=t._y0,i=t._x1,o=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,s+a*e,i-a,o-a*n,i,o)}function X1(t){this._context=t}X1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mk(this,this._t0,pF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Mk(this,pF(this,n=dF(this,t,e)),n);break;default:Mk(this,this._t0,n=dF(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $W(t){this._context=new NW(t)}($W.prototype=Object.create(X1.prototype)).point=function(t,e){X1.prototype.point.call(this,e,t)};function NW(t){this._context=t}NW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function Hve(t){return new X1(t)}function qve(t){return new $W(t)}function EW(t){this._context=t}EW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=mF(t),s=mF(e),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function mF(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function Kve(t){return new EW(t)}function fw(t,e){this._context=t,this._t=e}fw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Xve(t){return new fw(t,.5)}function Yve(t){return new fw(t,0)}function Qve(t){return new fw(t,1)}function _f(t,e){if((o=t.length)>1)for(var n=1,r,s,i=t[e[0]],o,a=i.length;n<o;++n)for(s=i,i=t[e[n]],r=0;r<a;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function ST(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Jve(t,e){return t[e]}function Zve(t){const e=[];return e.key=t,e}function e1e(){var t=un([]),e=ST,n=_f,r=Jve;function s(i){var o=Array.from(t.apply(this,arguments),Zve),a,l=o.length,u=-1,c;for(const h of i)for(a=0,++u;a<l;++a)(o[a][u]=[0,+r(h,o[a].key,u,i)]).data=h;for(a=0,c=q_(e(o));a<l;++a)o[c[a]].index=a;return n(o,c),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:un(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:un(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?ST:typeof i=="function"?i:un(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i==null?_f:i,s):n},s}function t1e(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}_f(t,e)}}function n1e(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var o=0,a=0;o<s;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}_f(t,e)}}function r1e(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var a=0,l=0,u=0;a<o;++a){for(var c=t[e[a]],h=c[r][1]||0,f=c[r-1][1]||0,d=(h-f)/2,p=0;p<a;++p){var m=t[e[p]],g=m[r][1]||0,y=m[r-1][1]||0;d+=g-y}l+=h,u+=d*h}s[r-1][1]+=s[r-1][0]=n,l&&(n-=u/l)}s[r-1][1]+=s[r-1][0]=n,_f(t,e)}}function Tv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tv=function(n){return typeof n}:Tv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tv(t)}function s1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i1e(t,e,n){return e&&gF(t.prototype,e),n&&gF(t,n),t}function o1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kT(t,e)}function kT(t,e){return kT=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},kT(t,e)}function a1e(t){var e=c1e();return function(){var r=Y1(t),s;if(e){var i=Y1(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return l1e(this,s)}}function l1e(t,e){return e&&(Tv(e)==="object"||typeof e=="function")?e:u1e(t)}function u1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Y1(t){return Y1=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Y1(t)}var _W={symbolCircle:K_,symbolCross:_ve,symbolDiamond:Ove,symbolSquare:Fve,symbolStar:Mve,symbolTriangle:Lve,symbolWye:zve},h1e=Math.PI/180,f1e=function(e){var n="symbol".concat(lw(e));return _W[n]||K_},d1e=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*h1e;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},X_=function(t){o1e(n,t);var e=a1e(n);function n(){return s1e(this,n),e.apply(this,arguments)}return i1e(n,[{key:"getPath",value:function(){var s=this.props,i=s.size,o=s.sizeType,a=s.type,l=f1e(a),u=Vve().type(l).size(d1e(i,o,a));return u()}},{key:"render",value:function(){var s=this.props,i=s.className,o=s.cx,a=s.cy,l=s.size;return o===+o&&a===+a&&l===+l?D("path",{...Gt(this.props,!0),className:bn("recharts-symbols",i),transform:"translate(".concat(o,", ").concat(a,")"),d:this.getPath()}):null}}]),n}(ae.exports.PureComponent);X_.defaultProps={type:"circle",size:64,sizeType:"area"};X_.registerSymbol=function(t,e){_W["symbol".concat(lw(t))]=e};function $v(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$v=function(n){return typeof n}:$v=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$v(t)}function yF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function p1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yF(Object(n),!0).forEach(function(r){IT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g1e(t,e,n){return e&&vF(t.prototype,e),n&&vF(t,n),t}function y1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CT(t,e)}function CT(t,e){return CT=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},CT(t,e)}function v1e(t){var e=w1e();return function(){var r=Q1(t),s;if(e){var i=Q1(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return x1e(this,s)}}function x1e(t,e){return e&&($v(e)==="object"||typeof e=="function")?e:b1e(t)}function b1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Q1(t){return Q1=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Q1(t)}var _i=32,Y_=function(t){y1e(n,t);var e=v1e(n);function n(){return m1e(this,n),e.apply(this,arguments)}return g1e(n,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,o=_i/2,a=_i/6,l=_i/3,u=s.inactive?i:s.color;if(s.type==="plainline")return D("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:o,x2:_i,y2:o,className:"recharts-legend-icon"});if(s.type==="line")return D("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(o,`
            H`).concat(_i,"M").concat(2*l,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(o),className:"recharts-legend-icon"});if(s.type==="rect")return D("path",{stroke:"none",fill:u,d:"M0,".concat(_i/8,"h").concat(_i,"v").concat(_i*3/4,"h").concat(-_i,"z"),className:"recharts-legend-icon"});if(tn.isValidElement(s.legendIcon)){var c=p1e({},s);return delete c.legendIcon,tn.cloneElement(s.legendIcon,c)}return D(X_,{fill:u,cx:o,cy:o,size:_i,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,o=i.payload,a=i.iconSize,l=i.layout,u=i.formatter,c=i.inactiveColor,h={x:0,y:0,width:_i,height:_i},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,m){var g,y=p.formatter||u,v=bn((g={"recharts-legend-item":!0},IT(g,"legend-item-".concat(m),!0),IT(g,"inactive",p.inactive),g));if(p.type==="none")return null;var b=p.inactive?c:p.color;return ue("li",{className:v,style:f,...V9(s.props,p,m),children:[D(uT,{width:a,height:a,viewBox:h,style:d,children:s.renderIcon(p)}),D("span",{className:"recharts-legend-item-text",style:{color:b},children:y?y(p.value,p,m):p.value})]},"legend-item-".concat(m))})}},{key:"render",value:function(){var s=this.props,i=s.payload,o=s.layout,a=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return D("ul",{className:"recharts-default-legend",style:l,children:this.renderItems()})}}]),n}(ae.exports.PureComponent);Y_.displayName="Legend";Y_.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"};var S1e=lu,k1e=uu,I1e="[object Number]";function C1e(t){return typeof t=="number"||k1e(t)&&S1e(t)==I1e}var AW=C1e,T1e=AW;function $1e(t){return T1e(t)&&t!=+t}var dw=$1e,N1e=lu,E1e=Ht,_1e=uu,A1e="[object String]";function O1e(t){return typeof t=="string"||!E1e(t)&&_1e(t)&&N1e(t)==A1e}var Tg=O1e,Vo=function(e){return e===0?0:e>0?1:-1},TT=function(e){return Tg(e)&&e.indexOf("%")===e.length-1},Ee=function(e){return AW(e)&&!dw(e)},mr=function(e){return Ee(e)||Tg(e)},R1e=0,pw=function(e){var n=++R1e;return"".concat(e||"").concat(n)},Af=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(e)&&!Tg(e))return r;var i;if(TT(e)){var o=e.indexOf("%");i=n*parseFloat(e.slice(0,o))/100}else i=+e;return dw(i)&&(i=r),s&&i>n&&(i=n),i},el=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},D1e=function(e){if(!Ht(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},tp=function(e,n){return Ee(e)&&Ee(n)?function(r){return e+r*(n-e)}:function(){return n}};function J1(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):yi(r,e))===n})}function Nv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nv=function(n){return typeof n}:Nv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nv(t)}function xF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xF(Object(n),!0).forEach(function(r){P1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P1e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F1e(t,e,n){return e&&bF(t.prototype,e),n&&bF(t,n),t}function L1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$T(t,e)}function $T(t,e){return $T=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},$T(t,e)}function B1e(t){var e=U1e();return function(){var r=Z1(t),s;if(e){var i=Z1(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return z1e(this,s)}}function z1e(t,e){return e&&(Nv(e)==="object"||typeof e=="function")?e:V1e(t)}function V1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z1(t){return Z1=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Z1(t)}function W1e(t,e){if(t==null)return{};var n=j1e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function j1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function G1e(t){return t.value}function H1e(t,e){return t===!0?G1(e,G1e):Ze(t)?G1(e,t):e}function q1e(t,e){if(tn.isValidElement(t))return tn.cloneElement(t,e);if(Ze(t))return tn.createElement(t,e);e.ref;var n=W1e(e,["ref"]);return D(Y_,{...n})}var wF=1,Of=function(t){L1e(n,t);var e=B1e(n);function n(){var r;M1e(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),r.wrapperNode=void 0,r.state={boxWidth:-1,boxHeight:-1},r}return F1e(n,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var s=this.state,i=s.boxWidth,o=s.boxHeight;return i>=0&&o>=0?{width:i,height:o}:null}},{key:"getDefaultPosition",value:function(s){var i=this.props,o=i.layout,a=i.align,l=i.verticalAlign,u=i.margin,c=i.chartWidth,h=i.chartHeight,f,d;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(a==="center"&&o==="vertical"){var p=this.getBBoxSnapshot()||{width:0};f={left:((c||0)-p.width)/2}}else f=a==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var m=this.getBBoxSnapshot()||{height:0};d={top:((h||0)-m.height)/2}}else d=l==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return mh(mh({},f),d)}},{key:"updateBBox",value:function(){var s=this.state,i=s.boxWidth,o=s.boxHeight,a=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var l=this.wrapperNode.getBoundingClientRect();(Math.abs(l.width-i)>wF||Math.abs(l.height-o)>wF)&&this.setState({boxWidth:l.width,boxHeight:l.height},function(){a&&a(l)})}else(i!==-1||o!==-1)&&this.setState({boxWidth:-1,boxHeight:-1},function(){a&&a(null)})}},{key:"render",value:function(){var s=this,i=this.props,o=i.content,a=i.width,l=i.height,u=i.wrapperStyle,c=i.payloadUniqBy,h=i.payload,f=mh(mh({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(u)),u);return D("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){s.wrapperNode=p},children:q1e(o,mh(mh({},this.props),{},{payload:H1e(c,h)}))})}}],[{key:"getWithHeight",value:function(s,i){var o=s.props.layout;return o==="vertical"&&Ee(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}]),n}(ae.exports.PureComponent);Of.displayName="Legend";Of.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"};function K1e(t){return t==null}var Xe=K1e,ut={exports:{}},X1e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Y1e=X1e,Q1e=Y1e;function OW(){}function RW(){}RW.resetWarningCache=OW;var J1e=function(){function t(r,s,i,o,a,l){if(l!==Q1e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:RW,resetWarningCache:OW};return n.PropTypes=n,n};ut.exports=J1e();var Z1e=typeof WeakSet=="function",SF=Object.keys;function Q_(t,e){return t===e||t!==t&&e!==e}function kF(t){return t.constructor===Object||t.constructor==null}function IF(t){return!!t&&typeof t.then=="function"}function CF(t){return!!(t&&t.$$typeof)}function exe(){var t=[];return{add:function(e){t.push(e)},has:function(e){return t.indexOf(e)!==-1}}}var txe=function(t){return t?function(){return new WeakSet}:exe}(Z1e);function DW(t){return function(n){var r=t||n;return function(i,o,a){a===void 0&&(a=txe());var l=!!i&&typeof i=="object",u=!!o&&typeof o=="object";if(l||u){var c=l&&a.has(i),h=u&&a.has(o);if(c||h)return c&&h;l&&a.add(i),u&&a.add(o)}return r(i,o,a)}}}function nxe(t,e,n,r){var s=t.length;if(e.length!==s)return!1;for(;s-- >0;)if(!n(t[s],e[s],r))return!1;return!0}function rxe(t,e,n,r){var s=t.size===e.size;if(s&&t.size){var i={};t.forEach(function(o,a){if(s){var l=!1,u=0;e.forEach(function(c,h){!l&&!i[u]&&(l=n(a,h,r)&&n(o,c,r),l&&(i[u]=!0)),u++}),s=l}})}return s}var sxe="_owner",ixe=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function TF(t,e,n,r){var s=SF(t),i=s.length;if(SF(e).length!==i)return!1;if(i)for(var o=void 0;i-- >0;){if(o=s[i],o===sxe){var a=CF(t),l=CF(e);if((a||l)&&a!==l)return!1}if(!ixe(e,o)||!n(t[o],e[o],r))return!1}return!0}function oxe(t,e){return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.unicode===e.unicode&&t.sticky===e.sticky&&t.lastIndex===e.lastIndex}function axe(t,e,n,r){var s=t.size===e.size;if(s&&t.size){var i={};t.forEach(function(o){if(s){var a=!1,l=0;e.forEach(function(u){!a&&!i[l]&&(a=n(o,u,r),a&&(i[l]=!0)),l++}),s=a}})}return s}var lxe=typeof Map=="function",uxe=typeof Set=="function";function mw(t){var e=typeof t=="function"?t(n):n;function n(r,s,i){if(r===s)return!0;if(r&&s&&typeof r=="object"&&typeof s=="object"){if(kF(r)&&kF(s))return TF(r,s,e,i);var o=Array.isArray(r),a=Array.isArray(s);return o||a?o===a&&nxe(r,s,e,i):(o=r instanceof Date,a=s instanceof Date,o||a?o===a&&Q_(r.getTime(),s.getTime()):(o=r instanceof RegExp,a=s instanceof RegExp,o||a?o===a&&oxe(r,s):IF(r)||IF(s)?r===s:lxe&&(o=r instanceof Map,a=s instanceof Map,o||a)?o===a&&rxe(r,s,e,i):uxe&&(o=r instanceof Set,a=s instanceof Set,o||a)?o===a&&axe(r,s,e,i):TF(r,s,e,i)))}return r!==r&&s!==s}return n}var cxe=mw();mw(function(){return Q_});mw(DW());mw(DW(Q_));function $F(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>e?(t(i),n=-1):requestAnimationFrame(s)};requestAnimationFrame(r)}function Ev(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ev=function(n){return typeof n}:Ev=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ev(t)}function hxe(t){return mxe(t)||pxe(t)||dxe(t)||fxe()}function fxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dxe(t,e){if(!!t){if(typeof t=="string")return NF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NF(t,e)}}function NF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pxe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function mxe(t){if(Array.isArray(t))return t}function gxe(){var t={},e=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,a=hxe(o),l=a[0],u=a.slice(1);if(typeof l=="number"){$F(s.bind(null,u),l);return}s(l),$F(s.bind(null,u));return}Ev(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function EF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EF(Object(n),!0).forEach(function(r){ex(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ex(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yxe=["Webkit","Moz","O","ms"],vxe=["-webkit-","-moz-","-o-","-ms-"],xxe=["transform","transformOrigin","transition"],bxe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},wxe=function(e){return e},Sxe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},kxe=function(e,n){if(xxe.indexOf(e)===-1)return ex({},e,n);var r=e==="transition",s=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=n;return yxe.reduce(function(o,a,l){return r&&(i=n.replace(/(transform|transform-origin)/gim,"".concat(vxe[l],"$1"))),Rf(Rf({},o),{},ex({},a+s,i))},{})},qp=function(e,n){return Object.keys(n).reduce(function(r,s){return Rf(Rf({},r),{},ex({},s,e(s,n[s])))},{})},NT=function(e){return Object.keys(e).reduce(function(n,r){return Rf(Rf({},n),kxe(r,n[r]))},e)},_F=function(e,n,r){return e.map(function(s){return"".concat(Sxe(s)," ").concat(n,"ms ").concat(r)}).join(",")};function Ixe(t,e){return $xe(t)||Txe(t,e)||PW(t,e)||Cxe()}function Cxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Txe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function $xe(t){if(Array.isArray(t))return t}function Nxe(t){return Axe(t)||_xe(t)||PW(t)||Exe()}function Exe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PW(t,e){if(!!t){if(typeof t=="string")return ET(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ET(t,e)}}function _xe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Axe(t){if(Array.isArray(t))return ET(t)}function ET(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var tx=1e-4,MW=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},FW=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},AF=function(e,n){return function(r){var s=MW(e,n);return FW(s,r)}},Oxe=function(e,n){return function(r){var s=MW(e,n),i=[].concat(Nxe(s.map(function(o,a){return o*a}).slice(1)),[0]);return FW(i,r)}},OF=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,a=1;break;case"ease":s=.25,i=.1,o=.25,a=1;break;case"ease-in":s=.42,i=0,o=1,a=1;break;case"ease-out":s=.42,i=0,o=.58,a=1;break;case"ease-in-out":s=0,i=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),c=Ixe(u,4);s=c[0],i=c[1],o=c[2],a=c[3]}}}var h=AF(s,o),f=AF(i,a),d=Oxe(s,o),p=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,b=v,x=0;x<8;++x){var w=h(b)-v,S=d(b);if(Math.abs(w-v)<tx||S<tx)return f(b);b=p(b-w/S)}return f(b)};return m.isStepper=!1,m},Rxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,i=s===void 0?8:s,o=e.dt,a=o===void 0?17:o,l=function(c,h,f){var d=-(c-h)*r,p=f*i,m=f+(d-p)*a/1e3,g=f*a/1e3+c;return Math.abs(g-h)<tx&&Math.abs(m)<tx?[h,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},Dxe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OF(s);case"spring":return Rxe();default:if(s.split("(")[0]==="cubic-bezier")return OF(s)}return typeof s=="function"?s:null};function RF(t){return Fxe(t)||Mxe(t)||LW(t)||Pxe()}function Pxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mxe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Fxe(t){if(Array.isArray(t))return AT(t)}function DF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DF(Object(n),!0).forEach(function(r){_T(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lxe(t,e){return Vxe(t)||zxe(t,e)||LW(t,e)||Bxe()}function Bxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LW(t,e){if(!!t){if(typeof t=="string")return AT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AT(t,e)}}function AT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zxe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function Vxe(t){if(Array.isArray(t))return t}var nx=function(e,n,r){return e+(n-e)*r},OT=function(e){var n=e.from,r=e.to;return n!==r},Uxe=function t(e,n,r){var s=qp(function(i,o){if(OT(o)){var a=e(o.from,o.to,o.velocity),l=Lxe(a,2),u=l[0],c=l[1];return Wr(Wr({},o),{},{from:u,velocity:c})}return o},n);return r<1?qp(function(i,o){return OT(o)?Wr(Wr({},o),{},{velocity:nx(o.velocity,s[i].velocity,r),from:nx(o.from,s[i].from,r)}):o},n):t(e,s,r-1)};const Wxe=function(t,e,n,r,s){var i=bxe(t,e),o=i.reduce(function(g,y){return Wr(Wr({},g),{},_T({},y,[t[y],e[y]]))},{}),a=i.reduce(function(g,y){return Wr(Wr({},g),{},_T({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,c,h=function(){return null},f=function(){return qp(function(y,v){return v.from},a)},d=function(){return!Object.values(a).filter(OT).length},p=function(y){u||(u=y);var v=y-u,b=v/n.dt;a=Uxe(n,a,b),s(Wr(Wr(Wr({},t),e),f())),u=y,d()||(l=requestAnimationFrame(h))},m=function(y){c||(c=y);var v=(y-c)/r,b=qp(function(w,S){return nx.apply(void 0,RF(S).concat([n(v)]))},o);if(s(Wr(Wr(Wr({},t),e),b)),v<1)l=requestAnimationFrame(h);else{var x=qp(function(w,S){return nx.apply(void 0,RF(S).concat([n(1)]))},o);s(Wr(Wr(Wr({},t),e),x))}};return h=n.isStepper?p:m,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(l)}}};function _v(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_v=function(n){return typeof n}:_v=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_v(t)}function jxe(t,e){if(t==null)return{};var n=Gxe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function Gxe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Fk(t){return Xxe(t)||Kxe(t)||qxe(t)||Hxe()}function Hxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qxe(t,e){if(!!t){if(typeof t=="string")return RT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RT(t,e)}}function Kxe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Xxe(t){if(Array.isArray(t))return RT(t)}function RT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function uo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PF(Object(n),!0).forEach(function(r){Sp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qxe(t,e,n){return e&&MF(t.prototype,e),n&&MF(t,n),t}function Jxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&DT(t,e)}function DT(t,e){return DT=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},DT(t,e)}function Zxe(t){var e=ebe();return function(){var r=rx(t),s;if(e){var i=rx(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return PT(this,s)}}function PT(t,e){return e&&(_v(e)==="object"||typeof e=="function")?e:MT(t)}function MT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ebe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rx(t){return rx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},rx(t)}var Df=function(t){Jxe(n,t);var e=Zxe(n);function n(r,s){var i;Yxe(this,n),i=e.call(this,r,s);var o=i.props,a=o.isActive,l=o.attributeName,u=o.from,c=o.to,h=o.steps,f=o.children;if(i.handleStyleChange=i.handleStyleChange.bind(MT(i)),i.changeStyle=i.changeStyle.bind(MT(i)),!a)return i.state={style:{}},typeof f=="function"&&(i.state={style:c}),PT(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof f=="function")return i.state={style:u},PT(i);i.state={style:l?Sp({},l,u):u}}else i.state={style:{}};return i}return Qxe(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,a=i.canBegin,l=i.attributeName,u=i.shouldReAnimate;if(!!a){if(!o){var c={style:l?Sp({},l,this.props.to):this.props.to};this.state&&this.state.style&&(l&&this.state.style[l]!==this.props.to||!l&&this.state.style!==this.props.to)&&this.setState(c);return}if(!(cxe(s.to,this.props.to)&&s.canBegin&&s.isActive)){var h=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=h||u?this.props.from:s.to;if(this.state&&this.state.style){var d={style:l?Sp({},l,f):f};(l&&this.state.style[l]!==f||!l&&this.state.style!==f)&&this.setState(d)}this.runAnimation(uo(uo({},this.props),{},{from:f,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,a=s.to,l=s.duration,u=s.easing,c=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,d=Wxe(o,a,Dxe(u),l,this.changeStyle),p=function(){i.stopJSAnimation=d()};this.manager.start([f,c,p,l,h])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,a=s.begin,l=s.onAnimationStart,u=o[0],c=u.style,h=u.duration,f=h===void 0?0:h,d=function(m,g,y){if(y===0)return m;var v=g.duration,b=g.easing,x=b===void 0?"ease":b,w=g.style,S=g.properties,k=g.onAnimationEnd,I=y>0?o[y-1]:g,T=S||Object.keys(w);if(typeof x=="function"||x==="spring")return[].concat(Fk(m),[i.runJSAnimation.bind(i,{from:I.style,to:w,duration:v,easing:x}),v]);var N=_F(T,v,x),A=uo(uo(uo({},I.style),w),{},{transition:N});return[].concat(Fk(m),[A,v,k]).filter(wxe)};return this.manager.start([l].concat(Fk(o.reduce(d,[c,Math.max(f,a)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=gxe());var i=s.begin,o=s.duration,a=s.attributeName,l=s.to,u=s.easing,c=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,d=s.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof u=="function"||typeof d=="function"||u==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var m=a?Sp({},a,l):l,g=_F(Object.keys(m),o,u);p.start([c,i,uo(uo({},m),{},{transition:g}),o,h])}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin,s.duration,s.attributeName,s.easing;var o=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var a=jxe(s,["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"]),l=ae.exports.Children.count(i),u=NT(this.state.style);if(typeof i=="function")return i(u);if(!o||l===0)return i;var c=function(f){var d=f.props,p=d.style,m=p===void 0?{}:p,g=d.className,y=ae.exports.cloneElement(f,uo(uo({},a),{},{style:uo(uo({},m),u),className:g}));return y};return l===1?c(ae.exports.Children.only(i)):D("div",{children:ae.exports.Children.map(i,function(h){return c(h)})})}}]),n}(ae.exports.PureComponent);Df.displayName="Animate";Df.propTypes={from:ut.exports.oneOfType([ut.exports.object,ut.exports.string]),to:ut.exports.oneOfType([ut.exports.object,ut.exports.string]),attributeName:ut.exports.string,duration:ut.exports.number,begin:ut.exports.number,easing:ut.exports.oneOfType([ut.exports.string,ut.exports.func]),steps:ut.exports.arrayOf(ut.exports.shape({duration:ut.exports.number.isRequired,style:ut.exports.object.isRequired,easing:ut.exports.oneOfType([ut.exports.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ut.exports.func]),properties:ut.exports.arrayOf("string"),onAnimationEnd:ut.exports.func})),children:ut.exports.oneOfType([ut.exports.node,ut.exports.func]),isActive:ut.exports.bool,canBegin:ut.exports.bool,onAnimationEnd:ut.exports.func,shouldReAnimate:ut.exports.bool,onAnimationStart:ut.exports.func,onAnimationReStart:ut.exports.func};Df.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Number.isFinite===void 0&&(Number.isFinite=function(t){return typeof t=="number"&&isFinite(t)});ut.exports.object,ut.exports.object,ut.exports.object,ut.exports.element;ut.exports.object,ut.exports.object,ut.exports.object,ut.exports.oneOfType([ut.exports.array,ut.exports.element]),ut.exports.any;var FF=Ig,tbe=B_,nbe=Ht,LF=FF?FF.isConcatSpreadable:void 0;function rbe(t){return nbe(t)||tbe(t)||!!(LF&&t&&t[LF])}var sbe=rbe,ibe=Y9,obe=sbe;function BW(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=obe),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?BW(a,e-1,n,r,s):ibe(s,a):r||(s[s.length]=a)}return s}var zW=BW;function abe(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++s];if(n(i[l],l,i)===!1)break}return e}}var lbe=abe,ube=lbe,cbe=ube(),hbe=cbe,fbe=hbe,dbe=ow;function pbe(t,e){return t&&fbe(t,e,dbe)}var VW=pbe,mbe=Cg;function gbe(t,e){return function(n,r){if(n==null)return n;if(!mbe(n))return t(n,r);for(var s=n.length,i=e?s:-1,o=Object(n);(e?i--:++i<s)&&r(o[i],i,o)!==!1;);return n}}var ybe=gbe,vbe=VW,xbe=ybe,bbe=xbe(vbe),J_=bbe,wbe=J_,Sbe=Cg;function kbe(t,e){var n=-1,r=Sbe(t)?Array(t.length):[];return wbe(t,function(s,i,o){r[++n]=e(s,i,o)}),r}var UW=kbe;function Ibe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Cbe=Ibe,BF=bd;function Tbe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,i=BF(t),o=e!==void 0,a=e===null,l=e===e,u=BF(e);if(!a&&!u&&!i&&t>e||i&&o&&l&&!a&&!u||r&&o&&l||!n&&l||!s)return 1;if(!r&&!i&&!u&&t<e||u&&n&&s&&!r&&!i||a&&n&&s||!o&&s||!l)return-1}return 0}var $be=Tbe,Nbe=$be;function Ebe(t,e,n){for(var r=-1,s=t.criteria,i=e.criteria,o=s.length,a=n.length;++r<o;){var l=Nbe(s[r],i[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var _be=Ebe,Lk=G_,Abe=H_,Obe=cu,Rbe=UW,Dbe=Cbe,Pbe=J9,Mbe=_be,Fbe=wd,Lbe=Ht;function Bbe(t,e,n){e.length?e=Lk(e,function(i){return Lbe(i)?function(o){return Abe(o,i.length===1?i[0]:i)}:i}):e=[Fbe];var r=-1;e=Lk(e,Pbe(Obe));var s=Rbe(t,function(i,o,a){var l=Lk(e,function(u){return u(i)});return{criteria:l,index:++r,value:i}});return Dbe(s,function(i,o){return Mbe(i,o,n)})}var zbe=Bbe;function Vbe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Ube=Vbe,Wbe=Ube,zF=Math.max;function jbe(t,e,n){return e=zF(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=zF(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),Wbe(t,this,a)}}var Gbe=jbe;function Hbe(t){return function(){return t}}var qbe=Hbe,Kbe=Qc,Xbe=function(){try{var t=Kbe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),WW=Xbe,Ybe=qbe,VF=WW,Qbe=wd,Jbe=VF?function(t,e){return VF(t,"toString",{configurable:!0,enumerable:!1,value:Ybe(e),writable:!0})}:Qbe,Zbe=Jbe,ewe=800,twe=16,nwe=Date.now;function rwe(t){var e=0,n=0;return function(){var r=nwe(),s=twe-(r-n);if(n=r,s>0){if(++e>=ewe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var swe=rwe,iwe=Zbe,owe=swe,awe=owe(iwe),lwe=awe,uwe=wd,cwe=Gbe,hwe=lwe;function fwe(t,e){return hwe(cwe(t,e,uwe),t+"")}var dwe=fwe,pwe=P_,mwe=Cg,gwe=z_,ywe=Ii;function vwe(t,e,n){if(!ywe(n))return!1;var r=typeof e;return(r=="number"?mwe(n)&&gwe(e,n.length):r=="string"&&e in n)?pwe(n[e],t):!1}var gw=vwe,xwe=zW,bwe=zbe,wwe=dwe,UF=gw,Swe=wwe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&UF(t,e[0],e[1])?e=[]:n>2&&UF(e[0],e[1],e[2])&&(e=[e[0]]),bwe(t,xwe(e,1),[])}),Z_=Swe;function Av(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Av=function(n){return typeof n}:Av=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Av(t)}function kwe(t,e){return $we(t)||Twe(t,e)||Cwe(t,e)||Iwe()}function Iwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(t,e){if(!!t){if(typeof t=="string")return WF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WF(t,e)}}function WF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Twe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function $we(t){if(Array.isArray(t))return t}function jF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jF(Object(n),!0).forEach(function(r){Nwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nwe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ewe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _we(t,e,n){return e&&GF(t.prototype,e),n&&GF(t,n),t}function Awe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FT(t,e)}function FT(t,e){return FT=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},FT(t,e)}function Owe(t){var e=Pwe();return function(){var r=sx(t),s;if(e){var i=sx(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return Rwe(this,s)}}function Rwe(t,e){return e&&(Av(e)==="object"||typeof e=="function")?e:Dwe(t)}function Dwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sx(t){return sx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},sx(t)}function Mwe(t){return Ht(t)&&mr(t[0])&&mr(t[1])?t.join(" ~ "):t}var eA=function(t){Awe(n,t);var e=Owe(n);function n(){return Ewe(this,n),e.apply(this,arguments)}return _we(n,[{key:"renderContent",value:function(){var s=this.props,i=s.payload,o=s.separator,a=s.formatter,l=s.itemStyle,u=s.itemSorter;if(i&&i.length){var c={padding:0,margin:0},h=(u?Z_(i,u):i).map(function(f,d){if(f.type==="none")return null;var p=Bk({display:"block",paddingTop:4,paddingBottom:4,color:f.color||"#000"},l),m=f.formatter||a||Mwe,g=f.name,y=f.value;if(m){var v=m(y,g,f,d,i);if(Array.isArray(v)){var b=kwe(v,2);y=b[0],g=b[1]}else y=v}return ue("li",{className:"recharts-tooltip-item",style:p,children:[mr(g)?D("span",{className:"recharts-tooltip-item-name",children:g}):null,mr(g)?D("span",{className:"recharts-tooltip-item-separator",children:o}):null,D("span",{className:"recharts-tooltip-item-value",children:y}),D("span",{className:"recharts-tooltip-item-unit",children:f.unit||""})]},"tooltip-item-".concat(d))});return D("ul",{className:"recharts-tooltip-item-list",style:c,children:h})}return null}},{key:"render",value:function(){var s=this.props,i=s.wrapperClassName,o=s.contentStyle,a=s.labelClassName,l=s.labelStyle,u=s.label,c=s.labelFormatter,h=s.payload,f=Bk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),d=Bk({margin:0},l),p=!Xe(u),m=p?u:"",g=bn("recharts-default-tooltip",i),y=bn("recharts-tooltip-label",a);return p&&c&&h!==void 0&&h!==null&&(m=c(u,h)),ue("div",{className:g,style:f,children:[D("p",{className:y,style:d,children:tn.isValidElement(m)?m:"".concat(m)}),this.renderContent()]})}}]),n}(ae.exports.PureComponent);eA.displayName="DefaultTooltipContent";eA.defaultProps={separator:" : ",contentStyle:{},itemStyle:{},labelStyle:{}};var Fwe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Al={isSsr:Fwe(),get:function(e){return Al[e]},set:function(e,n){if(typeof e=="string")Al[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){Al[s]=e[s]})}}};function Ov(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ov=function(n){return typeof n}:Ov=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ov(t)}function HF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(n),!0).forEach(function(r){kp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bwe(t,e,n){return e&&qF(t.prototype,e),n&&qF(t,n),t}function zwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LT(t,e)}function LT(t,e){return LT=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},LT(t,e)}function Vwe(t){var e=jwe();return function(){var r=ix(t),s;if(e){var i=ix(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return Uwe(this,s)}}function Uwe(t,e){return e&&(Ov(e)==="object"||typeof e=="function")?e:Wwe(t)}function Wwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ix(t){return ix=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ix(t)}var np="recharts-tooltip-wrapper",KF=1;function Gwe(t){return t.dataKey}function Hwe(t,e){return t===!0?G1(e,Gwe):Ze(t)?G1(e,t):e}function qwe(t,e){return tn.isValidElement(t)?tn.cloneElement(t,e):Ze(t)?tn.createElement(t,e):D(eA,{...e})}var Qu=function(t){zwe(n,t);var e=Vwe(n);function n(){var r;Lwe(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),r.state={boxWidth:-1,boxHeight:-1},r.wrapperNode=void 0,r.getTranslate=function(a){var l=a.key,u=a.tooltipDimension,c=a.viewBoxDimension,h=r.props,f=h.allowEscapeViewBox,d=h.coordinate,p=h.offset,m=h.position,g=h.viewBox;if(m&&Ee(m[l]))return m[l];var y=d[l]-u-p,v=d[l]+p;if(f[l])return v;var b=d[l]+u+p,x=g[l]+c;return b>x?Math.max(y,g[l]):Math.max(v,g[l])},r}return Bwe(n,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var s=this.state,i=s.boxWidth,o=s.boxHeight;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-i)>KF||Math.abs(a.height-o)>KF)&&this.setState({boxWidth:a.width,boxHeight:a.height})}else(i!==-1||o!==-1)&&this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var s,i=this,o=this.props,a=o.payload,l=o.isAnimationActive,u=o.animationDuration,c=o.animationEasing,h=o.filterNull,f=o.payloadUniqBy,d=Hwe(f,h&&a&&a.length?a.filter(function(O){return!Xe(O.value)}):a),p=d&&d.length,m=this.props,g=m.content,y=m.viewBox,v=m.coordinate,b=m.position,x=m.active,w=m.wrapperStyle,S=Cu({pointerEvents:"none",visibility:x&&p?"visible":"hidden",position:"absolute",top:0,left:0},w),k,I;if(b&&Ee(b.x)&&Ee(b.y))k=b.x,I=b.y;else{var T=this.state,N=T.boxWidth,A=T.boxHeight;N>0&&A>0&&v?(k=this.getTranslate({key:"x",tooltipDimension:N,viewBoxDimension:y.width}),I=this.getTranslate({key:"y",tooltipDimension:A,viewBoxDimension:y.height})):S.visibility="hidden"}S=Cu(Cu({},NT({transform:this.props.useTranslate3d?"translate3d(".concat(k,"px, ").concat(I,"px, 0)"):"translate(".concat(k,"px, ").concat(I,"px)")})),S),l&&x&&(S=Cu(Cu({},NT({transition:"transform ".concat(u,"ms ").concat(c)})),S));var R=bn(np,(s={},kp(s,"".concat(np,"-right"),Ee(k)&&v&&Ee(v.x)&&k>=v.x),kp(s,"".concat(np,"-left"),Ee(k)&&v&&Ee(v.x)&&k<v.x),kp(s,"".concat(np,"-bottom"),Ee(I)&&v&&Ee(v.y)&&I>=v.y),kp(s,"".concat(np,"-top"),Ee(I)&&v&&Ee(v.y)&&I<v.y),s));return D("div",{className:R,style:S,ref:function(M){i.wrapperNode=M},children:qwe(g,Cu(Cu({},this.props),{},{payload:d}))})}}]),n}(ae.exports.PureComponent);Qu.displayName="Tooltip";Qu.defaultProps={active:!1,allowEscapeViewBox:{x:!1,y:!1},offset:10,viewBox:{x1:0,x2:0,y1:0,y2:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!Al.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1};var Kwe=ca,Xwe=function(){return Kwe.Date.now()},Ywe=Xwe,Qwe=/\s/;function Jwe(t){for(var e=t.length;e--&&Qwe.test(t.charAt(e)););return e}var Zwe=Jwe,e2e=Zwe,t2e=/^\s+/;function n2e(t){return t&&t.slice(0,e2e(t)+1).replace(t2e,"")}var r2e=n2e,s2e=r2e,XF=Ii,i2e=bd,YF=0/0,o2e=/^[-+]0x[0-9a-f]+$/i,a2e=/^0b[01]+$/i,l2e=/^0o[0-7]+$/i,u2e=parseInt;function c2e(t){if(typeof t=="number")return t;if(i2e(t))return YF;if(XF(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=XF(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=s2e(t);var n=a2e.test(t);return n||l2e.test(t)?u2e(t.slice(2),n?2:8):o2e.test(t)?YF:+t}var jW=c2e,h2e=Ii,zk=Ywe,QF=jW,f2e="Expected a function",d2e=Math.max,p2e=Math.min;function m2e(t,e,n){var r,s,i,o,a,l,u=0,c=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(f2e);e=QF(e)||0,h2e(n)&&(c=!!n.leading,h="maxWait"in n,i=h?d2e(QF(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function d(S){var k=r,I=s;return r=s=void 0,u=S,o=t.apply(I,k),o}function p(S){return u=S,a=setTimeout(y,e),c?d(S):o}function m(S){var k=S-l,I=S-u,T=e-k;return h?p2e(T,i-I):T}function g(S){var k=S-l,I=S-u;return l===void 0||k>=e||k<0||h&&I>=i}function y(){var S=zk();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?d(S):(r=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=s=a=void 0}function x(){return a===void 0?o:v(zk())}function w(){var S=zk(),k=g(S);if(r=arguments,s=this,l=S,k){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(y,e),d(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=b,w.flush=x,w}var g2e=m2e,tA=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]},BT={exports:{}},Vk="(".charCodeAt(0),Uk=")".charCodeAt(0),P0="'".charCodeAt(0),Wk='"'.charCodeAt(0),jk="\\".charCodeAt(0),M0="/".charCodeAt(0),Gk=",".charCodeAt(0),Hk=":".charCodeAt(0),JF="*".charCodeAt(0),y2e=function(t){for(var e=[],n=t,r,s,i,o,a,l,u,c=0,h=n.charCodeAt(c),f=n.length,d=[{nodes:e}],p=0,m,g="",y="",v="";c<f;)if(h<=32){r=c;do r+=1,h=n.charCodeAt(r);while(h<=32);o=n.slice(c,r),i=e[e.length-1],h===Uk&&p?v=o:i&&i.type==="div"?i.after=o:h===Gk||h===Hk||h===M0&&n.charCodeAt(r+1)!==JF?y=o:e.push({type:"space",sourceIndex:c,value:o}),c=r}else if(h===P0||h===Wk){r=c,s=h===P0?"'":'"',o={type:"string",sourceIndex:c,quote:s};do if(a=!1,r=n.indexOf(s,r+1),~r)for(l=r;n.charCodeAt(l-1)===jk;)l-=1,a=!a;else n+=s,r=n.length-1,o.unclosed=!0;while(a);o.value=n.slice(c+1,r),e.push(o),c=r+1,h=n.charCodeAt(c)}else if(h===M0&&n.charCodeAt(c+1)===JF)o={type:"comment",sourceIndex:c},r=n.indexOf("*/",c),r===-1&&(o.unclosed=!0,r=n.length),o.value=n.slice(c+2,r),e.push(o),c=r+2,h=n.charCodeAt(c);else if(h===M0||h===Gk||h===Hk)o=n[c],e.push({type:"div",sourceIndex:c-y.length,value:o,before:y,after:""}),y="",c+=1,h=n.charCodeAt(c);else if(Vk===h){r=c;do r+=1,h=n.charCodeAt(r);while(h<=32);if(o={type:"function",sourceIndex:c-g.length,value:g,before:n.slice(c+1,r)},c=r,g==="url"&&h!==P0&&h!==Wk){r-=1;do if(a=!1,r=n.indexOf(")",r+1),~r)for(l=r;n.charCodeAt(l-1)===jk;)l-=1,a=!a;else n+=")",r=n.length-1,o.unclosed=!0;while(a);u=r;do u-=1,h=n.charCodeAt(u);while(h<=32);c!==u+1?o.nodes=[{type:"word",sourceIndex:c,value:n.slice(c,u+1)}]:o.nodes=[],o.unclosed&&u+1!==r?(o.after="",o.nodes.push({type:"space",sourceIndex:u+1,value:n.slice(u+1,r)})):o.after=n.slice(u+1,r),c=r+1,h=n.charCodeAt(c),e.push(o)}else p+=1,o.after="",e.push(o),d.push(o),e=o.nodes=[],m=o;g=""}else if(Uk===h&&p)c+=1,h=n.charCodeAt(c),m.after=v,v="",p-=1,d.pop(),m=d[p],e=m.nodes;else{r=c;do h===jk&&(r+=1),r+=1,h=n.charCodeAt(r);while(r<f&&!(h<=32||h===P0||h===Wk||h===Gk||h===Hk||h===M0||h===Vk||h===Uk&&p));o=n.slice(c,r),Vk===h?g=o:e.push({type:"word",sourceIndex:c,value:o}),c=r}for(c=d.length-1;c;c-=1)d[c].unclosed=!0;return d[0].nodes},v2e=function t(e,n,r){var s,i,o,a;for(s=0,i=e.length;s<i;s+=1)o=e[s],r||(a=n(o,s,e)),a!==!1&&o.type==="function"&&Array.isArray(o.nodes)&&t(o.nodes,n,r),r&&n(o,s,e)};function ZF(t,e){var n=t.type,r=t.value,s,i;return e&&(i=e(t))!==void 0?i:n==="word"||n==="space"?r:n==="string"?(s=t.quote||"",s+r+(t.unclosed?"":s)):n==="comment"?"/*"+r+(t.unclosed?"":"*/"):n==="div"?(t.before||"")+r+(t.after||""):Array.isArray(t.nodes)?(s=GW(t.nodes),n!=="function"?s:r+"("+(t.before||"")+s+(t.after||"")+(t.unclosed?"":")")):r}function GW(t,e){var n,r;if(Array.isArray(t)){for(n="",r=t.length-1;~r;r-=1)n=ZF(t[r],e)+n;return n}return ZF(t,e)}var x2e=GW,qk,eL;function b2e(){if(eL)return qk;eL=1;var t="-".charCodeAt(0),e="+".charCodeAt(0),n=".".charCodeAt(0),r="e".charCodeAt(0),s="E".charCodeAt(0);return qk=function(i){for(var o=0,a=i.length,l=!1,u=-1,c=!1,h;o<a;){if(h=i.charCodeAt(o),h>=48&&h<=57)c=!0;else if(h===r||h===s){if(u>-1)break;u=o}else if(h===n){if(l)break;l=!0}else if(h===e||h===t){if(o!==0)break}else break;o+=1}return u+1===o&&o--,c?{number:i.slice(0,o),unit:i.slice(o)}:!1},qk}var w2e=y2e,HW=v2e,qW=x2e;function ql(t){return this instanceof ql?(this.nodes=w2e(t),this):new ql(t)}ql.prototype.toString=function(){return Array.isArray(this.nodes)?qW(this.nodes):""};ql.prototype.walk=function(t,e){return HW(this.nodes,t,e),this};ql.unit=b2e();ql.walk=HW;ql.stringify=qW;var S2e=ql;function k2e(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KW={};(function(t){var e=function(){function n(f,d){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),f==null&&(f="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:f}),this.hash=d;var p;if(d&&d.exception instanceof Error){var m=d.exception;this.message=m.message||f,p=m.stack}p||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):p=new Error(f).stack),p&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:p})}typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(n.prototype,Error.prototype):n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="JisonParserError";function r(f){for(var d=[],p=f.pop,m=f.rule,g=0,y=p.length;g<y;g++)d.push([p[g],m[g]]);return d}function s(f){for(var d={},p=f.idx,m=f.goto,g=0,y=p.length;g<y;g++){var v=p[g];d[v]=m[g]}return d}function i(f){for(var d=[],p=f.len,m=f.symbol,g=f.type,y=f.state,v=f.mode,b=f.goto,x=0,w=p.length;x<w;x++){for(var S=p[x],k={},I=0;I<S;I++){var T=m.shift();switch(g.shift()){case 2:k[T]=[v.shift(),b.shift()];break;case 0:k[T]=y.shift();break;default:k[T]=[3]}}d.push(k)}return d}function o(f,d,p){p=p||0;for(var m=0;m<d;m++)this.push(f),f+=p}function a(f,d){for(f=this.length-f,d+=f;f<d;f++)this.push(this[f])}function l(f){for(var d=[],p=0,m=f.length;p<m;p++){var g=f[p];typeof g=="function"?(p++,g.apply(d,f[p])):d.push(g)}return d}var u={trace:function(){},JisonParserError:n,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(d){return'"'+d+'"'},getSymbolName:function(d){if(this.terminals_[d])return this.terminals_[d];var p=this.symbols_;for(var m in p)if(p[m]===d)return m;return null},describeSymbol:function(d){if(d!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[d])return this.terminal_descriptions_[d];if(d===this.EOF)return"end of input";var p=this.getSymbolName(d);return p?this.quoteName(p):null},collect_expected_token_set:function(d,p){var m=this.TERROR,g=[],y={};if(!p&&this.state_descriptions_&&this.state_descriptions_[d])return[this.state_descriptions_[d]];for(var v in this.table[d])if(v=+v,v!==m){var b=p?v:this.describeSymbol(v);b&&!y[b]&&(g.push(b),y[b]=!0)}return g},productions_:r({pop:l([29,o,[30,10],31,31,32,32,o,[33,15]]),rule:l([2,o,[3,5],4,7,o,[1,4],2,4,6,o,[1,14],2])}),performAction:function(d,p,m){var g=this.yy;switch(g.parser,g.lexer,d){case 0:this.$=m[p-1];break;case 1:return this.$=m[p-1],m[p-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:m[p-1],left:m[p-2],right:m[p]};break;case 6:this.$=m[p-1];break;case 7:this.$={type:"Calc",value:m[p-1]};break;case 8:this.$={type:"Calc",value:m[p-1],prefix:m[p-5]};break;case 9:case 10:case 11:this.$=m[p];break;case 12:this.$={type:"Value",value:parseFloat(m[p])};break;case 13:this.$={type:"Value",value:parseFloat(m[p])*-1};break;case 14:this.$={type:"CssVariable",value:m[p-1]};break;case 15:this.$={type:"CssVariable",value:m[p-3],fallback:m[p-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(m[p]),unit:/[a-z]+/.exec(m[p])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(m[p]),unit:/[a-z]+/.exec(m[p])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(m[p]),unit:/[a-z]+/.exec(m[p])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(m[p]),unit:/[a-z]+/.exec(m[p])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(m[p]),unit:/[a-z]+/.exec(m[p])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(m[p]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(m[p]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(m[p]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(m[p]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(m[p]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(m[p]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(m[p]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(m[p]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(m[p]),unit:"%"};break;case 30:var y=m[p];y.value*=-1,this.$=y;break}},table:i({len:l([24,1,5,23,1,18,o,[0,3],1,o,[0,16],o,[23,4],a,[28,3],0,0,16,1,6,6,o,[0,3],5,1,2,a,[37,3],a,[20,3],5,0,0]),symbol:l([4,7,9,11,12,o,[15,19,1],1,1,o,[3,4,1],a,[30,19],a,[29,4],7,4,10,11,a,[22,14],a,[19,3],a,[43,22],a,[23,69],a,[139,4],8,a,[51,24],4,a,[138,15],13,a,[186,5],8,a,[6,6],a,[5,5],9,8,14,a,[159,47],a,[60,10]]),type:l([o,[2,19],o,[0,5],1,o,[2,24],o,[0,4],a,[22,19],a,[43,42],a,[23,70],a,[28,25],a,[45,25],a,[113,54]]),state:l([1,2,8,6,7,30,a,[4,3],33,37,a,[5,3],38,a,[4,3],39,a,[4,3],40,a,[4,3],42,a,[21,4],50,a,[5,3],51,a,[4,3]]),mode:l([o,[1,179],o,[2,3],a,[5,5],a,[6,4],o,[1,57]]),goto:l([5,3,4,24,o,[9,15,1],o,[25,5,1],a,[24,19],31,35,32,34,a,[18,14],36,a,[38,19],a,[19,57],a,[118,4],41,a,[24,19],43,35,a,[16,14],44,o,[2,3],28,29,2,o,[3,3],28,29,3,a,[53,4],o,[45,5,1],a,[100,42],52,a,[5,4],53])}),defaultActions:s({idx:l([6,7,8,o,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:l([9,10,11,o,[16,14,1],12,1,30,13,o,[4,4,1],14,15,8])}),parseError:function(d,p,m){if(p.recoverable)typeof this.trace=="function"&&this.trace(d),p.destroy();else throw typeof this.trace=="function"&&this.trace(d),m||(m=this.JisonParserError),new m(d,p)},parse:function(d){var p=this,m=new Array(128),g=new Array(128),y=new Array(128),v=this.table,b=0,x=0;this.TERROR;var w=this.EOF;this.options.errorRecoveryTokenDiscardCount|0;var S=[0,54],k;this.__lexer__?k=this.__lexer__:k=this.__lexer__=Object.create(this.lexer);var I={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};typeof assert!="function"||assert,this.yyGetSharedState=function(){return I};function T(ve,ee){for(var ce in ee)typeof ve[ce]>"u"&&Object.prototype.hasOwnProperty.call(ee,ce)&&(ve[ce]=ee[ce])}T(I,this.yy),I.lexer=k,I.parser=this,typeof I.parseError=="function"?this.parseError=function(ee,ce,we){return we||(we=this.JisonParserError),I.parseError.call(this,ee,ce,we)}:this.parseError=this.originalParseError,typeof I.quoteName=="function"?this.quoteName=function(ee){return I.quoteName.call(this,ee)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(ee,ce,we){var ne;if(ce){var Re;(I.post_parse||this.post_parse)&&(Re=this.constructParseErrorInfo(null,null,null,!1)),I.post_parse&&(ne=I.post_parse.call(this,I,ee,Re),typeof ne<"u"&&(ee=ne)),this.post_parse&&(ne=this.post_parse.call(this,I,ee,Re),typeof ne<"u"&&(ee=ne)),Re&&Re.destroy&&Re.destroy()}if(this.__reentrant_call_depth>1)return ee;if(k.cleanupAfterLex&&k.cleanupAfterLex(we),I&&(I.lexer=void 0,I.parser=void 0,k.yy===I&&(k.yy=void 0)),I=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,m.length=0,g.length=0,y.length=0,b=0,!we){for(var $e=this.__error_infos.length-1;$e>=0;$e--){var qe=this.__error_infos[$e];qe&&typeof qe.destroy=="function"&&qe.destroy()}this.__error_infos.length=0}return ee},this.constructParseErrorInfo=function(ee,ce,we,ne){var Re={errStr:ee,exception:ce,text:k.match,value:k.yytext,token:this.describeSymbol(x)||x,token_id:x,line:k.yylineno,expected:we,recoverable:ne,state:O,action:M,new_state:Q,symbol_stack:m,state_stack:g,value_stack:y,stack_pointer:b,yy:I,lexer:k,parser:this,destroy:function(){var qe=!!this.recoverable;for(var Ue in this)this.hasOwnProperty(Ue)&&typeof Ue=="object"&&(this[Ue]=void 0);this.recoverable=qe}};return this.__error_infos.push(Re),Re};function N(){var ve=k.lex();return typeof ve!="number"&&(ve=p.symbols_[ve]||ve),ve||w}function A(){var ve=k.fastLex();return typeof ve!="number"&&(ve=p.symbols_[ve]||ve),ve||w}var R=N,O,M,z,B,K={$:!0,_$:void 0,yy:I},L,V,j,Q,Z=!1;try{if(this.__reentrant_call_depth++,k.setInput(d,I),typeof k.canIUse=="function"){var oe=k.canIUse();oe.fastLex&&typeof A=="function"&&(R=A)}for(y[b]=null,g[b]=0,m[b]=0,++b,this.pre_parse&&this.pre_parse.call(this,I),I.pre_parse&&I.pre_parse.call(this,I),Q=g[b-1];;){if(O=Q,this.defaultActions[O])M=2,Q=this.defaultActions[O];else if(x||(x=R()),B=v[O]&&v[O][x]||S,Q=B[1],M=B[0],!M){var fe,le=this.describeSymbol(x)||x,ye=this.collect_expected_token_set(O);typeof k.yylineno=="number"?fe="Parse error on line "+(k.yylineno+1)+": ":fe="Parse error: ",typeof k.showPosition=="function"&&(fe+=`
`+k.showPosition(79-10,10)+`
`),ye.length?fe+="Expecting "+ye.join(", ")+", got unexpected "+le:fe+="Unexpected "+le,L=this.constructParseErrorInfo(fe,null,ye,!1),z=this.parseError(L.errStr,L,this.JisonParserError),typeof z<"u"&&(Z=z);break}switch(M){default:if(M instanceof Array){L=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+O+", token: "+x,null,null,!1),z=this.parseError(L.errStr,L,this.JisonParserError),typeof z<"u"&&(Z=z);break}L=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),z=this.parseError(L.errStr,L,this.JisonParserError),typeof z<"u"&&(Z=z);break;case 1:m[b]=x,y[b]=k.yytext,g[b]=Q,++b,x=0;continue;case 2:if(j=this.productions_[Q-1],V=j[1],z=this.performAction.call(K,Q,b-1,y),typeof z<"u"){Z=z;break}b-=V;var Ce=j[0];m[b]=Ce,y[b]=K.$,Q=v[g[b-1]][Ce],g[b]=Q,++b;continue;case 3:b!==-2&&(Z=!0,b--,typeof y[b]<"u"&&(Z=y[b]));break}break}}catch(ve){if(ve instanceof this.JisonParserError)throw ve;if(k&&typeof k.JisonLexerError=="function"&&ve instanceof k.JisonLexerError)throw ve;L=this.constructParseErrorInfo("Parsing aborted due to exception.",ve,null,!1),Z=!1,z=this.parseError(L.errStr,L,this.JisonParserError),typeof z<"u"&&(Z=z)}finally{Z=this.cleanupAfterParse(Z,!0,!0),this.__reentrant_call_depth--}return Z}};u.originalParseError=u.parseError,u.originalQuoteName=u.quoteName;var c=function(){function f(p,m){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),p==null&&(p="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:p}),this.hash=m;var g;if(m&&m.exception instanceof Error){var y=m.exception;this.message=y.message||p,g=y.stack}g||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):g=new Error(p).stack),g&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:g})}typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(f.prototype,Error.prototype):f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="JisonLexerError";var d={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(m,g,y){if(m=""+m,y==null&&(y=!(m.indexOf(`
`)>0&&m.indexOf("^")>0)),this.yylloc&&y){if(typeof this.prettyPrintRange=="function")this.prettyPrintRange(this.yylloc),/\n\s*$/.test(m)||(m+=`
`),m+=`
  Erroneous area:
`+this.prettyPrintRange(this.yylloc);else if(typeof this.showPosition=="function"){var v=this.showPosition();v&&(m.length&&m[m.length-1]!==`
`&&v[0]!==`
`?m+=`
`+v:m+=v)}}var b={errStr:m,recoverable:!!g,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var w=!!this.recoverable;for(var S in this)this.hasOwnProperty(S)&&typeof S=="object"&&(this[S]=void 0);this.recoverable=w}};return this.__error_infos.push(b),b},parseError:function(m,g,y){if(y||(y=this.JisonLexerError),this.yy){if(this.yy.parser&&typeof this.yy.parser.parseError=="function")return this.yy.parser.parseError.call(this,m,g,y)||this.ERROR;if(typeof this.yy.parseError=="function")return this.yy.parseError.call(this,m,g,y)||this.ERROR}throw new y(m,g)},yyerror:function(m){var g="";this.yylloc&&(g=" on line "+(this.yylineno+1));var y=this.constructLexErrorInfo("Lexical error"+g+": "+m,this.options.lexerErrorsAreRecoverable),v=Array.prototype.slice.call(arguments,1);return v.length&&(y.extra_error_attributes=v),this.parseError(y.errStr,y,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(m){if(this.setInput("",{}),!m){for(var g=this.__error_infos.length-1;g>=0;g--){var y=this.__error_infos[g];y&&typeof y.destroy=="function"&&y.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var m=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:m,last_line:this.yylineno+1,last_column:m,range:[this.offset,this.offset]}},setInput:function(m,g){if(this.yy=g||this.yy||{},!this.__decompressed){for(var y=this.rules,v=0,b=y.length;v<b;v++){var x=y[v];typeof x=="number"&&(y[v]=y[x])}var w=this.conditions;for(var S in w){for(var k=w[S],I=k.rules,b=I.length,T=new Array(b+1),N=new Array(b+1),v=0;v<b;v++){var A=I[v],x=y[A];T[v+1]=x,N[v+1]=A}k.rules=N,k.__rule_regexes=T,k.__rule_count=b}this.__decompressed=!0}return this._input=m||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(m,g){var y=m.call(this,this._input,g);return typeof y!="string"?y&&(this._input=""+y):this._input=y,this},input:function(){if(!this._input)return null;var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var g=1,y=!1;if(m===`
`)y=!0;else if(m==="\r"){y=!0;var v=this._input[1];v===`
`&&(g++,m+=v,this.yytext+=v,this.yyleng++,this.offset++,this.match+=v,this.matched+=v,this.yylloc.range[1]++)}return y?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(g),m},unput:function(m){var g=m.length,y=m.split(/(?:\r\n?|\n)/g);if(this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.yyleng=this.yytext.length,this.offset-=g,this.match=this.match.substr(0,this.match.length-g),this.matched=this.matched.substr(0,this.matched.length-g),y.length>1){this.yylineno-=y.length-1,this.yylloc.last_line=this.yylineno+1;var v=this.match,b=v.split(/(?:\r\n?|\n)/g);b.length===1&&(v=this.matched,b=v.split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=b[b.length-1].length}else this.yylloc.last_column-=g;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var m="";this.yylloc&&(m=" on line "+(this.yylineno+1));var g=this.constructLexErrorInfo("Lexical error"+m+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(g.errStr,g,this.JisonLexerError)||this.ERROR}return this},less:function(m){return this.unput(this.match.slice(m))},pastInput:function(m,g){var y=this.matched.substring(0,this.matched.length-this.match.length);m<0?m=y.length:m||(m=20),g<0?g=y.length:g||(g=1),y=y.substr(-m*2-2);var v=y.replace(/\r\n|\r/g,`
`).split(`
`);return v=v.slice(-g),y=v.join(`
`),y.length>m&&(y="..."+y.substr(-m)),y},upcomingInput:function(m,g){var y=this.match;m<0?m=y.length+this._input.length:m||(m=20),g<0?g=m:g||(g=1),y.length<m*2+2&&(y+=this._input.substring(0,m*2+2));var v=y.replace(/\r\n|\r/g,`
`).split(`
`);return v=v.slice(0,g),y=v.join(`
`),y.length>m&&(y=y.substring(0,m)+"..."),y},showPosition:function(m,g){var y=this.pastInput(m).replace(/\s/g," "),v=new Array(y.length+1).join("-");return y+this.upcomingInput(g).replace(/\s/g," ")+`
`+v+"^"},deriveLocationInfo:function(m,g,y,v){var b={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return m&&(b.first_line=m.first_line|0,b.last_line=m.last_line|0,b.first_column=m.first_column|0,b.last_column=m.last_column|0,m.range&&(b.range[0]=m.range[0]|0,b.range[1]=m.range[1]|0)),(b.first_line<=0||b.last_line<b.first_line)&&(b.first_line<=0&&g&&(b.first_line=g.last_line|0,b.first_column=g.last_column|0,g.range&&(b.range[0]=m.range[1]|0)),(b.last_line<=0||b.last_line<b.first_line)&&y&&(b.last_line=y.first_line|0,b.last_column=y.first_column|0,y.range&&(b.range[1]=m.range[0]|0)),b.first_line<=0&&v&&(b.last_line<=0||v.last_line<=b.last_line)&&(b.first_line=v.first_line|0,b.first_column=v.first_column|0,v.range&&(b.range[0]=v.range[0]|0)),b.last_line<=0&&v&&(b.first_line<=0||v.first_line>=b.first_line)&&(b.last_line=v.last_line|0,b.last_column=v.last_column|0,v.range&&(b.range[1]=v.range[1]|0))),b.last_line<=0&&(b.first_line<=0?(b.first_line=this.yylloc.first_line,b.last_line=this.yylloc.last_line,b.first_column=this.yylloc.first_column,b.last_column=this.yylloc.last_column,b.range[0]=this.yylloc.range[0],b.range[1]=this.yylloc.range[1]):(b.last_line=this.yylloc.last_line,b.last_column=this.yylloc.last_column,b.range[1]=this.yylloc.range[1])),b.first_line<=0&&(b.first_line=b.last_line,b.first_column=0,b.range[1]=b.range[0]),b.first_column<0&&(b.first_column=0),b.last_column<0&&(b.last_column=b.first_column>0?b.first_column:80),b},prettyPrintRange:function(m,g,y){m=this.deriveLocationInfo(m,g,y);const v=3,b=1,x=2;var w=this.matched+this._input,S=w.split(`
`),k=Math.max(1,g?g.first_line:m.first_line-v),I=Math.max(1,y?y.last_line:m.last_line+b),T=1+Math.log10(I|1)|0,N=new Array(T).join(" "),A=[],R=S.slice(k-1,I+1).map(function(K,L){var V=L+k,j=(N+V).substr(-T),Q=j+": "+K,Z=new Array(T+1).join("^"),oe=2+1,fe=0;if(V===m.first_line?(oe+=m.first_column,fe=Math.max(2,(V===m.last_line?m.last_column:K.length)-m.first_column+1)):V===m.last_line?fe=Math.max(2,m.last_column+1):V>m.first_line&&V<m.last_line&&(fe=Math.max(2,K.length+1)),fe){var le=new Array(oe).join("."),ye=new Array(fe).join("^");Q+=`
`+Z+le+ye,K.trim().length>0&&A.push(L)}return Q=Q.replace(/\t/g," "),Q});if(A.length>2*x){var O=A[x-1]+1,M=A[A.length-x]-1,z=new Array(T+1).join(" ")+"  (...continued...)";z+=`
`+new Array(T+1).join("-")+"  (---------------)",R.splice(O,M-O+1,z)}return R.join(`
`)},describeYYLLOC:function(m,g){var y=m.first_line,v=m.last_line,b=m.first_column,x=m.last_column,w=v-y,S=x-b,k;if(w===0?(k="line "+y+", ",S<=1?k+="column "+b:k+="columns "+b+" .. "+x):k="lines "+y+"(column "+b+") .. "+v+"(column "+x+")",m.range&&g){var I=m.range[0],T=m.range[1]-1;T<=I?k+=" {String Offset: "+I+"}":k+=" {String Offset range: "+I+" .. "+T+"}"}return k},test_match:function(m,g){var y,v,b,x,w;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),x=m[0],w=x.length,v=x.split(/(?:\r\n?|\n)/g),v.length>1?(this.yylineno+=v.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=v[v.length-1].length):this.yylloc.last_column+=w,this.yytext+=x,this.match+=x,this.matched+=x,this.matches=m,this.yyleng=this.yytext.length,this.yylloc.range[1]+=w,this.offset+=w,this._more=!1,this._backtrack=!1,this._input=this._input.slice(w),y=this.performAction.call(this,this.yy,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var S in b)this[S]=b[S];return this.__currentRuleSet__=null,!1}else if(this._signaled_error_token)return y=this._signaled_error_token,this._signaled_error_token=!1,y;return!1},next:function(){if(this.done)return this.clear(),this.EOF;this._input||(this.done=!0);var m,g,y,v;this._more||this.clear();var b=this.__currentRuleSet__;if(!b&&(b=this.__currentRuleSet__=this._currentRules(),!b||!b.rules)){var x="";this.options.trackPosition&&(x=" on line "+(this.yylineno+1));var w=this.constructLexErrorInfo("Internal lexer engine error"+x+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(w.errStr,w,this.JisonLexerError)||this.ERROR}for(var S=b.rules,k=b.__rule_regexes,I=b.__rule_count,T=1;T<=I;T++)if(y=this._input.match(k[T]),y&&(!g||y[0].length>g[0].length)){if(g=y,v=T,this.options.backtrack_lexer){if(m=this.test_match(y,S[T]),m!==!1)return m;if(this._backtrack){g=void 0;continue}else return!1}else if(!this.options.flex)break}if(g)return m=this.test_match(g,S[v]),m!==!1?m:!1;if(this._input){var x="";this.options.trackPosition&&(x=" on line "+(this.yylineno+1));var w=this.constructLexErrorInfo("Lexical error"+x+": Unrecognized text.",this.options.lexerErrorsAreRecoverable),N=this._input,A=this.topState(),R=this.conditionStack.length;return m=this.parseError(w.errStr,w,this.JisonLexerError)||this.ERROR,m===this.ERROR&&!this.matches&&N===this._input&&A===this.topState()&&R===this.conditionStack.length&&this.input(),m}else return this.done=!0,this.clear(),this.EOF},lex:function(){var m;for(typeof this.pre_lex=="function"&&(m=this.pre_lex.call(this,0)),typeof this.options.pre_lex=="function"&&(m=this.options.pre_lex.call(this,m)||m),this.yy&&typeof this.yy.pre_lex=="function"&&(m=this.yy.pre_lex.call(this,m)||m);!m;)m=this.next();return this.yy&&typeof this.yy.post_lex=="function"&&(m=this.yy.post_lex.call(this,m)||m),typeof this.options.post_lex=="function"&&(m=this.options.post_lex.call(this,m)||m),typeof this.post_lex=="function"&&(m=this.post_lex.call(this,m)||m),m},fastLex:function(){for(var m;!m;)m=this.next();return m},canIUse:function(){var m={fastLex:!(typeof this.pre_lex=="function"||typeof this.options.pre_lex=="function"||this.yy&&typeof this.yy.pre_lex=="function"||this.yy&&typeof this.yy.post_lex=="function"||typeof this.options.post_lex=="function"||typeof this.post_lex=="function")&&typeof this.fastLex=="function"};return m},begin:function(m){return this.pushState(m)},pushState:function(m){return this.conditionStack.push(m),this.__currentRuleSet__=null,this},popState:function(){var m=this.conditionStack.length-1;return m>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(m){return m=this.conditionStack.length-1-Math.abs(m||0),m>=0?this.conditionStack[m]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:f,performAction:function(m,g,y){switch(g){case 1:break;default:return this.simpleCaseActionClusters[g]}},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return d}();u.lexer=c;function h(){this.yy={}}return h.prototype=u,u.Parser=h,new h}();typeof k2e<"u"&&(t.parser=e,t.Parser=e.Parser,t.parse=function(){return e.parse.apply(e,arguments)})})(KW);var $g={},zT={exports:{}},Kk={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:1/1e3},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:1/1e3,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}},I2e=function(t,e,n,r){if(!Kk.hasOwnProperty(n))throw new Error("Cannot convert to "+n);if(!Kk[n].hasOwnProperty(e))throw new Error("Cannot convert from "+e+" to "+n);var s=Kk[n][e]*t;return r!==!1?(r=Math.pow(10,parseInt(r)||5),Math.round(s*r)/r):s};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=I2e,r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}function i(a,l,u){switch(a.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return o(a,l,u);default:return{left:a,right:l}}}function o(a,l,u){return l.type===a.type&&(l={type:a.type,value:(0,r.default)(l.value,l.unit,a.unit,u),unit:a.unit}),{left:a,right:l}}e.default=i,t.exports=e.default})(zT,zT.exports);Object.defineProperty($g,"__esModule",{value:!0});$g.flip=VT;var C2e=zT.exports,Xk=T2e(C2e);function T2e(t){return t&&t.__esModule?t:{default:t}}function ls(t,e){return t.type==="MathExpression"?A2e(t,e):t.type==="Calc"?ls(t.value,e):t}function tL(t,e){return t.type===e.type&&t.value===e.value}function Gs(t){switch(t){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function $2e(t,e){var n=(0,Xk.default)(t.left,t.right,e),r=ls(n.left,e),s=ls(n.right,e);return r.type==="MathExpression"&&s.type==="MathExpression"&&(r.operator==="/"&&s.operator==="*"||r.operator==="-"&&s.operator==="+"||r.operator==="*"&&s.operator==="/"||r.operator==="+"&&s.operator==="-")&&(tL(r.right,s.right)?n=(0,Xk.default)(r.left,s.left,e):tL(r.right,s.left)&&(n=(0,Xk.default)(r.left,s.right,e)),r=ls(n.left,e),s=ls(n.right,e)),t.left=r,t.right=s,t}function VT(t){return t==="+"?"-":"+"}function UT(t){return Gs(t.type)?t.value=-t.value:t.type=="MathExpression"&&(t.left=UT(t.left),t.right=UT(t.right)),t}function N2e(t,e){var n=t,r=n.left,s=n.right,i=n.operator;if(r.type==="CssVariable"||s.type==="CssVariable")return t;if(s.value===0)return r;if(r.value===0&&i==="+")return s;if(r.value===0&&i==="-")return UT(s);if(r.type===s.type&&Gs(r.type)&&(t=Object.assign({},r),i==="+"?t.value=r.value+s.value:t.value=r.value-s.value),Gs(r.type)&&(s.operator==="+"||s.operator==="-")&&s.type==="MathExpression"){if(r.type===s.left.type)return t=Object.assign({},t),t.left=ls({type:"MathExpression",operator:i,left:r,right:s.left},e),t.right=s.right,t.operator=i==="-"?VT(s.operator):s.operator,ls(t,e);if(r.type===s.right.type)return t=Object.assign({},t),t.left=ls({type:"MathExpression",operator:i==="-"?VT(s.operator):s.operator,left:r,right:s.right},e),t.right=s.left,ls(t,e)}if(r.type==="MathExpression"&&(r.operator==="+"||r.operator==="-")&&Gs(s.type)){if(s.type===r.left.type)return t=Object.assign({},r),t.left=ls({type:"MathExpression",operator:i,left:r.left,right:s},e),ls(t,e);if(s.type===r.right.type)return t=Object.assign({},r),r.operator==="-"?(t.right=ls({type:"MathExpression",operator:i==="-"?"+":"-",left:s,right:r.right},e),t.operator=i==="-"?"-":"+"):t.right=ls({type:"MathExpression",operator:i,left:r.right,right:s},e),t.right.value<0&&(t.right.value*=-1,t.operator=t.operator==="-"?"+":"-"),ls(t,e)}return t}function E2e(t,e){if(!Gs(t.right.type))return t;if(t.right.type!=="Value")throw new Error('Cannot divide by "'+t.right.unit+'", number expected');if(t.right.value===0)throw new Error("Cannot divide by zero");return t.left.type==="MathExpression"?Gs(t.left.left.type)&&Gs(t.left.right.type)?(t.left.left.value/=t.right.value,t.left.right.value/=t.right.value,ls(t.left,e)):t:Gs(t.left.type)?(t.left.value/=t.right.value,t.left):t}function _2e(t){if(t.left.type==="MathExpression"&&t.right.type==="Value"){if(Gs(t.left.left.type)&&Gs(t.left.right.type))return t.left.left.value*=t.right.value,t.left.right.value*=t.right.value,t.left}else{if(Gs(t.left.type)&&t.right.type==="Value")return t.left.value*=t.right.value,t.left;if(t.left.type==="Value"&&t.right.type==="MathExpression"){if(Gs(t.right.left.type)&&Gs(t.right.right.type))return t.right.left.value*=t.left.value,t.right.right.value*=t.left.value,t.right}else if(t.left.type==="Value"&&Gs(t.right.type))return t.right.value*=t.left.value,t.right}return t}function A2e(t,e){switch(t=$2e(t,e),t.operator){case"+":case"-":return N2e(t,e);case"/":return E2e(t,e);case"*":return _2e(t)}return t}$g.default=ls;var WT={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,a,l){var u=i(a,l);return a.type==="MathExpression"&&(u=o+"("+u+")"),u};var n=$g,r={"*":0,"/":0,"+":1,"-":1};function s(o,a){if(a!==!1){var l=Math.pow(10,a);return Math.round(o*l)/l}return o}function i(o,a){switch(o.type){case"MathExpression":{var l=o.left,u=o.right,c=o.operator,h="";return l.type==="MathExpression"&&r[c]<r[l.operator]?h+="("+i(l,a)+")":h+=i(l,a),h+=" "+o.operator+" ",u.type==="MathExpression"&&r[c]<r[u.operator]?h+="("+i(u,a)+")":(u.type==="MathExpression"&&c==="-"&&["+","-"].includes(u.operator)&&(u.operator=(0,n.flip)(u.operator)),h+=i(u,a)),h}case"Value":return s(o.value,a);case"CssVariable":return o.fallback?"var("+o.value+", "+i(o.fallback,a)+")":"var("+o.value+")";case"Calc":return o.prefix?"-"+o.prefix+"-calc("+i(o.value,a)+")":"calc("+i(o.value,a)+")";default:return s(o.value,a)+o.unit}}t.exports=e.default})(WT,WT.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=S2e,r=u(n),s=KW,i=$g,o=u(i),a=WT.exports,l=u(a);function u(h){return h&&h.__esModule?h:{default:h}}var c=/((?:\-[a-z]+\-)?calc)/;e.default=function(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return(0,r.default)(h).walk(function(d){if(!(d.type!=="function"||!c.test(d.value))){var p=r.default.stringify(d.nodes);if(!(p.indexOf("constant")>=0||p.indexOf("env")>=0)){var m=s.parser.parse(p),g=(0,o.default)(m,f);d.type="word",d.value=(0,l.default)(d.value,g,f)}}},!0).toString()},t.exports=e.default})(BT,BT.exports);const Yk=EN(BT.exports);function nL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function rL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nL(Object(n),!0).forEach(function(r){O2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O2e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sL(t){return M2e(t)||P2e(t)||D2e(t)||R2e()}function R2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D2e(t,e){if(!!t){if(typeof t=="string")return jT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jT(t,e)}}function P2e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function M2e(t){if(Array.isArray(t))return jT(t)}function jT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gh={widthCache:{},cacheCount:0},F2e=2e3,L2e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},B2e=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],iL="recharts_measurement_span";function z2e(t,e){return B2e.indexOf(t)>=0&&e===+e?"".concat(e,"px"):e}function V2e(t){var e=t.split(""),n=e.reduce(function(r,s){return s===s.toUpperCase()?[].concat(sL(r),["-",s.toLowerCase()]):[].concat(sL(r),[s])},[]);return n.join("")}var U2e=function(e){return Object.keys(e).reduce(function(n,r){return"".concat(n).concat(V2e(r),":").concat(z2e(r,e[r]),";")},"")},Bu=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Al.isSsr)return{width:0,height:0};var r="".concat(e),s=U2e(n),i="".concat(r,"-").concat(s);if(gh.widthCache[i])return gh.widthCache[i];try{var o=document.getElementById(iL);o||(o=document.createElement("span"),o.setAttribute("id",iL),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=rL(rL({},L2e),n);Object.keys(a).map(function(c){return o.style[c]=a[c],c}),o.textContent=r;var l=o.getBoundingClientRect(),u={width:l.width,height:l.height};return gh.widthCache[i]=u,++gh.cacheCount>F2e&&(gh.cacheCount=0,gh.widthCache={}),u}catch{return{width:0,height:0}}},W2e=function(e){var n=e.ownerDocument.documentElement,r={top:0,left:0};return typeof e.getBoundingClientRect<"u"&&(r=e.getBoundingClientRect()),{top:r.top+window.pageYOffset-n.clientTop,left:r.left+window.pageXOffset-n.clientLeft}},j2e=function(e,n){return{chartX:Math.round(e.pageX-n.left),chartY:Math.round(e.pageY-n.top)}};function Rv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rv=function(n){return typeof n}:Rv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rv(t)}function G2e(t,e){if(t==null)return{};var n=H2e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function H2e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function q2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K2e(t,e,n){return e&&oL(t.prototype,e),n&&oL(t,n),t}function X2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&GT(t,e)}function GT(t,e){return GT=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},GT(t,e)}function Y2e(t){var e=Z2e();return function(){var r=ox(t),s;if(e){var i=ox(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return Q2e(this,s)}}function Q2e(t,e){return e&&(Rv(e)==="object"||typeof e=="function")?e:J2e(t)}function J2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ox(t){return ox=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ox(t)}function aL(t,e){return rSe(t)||nSe(t,e)||tSe(t,e)||eSe()}function eSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tSe(t,e){if(!!t){if(typeof t=="string")return lL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lL(t,e)}}function lL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nSe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function rSe(t){if(Array.isArray(t))return t}function uL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uL(Object(n),!0).forEach(function(r){sSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sSe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var XW=/[ \f\n\r\t\v\u2028\u2029]+/,YW=function(e){try{var n=[];Xe(e.children)||(e.breakAll?n=e.children.toString().split(""):n=e.children.toString().split(XW));var r=n.map(function(i){return{word:i,width:Bu(i,e.style).width}}),s=e.breakAll?0:Bu("\xA0",e.style).width;return{wordsWithComputedWidth:r,spaceWidth:s}}catch{return null}},iSe=function(e,n,r,s,i){var o=Ee(e.maxLines),a=e.children,l=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce(function(R,O){var M=O.word,z=O.width,B=R[R.length-1];if(B&&(s==null||i||B.width+z+r<s))B.words.push(M),B.width+=z+r;else{var K={words:[M],width:z};R.push(K)}return R},[])},u=l(n),c=function(A){return A.reduce(function(R,O){return R.width>O.width?R:O})};if(!o)return u;for(var h="\u2026",f=function(A){var R=a.slice(0,A),O=YW(cL(cL({},e),{},{children:R+h})).wordsWithComputedWidth,M=l(O),z=M.length>e.maxLines||c(M).width>s;return[z,M]},d=0,p=a.length-1,m=0,g;d<=p&&m<=a.length-1;){var y=Math.floor((d+p)/2),v=y-1,b=f(v),x=aL(b,2),w=x[0],S=x[1],k=f(y),I=aL(k,1),T=I[0];if(!w&&!T&&(d=y+1),w&&T&&(p=y-1),!w&&T){g=S;break}m++}return g||u},hL=function(e){var n=Xe(e)?[]:e.toString().split(XW);return[{words:n}]},oSe=function(e,n){if((e.width||e.scaleToFit)&&!Al.isSsr){var r,s;if(n){var i=YW(e);if(i){var o=i.wordsWithComputedWidth,a=i.spaceWidth;r=o,s=a}else return hL(e.children);return iSe(e,r,s,e.width,e.scaleToFit)}}return hL(e.children)},Nm=function(t){X2e(n,t);var e=Y2e(n);function n(){var r;q2e(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),r.state={},r}return K2e(n,[{key:"render",value:function(){var s=this.props,i=s.dx,o=s.dy,a=s.textAnchor,l=s.verticalAnchor,u=s.scaleToFit,c=s.angle,h=s.lineHeight,f=s.capHeight,d=s.className,p=s.breakAll,m=G2e(s,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className","breakAll"]),g=this.state.wordsByLines;if(!mr(m.x)||!mr(m.y))return null;var y=m.x+(Ee(i)?i:0),v=m.y+(Ee(o)?o:0),b;switch(l){case"start":b=Yk("calc(".concat(f,")"));break;case"middle":b=Yk("calc(".concat((g.length-1)/2," * -").concat(h," + (").concat(f," / 2))"));break;default:b=Yk("calc(".concat(g.length-1," * -").concat(h,")"));break}var x=[];if(u){var w=g[0].width,S=this.props.width;x.push("scale(".concat((Ee(S)?S/w:1)/w,")"))}return c&&x.push("rotate(".concat(c,", ").concat(y,", ").concat(v,")")),x.length&&(m.transform=x.join(" ")),D("text",{...Gt(m,!0),x:y,y:v,className:bn("recharts-text",d),textAnchor:a,children:g.map(function(k,I){return D("tspan",{x:y,dy:I===0?b:h,children:k.words.join(p?"":" ")},I)})})}}],[{key:"getDerivedStateFromProps",value:function(s,i){if(s.width!==i.prevWidth||s.scaleToFit!==i.prevScaleToFit||s.children!==i.prevChildren||s.style!==i.prevStyle||s.breakAll!==i.prevBreakAll){var o=s.children!==i.prevChildren||s.style!==i.prevStyle||s.breakAll!==i.prevBreakAll;return{prevWidth:s.width,prevScaleToFit:s.scaleToFit,prevChildren:s.children,prevStyle:s.style,wordsByLines:oSe(s,o)}}return null}}]),n}(ae.exports.Component);Nm.defaultProps={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"};var QW={exports:{}},Jt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr=typeof Symbol=="function"&&Symbol.for,nA=Mr?Symbol.for("react.element"):60103,rA=Mr?Symbol.for("react.portal"):60106,yw=Mr?Symbol.for("react.fragment"):60107,vw=Mr?Symbol.for("react.strict_mode"):60108,xw=Mr?Symbol.for("react.profiler"):60114,bw=Mr?Symbol.for("react.provider"):60109,ww=Mr?Symbol.for("react.context"):60110,sA=Mr?Symbol.for("react.async_mode"):60111,Sw=Mr?Symbol.for("react.concurrent_mode"):60111,kw=Mr?Symbol.for("react.forward_ref"):60112,Iw=Mr?Symbol.for("react.suspense"):60113,aSe=Mr?Symbol.for("react.suspense_list"):60120,Cw=Mr?Symbol.for("react.memo"):60115,Tw=Mr?Symbol.for("react.lazy"):60116,lSe=Mr?Symbol.for("react.block"):60121,uSe=Mr?Symbol.for("react.fundamental"):60117,cSe=Mr?Symbol.for("react.responder"):60118,hSe=Mr?Symbol.for("react.scope"):60119;function Ci(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case nA:switch(t=t.type,t){case sA:case Sw:case yw:case xw:case vw:case Iw:return t;default:switch(t=t&&t.$$typeof,t){case ww:case kw:case Tw:case Cw:case bw:return t;default:return e}}case rA:return e}}}function JW(t){return Ci(t)===Sw}Jt.AsyncMode=sA;Jt.ConcurrentMode=Sw;Jt.ContextConsumer=ww;Jt.ContextProvider=bw;Jt.Element=nA;Jt.ForwardRef=kw;Jt.Fragment=yw;Jt.Lazy=Tw;Jt.Memo=Cw;Jt.Portal=rA;Jt.Profiler=xw;Jt.StrictMode=vw;Jt.Suspense=Iw;Jt.isAsyncMode=function(t){return JW(t)||Ci(t)===sA};Jt.isConcurrentMode=JW;Jt.isContextConsumer=function(t){return Ci(t)===ww};Jt.isContextProvider=function(t){return Ci(t)===bw};Jt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===nA};Jt.isForwardRef=function(t){return Ci(t)===kw};Jt.isFragment=function(t){return Ci(t)===yw};Jt.isLazy=function(t){return Ci(t)===Tw};Jt.isMemo=function(t){return Ci(t)===Cw};Jt.isPortal=function(t){return Ci(t)===rA};Jt.isProfiler=function(t){return Ci(t)===xw};Jt.isStrictMode=function(t){return Ci(t)===vw};Jt.isSuspense=function(t){return Ci(t)===Iw};Jt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yw||t===Sw||t===xw||t===vw||t===Iw||t===aSe||typeof t=="object"&&t!==null&&(t.$$typeof===Tw||t.$$typeof===Cw||t.$$typeof===bw||t.$$typeof===ww||t.$$typeof===kw||t.$$typeof===uSe||t.$$typeof===cSe||t.$$typeof===hSe||t.$$typeof===lSe)};Jt.typeOf=Ci;(function(t){t.exports=Jt})(QW);function Em(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function fL(t,e){if(t==null)return{};var n=fSe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function fSe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var dL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Ol=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},pL=null,Qk=null,iA=function t(e){if(e===pL&&Ht(Qk))return Qk;var n=[];return ae.exports.Children.forEach(e,function(r){Xe(r)||(QW.exports.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Qk=n,pL=e,n},Xo=function(e,n){var r=[],s=[];return Ht(n)?s=n.map(function(i){return Ol(i)}):s=[Ol(n)],iA(e).forEach(function(i){var o=yi(i,"type.displayName")||yi(i,"type.name");s.indexOf(o)!==-1&&r.push(i)}),r},$a=function(e,n){var r=Xo(e,n);return r&&r[0]},mL=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!Ee(r)||r<=0||!Ee(s)||s<=0)},dSe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],pSe=function(e){return e&&e.type&&Tg(e.type)&&dSe.indexOf(e.type)>=0},ZW=function t(e,n){if(e===n)return!0;var r=ae.exports.Children.count(e);if(r!==ae.exports.Children.count(n))return!1;if(r===0)return!0;if(r===1)return gL(Ht(e)?e[0]:e,Ht(n)?n[0]:n);for(var s=0;s<r;s++){var i=e[s],o=n[s];if(Ht(i)||Ht(o)){if(!t(i,o))return!1}else if(!gL(i,o))return!1}return!0},gL=function(e,n){if(Xe(e)&&Xe(n))return!0;if(!Xe(e)&&!Xe(n)){var r=e.props||{},s=r.children,i=fL(r,["children"]),o=n.props||{},a=o.children,l=fL(o,["children"]);return s&&a?Em(i,l)&&ZW(s,a):!s&&!a?Em(i,l):!1}return!1},yL=function(e,n){var r=[],s={};return iA(e).forEach(function(i,o){if(pSe(i))r.push(i);else if(i){var a=Ol(i.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!s[a])){var h=u(i,a,o);r.push(h),s[a]=!0}}}),r},mSe=function(e){var n=e&&e.type;return n&&dL[n]?dL[n]:null},gSe=function(e,n){return iA(n).indexOf(e)},ySe=U_;function vSe(t,e){return ySe(t,e)}var ej=vSe,xSe=bd;function bSe(t,e,n){for(var r=-1,s=t.length;++r<s;){var i=t[r],o=e(i);if(o!=null&&(a===void 0?o===o&&!xSe(o):n(o,a)))var a=o,l=i}return l}var tj=bSe;function wSe(t,e){return t>e}var SSe=wSe,kSe=tj,ISe=SSe,CSe=wd;function TSe(t){return t&&t.length?kSe(t,CSe,ISe):void 0}var $w=TSe;function $Se(t,e){return t<e}var NSe=$Se,ESe=tj,_Se=NSe,ASe=wd;function OSe(t){return t&&t.length?ESe(t,ASe,_Se):void 0}var Nw=OSe,RSe=G_,DSe=cu,PSe=UW,MSe=Ht;function FSe(t,e){var n=MSe(t)?RSe:PSe;return n(t,DSe(e))}var LSe=FSe,BSe=zW,zSe=LSe;function VSe(t,e){return BSe(zSe(t,e),1)}var USe=VSe,Sd=1e9,WSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},aA,Tn=!0,Ji="[DecimalError] ",ac=Ji+"Invalid argument: ",oA=Ji+"Exponent out of range: ",kd=Math.floor,Mu=Math.pow,jSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ci,$r=1e7,yn=7,nj=9007199254740991,ax=kd(nj/yn),Pe={};Pe.absoluteValue=Pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Pe.comparedTo=Pe.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*yn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Pe.dividedBy=Pe.div=function(t){return Da(this,new this.constructor(t))};Pe.dividedToIntegerBy=Pe.idiv=function(t){var e=this,n=e.constructor;return an(Da(e,new n(t),0,1),n.precision)};Pe.equals=Pe.eq=function(t){return!this.cmp(t)};Pe.exponent=function(){return ir(this)};Pe.greaterThan=Pe.gt=function(t){return this.cmp(t)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(t){return this.cmp(t)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(t){return this.cmp(t)<0};Pe.lessThanOrEqualTo=Pe.lte=function(t){return this.cmp(t)<1};Pe.logarithm=Pe.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ci))throw Error(Ji+"NaN");if(n.s<1)throw Error(Ji+(n.s?"NaN":"-Infinity"));return n.eq(ci)?new r(0):(Tn=!1,e=Da(_m(n,i),_m(t,i),i),Tn=!0,an(e,s))};Pe.minus=Pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ij(e,t):rj(e,(t.s=-t.s,t))};Pe.modulo=Pe.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Ji+"NaN");return n.s?(Tn=!1,e=Da(n,t,0,1).times(t),Tn=!0,n.minus(e)):an(new r(n),s)};Pe.naturalExponential=Pe.exp=function(){return sj(this)};Pe.naturalLogarithm=Pe.ln=function(){return _m(this)};Pe.negated=Pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Pe.plus=Pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rj(e,t):ij(e,(t.s=-t.s,t))};Pe.precision=Pe.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ac+t);if(e=ir(s)+1,r=s.d.length-1,n=r*yn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Pe.squareRoot=Pe.sqrt=function(){var t,e,n,r,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ji+"NaN")}for(t=ir(a),Tn=!1,s=Math.sqrt(+a),s==0||s==1/0?(e=Uo(a.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=kd((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=o=n+3;;)if(i=r,r=i.plus(Da(a,i,o+2)).times(.5),Uo(i.d).slice(0,o)===(e=Uo(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(an(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if(e!="9999")break;o+=4}return Tn=!0,an(r,n)};Pe.times=Pe.mul=function(t){var e,n,r,s,i,o,a,l,u,c=this,h=c.constructor,f=c.d,d=(t=new h(t)).d;if(!c.s||!t.s)return new h(0);for(t.s*=c.s,n=c.e+t.e,l=f.length,u=d.length,l<u&&(i=f,f=d,d=i,o=l,l=u,u=o),i=[],o=l+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(e=0,s=l+r;s>r;)a=i[s]+d[r]*f[s-r-1]+e,i[s--]=a%$r|0,e=a/$r|0;i[s]=(i[s]+e)%$r|0}for(;!i[--o];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Tn?an(t,h.precision):t};Pe.toDecimalPlaces=Pe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(sa(t,0,Sd),e===void 0?e=r.rounding:sa(e,0,8),an(n,t+ir(n)+1,e))};Pe.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=Nc(r,!0):(sa(t,0,Sd),e===void 0?e=s.rounding:sa(e,0,8),r=an(new s(r),t+1,e),n=Nc(r,!0,t+1)),n};Pe.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?Nc(s):(sa(t,0,Sd),e===void 0?e=i.rounding:sa(e,0,8),r=an(new i(s),t+ir(s)+1,e),n=Nc(r.abs(),!1,t+ir(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Pe.toInteger=Pe.toint=function(){var t=this,e=t.constructor;return an(new e(t),ir(t)+1,e.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(t){var e,n,r,s,i,o,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(ci);if(a=new l(a),!a.s){if(t.s<1)throw Error(Ji+"Infinity");return a}if(a.eq(ci))return a;if(r=l.precision,t.eq(ci))return an(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,i=a.s,o){if((n=c<0?-c:c)<=nj){for(s=new l(ci),e=Math.ceil(r/yn+4),Tn=!1;n%2&&(s=s.times(a),xL(s.d,e)),n=kd(n/2),n!==0;)a=a.times(a),xL(a.d,e);return Tn=!0,t.s<0?new l(ci).div(s):an(s,r)}}else if(i<0)throw Error(Ji+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Tn=!1,s=t.times(_m(a,r+u)),Tn=!0,s=sj(s),s.s=i,s};Pe.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=ir(s),r=Nc(s,n<=i.toExpNeg||n>=i.toExpPos)):(sa(t,1,Sd),e===void 0?e=i.rounding:sa(e,0,8),s=an(new i(s),t,e),n=ir(s),r=Nc(s,t<=n||n<=i.toExpNeg,t)),r};Pe.toSignificantDigits=Pe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(sa(t,1,Sd),e===void 0?e=r.rounding:sa(e,0,8)),an(new r(n),t,e)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ir(t),n=t.constructor;return Nc(t,e<=n.toExpNeg||e>=n.toExpPos)};function rj(t,e){var n,r,s,i,o,a,l,u,c=t.constructor,h=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Tn?an(e,h):e;if(l=t.d,u=e.d,o=t.e,s=e.e,l=l.slice(),i=o-s,i){for(i<0?(r=l,i=-i,a=u.length):(r=u,s=o,a=l.length),o=Math.ceil(h/yn),a=o>a?o+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=l.length,i=u.length,a-i<0&&(i=a,r=u,u=l,l=r),n=0;i;)n=(l[--i]=l[i]+u[i]+n)/$r|0,l[i]%=$r;for(n&&(l.unshift(n),++s),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=s,Tn?an(e,h):e}function sa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ac+t)}function Uo(t){var e,n,r,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)r=t[e]+"",n=yn-r.length,n&&(i+=sl(n)),i+=r;o=t[e],r=o+"",n=yn-r.length,n&&(i+=sl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Da=function(){function t(r,s){var i,o=0,a=r.length;for(r=r.slice();a--;)i=r[a]*s+o,r[a]=i%$r|0,o=i/$r|0;return o&&r.unshift(o),r}function e(r,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(r[a]!=s[a]){l=r[a]>s[a]?1:-1;break}return l}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*$r+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var a,l,u,c,h,f,d,p,m,g,y,v,b,x,w,S,k,I,T=r.constructor,N=r.s==s.s?1:-1,A=r.d,R=s.d;if(!r.s)return new T(r);if(!s.s)throw Error(Ji+"Division by zero");for(l=r.e-s.e,k=R.length,w=A.length,d=new T(N),p=d.d=[],u=0;R[u]==(A[u]||0);)++u;if(R[u]>(A[u]||0)&&--l,i==null?v=i=T.precision:o?v=i+(ir(r)-ir(s))+1:v=i,v<0)return new T(0);if(v=v/yn+2|0,u=0,k==1)for(c=0,R=R[0],v++;(u<w||c)&&v--;u++)b=c*$r+(A[u]||0),p[u]=b/R|0,c=b%R|0;else{for(c=$r/(R[0]+1)|0,c>1&&(R=t(R,c),A=t(A,c),k=R.length,w=A.length),x=k,m=A.slice(0,k),g=m.length;g<k;)m[g++]=0;I=R.slice(),I.unshift(0),S=R[0],R[1]>=$r/2&&++S;do c=0,a=e(R,m,k,g),a<0?(y=m[0],k!=g&&(y=y*$r+(m[1]||0)),c=y/S|0,c>1?(c>=$r&&(c=$r-1),h=t(R,c),f=h.length,g=m.length,a=e(h,m,f,g),a==1&&(c--,n(h,k<f?I:R,f))):(c==0&&(a=c=1),h=R.slice()),f=h.length,f<g&&h.unshift(0),n(m,h,g),a==-1&&(g=m.length,a=e(R,m,k,g),a<1&&(c++,n(m,k<g?I:R,g))),g=m.length):a===0&&(c++,m=[0]),p[u++]=c,a&&m[0]?m[g++]=A[x]||0:(m=[A[x]],g=1);while((x++<w||m[0]!==void 0)&&v--)}return p[0]||p.shift(),d.e=l,an(d,o?i+ir(d)+1:i)}}();function sj(t,e){var n,r,s,i,o,a,l=0,u=0,c=t.constructor,h=c.precision;if(ir(t)>16)throw Error(oA+ir(t));if(!t.s)return new c(ci);for(e==null?(Tn=!1,a=h):a=e,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Mu(2,u))/Math.LN10*2+5|0,a+=r,n=s=i=new c(ci),c.precision=a;;){if(s=an(s.times(t),a),n=n.times(++l),o=i.plus(Da(s,n,a)),Uo(o.d).slice(0,a)===Uo(i.d).slice(0,a)){for(;u--;)i=an(i.times(i),a);return c.precision=h,e==null?(Tn=!0,an(i,h)):i}i=o}}function ir(t){for(var e=t.e*yn,n=t.d[0];n>=10;n/=10)e++;return e}function Jk(t,e,n){if(e>t.LN10.sd())throw Tn=!0,n&&(t.precision=n),Error(Ji+"LN10 precision limit exceeded");return an(new t(t.LN10),e)}function sl(t){for(var e="";t--;)e+="0";return e}function _m(t,e){var n,r,s,i,o,a,l,u,c,h=1,f=10,d=t,p=d.d,m=d.constructor,g=m.precision;if(d.s<1)throw Error(Ji+(d.s?"NaN":"-Infinity"));if(d.eq(ci))return new m(0);if(e==null?(Tn=!1,u=g):u=e,d.eq(10))return e==null&&(Tn=!0),Jk(m,u);if(u+=f,m.precision=u,n=Uo(p),r=n.charAt(0),i=ir(d),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=Uo(d.d),r=n.charAt(0),h++;i=ir(d),r>1?(d=new m("0."+n),i++):d=new m(r+"."+n.slice(1))}else return l=Jk(m,u+2,g).times(i+""),d=_m(new m(r+"."+n.slice(1)),u-f).plus(l),m.precision=g,e==null?(Tn=!0,an(d,g)):d;for(a=o=d=Da(d.minus(ci),d.plus(ci),u),c=an(d.times(d),u),s=3;;){if(o=an(o.times(c),u),l=a.plus(Da(o,new m(s),u)),Uo(l.d).slice(0,u)===Uo(a.d).slice(0,u))return a=a.times(2),i!==0&&(a=a.plus(Jk(m,u+2,g).times(i+""))),a=Da(a,new m(h),u),m.precision=g,e==null?(Tn=!0,an(a,g)):a;a=l,s+=2}}function vL(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=kd(n/yn),t.d=[],r=(n+1)%yn,n<0&&(r+=yn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=yn;r<s;)t.d.push(+e.slice(r,r+=yn));e=e.slice(r),r=yn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Tn&&(t.e>ax||t.e<-ax))throw Error(oA+n)}else t.s=0,t.e=0,t.d=[0];return t}function an(t,e,n){var r,s,i,o,a,l,u,c,h=t.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=e-o,r<0)r+=yn,s=e,u=h[c=0];else{if(c=Math.ceil((r+1)/yn),i=h.length,c>=i)return t;for(u=i=h[c],o=1;i>=10;i/=10)o++;r%=yn,s=r-yn+o}if(n!==void 0&&(i=Mu(10,o-s-1),a=u/i%10|0,l=e<0||h[c+1]!==void 0||u%i,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?s>0?u/Mu(10,o-s):0:h[c-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(i=ir(t),h.length=1,e=e-i-1,h[0]=Mu(10,(yn-e%yn)%yn),t.e=kd(-e/yn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=c,i=1,c--):(h.length=c+1,i=Mu(10,yn-r),h[c]=s>0?(u/Mu(10,o-s)%Mu(10,s)|0)*i:0),l)for(;;)if(c==0){(h[0]+=i)==$r&&(h[0]=1,++t.e);break}else{if(h[c]+=i,h[c]!=$r)break;h[c--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(Tn&&(t.e>ax||t.e<-ax))throw Error(oA+ir(t));return t}function ij(t,e){var n,r,s,i,o,a,l,u,c,h,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Tn?an(e,d):e;if(l=t.d,h=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,a=h.length):(n=h,r=u,a=l.length),s=Math.max(Math.ceil(d/yn),a)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=l.length,a=h.length,c=s<a,c&&(a=s),s=0;s<a;s++)if(l[s]!=h[s]){c=l[s]<h[s];break}o=0}for(c&&(n=l,l=h,h=n,e.s=-e.s),a=l.length,s=h.length-a;s>0;--s)l[a++]=0;for(s=h.length;s>o;){if(l[--s]<h[s]){for(i=s;i&&l[--i]===0;)l[i]=$r-1;--l[i],l[s]+=$r}l[s]-=h[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Tn?an(e,d):e):new f(0)}function Nc(t,e,n){var r,s=ir(t),i=Uo(t.d),o=i.length;return e?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+sl(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+sl(-s-1)+i,n&&(r=n-o)>0&&(i+=sl(r))):s>=o?(i+=sl(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+sl(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=sl(r))),t.s<0?"-"+i:i}function xL(t,e){if(t.length>e)return t.length=e,!0}function oj(t){var e,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ac+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return vL(o,i.toString())}else if(typeof i!="string")throw Error(ac+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,jSe.test(i))vL(o,i);else throw Error(ac+i)}if(s.prototype=Pe,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=oj,s.config=s.set=GSe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function GSe(t){if(!t||typeof t!="object")throw Error(Ji+"Object expected");var e,n,r,s=["precision",1,Sd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(kd(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(ac+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ac+n+": "+r);return this}var aA=oj(WSe);ci=new aA(1);const en=aA;function HSe(t){return YSe(t)||XSe(t)||KSe(t)||qSe()}function qSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KSe(t,e){if(!!t){if(typeof t=="string")return HT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HT(t,e)}}function XSe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function YSe(t){if(Array.isArray(t))return HT(t)}function HT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var QSe=function(e){return e},aj={"@@functional/placeholder":!0},lj=function(e){return e===aj},bL=function(e){return function n(){return arguments.length===0||arguments.length===1&&lj(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},JSe=function t(e,n){return e===1?n:bL(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(a){return a!==aj}).length;return o>=e?n.apply(void 0,s):t(e-o,bL(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=s.map(function(h){return lj(h)?l.shift():h});return n.apply(void 0,HSe(c).concat(l))}))})},Ew=function(e){return JSe(e.length,e)},qT=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},ZSe=Ew(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),eke=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return QSe;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(a,l){return l(a)},i.apply(void 0,arguments))}},KT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},uj=function(e){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(a,l){return a===n[l]})||(n=i,r=e.apply(void 0,i)),r}};function tke(t){var e;return t===0?e=1:e=Math.floor(new en(t).abs().log(10).toNumber())+1,e}function nke(t,e,n){for(var r=new en(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var rke=Ew(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),ske=Ew(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),ike=Ew(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const _w={rangeStep:nke,getDigitCount:tke,interpolateNumber:rke,uninterpolateNumber:ske,uninterpolateTruncation:ike};function XT(t){return lke(t)||ake(t)||cj(t)||oke()}function oke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ake(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function lke(t){if(Array.isArray(t))return YT(t)}function Am(t,e){return hke(t)||cke(t,e)||cj(t,e)||uke()}function uke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cj(t,e){if(!!t){if(typeof t=="string")return YT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YT(t,e)}}function YT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cke(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function hke(t){if(Array.isArray(t))return t}function hj(t){var e=Am(t,2),n=e[0],r=e[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function fj(t,e,n){if(t.lte(0))return new en(0);var r=_w.getDigitCount(t.toNumber()),s=new en(10).pow(r),i=t.div(s),o=r!==1?.05:.1,a=new en(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=a.mul(s);return e?l:new en(Math.ceil(l))}function fke(t,e,n){var r=1,s=new en(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new en(10).pow(_w.getDigitCount(t)-1),s=new en(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new en(Math.floor(t)))}else t===0?s=new en(Math.floor((e-1)/2)):n||(s=new en(Math.floor(t)));var o=Math.floor((e-1)/2),a=eke(ZSe(function(l){return s.add(new en(l-o).mul(r)).toNumber()}),qT);return a(0,e)}function dj(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new en(0),tickMin:new en(0),tickMax:new en(0)};var i=fj(new en(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new en(0):(o=new en(t).add(e).div(2),o=o.sub(new en(o).mod(i)));var a=Math.ceil(o.sub(t).div(i).toNumber()),l=Math.ceil(new en(e).sub(o).div(i).toNumber()),u=a+l+1;return u>n?dj(t,e,n,r,s+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:i,tickMin:o.sub(new en(a).mul(i)),tickMax:o.add(new en(l).mul(i))})}function dke(t){var e=Am(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),a=hj([n,r]),l=Am(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var h=c===1/0?[u].concat(XT(qT(0,s-1).map(function(){return 1/0}))):[].concat(XT(qT(0,s-1).map(function(){return-1/0})),[c]);return n>r?KT(h):h}if(u===c)return fke(u,s,i);var f=dj(u,c,o,i),d=f.step,p=f.tickMin,m=f.tickMax,g=_w.rangeStep(p,m.add(new en(.1).mul(d)),d);return n>r?KT(g):g}function pke(t,e){var n=Am(t,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=hj([r,s]),a=Am(o,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,s];if(l===u)return[l];var c=Math.max(e,2),h=fj(new en(u).sub(l).div(c-1),i,0),f=[].concat(XT(_w.rangeStep(new en(l),new en(u).sub(new en(.99).mul(h)),h)),[u]);return r>s?KT(f):f}var mke=uj(dke),gke=uj(pke);function Ng(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function lA(t){let e=t,n=t;t.length===1&&(e=(o,a)=>t(o)-a,n=yke(t));function r(o,a,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],a)<0?l=c+1:u=c}return l}function s(o,a,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],a)>0?u=c:l=c+1}return l}function i(o,a,l,u){l==null&&(l=0),u==null&&(u=o.length);const c=r(o,a,l,u-1);return c>l&&e(o[c-1],a)>-e(o[c],a)?c-1:c}return{left:r,center:i,right:s}}function yke(t){return(e,n)=>Ng(t(e),n)}function pj(t){return t===null?NaN:+t}function*vke(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const xke=lA(Ng),bke=xke.right;lA(pj).center;const Eg=bke;var QT=Math.sqrt(50),JT=Math.sqrt(10),ZT=Math.sqrt(2);function e$(t,e,n){var r,s=-1,i,o,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),(a=mj(t,e,n))===0||!isFinite(a))return[];if(a>0){let l=Math.round(t/a),u=Math.round(e/a);for(l*a<t&&++l,u*a>e&&--u,o=new Array(i=u-l+1);++s<i;)o[s]=(l+s)*a}else{a=-a;let l=Math.round(t*a),u=Math.round(e*a);for(l/a<t&&++l,u/a>e&&--u,o=new Array(i=u-l+1);++s<i;)o[s]=(l+s)/a}return r&&o.reverse(),o}function mj(t,e,n){var r=(e-t)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,s);return s>=0?(i>=QT?10:i>=JT?5:i>=ZT?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(i>=QT?10:i>=JT?5:i>=ZT?2:1)}function t$(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/s;return i>=QT?s*=10:i>=JT?s*=5:i>=ZT&&(s*=2),e<t?-s:s}function wL(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function SL(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function gj(t,e,n=0,r=t.length-1,s=Ng){for(;r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1),d=Math.max(n,Math.floor(e-u*h/l+f)),p=Math.min(r,Math.floor(e+(l-u)*h/l+f));gj(t,e,d,p,s)}const i=t[e];let o=n,a=r;for(rp(t,n,e),s(t[r],i)>0&&rp(t,n,r);o<a;){for(rp(t,o,a),++o,--a;s(t[o],i)<0;)++o;for(;s(t[a],i)>0;)--a}s(t[n],i)===0?rp(t,n,a):(++a,rp(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function rp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function wke(t,e,n){if(t=Float64Array.from(vke(t,n)),!!(r=t.length)){if((e=+e)<=0||r<2)return SL(t);if(e>=1)return wL(t);var r,s=(r-1)*e,i=Math.floor(s),o=wL(gj(t,i).subarray(0,i+1)),a=SL(t.subarray(i+1));return o+(a-o)*(s-i)}}function Ske(t,e,n=pj){if(!!(r=t.length)){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),o=+n(t[i],i,t),a=+n(t[i+1],i+1,t);return o+(a-o)*(s-i)}}function kke(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function to(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ha(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const n$=Symbol("implicit");function uA(){var t=new Map,e=[],n=[],r=n$;function s(i){var o=i+"",a=t.get(o);if(!a){if(r!==n$)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new Map;for(const o of i){const a=o+"";t.has(a)||t.set(a,e.push(o))}return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return uA(e,n).unknown(r)},to.apply(s,arguments),s}function Om(){var t=uA().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,o,a=!1,l=0,u=0,c=.5;delete t.unknown;function h(){var f=e().length,d=s<r,p=d?s:r,m=d?r:s;i=(m-p)/Math.max(1,f-l+u*2),a&&(i=Math.floor(i)),p+=(m-p-i*(f-l))*c,o=i*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=kke(f).map(function(y){return p+i*y});return n(d?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,h()):[r,s]},t.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,h()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},t.copy=function(){return Om(e(),[r,s]).round(a).paddingInner(l).paddingOuter(u).align(c)},to.apply(h(),arguments)}function yj(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return yj(e())},t}function Kp(){return yj(Om.apply(null,arguments).paddingInner(1))}function cA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function vj(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _g(){}var Rm=.7,lx=1/Rm,sf="\\s*([+-]?\\d+)\\s*",Dm="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ike=/^#([0-9a-f]{3,8})$/,Cke=new RegExp("^rgb\\("+[sf,sf,sf]+"\\)$"),Tke=new RegExp("^rgb\\("+[Yo,Yo,Yo]+"\\)$"),$ke=new RegExp("^rgba\\("+[sf,sf,sf,Dm]+"\\)$"),Nke=new RegExp("^rgba\\("+[Yo,Yo,Yo,Dm]+"\\)$"),Eke=new RegExp("^hsl\\("+[Dm,Yo,Yo]+"\\)$"),_ke=new RegExp("^hsla\\("+[Dm,Yo,Yo,Dm]+"\\)$"),kL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cA(_g,Pm,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:IL,formatHex:IL,formatHsl:Ake,formatRgb:CL,toString:CL});function IL(){return this.rgb().formatHex()}function Ake(){return xj(this).formatHsl()}function CL(){return this.rgb().formatRgb()}function Pm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ike.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?TL(e):n===3?new di(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?F0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?F0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Cke.exec(t))?new di(e[1],e[2],e[3],1):(e=Tke.exec(t))?new di(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$ke.exec(t))?F0(e[1],e[2],e[3],e[4]):(e=Nke.exec(t))?F0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Eke.exec(t))?EL(e[1],e[2]/100,e[3]/100,1):(e=_ke.exec(t))?EL(e[1],e[2]/100,e[3]/100,e[4]):kL.hasOwnProperty(t)?TL(kL[t]):t==="transparent"?new di(NaN,NaN,NaN,0):null}function TL(t){return new di(t>>16&255,t>>8&255,t&255,1)}function F0(t,e,n,r){return r<=0&&(t=e=n=NaN),new di(t,e,n,r)}function Oke(t){return t instanceof _g||(t=Pm(t)),t?(t=t.rgb(),new di(t.r,t.g,t.b,t.opacity)):new di}function r$(t,e,n,r){return arguments.length===1?Oke(t):new di(t,e,n,r==null?1:r)}function di(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}cA(di,r$,vj(_g,{brighter:function(t){return t=t==null?lx:Math.pow(lx,t),new di(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Rm:Math.pow(Rm,t),new di(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$L,formatHex:$L,formatRgb:NL,toString:NL}));function $L(){return"#"+Zk(this.r)+Zk(this.g)+Zk(this.b)}function NL(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Zk(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function EL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zo(t,e,n,r)}function xj(t){if(t instanceof zo)return new zo(t.h,t.s,t.l,t.opacity);if(t instanceof _g||(t=Pm(t)),!t)return new zo;if(t instanceof zo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(e===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new zo(o,a,l,t.opacity)}function Rke(t,e,n,r){return arguments.length===1?xj(t):new zo(t,e,n,r==null?1:r)}function zo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}cA(zo,Rke,vj(_g,{brighter:function(t){return t=t==null?lx:Math.pow(lx,t),new zo(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Rm:Math.pow(Rm,t),new zo(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new di(eI(t>=240?t-240:t+120,s,r),eI(t,s,r),eI(t<120?t+240:t-120,s,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function eI(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const hA=t=>()=>t;function Dke(t,e){return function(n){return t+n*e}}function Pke(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mke(t){return(t=+t)==1?bj:function(e,n){return n-e?Pke(e,n,t):hA(isNaN(e)?n:e)}}function bj(t,e){var n=e-t;return n?Dke(t,n):hA(isNaN(t)?e:t)}const _L=function t(e){var n=Mke(e);function r(s,i){var o=n((s=r$(s)).r,(i=r$(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),u=bj(s.opacity,i.opacity);return function(c){return s.r=o(c),s.g=a(c),s.b=l(c),s.opacity=u(c),s+""}}return r.gamma=t,r}(1);function Fke(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function Lke(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bke(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=Id(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function zke(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ux(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vke(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Id(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var s$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tI=new RegExp(s$.source,"g");function Uke(t){return function(){return t}}function Wke(t){return function(e){return t(e)+""}}function jke(t,e){var n=s$.lastIndex=tI.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=s$.exec(t))&&(s=tI.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:ux(r,s)})),n=tI.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?Wke(l[0].x):Uke(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}function Id(t,e){var n=typeof e,r;return e==null||n==="boolean"?hA(e):(n==="number"?ux:n==="string"?(r=Pm(e))?(e=r,_L):jke:e instanceof Pm?_L:e instanceof Date?zke:Lke(e)?Fke:Array.isArray(e)?Bke:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vke:ux)(t,e)}function fA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Gke(t,e){e===void 0&&(e=t,t=Id);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[a](o-a)}}function Hke(t){return function(){return t}}function cx(t){return+t}var AL=[0,1];function As(t){return t}function i$(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Hke(isNaN(e)?NaN:.5)}function qke(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Kke(t,e,n){var r=t[0],s=t[1],i=e[0],o=e[1];return s<r?(r=i$(s,r),i=n(o,i)):(r=i$(r,s),i=n(i,o)),function(a){return i(r(a))}}function Xke(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=i$(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=Eg(t,a,1,r)-1;return i[l](s[l](a))}}function Ag(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Aw(){var t=AL,e=AL,n=Id,r,s,i,o=As,a,l,u;function c(){var f=Math.min(t.length,e.length);return o!==As&&(o=qke(t[0],t[f-1])),a=f>2?Xke:Kke,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(l||(l=a(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(s((u||(u=a(e,t.map(r),ux)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,cx),c()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=fA,c()},h.clamp=function(f){return arguments.length?(o=f?!0:As,c()):o!==As},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,d){return r=f,s=d,c()}}function dA(){return Aw()(As,As)}function Yke(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function hx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Pf(t){return t=hx(Math.abs(t)),t?t[1]:NaN}function Qke(t,e){return function(n,r){for(var s=n.length,i=[],o=0,a=t[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Jke(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Zke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fx(t){if(!(e=Zke.exec(t)))throw new Error("invalid format: "+t);var e;return new pA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}fx.prototype=pA.prototype;function pA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eIe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var wj;function tIe(t,e){var n=hx(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(wj=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+hx(t,Math.max(0,e+i-1))[0]}function OL(t,e){var n=hx(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const RL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Yke,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>OL(t*100,e),r:OL,s:tIe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function DL(t){return t}var PL=Array.prototype.map,ML=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function nIe(t){var e=t.grouping===void 0||t.thousands===void 0?DL:Qke(PL.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?DL:Jke(PL.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=fx(h);var f=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,y=h.width,v=h.comma,b=h.precision,x=h.trim,w=h.type;w==="n"?(v=!0,w="g"):RL[w]||(b===void 0&&(b=12),x=!0,w="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=m==="$"?r:/[%p]/.test(w)?o:"",I=RL[w],T=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function N(A){var R=S,O=k,M,z,B;if(w==="c")O=I(A)+O,A="";else{A=+A;var K=A<0||1/A<0;if(A=isNaN(A)?l:I(Math.abs(A),b),x&&(A=eIe(A)),K&&+A==0&&p!=="+"&&(K=!1),R=(K?p==="("?p:a:p==="-"||p==="("?"":p)+R,O=(w==="s"?ML[8+wj/3]:"")+O+(K&&p==="("?")":""),T){for(M=-1,z=A.length;++M<z;)if(B=A.charCodeAt(M),48>B||B>57){O=(B===46?s+A.slice(M+1):A.slice(M))+O,A=A.slice(0,M);break}}}v&&!g&&(A=e(A,1/0));var L=R.length+A.length+O.length,V=L<y?new Array(y-L+1).join(f):"";switch(v&&g&&(A=e(V+A,V.length?y-O.length:1/0),V=""),d){case"<":A=R+A+O+V;break;case"=":A=R+V+A+O;break;case"^":A=V.slice(0,L=V.length>>1)+R+A+O+V.slice(L);break;default:A=V+R+A+O;break}return i(A)}return N.toString=function(){return h+""},N}function c(h,f){var d=u((h=fx(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Pf(f)/3)))*3,m=Math.pow(10,-p),g=ML[8+p/3];return function(y){return d(m*y)+g}}return{format:u,formatPrefix:c}}var L0,mA,Sj;rIe({thousands:",",grouping:[3],currency:["$",""]});function rIe(t){return L0=nIe(t),mA=L0.format,Sj=L0.formatPrefix,L0}function sIe(t){return Math.max(0,-Pf(Math.abs(t)))}function iIe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pf(e)/3)))*3-Pf(Math.abs(t)))}function oIe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Pf(e)-Pf(t))+1}function kj(t,e,n,r){var s=t$(t,e,n),i;switch(r=fx(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=iIe(s,o))&&(r.precision=i),Sj(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=oIe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=sIe(s))&&(r.precision=i-(r.type==="%")*2);break}}return mA(r)}function hu(t){var e=t.domain;return t.ticks=function(n){var r=e();return e$(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var s=e();return kj(s[0],s[s.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,o=r[s],a=r[i],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=s,s=i,i=u);c-- >0;){if(u=mj(o,a,n),u===l)return r[s]=o,r[i]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function dx(){var t=dA();return t.copy=function(){return Ag(t,dx())},to.apply(t,arguments),hu(t)}function Ij(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,cx),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Ij(t).unknown(e)},t=arguments.length?Array.from(t,cx):[0,1],hu(n)}function Cj(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),t[n]=e.floor(s),t[r]=e.ceil(i),t}function FL(t){return Math.log(t)}function LL(t){return Math.exp(t)}function aIe(t){return-Math.log(-t)}function lIe(t){return-Math.exp(-t)}function uIe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cIe(t){return t===10?uIe:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function hIe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function BL(t){return function(e){return-t(-e)}}function gA(t){var e=t(FL,LL),n=e.domain,r=10,s,i;function o(){return s=hIe(r),i=cIe(r),n()[0]<0?(s=BL(s),i=BL(i),t(aIe,lIe)):t(FL,LL),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=function(a){var l=n(),u=l[0],c=l[l.length-1],h;(h=c<u)&&(f=u,u=c,c=f);var f=s(u),d=s(c),p,m,g,y=a==null?10:+a,v=[];if(!(r%1)&&d-f<y){if(f=Math.floor(f),d=Math.ceil(d),u>0){for(;f<=d;++f)for(m=1,p=i(f);m<r;++m)if(g=p*m,!(g<u)){if(g>c)break;v.push(g)}}else for(;f<=d;++f)for(m=r-1,p=i(f);m>=1;--m)if(g=p*m,!(g<u)){if(g>c)break;v.push(g)}v.length*2<y&&(v=e$(u,c,y))}else v=e$(f,d,Math.min(d-f,y)).map(i);return h?v.reverse():v},e.tickFormat=function(a,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=mA(l)),a===1/0)return l;a==null&&(a=10);var u=Math.max(1,r*a/e.ticks().length);return function(c){var h=c/i(Math.round(s(c)));return h*r<r-.5&&(h*=r),h<=u?l(c):""}},e.nice=function(){return n(Cj(n(),{floor:function(a){return i(Math.floor(s(a)))},ceil:function(a){return i(Math.ceil(s(a)))}}))},e}function Tj(){var t=gA(Aw()).domain([1,10]);return t.copy=function(){return Ag(t,Tj()).base(t.base())},to.apply(t,arguments),t}function zL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function VL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function yA(t){var e=1,n=t(zL(e),VL(e));return n.constant=function(r){return arguments.length?t(zL(e=+r),VL(e)):e},hu(n)}function $j(){var t=yA(Aw());return t.copy=function(){return Ag(t,$j()).constant(t.constant())},to.apply(t,arguments)}function UL(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function fIe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function dIe(t){return t<0?-t*t:t*t}function vA(t){var e=t(As,As),n=1;function r(){return n===1?t(As,As):n===.5?t(fIe,dIe):t(UL(n),UL(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},hu(e)}function xA(){var t=vA(Aw());return t.copy=function(){return Ag(t,xA()).exponent(t.exponent())},to.apply(t,arguments),t}function pIe(){return xA.apply(null,arguments).exponent(.5)}function WL(t){return Math.sign(t)*t*t}function mIe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Nj(){var t=dA(),e=[0,1],n=!1,r;function s(i){var o=mIe(t(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return t.invert(WL(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,cx)).map(WL)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return Nj(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},to.apply(s,arguments),hu(s)}function Ej(){var t=[],e=[],n=[],r;function s(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=Ske(t,o/a);return i}function i(o){return o==null||isNaN(o=+o)?r:e[Eg(n,o)]}return i.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ng),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return Ej().domain(t).range(e).unknown(r)},to.apply(i,arguments)}function _j(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[Eg(r,l,0,n)]:i}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return _j().domain([t,e]).range(s).unknown(i)},to.apply(hu(o),arguments)}function Aj(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[Eg(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Aj().domain(t).range(e).unknown(n)},to.apply(s,arguments)}var nI=new Date,rI=new Date;function Fr(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=function(i){return t(i=new Date(+i)),i},s.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i},s.round=function(i){var o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=function(i,o){return e(i=new Date(+i),o==null?1:Math.floor(o)),i},s.range=function(i,o,a){var l=[],u;if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;do l.push(u=new Date(+i)),e(i,a),t(i);while(u<i&&i<o);return l},s.filter=function(i){return Fr(function(o){if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!i(o););else for(;--a>=0;)for(;e(o,1),!i(o););})},n&&(s.count=function(i,o){return nI.setTime(+i),rI.setTime(+o),t(nI),t(rI),Math.floor(n(nI,rI))},s.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?function(o){return r(o)%i===0}:function(o){return s.count(0,o)%i===0}):s}),s}var px=Fr(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});px.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Fr(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):px};const gIe=px;px.range;const Na=1e3,zi=Na*60,Ea=zi*60,Ec=Ea*24,bA=Ec*7,jL=Ec*30,sI=Ec*365;var Oj=Fr(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Na)},function(t,e){return(e-t)/Na},function(t){return t.getUTCSeconds()});const jh=Oj;Oj.range;var Rj=Fr(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Na)},function(t,e){t.setTime(+t+e*zi)},function(t,e){return(e-t)/zi},function(t){return t.getMinutes()});const Dj=Rj;Rj.range;var Pj=Fr(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Na-t.getMinutes()*zi)},function(t,e){t.setTime(+t+e*Ea)},function(t,e){return(e-t)/Ea},function(t){return t.getHours()});const Mj=Pj;Pj.range;var Fj=Fr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zi)/Ec,t=>t.getDate()-1);const Ow=Fj;Fj.range;function Jc(t){return Fr(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*zi)/bA})}var Rw=Jc(0),mx=Jc(1),yIe=Jc(2),vIe=Jc(3),Mf=Jc(4),xIe=Jc(5),bIe=Jc(6);Rw.range;mx.range;yIe.range;vIe.range;Mf.range;xIe.range;bIe.range;var Lj=Fr(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const Bj=Lj;Lj.range;var wA=Fr(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});wA.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Fr(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const _c=wA;wA.range;var zj=Fr(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*zi)},function(t,e){return(e-t)/zi},function(t){return t.getUTCMinutes()});const Vj=zj;zj.range;var Uj=Fr(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Ea)},function(t,e){return(e-t)/Ea},function(t){return t.getUTCHours()});const Wj=Uj;Uj.range;var jj=Fr(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Ec},function(t){return t.getUTCDate()-1});const Dw=jj;jj.range;function Zc(t){return Fr(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/bA})}var Pw=Zc(0),gx=Zc(1),wIe=Zc(2),SIe=Zc(3),Ff=Zc(4),kIe=Zc(5),IIe=Zc(6);Pw.range;gx.range;wIe.range;SIe.range;Ff.range;kIe.range;IIe.range;var Gj=Fr(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const Hj=Gj;Gj.range;var SA=Fr(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});SA.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Fr(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Ac=SA;SA.range;function qj(t,e,n,r,s,i){const o=[[jh,1,Na],[jh,5,5*Na],[jh,15,15*Na],[jh,30,30*Na],[i,1,zi],[i,5,5*zi],[i,15,15*zi],[i,30,30*zi],[s,1,Ea],[s,3,3*Ea],[s,6,6*Ea],[s,12,12*Ea],[r,1,Ec],[r,2,2*Ec],[n,1,bA],[e,1,jL],[e,3,3*jL],[t,1,sI]];function a(u,c,h){const f=c<u;f&&([u,c]=[c,u]);const d=h&&typeof h.range=="function"?h:l(u,c,h),p=d?d.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,h){const f=Math.abs(c-u)/h,d=lA(([,,g])=>g).right(o,f);if(d===o.length)return t.every(t$(u/sI,c/sI,h));if(d===0)return gIe.every(Math.max(t$(u,c,h),1));const[p,m]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return p.every(m)}return[a,l]}const[CIe,TIe]=qj(Ac,Hj,Pw,Dw,Wj,Vj),[$Ie,NIe]=qj(_c,Bj,Rw,Ow,Mj,Dj);function iI(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function oI(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function EIe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=ip(s),c=op(s),h=ip(i),f=op(i),d=ip(o),p=op(o),m=ip(a),g=op(a),y=ip(l),v=op(l),b={a:K,A:L,b:V,B:j,c:null,d:YL,e:YL,f:JIe,g:lCe,G:cCe,H:XIe,I:YIe,j:QIe,L:Kj,m:ZIe,M:eCe,p:Q,q:Z,Q:ZL,s:e4,S:tCe,u:nCe,U:rCe,V:sCe,w:iCe,W:oCe,x:null,X:null,y:aCe,Y:uCe,Z:hCe,"%":JL},x={a:oe,A:fe,b:le,B:ye,c:null,d:QL,e:QL,f:mCe,g:CCe,G:$Ce,H:fCe,I:dCe,j:pCe,L:Yj,m:gCe,M:yCe,p:Ce,q:ve,Q:ZL,s:e4,S:vCe,u:xCe,U:bCe,V:wCe,w:SCe,W:kCe,x:null,X:null,y:ICe,Y:TCe,Z:NCe,"%":JL},w={a:N,A,b:R,B:O,c:M,d:KL,e:KL,f:GIe,g:qL,G:HL,H:XL,I:XL,j:VIe,L:jIe,m:zIe,M:UIe,p:T,q:BIe,Q:qIe,s:KIe,S:WIe,u:DIe,U:PIe,V:MIe,w:RIe,W:FIe,x:z,X:B,y:qL,Y:HL,Z:LIe,"%":HIe};b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),x.x=S(n,x),x.X=S(r,x),x.c=S(e,x);function S(ee,ce){return function(we){var ne=[],Re=-1,$e=0,qe=ee.length,Ue,it,St;for(we instanceof Date||(we=new Date(+we));++Re<qe;)ee.charCodeAt(Re)===37&&(ne.push(ee.slice($e,Re)),(it=GL[Ue=ee.charAt(++Re)])!=null?Ue=ee.charAt(++Re):it=Ue==="e"?" ":"0",(St=ce[Ue])&&(Ue=St(we,it)),ne.push(Ue),$e=Re+1);return ne.push(ee.slice($e,Re)),ne.join("")}}function k(ee,ce){return function(we){var ne=sp(1900,void 0,1),Re=I(ne,ee,we+="",0),$e,qe;if(Re!=we.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(ce&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?($e=oI(sp(ne.y,0,1)),qe=$e.getUTCDay(),$e=qe>4||qe===0?gx.ceil($e):gx($e),$e=Dw.offset($e,(ne.V-1)*7),ne.y=$e.getUTCFullYear(),ne.m=$e.getUTCMonth(),ne.d=$e.getUTCDate()+(ne.w+6)%7):($e=iI(sp(ne.y,0,1)),qe=$e.getDay(),$e=qe>4||qe===0?mx.ceil($e):mx($e),$e=Ow.offset($e,(ne.V-1)*7),ne.y=$e.getFullYear(),ne.m=$e.getMonth(),ne.d=$e.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),qe="Z"in ne?oI(sp(ne.y,0,1)).getUTCDay():iI(sp(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(qe+5)%7:ne.w+ne.U*7-(qe+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,oI(ne)):iI(ne)}}function I(ee,ce,we,ne){for(var Re=0,$e=ce.length,qe=we.length,Ue,it;Re<$e;){if(ne>=qe)return-1;if(Ue=ce.charCodeAt(Re++),Ue===37){if(Ue=ce.charAt(Re++),it=w[Ue in GL?ce.charAt(Re++):Ue],!it||(ne=it(ee,we,ne))<0)return-1}else if(Ue!=we.charCodeAt(ne++))return-1}return ne}function T(ee,ce,we){var ne=u.exec(ce.slice(we));return ne?(ee.p=c.get(ne[0].toLowerCase()),we+ne[0].length):-1}function N(ee,ce,we){var ne=d.exec(ce.slice(we));return ne?(ee.w=p.get(ne[0].toLowerCase()),we+ne[0].length):-1}function A(ee,ce,we){var ne=h.exec(ce.slice(we));return ne?(ee.w=f.get(ne[0].toLowerCase()),we+ne[0].length):-1}function R(ee,ce,we){var ne=y.exec(ce.slice(we));return ne?(ee.m=v.get(ne[0].toLowerCase()),we+ne[0].length):-1}function O(ee,ce,we){var ne=m.exec(ce.slice(we));return ne?(ee.m=g.get(ne[0].toLowerCase()),we+ne[0].length):-1}function M(ee,ce,we){return I(ee,e,ce,we)}function z(ee,ce,we){return I(ee,n,ce,we)}function B(ee,ce,we){return I(ee,r,ce,we)}function K(ee){return o[ee.getDay()]}function L(ee){return i[ee.getDay()]}function V(ee){return l[ee.getMonth()]}function j(ee){return a[ee.getMonth()]}function Q(ee){return s[+(ee.getHours()>=12)]}function Z(ee){return 1+~~(ee.getMonth()/3)}function oe(ee){return o[ee.getUTCDay()]}function fe(ee){return i[ee.getUTCDay()]}function le(ee){return l[ee.getUTCMonth()]}function ye(ee){return a[ee.getUTCMonth()]}function Ce(ee){return s[+(ee.getUTCHours()>=12)]}function ve(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var ce=S(ee+="",b);return ce.toString=function(){return ee},ce},parse:function(ee){var ce=k(ee+="",!1);return ce.toString=function(){return ee},ce},utcFormat:function(ee){var ce=S(ee+="",x);return ce.toString=function(){return ee},ce},utcParse:function(ee){var ce=k(ee+="",!0);return ce.toString=function(){return ee},ce}}}var GL={"-":"",_:" ",0:"0"},Lr=/^\s*\d+/,_Ie=/^%/,AIe=/[\\^$*+?|[\]().{}]/g;function Lt(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function OIe(t){return t.replace(AIe,"\\$&")}function ip(t){return new RegExp("^(?:"+t.map(OIe).join("|")+")","i")}function op(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function RIe(t,e,n){var r=Lr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function DIe(t,e,n){var r=Lr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function PIe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function MIe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function FIe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function HL(t,e,n){var r=Lr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qL(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function LIe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function BIe(t,e,n){var r=Lr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function zIe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function KL(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function VIe(t,e,n){var r=Lr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function XL(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function UIe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function WIe(t,e,n){var r=Lr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function jIe(t,e,n){var r=Lr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function GIe(t,e,n){var r=Lr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function HIe(t,e,n){var r=_Ie.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function qIe(t,e,n){var r=Lr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function KIe(t,e,n){var r=Lr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function YL(t,e){return Lt(t.getDate(),e,2)}function XIe(t,e){return Lt(t.getHours(),e,2)}function YIe(t,e){return Lt(t.getHours()%12||12,e,2)}function QIe(t,e){return Lt(1+Ow.count(_c(t),t),e,3)}function Kj(t,e){return Lt(t.getMilliseconds(),e,3)}function JIe(t,e){return Kj(t,e)+"000"}function ZIe(t,e){return Lt(t.getMonth()+1,e,2)}function eCe(t,e){return Lt(t.getMinutes(),e,2)}function tCe(t,e){return Lt(t.getSeconds(),e,2)}function nCe(t){var e=t.getDay();return e===0?7:e}function rCe(t,e){return Lt(Rw.count(_c(t)-1,t),e,2)}function Xj(t){var e=t.getDay();return e>=4||e===0?Mf(t):Mf.ceil(t)}function sCe(t,e){return t=Xj(t),Lt(Mf.count(_c(t),t)+(_c(t).getDay()===4),e,2)}function iCe(t){return t.getDay()}function oCe(t,e){return Lt(mx.count(_c(t)-1,t),e,2)}function aCe(t,e){return Lt(t.getFullYear()%100,e,2)}function lCe(t,e){return t=Xj(t),Lt(t.getFullYear()%100,e,2)}function uCe(t,e){return Lt(t.getFullYear()%1e4,e,4)}function cCe(t,e){var n=t.getDay();return t=n>=4||n===0?Mf(t):Mf.ceil(t),Lt(t.getFullYear()%1e4,e,4)}function hCe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function QL(t,e){return Lt(t.getUTCDate(),e,2)}function fCe(t,e){return Lt(t.getUTCHours(),e,2)}function dCe(t,e){return Lt(t.getUTCHours()%12||12,e,2)}function pCe(t,e){return Lt(1+Dw.count(Ac(t),t),e,3)}function Yj(t,e){return Lt(t.getUTCMilliseconds(),e,3)}function mCe(t,e){return Yj(t,e)+"000"}function gCe(t,e){return Lt(t.getUTCMonth()+1,e,2)}function yCe(t,e){return Lt(t.getUTCMinutes(),e,2)}function vCe(t,e){return Lt(t.getUTCSeconds(),e,2)}function xCe(t){var e=t.getUTCDay();return e===0?7:e}function bCe(t,e){return Lt(Pw.count(Ac(t)-1,t),e,2)}function Qj(t){var e=t.getUTCDay();return e>=4||e===0?Ff(t):Ff.ceil(t)}function wCe(t,e){return t=Qj(t),Lt(Ff.count(Ac(t),t)+(Ac(t).getUTCDay()===4),e,2)}function SCe(t){return t.getUTCDay()}function kCe(t,e){return Lt(gx.count(Ac(t)-1,t),e,2)}function ICe(t,e){return Lt(t.getUTCFullYear()%100,e,2)}function CCe(t,e){return t=Qj(t),Lt(t.getUTCFullYear()%100,e,2)}function TCe(t,e){return Lt(t.getUTCFullYear()%1e4,e,4)}function $Ce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ff(t):Ff.ceil(t),Lt(t.getUTCFullYear()%1e4,e,4)}function NCe(){return"+0000"}function JL(){return"%"}function ZL(t){return+t}function e4(t){return Math.floor(+t/1e3)}var yh,Jj,Zj;ECe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ECe(t){return yh=EIe(t),Jj=yh.format,yh.parse,Zj=yh.utcFormat,yh.utcParse,yh}function _Ce(t){return new Date(t)}function ACe(t){return t instanceof Date?+t:+new Date(+t)}function kA(t,e,n,r,s,i,o,a,l,u){var c=dA(),h=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(S){return(l(S)<S?d:a(S)<S?p:o(S)<S?m:i(S)<S?g:r(S)<S?s(S)<S?y:v:n(S)<S?b:x)(S)}return c.invert=function(S){return new Date(h(S))},c.domain=function(S){return arguments.length?f(Array.from(S,ACe)):f().map(_Ce)},c.ticks=function(S){var k=f();return t(k[0],k[k.length-1],S==null?10:S)},c.tickFormat=function(S,k){return k==null?w:u(k)},c.nice=function(S){var k=f();return(!S||typeof S.range!="function")&&(S=e(k[0],k[k.length-1],S==null?10:S)),S?f(Cj(k,S)):c},c.copy=function(){return Ag(c,kA(t,e,n,r,s,i,o,a,l,u))},c}function OCe(){return to.apply(kA($Ie,NIe,_c,Bj,Rw,Ow,Mj,Dj,jh,Jj).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RCe(){return to.apply(kA(CIe,TIe,Ac,Hj,Pw,Dw,Wj,Vj,jh,Zj).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mw(){var t=0,e=1,n,r,s,i,o=As,a=!1,l;function u(h){return h==null||isNaN(h=+h)?l:o(s===0?.5:(h=(i(h)-n)*s,a?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(a=!!h,u):a},u.interpolator=function(h){return arguments.length?(o=h,u):o};function c(h){return function(f){var d,p;return arguments.length?([d,p]=f,o=h(d,p),u):[o(0),o(1)]}}return u.range=c(Id),u.rangeRound=c(fA),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return i=h,n=h(t),r=h(e),s=n===r?0:1/(r-n),u}}function fu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function e7(){var t=hu(Mw()(As));return t.copy=function(){return fu(t,e7())},Ha.apply(t,arguments)}function t7(){var t=gA(Mw()).domain([1,10]);return t.copy=function(){return fu(t,t7()).base(t.base())},Ha.apply(t,arguments)}function n7(){var t=yA(Mw());return t.copy=function(){return fu(t,n7()).constant(t.constant())},Ha.apply(t,arguments)}function IA(){var t=vA(Mw());return t.copy=function(){return fu(t,IA()).exponent(t.exponent())},Ha.apply(t,arguments)}function DCe(){return IA.apply(null,arguments).exponent(.5)}function r7(){var t=[],e=As;function n(r){if(r!=null&&!isNaN(r=+r))return e((Eg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ng),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>wke(t,i/r))},n.copy=function(){return r7(e).domain(t)},Ha.apply(n,arguments)}function Fw(){var t=0,e=.5,n=1,r=1,s,i,o,a,l,u=As,c,h=!1,f;function d(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-i)*(r*m<r*i?a:l),u(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,s=c(t=+t),i=c(e=+e),o=c(n=+n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,u=Gke(m,[y,v,b]),d):[u(0),u(.5),u(1)]}}return d.range=p(Id),d.rangeRound=p(fA),d.unknown=function(m){return arguments.length?(f=m,d):f},function(m){return c=m,s=m(t),i=m(e),o=m(n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,d}}function s7(){var t=hu(Fw()(As));return t.copy=function(){return fu(t,s7())},Ha.apply(t,arguments)}function i7(){var t=gA(Fw()).domain([.1,1,10]);return t.copy=function(){return fu(t,i7()).base(t.base())},Ha.apply(t,arguments)}function o7(){var t=yA(Fw());return t.copy=function(){return fu(t,o7()).constant(t.constant())},Ha.apply(t,arguments)}function CA(){var t=vA(Fw());return t.copy=function(){return fu(t,CA()).exponent(t.exponent())},Ha.apply(t,arguments)}function PCe(){return CA.apply(null,arguments).exponent(.5)}const t4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Om,scalePoint:Kp,scaleIdentity:Ij,scaleLinear:dx,scaleLog:Tj,scaleSymlog:$j,scaleOrdinal:uA,scaleImplicit:n$,scalePow:xA,scaleSqrt:pIe,scaleRadial:Nj,scaleQuantile:Ej,scaleQuantize:_j,scaleThreshold:Aj,scaleTime:OCe,scaleUtc:RCe,scaleSequential:e7,scaleSequentialLog:t7,scaleSequentialPow:IA,scaleSequentialSqrt:DCe,scaleSequentialSymlog:n7,scaleSequentialQuantile:r7,scaleDiverging:s7,scaleDivergingLog:i7,scaleDivergingPow:CA,scaleDivergingSqrt:PCe,scaleDivergingSymlog:o7,tickFormat:kj},Symbol.toStringTag,{value:"Module"}));function n4(t){return BCe(t)||LCe(t)||FCe(t)||MCe()}function MCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FCe(t,e){if(!!t){if(typeof t=="string")return o$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o$(t,e)}}function LCe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function BCe(t){if(Array.isArray(t))return o$(t)}function o$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r4(Object(n),!0).forEach(function(r){of(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function of(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ia(t,e,n){return Xe(t)||Xe(e)?n:mr(e)?yi(t,e,n):Ze(e)?e(t):n}function yx(t,e,n,r){var s=USe(t,function(a){return ia(a,e)});if(n==="number"){var i=s.filter(function(a){return Ee(a)||parseFloat(a)});return i.length?[Nw(i),$w(i)]:[1/0,-1/0]}var o=r?s.filter(function(a){return!Xe(a)}):s;return o.map(function(a){return mr(a)||a instanceof Date?a:""})}var zCe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a>1){if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<a;u++){var c=u>0?s[u-1].coordinate:s[a-1].coordinate,h=s[u].coordinate,f=u>=a-1?s[0].coordinate:s[u+1].coordinate,d=void 0;if(Vo(h-c)!==Vo(f-h)){var p=[];if(Vo(f-h)===Vo(l[1]-l[0])){d=f;var m=h+l[1]-l[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{d=c;var g=f+l[1]-l[0];p[0]=Math.min(h,(g+h)/2),p[1]=Math.max(h,(g+h)/2)}var y=[Math.min(h,(d+h)/2),Math.max(h,(d+h)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){o=s[u].index;break}}else{var v=Math.min(c,f),b=Math.max(c,f);if(e>(v+h)/2&&e<=(b+h)/2){o=s[u].index;break}}}else for(var x=0;x<a;x++)if(x===0&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x>0&&x<a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x===a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2){o=r[x].index;break}}else o=0;return o},TA=function(e){var n=e,r=n.type.displayName,s=e.props,i=s.stroke,o=s.fill,a;switch(r){case"Line":a=i;break;case"Area":case"Radar":a=i&&i!=="none"?i:o;break;default:a=o;break}return a},a7=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=$a(n,Of.displayName);if(!o)return null;var a;return o.props&&o.props.payload?a=o.props&&o.props.payload:i==="children"?a=(r||[]).reduce(function(l,u){var c=u.item,h=u.props,f=h.sectors||h.data||[];return l.concat(f.map(function(d){return{type:o.props.iconType||c.props.legendType,value:d.name,color:d.fill,payload:d}}))},[]):a=(r||[]).map(function(l){var u=l.item,c=u.props,h=c.dataKey,f=c.name,d=c.legendType,p=c.hide;return{inactive:p,dataKey:h,type:o.props.iconType||d||"square",color:TA(u),value:f||h,payload:u.props}}),$s($s($s({},o.props),Of.getWithHeight(o,s)),{},{payload:a,item:o})},VCe=function(e){var n=e.barSize,r=e.stackGroups,s=r===void 0?{}:r;if(!s)return{};for(var i={},o=Object.keys(s),a=0,l=o.length;a<l;a++)for(var u=s[o[a]].stackGroups,c=Object.keys(u),h=0,f=c.length;h<f;h++){var d=u[c[h]],p=d.items,m=d.cateAxisId,g=p.filter(function(b){return Ol(b.type).indexOf("Bar")>=0});if(g&&g.length){var y=g[0].props.barSize,v=g[0].props[m];i[v]||(i[v]=[]),i[v].push({item:g[0],stackList:g.slice(1),barSize:Xe(y)?n:y})}}return i},UCe=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,a=e.maxBarSize,l=o.length;if(l<1)return null;var u=Af(n,s,0,!0),c;if(o[0].barSize===+o[0].barSize){var h=!1,f=s/l,d=o.reduce(function(b,x){return b+x.barSize||0},0);d+=(l-1)*u,d>=s&&(d-=(l-1)*u,u=0),d>=s&&f>0&&(h=!0,f*=.9,d=l*f);var p=(s-d)/2>>0,m={offset:p-u,size:0};c=o.reduce(function(b,x){var w=[].concat(n4(b),[{item:x.item,position:{offset:m.offset+m.size+u,size:h?f:x.barSize}}]);return m=w[w.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(S){w.push({item:S,position:m})}),w},[])}else{var g=Af(r,s,0,!0);s-2*g-(l-1)*u<=0&&(u=0);var y=(s-2*g-(l-1)*u)/l;y>1&&(y>>=0);var v=a===+a?Math.min(y,a):y;c=o.reduce(function(b,x,w){var S=[].concat(n4(b),[{item:x.item,position:{offset:g+(y+u)*w+(y-v)/2,size:v}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(k){S.push({item:k,position:S[S.length-1].position})}),S},[])}return c},WCe=function(e,n,r,s){var i=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),u=a7({children:i,legendWidth:l}),c=e;if(u){var h=s||{},f=u.align,d=u.verticalAlign,p=u.layout;(p==="vertical"||p==="horizontal"&&d==="center")&&Ee(e[f])&&(c=$s($s({},e),{},of({},f,c[f]+(h.width||0)))),(p==="horizontal"||p==="vertical"&&f==="center")&&Ee(e[d])&&(c=$s($s({},e),{},of({},d,c[d]+(h.height||0))))}return c},l7=function(e,n,r,s){var i=n.props.children,o=Xo(i,"ErrorBar").filter(function(l){var u=l.props.direction;return Xe(u)||Xe(s)?!0:s.indexOf(u)>=0});if(o&&o.length){var a=o.map(function(l){return l.props.dataKey});return e.reduce(function(l,u){var c=ia(u,r,0),h=Ht(c)?[Nw(c),$w(c)]:[c,c],f=a.reduce(function(d,p){var m=ia(u,p,0),g=h[0]-Math.abs(Ht(m)?m[0]:m),y=h[1]+Math.abs(Ht(m)?m[1]:m);return[Math.min(g,d[0]),Math.max(y,d[1])]},[1/0,-1/0]);return[Math.min(f[0],l[0]),Math.max(f[1],l[1])]},[1/0,-1/0])}return null},jCe=function(e,n,r,s){var i=n.map(function(o){return l7(e,o,r,s)}).filter(function(o){return!Xe(o)});return i&&i.length?i.reduce(function(o,a){return[Math.min(o[0],a[0]),Math.max(o[1],a[1])]},[1/0,-1/0]):null},u7=function(e,n,r,s){var i=n.map(function(a){var l=a.props.dataKey;return r==="number"&&l&&l7(e,a,l)||yx(e,l,r,s)});if(r==="number")return i.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]);var o={};return i.reduce(function(a,l){for(var u=0,c=l.length;u<c;u++)o[l[u]]||(o[l[u]]=!0,a.push(l[u]));return a},[])},c7=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},s4=function(e,n,r){var s,i,o=e.map(function(a){return a.coordinate===n&&(s=!0),a.coordinate===r&&(i=!0),a.coordinate});return s||o.push(n),i||o.push(r),o},tl=function(e,n,r){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/l:0;return u=e.axisType==="angleAxis"?Vo(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(c){var h=i?i.indexOf(c):c;return{coordinate:s(h)+u,value:c,offset:u}}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(c,h){return{coordinate:s(c)+u,value:c,index:h,offset:u}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(c){return{coordinate:s(c)+u,value:c,offset:u}}):s.domain().map(function(c,h){return{coordinate:s(c)+u,value:i?i[c]:c,index:h,offset:u}})},B0=function(e,n,r){var s;return Ze(r)?s=r:Ze(n)&&(s=n),Ze(e)||s?function(i,o,a,l){Ze(e)&&e(i,o,a,l),Ze(s)&&s(i,o,a,l)}:null},GCe=function(e,n,r){var s=e.scale,i=e.type,o=e.layout,a=e.axisType;if(s==="auto")return o==="radial"&&a==="radiusAxis"?{scale:Om(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:dx(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Kp(),realScaleType:"point"}:i==="category"?{scale:Om(),realScaleType:"band"}:{scale:dx(),realScaleType:"linear"};if(Tg(s)){var l="scale".concat(lw(s));return{scale:(t4[l]||Kp)(),realScaleType:t4[l]?l:"point"}}return Ze(s)?{scale:s}:{scale:Kp(),realScaleType:"point"}},i4=1e-4,HCe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),i=Math.min(s[0],s[1])-i4,o=Math.max(s[0],s[1])+i4,a=e(n[0]),l=e(n[r-1]);(a<i||a>o||l<i||l>o)&&e.domain([n[0],n[r-1]])}},qCe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0,a=0;a<n;++a){var l=dw(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},KCe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var a=dw(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},XCe={sign:qCe,expand:t1e,none:_f,silhouette:n1e,wiggle:r1e,positive:KCe},YCe=function(e,n,r){var s=n.map(function(o){return o.props.dataKey}),i=e1e().keys(s).value(function(o,a){return+ia(o,a,0)}).order(ST).offset(XCe[r]);return i(e)},QCe=function(e,n,r,s,i,o){if(!e)return null;var a=o?n.reverse():n,l=a.reduce(function(u,c){var h=c.props,f=h.stackId,d=h.hide;if(d)return u;var p=c.props[r],m=u[p]||{hasStack:!1,stackGroups:{}};if(mr(f)){var g=m.stackGroups[f]||{numericAxisId:r,cateAxisId:s,items:[]};g.items.push(c),m.hasStack=!0,m.stackGroups[f]=g}else m.stackGroups[pw("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[c]};return $s($s({},u),{},of({},p,m))},{});return Object.keys(l).reduce(function(u,c){var h=l[c];return h.hasStack&&(h.stackGroups=Object.keys(h.stackGroups).reduce(function(f,d){var p=h.stackGroups[d];return $s($s({},f),{},of({},d,{numericAxisId:r,cateAxisId:s,items:p.items,stackedData:YCe(e,p.items,i)}))},{})),$s($s({},u),{},of({},c,h))},{})},JCe=function(e,n){return n==="number"?[Nw(e),$w(e)]:e},ZCe=function(e,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=mke(u,i,a);return e.domain(JCe(c,s)),{niceTicks:c}}if(i&&s==="number"){var h=e.domain(),f=gke(h,i,a);return{niceTicks:f}}return null},o4=function(e){var n=e.axis,r=e.ticks,s=e.bandSize,i=e.entry,o=e.index,a=e.dataKey;if(n.type==="category"){if(!n.allowDuplicatedCategory&&n.dataKey&&!Xe(i[n.dataKey])){var l=J1(r,"value",i[n.dataKey]);if(l)return l.coordinate+s/2}return r[o]?r[o].coordinate+s/2:null}var u=ia(i,Xe(a)?n.dataKey:a);return Xe(u)?null:n.scale(u)},eTe=function(e,n){var r=e.props.stackId;if(mr(r)){var s=n[r];if(s&&s.items.length){for(var i=-1,o=0,a=s.items.length;o<a;o++)if(s.items[o]===e){i=o;break}return i>=0?s.stackedData[i]:null}}return null},tTe=function(e){return e.reduce(function(n,r){return[Nw(r.concat([n[0]]).filter(Ee)),$w(r.concat([n[1]]).filter(Ee))]},[1/0,-1/0])},h7=function(e,n,r){return Object.keys(e).reduce(function(s,i){var o=e[i],a=o.stackedData,l=a.reduce(function(u,c){var h=tTe(c.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},a4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,l4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f7=function(e,n,r){if(Ze(e))return e(n,r);if(!Ht(e))return n;var s=[];if(Ee(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(a4.test(e[0])){var i=+a4.exec(e[0])[1];s[0]=n[0]-i}else Ze(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(Ee(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(l4.test(e[1])){var o=+l4.exec(e[1])[1];s[1]=n[1]+o}else Ze(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},vx=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var i=Z_(n,function(h){return h.coordinate}),o=1/0,a=1,l=i.length;a<l;a++){var u=i[a],c=i[a-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},u4=function(e,n,r){return!e||!e.length||ej(e,yi(r,"type.defaultProps.domain"))?n:e},nTe=function(e,n){var r=e.props,s=r.dataKey,i=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType;return $s($s({},Gt(e)),{},{dataKey:s,unit:o,formatter:a,name:i||s,color:TA(e),value:ia(n,s),type:l,payload:n,chartType:u})};function c4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function h4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(n),!0).forEach(function(r){rTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rTe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xx=Math.PI/180,sTe=function(e){return e*180/Math.PI},Kr=function(e,n,r,s){return{x:e+Math.cos(-xx*s)*r,y:n+Math.sin(-xx*s)*r}},iTe=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},oTe=function(e,n){var r=e.x,s=e.y,i=n.cx,o=n.cy,a=iTe({x:r,y:s},{x:i,y:o});if(a<=0)return{radius:a};var l=(r-i)/a,u=Math.acos(l);return s>o&&(u=2*Math.PI-u),{radius:a,angle:sTe(u),angleInRadian:u}},aTe=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},lTe=function(e,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),a=Math.min(i,o);return e+a*360},f4=function(e,n){var r=e.x,s=e.y,i=oTe({x:r,y:s},n),o=i.radius,a=i.angle,l=n.innerRadius,u=n.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=aTe(n),h=c.startAngle,f=c.endAngle,d=a,p;if(h<=f){for(;d>f;)d-=360;for(;d<h;)d+=360;p=d>=h&&d<=f}else{for(;d>h;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=h}return p?h4(h4({},n),{},{radius:o,angle:lTe(d,n)}):null};function uTe(t){return dTe(t)||fTe(t)||hTe(t)||cTe()}function cTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hTe(t,e){if(!!t){if(typeof t=="string")return a$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a$(t,e)}}function fTe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function dTe(t){if(Array.isArray(t))return a$(t)}function a$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d4(Object(n),!0).forEach(function(r){pTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pTe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mTe=function(e){var n=e.value,r=e.formatter,s=Xe(e.children)?n:e.children;return Ze(r)?r(s):s},gTe=function(e,n){var r=Vo(n-e),s=Math.min(Math.abs(n-e),360);return r*s},yTe=function(e,n,r){var s=e.position,i=e.viewBox,o=e.offset,a=e.className,l=i,u=l.cx,c=l.cy,h=l.innerRadius,f=l.outerRadius,d=l.startAngle,p=l.endAngle,m=l.clockWise,g=(h+f)/2,y=gTe(d,p),v=y>=0?1:-1,b,x;s==="insideStart"?(b=d+v*o,x=m):s==="insideEnd"?(b=p-v*o,x=!m):s==="end"&&(b=p+v*o,x=m),x=y<=0?x:!x;var w=Kr(u,c,g,b),S=Kr(u,c,g,b+(x?1:-1)*359),k="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(x?0:1,`,
    `).concat(S.x,",").concat(S.y),I=Xe(e.id)?pw("recharts-radial-line-"):e.id;return ue("text",{...r,dominantBaseline:"central",className:bn("recharts-radial-bar-label",a),children:[D("defs",{children:D("path",{id:I,d:k})}),D("textPath",{xlinkHref:"#".concat(I),children:n})]})},vTe=function(e){var n=e.viewBox,r=e.offset,s=e.position,i=n,o=i.cx,a=i.cy,l=i.innerRadius,u=i.outerRadius,c=i.startAngle,h=i.endAngle,f=(c+h)/2;if(s==="outside"){var d=Kr(o,a,u+r,f),p=d.x,m=d.y;return{x:p,y:m,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,y=Kr(o,a,g,f),v=y.x,b=y.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},xTe=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,i=e.position,o=n,a=o.x,l=o.y,u=o.width,c=o.height,h=c>=0?1:-1,f=h*s,d=h>0?"end":"start",p=h>0?"start":"end",m=u>=0?1:-1,g=m*s,y=m>0?"end":"start",v=m>0?"start":"end";if(i==="top"){var b={x:a+u/2,y:l-h*s,textAnchor:"middle",verticalAnchor:d};return Cr(Cr({},b),r?{height:Math.max(l-r.y,0),width:u}:{})}if(i==="bottom"){var x={x:a+u/2,y:l+c+f,textAnchor:"middle",verticalAnchor:p};return Cr(Cr({},x),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(i==="left"){var w={x:a-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"};return Cr(Cr({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(i==="right"){var S={x:a+u+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"};return Cr(Cr({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var k=r?{width:u,height:c}:{};return i==="insideLeft"?Cr({x:a+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"},k):i==="insideRight"?Cr({x:a+u-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"},k):i==="insideTop"?Cr({x:a+u/2,y:l+f,textAnchor:"middle",verticalAnchor:p},k):i==="insideBottom"?Cr({x:a+u/2,y:l+c-f,textAnchor:"middle",verticalAnchor:d},k):i==="insideTopLeft"?Cr({x:a+g,y:l+f,textAnchor:v,verticalAnchor:p},k):i==="insideTopRight"?Cr({x:a+u-g,y:l+f,textAnchor:y,verticalAnchor:p},k):i==="insideBottomLeft"?Cr({x:a+g,y:l+c-f,textAnchor:v,verticalAnchor:d},k):i==="insideBottomRight"?Cr({x:a+u-g,y:l+c-f,textAnchor:y,verticalAnchor:d},k):Ii(i)&&(Ee(i.x)||TT(i.x))&&(Ee(i.y)||TT(i.y))?Cr({x:a+Af(i.x,u),y:l+Af(i.y,c),textAnchor:"end",verticalAnchor:"end"},k):Cr({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},bTe=function(e){return Ee(e.cx)};function qr(t){var e=t.viewBox,n=t.position,r=t.value,s=t.children,i=t.content,o=t.className,a=o===void 0?"":o,l=t.textBreakAll;if(!e||Xe(r)&&Xe(s)&&!ae.exports.isValidElement(i)&&!Ze(i))return null;if(ae.exports.isValidElement(i))return ae.exports.cloneElement(i,t);var u;if(Ze(i)){if(u=ae.exports.createElement(i,t),ae.exports.isValidElement(u))return u}else u=mTe(t);var c=bTe(e),h=Gt(t,!0);if(c&&(n==="insideStart"||n==="insideEnd"||n==="end"))return yTe(t,u,h);var f=c?vTe(t):xTe(t);return D(Nm,{className:bn("recharts-label",a),...h,...f,breakAll:l,children:u})}qr.displayName="Label";qr.defaultProps={offset:5};var d7=function(e){var n=e.cx,r=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,h=e.x,f=e.y,d=e.top,p=e.left,m=e.width,g=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(Ee(m)&&Ee(g)){if(Ee(h)&&Ee(f))return{x:h,y:f,width:m,height:g};if(Ee(d)&&Ee(p))return{x:d,y:p,width:m,height:g}}return Ee(h)&&Ee(f)?{x:h,y:f,width:0,height:0}:Ee(n)&&Ee(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},wTe=function(e,n){return e?e===!0?D(qr,{viewBox:n},"label-implicit"):mr(e)?D(qr,{viewBox:n,value:e},"label-implicit"):ae.exports.isValidElement(e)?e.type===qr?ae.exports.cloneElement(e,{key:"label-implicit",viewBox:n}):D(qr,{content:e,viewBox:n},"label-implicit"):Ze(e)?D(qr,{content:e,viewBox:n},"label-implicit"):Ii(e)?ae.exports.createElement(qr,{viewBox:n,...e,key:"label-implicit"}):null:null},STe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=d7(e),o=Xo(s,qr.displayName).map(function(l,u){return ae.exports.cloneElement(l,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var a=wTe(e.label,n||i);return[a].concat(uTe(o))};qr.parseViewBox=d7;qr.renderCallByParent=STe;function kTe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var ITe=kTe;function CTe(t){return ETe(t)||NTe(t)||$Te(t)||TTe()}function TTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Te(t,e){if(!!t){if(typeof t=="string")return l$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l$(t,e)}}function NTe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ETe(t){if(Array.isArray(t))return l$(t)}function l$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function m4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p4(Object(n),!0).forEach(function(r){_Te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ATe(t,e){if(t==null)return{};var n=OTe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function OTe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var RTe={valueAccessor:function(e){return Ht(e.value)?ITe(e.value):e.value}};function Rl(t){var e=t.data,n=t.valueAccessor,r=t.dataKey,s=t.clockWise,i=t.id,o=t.textBreakAll,a=ATe(t,["data","valueAccessor","dataKey","clockWise","id","textBreakAll"]);return!e||!e.length?null:D(Zs,{className:"recharts-label-list",children:e.map(function(l,u){var c=Xe(r)?n(l,u):ia(l&&l.payload,r),h=Xe(i)?{}:{id:"".concat(i,"-").concat(u)};return ae.exports.createElement(qr,{...Gt(l,!0),...a,...h,parentViewBox:l.parentViewBox,index:u,value:c,textBreakAll:o,viewBox:qr.parseViewBox(Xe(s)?l:m4(m4({},l),{},{clockWise:s})),key:"label-".concat(u)})})})}Rl.displayName="LabelList";function DTe(t,e){return t?t===!0?D(Rl,{data:e},"labelList-implicit"):tn.isValidElement(t)||Ze(t)?D(Rl,{data:e,content:t},"labelList-implicit"):Ii(t)?ae.exports.createElement(Rl,{data:e,...t,key:"labelList-implicit"}):null:null}function PTe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=Xo(r,Rl.displayName).map(function(o,a){return ae.exports.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return s;var i=DTe(t.label,e);return[i].concat(CTe(s))}Rl.renderCallByParent=PTe;Rl.defaultProps=RTe;function Dv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dv=function(n){return typeof n}:Dv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dv(t)}function MTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FTe(t,e,n){return e&&g4(t.prototype,e),n&&g4(t,n),t}function LTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u$(t,e)}function u$(t,e){return u$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},u$(t,e)}function BTe(t){var e=UTe();return function(){var r=bx(t),s;if(e){var i=bx(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return zTe(this,s)}}function zTe(t,e){return e&&(Dv(e)==="object"||typeof e=="function")?e:VTe(t)}function VTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bx(t){return bx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},bx(t)}var WTe=function(e,n){var r=Vo(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},z0=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+s,h=Math.asin(l/c)/xx,f=u?i:i+o*h,d=Kr(n,r,c,f),p=Kr(n,r,s,f),m=u?i-o*h:i,g=Kr(n,r,c*Math.cos(h*xx),m);return{center:d,circleTangency:p,lineTangency:g,theta:h}},p7=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=e.endAngle,l=WTe(o,a),u=o+l,c=Kr(n,r,i,o),h=Kr(n,r,i,u),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var d=Kr(n,r,s,o),p=Kr(n,r,s,u);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(d.x,",").concat(d.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},jTe=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,h=Vo(c-u),f=z0({cx:n,cy:r,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:l}),d=f.circleTangency,p=f.lineTangency,m=f.theta,g=z0({cx:n,cy:r,radius:i,angle:c,sign:-h,cornerRadius:o,cornerIsExternal:l}),y=g.circleTangency,v=g.lineTangency,b=g.theta,x=l?Math.abs(u-c):Math.abs(u-c)-m-b;if(x<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):p7({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:u,endAngle:c});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
  `);if(s>0){var S=z0({cx:n,cy:r,radius:s,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),k=S.circleTangency,I=S.lineTangency,T=S.theta,N=z0({cx:n,cy:r,radius:s,angle:c,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),A=N.circleTangency,R=N.lineTangency,O=N.theta,M=l?Math.abs(u-c):Math.abs(u-c)-T-O;if(M<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(M>180),",").concat(+(h>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(I.x,",").concat(I.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},m7=function(t){LTe(n,t);var e=BTe(n);function n(){return MTe(this,n),e.apply(this,arguments)}return FTe(n,[{key:"render",value:function(){var s=this.props,i=s.cx,o=s.cy,a=s.innerRadius,l=s.outerRadius,u=s.cornerRadius,c=s.forceCornerRadius,h=s.cornerIsExternal,f=s.startAngle,d=s.endAngle,p=s.className;if(l<a||f===d)return null;var m=bn("recharts-sector",p),g=l-a,y=Af(u,g,0,!0),v;return y>0&&Math.abs(f-d)<360?v=jTe({cx:i,cy:o,innerRadius:a,outerRadius:l,cornerRadius:Math.min(y,g/2),forceCornerRadius:c,cornerIsExternal:h,startAngle:f,endAngle:d}):v=p7({cx:i,cy:o,innerRadius:a,outerRadius:l,startAngle:f,endAngle:d}),D("path",{...Gt(this.props,!0),className:m,d:v})}}]),n}(ae.exports.PureComponent);m7.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1};function Pv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pv=function(n){return typeof n}:Pv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pv(t)}function y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(n),!0).forEach(function(r){GTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GTe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qTe(t,e,n){return e&&x4(t.prototype,e),n&&x4(t,n),t}function KTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c$(t,e)}function c$(t,e){return c$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},c$(t,e)}function XTe(t){var e=JTe();return function(){var r=wx(t),s;if(e){var i=wx(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return YTe(this,s)}}function YTe(t,e){return e&&(Pv(e)==="object"||typeof e=="function")?e:QTe(t)}function QTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wx(t){return wx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},wx(t)}var b4={curveBasisClosed:Wve,curveBasisOpen:jve,curveBasis:Uve,curveLinearClosed:Gve,curveLinear:hw,curveMonotoneX:Hve,curveMonotoneY:qve,curveNatural:Kve,curveStep:Xve,curveStepAfter:Qve,curveStepBefore:Yve},V0=function(e){return e.x===+e.x&&e.y===+e.y},ap=function(e){return e.x},lp=function(e){return e.y},ZTe=function(e,n){if(Ze(e))return e;var r="curve".concat(lw(e));return r==="curveMonotone"&&n?b4["".concat(r).concat(n==="vertical"?"Y":"X")]:b4[r]||hw},Sx=function(t){KTe(n,t);var e=XTe(n);function n(){return HTe(this,n),e.apply(this,arguments)}return qTe(n,[{key:"getPath",value:function(){var s=this.props,i=s.type,o=s.points,a=s.baseLine,l=s.layout,u=s.connectNulls,c=ZTe(i,l),h=u?o.filter(function(m){return V0(m)}):o,f;if(Ht(a)){var d=u?a.filter(function(m){return V0(m)}):a,p=h.map(function(m,g){return v4(v4({},m),{},{base:d[g]})});return l==="vertical"?f=D0().y(lp).x1(ap).x0(function(m){return m.base.x}):f=D0().x(ap).y1(lp).y0(function(m){return m.base.y}),f.defined(V0).curve(c),f(p)}return l==="vertical"&&Ee(a)?f=D0().y(lp).x1(ap).x0(a):Ee(a)?f=D0().x(ap).y1(lp).y0(a):f=bW().x(ap).y(lp),f.defined(V0).curve(c),f(h)}},{key:"render",value:function(){var s=this.props,i=s.className,o=s.points,a=s.path,l=s.pathRef;if((!o||!o.length)&&!a)return null;var u=o&&o.length?this.getPath():a;return D("path",{...Gt(this.props),...U1(this.props),className:bn("recharts-curve",i),d:u,ref:l})}}]),n}(ae.exports.PureComponent);Sx.defaultProps={type:"linear",points:[],connectNulls:!1};function Mv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mv=function(n){return typeof n}:Mv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mv(t)}function e$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t$e(t,e,n){return e&&w4(t.prototype,e),n&&w4(t,n),t}function n$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h$(t,e)}function h$(t,e){return h$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},h$(t,e)}function r$e(t){var e=o$e();return function(){var r=kx(t),s;if(e){var i=kx(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return s$e(this,s)}}function s$e(t,e){return e&&(Mv(e)==="object"||typeof e=="function")?e:i$e(t)}function i$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},kx(t)}var S4=function(e,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),a=s>=0?1:-1,l=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,c;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,d=4;f<d;f++)h[f]=i[f]>o?o:i[f];c="M".concat(e,",").concat(n+a*h[0]),h[0]>0&&(c+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(n)),c+="L ".concat(e+r-l*h[1],",").concat(n),h[1]>0&&(c+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*h[1])),c+="L ".concat(e+r,",").concat(n+s-a*h[2]),h[2]>0&&(c+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-l*h[2],",").concat(n+s)),c+="L ".concat(e+l*h[3],",").concat(n+s),h[3]>0&&(c+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-a*h[3])),c+="Z"}else if(o>0&&i===+i&&i>0){var p=Math.min(o,i);c="M ".concat(e,",").concat(n+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*p,`
            L `).concat(e+r,",").concat(n+s-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r-l*p,",").concat(n+s,`
            L `).concat(e+l*p,",").concat(n+s,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(n+s-a*p," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return c},a$e=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,i=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(i,i+a),c=Math.max(i,i+a),h=Math.min(o,o+l),f=Math.max(o,o+l);return r>=u&&r<=c&&s>=h&&s<=f}return!1},$A=function(t){n$e(n,t);var e=r$e(n);function n(){var r;e$e(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),r.state={totalLength:-1},r.node=void 0,r}return t$e(n,[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var s=this.node.getTotalLength();s&&this.setState({totalLength:s})}catch{}}},{key:"render",value:function(){var s=this,i=this.props,o=i.x,a=i.y,l=i.width,u=i.height,c=i.radius,h=i.className,f=this.state.totalLength,d=this.props,p=d.animationEasing,m=d.animationDuration,g=d.animationBegin,y=d.isAnimationActive,v=d.isUpdateAnimationActive;if(o!==+o||a!==+a||l!==+l||u!==+u||l===0||u===0)return null;var b=bn("recharts-rectangle",h);return v?D(Df,{canBegin:f>0,from:{width:l,height:u,x:o,y:a},to:{width:l,height:u,x:o,y:a},duration:m,animationEasing:p,isActive:v,children:function(x){var w=x.width,S=x.height,k=x.x,I=x.y;return D(Df,{canBegin:f>0,from:"0px ".concat(f===-1?1:f,"px"),to:"".concat(f,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:p,children:D("path",{...Gt(s.props,!0),className:b,d:S4(k,I,w,S,c),ref:function(N){s.node=N}})})}}):D("path",{...Gt(this.props,!0),className:b,d:S4(o,a,l,u,c)})}}]),n}(ae.exports.PureComponent);$A.defaultProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"};function Fv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fv=function(n){return typeof n}:Fv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fv(t)}function l$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u$e(t,e,n){return e&&k4(t.prototype,e),n&&k4(t,n),t}function c$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f$(t,e)}function f$(t,e){return f$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},f$(t,e)}function h$e(t){var e=p$e();return function(){var r=Ix(t),s;if(e){var i=Ix(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return f$e(this,s)}}function f$e(t,e){return e&&(Fv(e)==="object"||typeof e=="function")?e:d$e(t)}function d$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ix(t){return Ix=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ix(t)}var NA=function(t){c$e(n,t);var e=h$e(n);function n(){return l$e(this,n),e.apply(this,arguments)}return u$e(n,[{key:"render",value:function(){var s=this.props,i=s.cx,o=s.cy,a=s.r,l=s.className,u=bn("recharts-dot",l);return i===+i&&o===+o&&a===+a?D("circle",{...Gt(this.props),...U1(this.props),className:u,cx:i,cy:o,r:a}):null}}]),n}(ae.exports.PureComponent);function Lv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lv=function(n){return typeof n}:Lv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lv(t)}function m$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g$e(t,e,n){return e&&I4(t.prototype,e),n&&I4(t,n),t}function y$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d$(t,e)}function d$(t,e){return d$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},d$(t,e)}function v$e(t){var e=w$e();return function(){var r=Cx(t),s;if(e){var i=Cx(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return x$e(this,s)}}function x$e(t,e){return e&&(Lv(e)==="object"||typeof e=="function")?e:b$e(t)}function b$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cx(t){return Cx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Cx(t)}var g7=function(t){y$e(n,t);var e=v$e(n);function n(){return m$e(this,n),e.apply(this,arguments)}return g$e(n,[{key:"render",value:function(){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,u=s.top,c=s.left,h=s.className;return!Ee(i)||!Ee(o)||!Ee(a)||!Ee(l)||!Ee(u)||!Ee(c)?null:D("path",{...Gt(this.props,!0),className:bn("recharts-cross",h),d:n.getPath(i,o,a,l,u,c)})}}],[{key:"getPath",value:function(s,i,o,a,l,u){return"M".concat(s,",").concat(l,"v").concat(a,"M").concat(u,",").concat(i,"h").concat(o)}}]),n}(ae.exports.PureComponent);g7.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0};var S$e=Math.ceil,k$e=Math.max;function I$e(t,e,n,r){for(var s=-1,i=k$e(S$e((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++s]=t,t+=n;return o}var C$e=I$e,T$e=jW,C4=1/0,$$e=17976931348623157e292;function N$e(t){if(!t)return t===0?t:0;if(t=T$e(t),t===C4||t===-C4){var e=t<0?-1:1;return e*$$e}return t===t?t:0}var y7=N$e,E$e=C$e,_$e=gw,aI=y7;function A$e(t){return function(e,n,r){return r&&typeof r!="number"&&_$e(e,n,r)&&(n=r=void 0),e=aI(e),n===void 0?(n=e,e=0):n=aI(n),r=r===void 0?e<n?1:-1:aI(r),E$e(e,n,r,t)}}var O$e=A$e,R$e=O$e,D$e=R$e(),Tx=D$e;function T4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(n),!0).forEach(function(r){v7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v7(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P$e=["Webkit","Moz","O","ms"],M$e=function(e,n){if(!e)return null;var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=P$e.reduce(function(i,o){return $4($4({},i),{},v7({},o+r,n))},{});return s[e]=n,s};function Bv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bv=function(n){return typeof n}:Bv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bv(t)}function N4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N4(Object(n),!0).forEach(function(r){p$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p$(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L$e(t,e,n){return e&&E4(t.prototype,e),n&&E4(t,n),t}function B$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m$(t,e)}function m$(t,e){return m$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},m$(t,e)}function z$e(t){var e=U$e();return function(){var r=$x(t),s;if(e){var i=$x(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return V$e(this,s)}}function V$e(t,e){return e&&(Bv(e)==="object"||typeof e=="function")?e:g$(t)}function g$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $x(t){return $x=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},$x(t)}var W$e=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Kp().domain(Tx(0,l)).range([i,i+o-a]),c=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:u(r),endX:u(s),scale:u,scaleValues:c}},_4=function(e){return e.changedTouches&&!!e.changedTouches.length},Mm=function(t){B$e(n,t);var e=z$e(n);function n(r){var s;return F$e(this,n),s=e.call(this,r),s.leaveTimer=void 0,s.travellerDragStartHandlers=void 0,s.handleDrag=function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)},s.handleTouchMove=function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])},s.handleDragEnd=function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1}),s.detachDragEndListener()},s.handleLeaveWrapper=function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))},s.handleEnterSlideOrTraveller=function(){s.setState({isTextActive:!0})},s.handleLeaveSlideOrTraveller=function(){s.setState({isTextActive:!1})},s.handleSlideDragStart=function(i){var o=_4(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),s.attachDragEndListener()},s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(g$(s),"startX"),endX:s.handleTravellerDragStart.bind(g$(s),"endX")},s.state={},s}return L$e(n,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,o=s.endX,a=this.state.scaleValues,l=this.props,u=l.gap,c=l.data,h=c.length-1,f=Math.min(i,o),d=Math.max(i,o),p=n.getIndexInRange(a,f),m=n.getIndexInRange(a,d);return{startIndex:p-p%u,endIndex:m===h?h:m-m%u}}},{key:"getTextOfTick",value:function(s){var i=this.props,o=i.data,a=i.tickFormatter,l=i.dataKey,u=ia(o[s],l,s);return Ze(a)?a(u,s):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,o=i.slideMoveStartX,a=i.startX,l=i.endX,u=this.props,c=u.x,h=u.width,f=u.travellerWidth,d=u.startIndex,p=u.endIndex,m=u.onChange,g=s.pageX-o;g>0?g=Math.min(g,c+h-f-l,c+h-f-a):g<0&&(g=Math.max(g,c-a,c-l));var y=this.getIndex({startX:a+g,endX:l+g});(y.startIndex!==d||y.endIndex!==p)&&m&&m(y),this.setState({startX:a+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var o=_4(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i,o=this.state,a=o.brushMoveStartX,l=o.movingTravellerId,u=o.endX,c=o.startX,h=this.state[l],f=this.props,d=f.x,p=f.width,m=f.travellerWidth,g=f.onChange,y=f.gap,v=f.data,b={startX:this.state.startX,endX:this.state.endX},x=s.pageX-a;x>0?x=Math.min(x,d+p-m-h):x<0&&(x=Math.max(x,d-h)),b[l]=h+x;var w=this.getIndex(b),S=w.startIndex,k=w.endIndex,I=function(){var N=v.length-1;return l==="startX"&&(u>c?S%y===0:k%y===0)||u<c&&k===N||l==="endX"&&(u>c?k%y===0:S%y===0)||u>c&&k===N};this.setState((i={},p$(i,l,h+x),p$(i,"brushMoveStartX",s.pageX),i),function(){g&&I()&&g(w)})}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,u=s.fill,c=s.stroke;return D("rect",{stroke:c,fill:u,x:i,y:o,width:a,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,u=s.data,c=s.children,h=s.padding,f=ae.exports.Children.only(c);return f?tn.cloneElement(f,{x:i,y:o,width:a,height:l,margin:h,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(s,i){var o=this.props,a=o.y,l=o.travellerWidth,u=o.height,c=o.traveller,h=Math.max(s,this.props.x),f=lI(lI({},Gt(this.props)),{},{x:h,y:a,width:l,height:u});return D(Zs,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],style:{cursor:"col-resize"},children:n.renderTraveller(c,f)})}},{key:"renderSlide",value:function(s,i){var o=this.props,a=o.y,l=o.height,u=o.stroke,c=o.travellerWidth,h=Math.min(s,i)+c,f=Math.max(Math.abs(i-s)-c,0);return D("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:h,y:a,width:f,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,o=s.endIndex,a=s.y,l=s.height,u=s.travellerWidth,c=s.stroke,h=this.state,f=h.startX,d=h.endX,p=5,m={pointerEvents:"none",fill:c};return ue(Zs,{className:"recharts-brush-texts",children:[D(Nm,{textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,d)-p,y:a+l/2,...m,children:this.getTextOfTick(i)}),D(Nm,{textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,d)+u+p,y:a+l/2,...m,children:this.getTextOfTick(o)})]})}},{key:"render",value:function(){var s=this.props,i=s.data,o=s.className,a=s.children,l=s.x,u=s.y,c=s.width,h=s.height,f=s.alwaysShowText,d=this.state,p=d.startX,m=d.endX,g=d.isTextActive,y=d.isSlideMoving,v=d.isTravellerMoving;if(!i||!i.length||!Ee(l)||!Ee(u)||!Ee(c)||!Ee(h)||c<=0||h<=0)return null;var b=bn("recharts-brush",o),x=tn.Children.count(a)===1,w=M$e("userSelect","none");return ue(Zs,{className:b,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w,children:[this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||y||v||f)&&this.renderText()]})}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,o=s.y,a=s.width,l=s.height,u=s.stroke,c=Math.floor(o+l/2)-1;return ue(L9,{children:[D("rect",{x:i,y:o,width:a,height:l,fill:u,stroke:"none"}),D("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),D("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"})]})}},{key:"renderTraveller",value:function(s,i){var o;return tn.isValidElement(s)?o=tn.cloneElement(s,i):Ze(s)?o=s(i):o=n.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(s,i){var o=s.data,a=s.width,l=s.x,u=s.travellerWidth,c=s.updateId,h=s.startIndex,f=s.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return lI({prevData:o,prevTravellerWidth:u,prevUpdateId:c,prevX:l,prevWidth:a},o&&o.length?W$e({data:o,width:a,x:l,travellerWidth:u,startIndex:h,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||l!==i.prevX||u!==i.prevTravellerWidth)){i.scale.range([l,l+a-u]);var d=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:o,prevTravellerWidth:u,prevUpdateId:c,prevX:l,prevWidth:a,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(s,i){for(var o=s.length,a=0,l=o-1;l-a>1;){var u=Math.floor((a+l)/2);s[u]>i?l=u:a=u}return i>=s[l]?l:a}}]),n}(ae.exports.PureComponent);Mm.displayName="Brush";Mm.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};var j$e=J_;function G$e(t,e){var n;return j$e(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}var H$e=G$e,q$e=q9,K$e=cu,X$e=H$e,Y$e=Ht,Q$e=gw;function J$e(t,e,n){var r=Y$e(t)?q$e:X$e;return n&&Q$e(t,e,n)&&(e=void 0),r(t,K$e(e))}var Z$e=J$e,Qo=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n};function eNe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var tNe=eNe,nNe=J_;function rNe(t,e){var n=!0;return nNe(t,function(r,s,i){return n=!!e(r,s,i),n}),n}var sNe=rNe,iNe=tNe,oNe=sNe,aNe=cu,lNe=Ht,uNe=gw;function cNe(t,e,n){var r=lNe(t)?iNe:oNe;return n&&uNe(t,e,n)&&(e=void 0),r(t,aNe(e))}var x7=cNe,A4=WW;function hNe(t,e,n){e=="__proto__"&&A4?A4(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var fNe=hNe,dNe=fNe,pNe=VW,mNe=cu;function gNe(t,e){var n={};return e=mNe(e),pNe(t,function(r,s,i){dNe(n,s,e(r,s,i))}),n}var yNe=gNe;function vNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xNe(t,e,n){return e&&O4(t.prototype,e),n&&O4(t,n),t}function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function po(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(r){EA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bNe=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.layout,u=e.children,c=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!$a(u,"Bar");return c.reduce(function(d,p){var m=n[p],g=m.orientation,y=m.domain,v=m.padding,b=v===void 0?{}:v,x=m.mirror,w=m.reversed,S="".concat(g).concat(x?"Mirror":""),k,I,T,N,A;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var R=y[1]-y[0],O=1/0,M=m.categoricalDomain.sort();M.forEach(function(fe,le){le>0&&(O=Math.min((fe||0)-(M[le-1]||0),O))});var z=O/R,B=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(k=z*B/2),m.padding==="no-gap"){var K=Af(e.barCategoryGap,z*B),L=z*B/2;k=L-K-(L-K)/B*K}}s==="xAxis"?I=[r.left+(b.left||0)+(k||0),r.left+r.width-(b.right||0)-(k||0)]:s==="yAxis"?I=l==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(k||0),r.top+r.height-(b.bottom||0)-(k||0)]:I=m.range,w&&(I=[I[1],I[0]]);var V=GCe(m,i,f),j=V.scale,Q=V.realScaleType;j.domain(y).range(I),HCe(j);var Z=ZCe(j,po(po({},m),{},{realScaleType:Q}));s==="xAxis"?(A=g==="top"&&!x||g==="bottom"&&x,T=r.left,N=h[S]-A*m.height):s==="yAxis"&&(A=g==="left"&&!x||g==="right"&&x,T=h[S]-A*m.width,N=r.top);var oe=po(po(po({},m),Z),{},{realScaleType:Q,x:T,y:N,scale:j,width:s==="xAxis"?r.width:m.width,height:s==="yAxis"?r.height:m.height});return oe.bandSize=vx(oe,Z),!m.hide&&s==="xAxis"?h[S]+=(A?-1:1)*oe.height:m.hide||(h[S]+=(A?-1:1)*oe.width),po(po({},d),{},EA({},p,oe))},{})},b7=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},wNe=function(e){var n=e.x1,r=e.y1,s=e.x2,i=e.y2;return b7({x:n,y:r},{x:s,y:i})},w7=function(){function t(e){vNe(this,t),this.scale=void 0,this.scale=e}return xNe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}]),t}();w7.EPS=1e-4;var _A=function(e){var n=Object.keys(e).reduce(function(r,s){return po(po({},r),{},EA({},s,w7.create(e[s])))},{});return po(po({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,a=i.position;return yNe(s,function(l,u){return n[u].apply(l,{bandAware:o,position:a})})},isInRange:function(s){return x7(s,function(i,o){return n[o].isInRange(i)})}})};function D4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function P4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D4(Object(n),!0).forEach(function(r){SNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SNe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kNe(t,e){return $Ne(t)||TNe(t,e)||CNe(t,e)||INe()}function INe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CNe(t,e){if(!!t){if(typeof t=="string")return M4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M4(t,e)}}function M4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TNe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function $Ne(t){if(Array.isArray(t))return t}var NNe=function(e,n){var r;return tn.isValidElement(e)?r=tn.cloneElement(e,n):Ze(e)?r=e(n):r=D("line",{...n,className:"recharts-reference-line-line"}),r},ENe=function(e,n,r,s,i){var o=i.viewBox,a=o.x,l=o.y,u=o.width,c=o.height,h=i.position;if(r){var f=i.y,d=i.yAxis.orientation,p=e.y.apply(f,{position:h});if(Qo(i,"discard")&&!e.y.isInRange(p))return null;var m=[{x:a+u,y:p},{x:a,y:p}];return d==="left"?m.reverse():m}if(n){var g=i.x,y=i.xAxis.orientation,v=e.x.apply(g,{position:h});if(Qo(i,"discard")&&!e.x.isInRange(v))return null;var b=[{x:v,y:l+c},{x:v,y:l}];return y==="top"?b.reverse():b}if(s){var x=i.segment,w=x.map(function(S){return e.apply(S,{position:h})});return Qo(i,"discard")&&Z$e(w,function(S){return!e.isInRange(S)})?null:w}return null};function AA(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxis,i=t.yAxis,o=t.shape,a=t.className,l=t.alwaysShow,u=t.clipPathId;tA(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=_A({x:s.scale,y:i.scale}),h=mr(e),f=mr(n),d=r&&r.length===2,p=ENe(c,h,f,d,t);if(!p)return null;var m=kNe(p,2),g=m[0],y=g.x,v=g.y,b=m[1],x=b.x,w=b.y,S=Qo(t,"hidden")?"url(#".concat(u,")"):void 0,k=P4(P4({clipPath:S},Gt(t,!0)),{},{x1:y,y1:v,x2:x,y2:w});return ue(Zs,{className:bn("recharts-reference-line",a),children:[NNe(o,k),qr.renderCallByParent(t,wNe({x1:y,y1:v,x2:x,y2:w}))]})}AA.displayName="ReferenceLine";AA.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function F4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function L4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F4(Object(n),!0).forEach(function(r){_Ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ANe=function(e){var n=e.x,r=e.y,s=e.xAxis,i=e.yAxis,o=_A({x:s.scale,y:i.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return Qo(e,"discard")&&!o.isInRange(a)?null:a};function Og(t){var e=t.x,n=t.y,r=t.r,s=t.alwaysShow,i=t.clipPathId,o=mr(e),a=mr(n);if(tA(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!a)return null;var l=ANe(t);if(!l)return null;var u=l.x,c=l.y,h=t.shape,f=t.className,d=Qo(t,"hidden")?"url(#".concat(i,")"):void 0,p=L4(L4({clipPath:d},Gt(t,!0)),{},{cx:u,cy:c});return ue(Zs,{className:bn("recharts-reference-dot",f),children:[Og.renderDot(h,p),qr.renderCallByParent(t,{x:u-r,y:c-r,width:2*r,height:2*r})]})}Og.displayName="ReferenceDot";Og.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};Og.renderDot=function(t,e){var n;return tn.isValidElement(t)?n=tn.cloneElement(t,e):Ze(t)?n=t(e):n=D(NA,{...e,cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"}),n};function B4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B4(Object(n),!0).forEach(function(r){ONe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ONe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var RNe=function(e,n,r,s,i){var o=i.x1,a=i.x2,l=i.y1,u=i.y2,c=i.xAxis,h=i.yAxis;if(!c||!h)return null;var f=_A({x:c.scale,y:h.scale}),d={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},p={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Qo(i,"discard")&&(!f.isInRange(d)||!f.isInRange(p))?null:b7(d,p)};function Rg(t){var e=t.x1,n=t.x2,r=t.y1,s=t.y2,i=t.className,o=t.alwaysShow,a=t.clipPathId;tA(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=mr(e),u=mr(n),c=mr(r),h=mr(s),f=t.shape;if(!l&&!u&&!c&&!h&&!f)return null;var d=RNe(l,u,c,h,t);if(!d&&!f)return null;var p=Qo(t,"hidden")?"url(#".concat(a,")"):void 0;return ue(Zs,{className:bn("recharts-reference-area",i),children:[Rg.renderRect(f,z4(z4({clipPath:p},Gt(t,!0)),d)),qr.renderCallByParent(t,d)]})}Rg.displayName="ReferenceArea";Rg.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};Rg.renderRect=function(t,e){var n;return tn.isValidElement(t)?n=tn.cloneElement(t,e):Ze(t)?n=t(e):n=D($A,{...e,className:"recharts-reference-area-rect"}),n};function zv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zv=function(n){return typeof n}:zv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zv(t)}function V4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V4(Object(n),!0).forEach(function(r){DNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DNe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uI(t,e){if(t==null)return{};var n=PNe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function PNe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function MNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FNe(t,e,n){return e&&U4(t.prototype,e),n&&U4(t,n),t}function LNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y$(t,e)}function y$(t,e){return y$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},y$(t,e)}function BNe(t){var e=UNe();return function(){var r=Nx(t),s;if(e){var i=Nx(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return zNe(this,s)}}function zNe(t,e){return e&&(zv(e)==="object"||typeof e=="function")?e:VNe(t)}function VNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nx(t){return Nx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Nx(t)}var zu=function(t){LNe(n,t);var e=BNe(n);function n(){return MNe(this,n),e.apply(this,arguments)}return FNe(n,[{key:"shouldComponentUpdate",value:function(s){var i=s.viewBox,o=uI(s,["viewBox"]),a=this.props,l=a.viewBox,u=uI(a,["viewBox"]);return!Em(i,l)||!Em(o,u)}},{key:"getTickLineCoord",value:function(s){var i=this.props,o=i.x,a=i.y,l=i.width,u=i.height,c=i.orientation,h=i.tickSize,f=i.mirror,d=i.tickMargin,p,m,g,y,v,b,x=f?-1:1,w=s.tickSize||h,S=Ee(s.tickCoord)?s.tickCoord:s.coordinate;switch(c){case"top":p=m=s.coordinate,y=a+ +!f*u,g=y-x*w,b=g-x*d,v=S;break;case"left":g=y=s.coordinate,m=o+ +!f*l,p=m-x*w,v=p-x*d,b=S;break;case"right":g=y=s.coordinate,m=o+ +f*l,p=m+x*w,v=p+x*d,b=S;break;default:p=m=s.coordinate,y=a+ +f*u,g=y+x*w,b=g+x*d,v=S;break}return{line:{x1:p,y1:g,x2:m,y2:y},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,o=s.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,o=s.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,u=s.orientation,c=s.mirror,h=s.axisLine,f=zt(zt(zt({},Gt(this.props)),Gt(h)),{},{fill:"none"});if(u==="top"||u==="bottom"){var d=+(u==="top"&&!c||u==="bottom"&&c);f=zt(zt({},f),{},{x1:i,y1:o+d*l,x2:i+a,y2:o+d*l})}else{var p=+(u==="left"&&!c||u==="right"&&c);f=zt(zt({},f),{},{x1:i+p*a,y1:o,x2:i+p*a,y2:o+l})}return D("line",{...f,className:bn("recharts-cartesian-axis-line",yi(h,"className"))})}},{key:"renderTicks",value:function(s){var i=this,o=this.props,a=o.tickLine,l=o.stroke,u=o.tick,c=o.tickFormatter,h=o.unit,f=n.getTicks(zt(zt({},this.props),{},{ticks:s})),d=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=Gt(this.props),g=Gt(u),y=zt(zt({},m),{},{fill:"none"},Gt(a)),v=f.map(function(b,x){var w=i.getTickLineCoord(b),S=w.line,k=w.tick,I=zt(zt(zt(zt({textAnchor:d,verticalAnchor:p},m),{},{stroke:"none",fill:l},g),k),{},{index:x,payload:b,visibleTicksCount:f.length,tickFormatter:c});return ue(Zs,{className:"recharts-cartesian-axis-tick",...V9(i.props,b,x),children:[a&&D("line",{...y,...S,className:bn("recharts-cartesian-axis-tick-line",yi(a,"className"))}),u&&n.renderTickItem(u,I,"".concat(Ze(c)?c(b.value,x):b.value).concat(h||""))]},"tick-".concat(x))});return D("g",{className:"recharts-cartesian-axis-ticks",children:v})}},{key:"render",value:function(){var s=this.props,i=s.axisLine,o=s.width,a=s.height,l=s.ticksGenerator,u=s.className,c=s.hide;if(c)return null;var h=this.props,f=h.ticks,d=uI(h,["ticks"]),p=f;return Ze(l)&&(p=f&&f.length>0?l(this.props):l(d)),o<=0||a<=0||!p||!p.length?null:ue(Zs,{className:bn("recharts-cartesian-axis",u),children:[i&&this.renderAxisLine(),this.renderTicks(p),qr.renderCallByParent(this.props)]})}}],[{key:"getTicks",value:function(s){var i=s.tick,o=s.ticks,a=s.viewBox,l=s.minTickGap,u=s.orientation,c=s.interval,h=s.tickFormatter,f=s.unit;return!o||!o.length||!i?[]:Ee(c)||Al.isSsr?n.getNumberIntervalTicks(o,typeof c=="number"&&Ee(c)?c:0):c==="preserveStartEnd"?n.getTicksStart({ticks:o,tickFormatter:h,viewBox:a,orientation:u,minTickGap:l,unit:f},!0):c==="preserveStart"?n.getTicksStart({ticks:o,tickFormatter:h,viewBox:a,orientation:u,minTickGap:l,unit:f}):n.getTicksEnd({ticks:o,tickFormatter:h,viewBox:a,orientation:u,minTickGap:l,unit:f})}},{key:"getNumberIntervalTicks",value:function(s,i){return s.filter(function(o,a){return a%(i+1)===0})}},{key:"getTicksStart",value:function(s,i){var o=s.ticks,a=s.tickFormatter,l=s.viewBox,u=s.orientation,c=s.minTickGap,h=s.unit,f=l.x,d=l.y,p=l.width,m=l.height,g=u==="top"||u==="bottom"?"width":"height",y=(o||[]).slice(),v=h&&g==="width"?Bu(h)[g]:0,b=y.length,x=b>=2?Vo(y[1].coordinate-y[0].coordinate):1,w,S;if(x===1?(w=g==="width"?f:d,S=g==="width"?f+p:d+m):(w=g==="width"?f+p:d+m,S=g==="width"?f:d),i){var k=o[b-1],I=Ze(a)?a(k.value,b-1):k.value,T=Bu(I)[g]+v,N=x*(k.coordinate+x*T/2-S);y[b-1]=k=zt(zt({},k),{},{tickCoord:N>0?k.coordinate-N*x:k.coordinate});var A=x*(k.tickCoord-x*T/2-w)>=0&&x*(k.tickCoord+x*T/2-S)<=0;A&&(S=k.tickCoord-x*(T/2+c),y[b-1]=zt(zt({},k),{},{isShow:!0}))}for(var R=i?b-1:b,O=0;O<R;O++){var M=y[O],z=Ze(a)?a(M.value,O):M.value,B=Bu(z)[g]+v;if(O===0){var K=x*(M.coordinate-x*B/2-w);y[O]=M=zt(zt({},M),{},{tickCoord:K<0?M.coordinate-K*x:M.coordinate})}else y[O]=M=zt(zt({},M),{},{tickCoord:M.coordinate});var L=x*(M.tickCoord-x*B/2-w)>=0&&x*(M.tickCoord+x*B/2-S)<=0;L&&(w=M.tickCoord+x*(B/2+c),y[O]=zt(zt({},M),{},{isShow:!0}))}return y.filter(function(V){return V.isShow})}},{key:"getTicksEnd",value:function(s){var i=s.ticks,o=s.tickFormatter,a=s.viewBox,l=s.orientation,u=s.minTickGap,c=s.unit,h=a.x,f=a.y,d=a.width,p=a.height,m=l==="top"||l==="bottom"?"width":"height",g=c&&m==="width"?Bu(c)[m]:0,y=(i||[]).slice(),v=y.length,b=v>=2?Vo(y[1].coordinate-y[0].coordinate):1,x,w;b===1?(x=m==="width"?h:f,w=m==="width"?h+d:f+p):(x=m==="width"?h+d:f+p,w=m==="width"?h:f);for(var S=v-1;S>=0;S--){var k=y[S],I=Ze(o)?o(k.value,v-S-1):k.value,T=Bu(I)[m]+g;if(S===v-1){var N=b*(k.coordinate+b*T/2-w);y[S]=k=zt(zt({},k),{},{tickCoord:N>0?k.coordinate-N*b:k.coordinate})}else y[S]=k=zt(zt({},k),{},{tickCoord:k.coordinate});var A=b*(k.tickCoord-b*T/2-x)>=0&&b*(k.tickCoord+b*T/2-w)<=0;A&&(w=k.tickCoord-b*(T/2+u),y[S]=zt(zt({},k),{},{isShow:!0}))}return y.filter(function(R){return R.isShow})}},{key:"renderTickItem",value:function(s,i,o){var a;return tn.isValidElement(s)?a=tn.cloneElement(s,i):Ze(s)?a=s(i):a=D(Nm,{...i,className:"recharts-cartesian-axis-tick-value",children:o}),a}}]),n}(ae.exports.Component);zu.displayName="CartesianAxis";zu.defaultProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Vv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vv=function(n){return typeof n}:Vv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vv(t)}function WNe(t,e){if(t==null)return{};var n=jNe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function jNe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function W4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function U0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W4(Object(n),!0).forEach(function(r){GNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GNe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qNe(t,e,n){return e&&j4(t.prototype,e),n&&j4(t,n),t}function KNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v$(t,e)}function v$(t,e){return v$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},v$(t,e)}function XNe(t){var e=JNe();return function(){var r=Ex(t),s;if(e){var i=Ex(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return YNe(this,s)}}function YNe(t,e){return e&&(Vv(e)==="object"||typeof e=="function")?e:QNe(t)}function QNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ex(t){return Ex=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ex(t)}var OA=function(t){KNe(n,t);var e=XNe(n);function n(){return HNe(this,n),e.apply(this,arguments)}return qNe(n,[{key:"renderHorizontal",value:function(s){var i=this,o=this.props,a=o.x,l=o.width,u=o.horizontal;if(!s||!s.length)return null;var c=s.map(function(h,f){var d=U0(U0({},i.props),{},{x1:a,y1:h,x2:a+l,y2:h,key:"line-".concat(f),index:f});return n.renderLineItem(u,d)});return D("g",{className:"recharts-cartesian-grid-horizontal",children:c})}},{key:"renderVertical",value:function(s){var i=this,o=this.props,a=o.y,l=o.height,u=o.vertical;if(!s||!s.length)return null;var c=s.map(function(h,f){var d=U0(U0({},i.props),{},{x1:h,y1:a,x2:h,y2:a+l,key:"line-".concat(f),index:f});return n.renderLineItem(u,d)});return D("g",{className:"recharts-cartesian-grid-vertical",children:c})}},{key:"renderVerticalStripes",value:function(s){var i=this.props.verticalFill;if(!i||!i.length)return null;var o=this.props,a=o.fillOpacity,l=o.x,u=o.y,c=o.width,h=o.height,f=s.slice().sort(function(p,m){return p-m});l!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var g=f[m+1]?f[m+1]-p:l+c-p;if(g<=0)return null;var y=m%i.length;return D("rect",{x:Math.round(p+l-l),y:u,width:g,height:h,stroke:"none",fill:i[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"},"react-".concat(m))});return D("g",{className:"recharts-cartesian-gridstripes-vertical",children:d})}},{key:"renderHorizontalStripes",value:function(s){var i=this.props.horizontalFill;if(!i||!i.length)return null;var o=this.props,a=o.fillOpacity,l=o.x,u=o.y,c=o.width,h=o.height,f=s.slice().sort(function(p,m){return p-m});u!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var g=f[m+1]?f[m+1]-p:u+h-p;if(g<=0)return null;var y=m%i.length;return D("rect",{y:Math.round(p+u-u),x:l,height:g,width:c,stroke:"none",fill:i[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"},"react-".concat(m))});return D("g",{className:"recharts-cartesian-gridstripes-horizontal",children:d})}},{key:"renderBackground",value:function(){var s=this.props.fill;if(!s||s==="none")return null;var i=this.props,o=i.fillOpacity,a=i.x,l=i.y,u=i.width,c=i.height;return D("rect",{x:a,y:l,width:u,height:c,stroke:"none",fill:s,fillOpacity:o,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,u=s.horizontal,c=s.vertical,h=s.horizontalCoordinatesGenerator,f=s.verticalCoordinatesGenerator,d=s.xAxis,p=s.yAxis,m=s.offset,g=s.chartWidth,y=s.chartHeight;if(!Ee(a)||a<=0||!Ee(l)||l<=0||!Ee(i)||i!==+i||!Ee(o)||o!==+o)return null;var v=this.props,b=v.horizontalPoints,x=v.verticalPoints;return(!b||!b.length)&&Ze(h)&&(b=h({yAxis:p,width:g,height:y,offset:m})),(!x||!x.length)&&Ze(f)&&(x=f({xAxis:d,width:g,height:y,offset:m})),ue("g",{className:"recharts-cartesian-grid",children:[this.renderBackground(),u&&this.renderHorizontal(b),c&&this.renderVertical(x),u&&this.renderHorizontalStripes(b),c&&this.renderVerticalStripes(x)]})}}],[{key:"renderLineItem",value:function(s,i){var o;if(tn.isValidElement(s))o=tn.cloneElement(s,i);else if(Ze(s))o=s(i);else{var a=i.x1,l=i.y1,u=i.x2,c=i.y2,h=i.key,f=WNe(i,["x1","y1","x2","y2","key"]);o=ae.exports.createElement("line",{...Gt(f),x1:a,y1:l,x2:u,y2:c,fill:"none",key:h})}return o}}]),n}(ae.exports.PureComponent);OA.displayName="CartesianGrid";OA.defaultProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ZNe(t,e){return rEe(t)||nEe(t,e)||tEe(t,e)||eEe()}function eEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tEe(t,e){if(!!t){if(typeof t=="string")return G4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G4(t,e)}}function G4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nEe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function rEe(t){if(Array.isArray(t))return t}function sEe(t,e){if(t==null)return{};var n=iEe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function iEe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function RA(t){var e=t.offset,n=t.layout,r=t.width,s=t.dataKey,i=t.data,o=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,u=sEe(t,["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"]),c=Gt(u),h=i.map(function(f,d){var p=o(f,s),m=p.x,g=p.y,y=p.value,v=p.errorVal;if(!v)return null;var b=[],x,w;if(Array.isArray(v)){var S=ZNe(v,2);x=S[0],w=S[1]}else x=w=v;if(n==="vertical"){var k=a.scale,I=g+e,T=I+r,N=I-r,A=k(y-x),R=k(y+w);b.push({x1:R,y1:T,x2:R,y2:N}),b.push({x1:A,y1:I,x2:R,y2:I}),b.push({x1:A,y1:T,x2:A,y2:N})}else if(n==="horizontal"){var O=l.scale,M=m+e,z=M-r,B=M+r,K=O(y-x),L=O(y+w);b.push({x1:z,y1:L,x2:B,y2:L}),b.push({x1:M,y1:K,x2:M,y2:L}),b.push({x1:z,y1:K,x2:B,y2:K})}return D(Zs,{className:"recharts-errorBar",...c,children:b.map(function(V,j){return ae.exports.createElement("line",{...V,key:"line-".concat(j)})})},"bar-".concat(d))});return D(Zs,{className:"recharts-errorBars",children:h})}RA.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};RA.displayName="ErrorBar";function Uv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Uv=function(n){return typeof n}:Uv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Uv(t)}function oEe(t,e){if(t==null)return{};var n=aEe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function aEe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function H4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H4(Object(n),!0).forEach(function(r){lEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lEe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vh(t){return fEe(t)||hEe(t)||cEe(t)||uEe()}function uEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cEe(t,e){if(!!t){if(typeof t=="string")return x$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x$(t,e)}}function hEe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function fEe(t){if(Array.isArray(t))return x$(t)}function x$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pEe(t,e,n){return e&&q4(t.prototype,e),n&&q4(t,n),t}function mEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b$(t,e)}function b$(t,e){return b$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},b$(t,e)}function gEe(t){var e=xEe();return function(){var r=_x(t),s;if(e){var i=_x(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return yEe(this,s)}}function yEe(t,e){return e&&(Uv(e)==="object"||typeof e=="function")?e:vEe(t)}function vEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_x(t)}var pl=function(t){mEe(n,t);var e=gEe(n);function n(){var r;dEe(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),r.mainCurve=void 0,r.state={isAnimationFinished:!0,totalLength:0},r.getStrokeDasharray=function(a,l,u){for(var c=u.reduce(function(v,b){return v+b}),h=Math.floor(a/c),f=a%c,d=l-a,p=[],m=0,g=0;;g+=u[m],++m)if(g+u[m]>f){p=[].concat(vh(u.slice(0,m)),[f-g]);break}var y=p.length%2===0?[0,d]:[d];return[].concat(vh(n.repeat(u,h)),vh(p),y).map(function(v){return"".concat(v,"px")}).join(", ")},r.id=pw("recharts-line-"),r.pathRef=function(a){r.mainCurve=a},r.handleAnimationEnd=function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()},r.handleAnimationStart=function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()},r}return pEe(n,[{key:"componentDidMount",value:function(){if(!!this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,o=s.xAxis,a=s.yAxis,l=s.layout,u=s.children,c=Xo(u,RA.displayName);if(!c)return null;function h(f,d){return{x:f.x,y:f.y,value:f.value,errorVal:ia(f.payload,d)}}return c.map(function(f,d){return tn.cloneElement(f,{key:"bar-".concat(d),data:i,xAxis:o,yAxis:a,layout:l,dataPointFormatter:h})})}},{key:"renderDots",value:function(s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,u=a.points,c=a.dataKey,h=Gt(this.props),f=Gt(l,!0),d=u.map(function(m,g){var y=oi(oi(oi({key:"dot-".concat(g),r:3},h),f),{},{value:m.value,dataKey:c,cx:m.x,cy:m.y,index:g,payload:m.payload});return n.renderDotItem(l,y)}),p={clipPath:s?"url(#clipPath-".concat(i,")"):null};return D(Zs,{className:"recharts-line-dots",...p,children:d},"dots")}},{key:"renderCurveStatically",value:function(s,i,o,a){var l=this.props,u=l.type,c=l.layout,h=l.connectNulls;l.ref;var f=oEe(l,["type","layout","connectNulls","ref"]),d=oi(oi(oi({},Gt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:s},a),{},{type:u,layout:c,connectNulls:h});return D(Sx,{...d,pathRef:this.pathRef})}},{key:"renderCurveWithAnimation",value:function(s,i){var o=this,a=this.props,l=a.points,u=a.strokeDasharray,c=a.isAnimationActive,h=a.animationBegin,f=a.animationDuration,d=a.animationEasing,p=a.animationId,m=a.animateNewValues,g=a.width,y=a.height,v=this.state,b=v.prevPoints,x=v.totalLength;return D(Df,{begin:h,duration:f,isActive:c,easing:d,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(w){var S=w.t;if(b){var k=b.length/l.length,I=l.map(function(O,M){var z=Math.floor(M*k);if(b[z]){var B=b[z],K=tp(B.x,O.x),L=tp(B.y,O.y);return oi(oi({},O),{},{x:K(S),y:L(S)})}if(m){var V=tp(g*2,O.x),j=tp(y/2,O.y);return oi(oi({},O),{},{x:V(S),y:j(S)})}return oi(oi({},O),{},{x:O.x,y:O.y})});return o.renderCurveStatically(I,s,i)}var T=tp(0,x),N=T(S),A;if(u){var R="".concat(u).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});A=o.getStrokeDasharray(N,x,R)}else A="".concat(N,"px ").concat(x-N,"px");return o.renderCurveStatically(l,s,i,{strokeDasharray:A})}},"line-".concat(p))}},{key:"renderCurve",value:function(s,i){var o=this.props,a=o.points,l=o.isAnimationActive,u=this.state,c=u.prevPoints,h=u.totalLength;return l&&a&&a.length&&(!c&&h>0||!ej(c,a))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(a,s,i)}},{key:"render",value:function(){var s=this.props,i=s.hide,o=s.dot,a=s.points,l=s.className,u=s.xAxis,c=s.yAxis,h=s.top,f=s.left,d=s.width,p=s.height,m=s.isAnimationActive,g=s.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,v=a.length===1,b=bn("recharts-line",l),x=u&&u.allowDataOverflow||c&&c.allowDataOverflow,w=Xe(g)?this.id:g;return ue(Zs,{className:b,children:[x?D("defs",{children:D("clipPath",{id:"clipPath-".concat(w),children:D("rect",{x:f,y:h,width:d,height:p})})}):null,!v&&this.renderCurve(x,w),this.renderErrorBar(),(v||o)&&this.renderDots(x,w),(!m||y)&&Rl.renderCallByParent(this.props,a)]})}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var o=s.length%2!==0?[].concat(vh(s),[0]):s,a=[],l=0;l<i;++l)a=[].concat(vh(a),vh(o));return a}},{key:"renderDotItem",value:function(s,i){var o;if(tn.isValidElement(s))o=tn.cloneElement(s,i);else if(Ze(s))o=s(i);else{var a=bn("recharts-line-dot",s?s.className:"");o=D(NA,{...i,className:a})}return o}}]),n}(ae.exports.PureComponent);pl.displayName="Line";pl.defaultProps={xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Al.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1};pl.getComposedData=function(t){var e=t.props,n=t.xAxis,r=t.yAxis,s=t.xAxisTicks,i=t.yAxisTicks,o=t.dataKey,a=t.bandSize,l=t.displayedData,u=t.offset,c=e.layout,h=l.map(function(f,d){var p=ia(f,o);return c==="horizontal"?{x:o4({axis:n,ticks:s,bandSize:a,entry:f,index:d}),y:Xe(p)?null:r.scale(p),value:p,payload:f}:{x:Xe(p)?null:n.scale(p),y:o4({axis:r,ticks:i,bandSize:a,entry:f,index:d}),value:p,payload:f}});return oi({points:h,layout:c},u)};var Lw=function(){return null};Lw.displayName="XAxis";Lw.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",domain:[0,"auto"],padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var Bw=function(){return null};Bw.displayName="YAxis";Bw.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",domain:[0,"auto"],padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var bEe=cu,wEe=Cg,SEe=ow;function kEe(t){return function(e,n,r){var s=Object(e);if(!wEe(e)){var i=bEe(n);e=SEe(e),n=function(a){return i(s[a],a,s)}}var o=t(e,n,r);return o>-1?s[i?e[o]:o]:void 0}}var IEe=kEe,CEe=y7;function TEe(t){var e=CEe(t),n=e%1;return e===e?n?e-n:e:0}var $Ee=TEe,NEe=uW,EEe=cu,_Ee=$Ee,AEe=Math.max;function OEe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:_Ee(n);return s<0&&(s=AEe(r+s,0)),NEe(t,EEe(e),s)}var REe=OEe,DEe=IEe,PEe=REe,MEe=DEe(PEe),FEe=MEe,LEe=g2e,BEe=Ii,zEe="Expected a function";function VEe(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(zEe);return BEe(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),LEe(t,e,{leading:r,maxWait:e,trailing:s})}var UEe=VEe,WEe=lu,jEe=uu,GEe="[object Boolean]";function HEe(t){return t===!0||t===!1||jEe(t)&&WEe(t)==GEe}var qEe=HEe,w$=function(e,n,r,s,i){var o=Xo(e,AA.displayName),a=Xo(e,Og.displayName),l=o.concat(a),u=Xo(e,Rg.displayName),c="".concat(s,"Id"),h=s[0],f=n;if(l.length&&(f=l.reduce(function(m,g){if(g.props[c]===r&&Qo(g.props,"extendDomain")&&Ee(g.props[h])){var y=g.props[h];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},f)),u.length){var d="".concat(h,"1"),p="".concat(h,"2");f=u.reduce(function(m,g){if(g.props[c]===r&&Qo(g.props,"extendDomain")&&Ee(g.props[d])&&Ee(g.props[p])){var y=g.props[d],v=g.props[p];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},f)}return i&&i.length&&(f=i.reduce(function(m,g){return Ee(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},f)),f},S7={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,h,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new s(c,h||l,f),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,h;if(this._eventsCount===0)return u;for(h in c=this._events)e.call(c,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,p=new Array(d);f<d;f++)p[f]=h[f].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,h=this._events[c];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,c,h,f,d,p){var m=n?n+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,h),!0;case 4:return g.fn.call(g.context,c,h,f),!0;case 5:return g.fn.call(g.context,c,h,f,d),!0;case 6:return g.fn.call(g.context,c,h,f,d,p),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g.fn.apply(g.context,v)}else{var x=g.length,w;for(b=0;b<x;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,c);break;case 3:g[b].fn.call(g[b].context,c,h);break;case 4:g[b].fn.call(g[b].context,c,h,f);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[b].fn.apply(g[b].context,v)}}return!0},a.prototype.on=function(u,c,h){return i(this,u,c,h,!1)},a.prototype.once=function(u,c,h){return i(this,u,c,h,!0)},a.prototype.removeListener=function(u,c,h,f){var d=n?n+u:u;if(!this._events[d])return this;if(!c)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!f||p.once)&&(!h||p.context===h)&&o(this,d);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||f&&!p[m].once||h&&p[m].context!==h)&&g.push(p[m]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(S7);const KEe=S7.exports;var ai=new KEe;ai.setMaxListeners&&ai.setMaxListeners(10);var cI="recharts.syncMouseEvents";function Wv(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wv=function(n){return typeof n}:Wv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wv(t)}function K4(t,e){return QEe(t)||YEe(t,e)||k7(t,e)||XEe()}function XEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YEe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function QEe(t){if(Array.isArray(t))return t}function X4(t,e){if(t==null)return{};var n=JEe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function JEe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ZEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e_e(t,e,n){return e&&Y4(t.prototype,e),n&&Y4(t,n),t}function t_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S$(t,e)}function S$(t,e){return S$=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},S$(t,e)}function n_e(t){var e=s_e();return function(){var r=Ax(t),s;if(e){var i=Ax(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return r_e(this,s)}}function r_e(t,e){return e&&(Wv(e)==="object"||typeof e=="function")?e:k$(t)}function k$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ax(t){return Ax=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ax(t)}function Lf(t){return a_e(t)||o_e(t)||k7(t)||i_e()}function i_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k7(t,e){if(!!t){if(typeof t=="string")return I$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I$(t,e)}}function o_e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function a_e(t){if(Array.isArray(t))return I$(t)}function I$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q4(Object(n),!0).forEach(function(r){ui(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ui(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l_e={xAxis:["bottom","top"],yAxis:["left","right"]},I7={x:0,y:0},u_e=Number.isFinite?Number.isFinite:isFinite,J4=typeof requestAnimationFrame=="function"?requestAnimationFrame:typeof setImmediate=="function"?setImmediate:setTimeout,Z4=typeof cancelAnimationFrame=="function"?cancelAnimationFrame:typeof clearImmediate=="function"?clearImmediate:clearTimeout,c_e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},h_e=function(e,n,r,s){var i=n.find(function(c){return c&&c.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,a=s.radius;return me(me(me({},s),Kr(s.cx,s.cy,a,o)),{},{angle:o,radius:a})}var l=i.coordinate,u=s.angle;return me(me(me({},s),Kr(s.cx,s.cy,l,u)),{},{angle:u,radius:l})}return I7},zw=function(e,n,r){var s=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(s||[]).reduce(function(l,u){var c=u.props.data;return c&&c.length?[].concat(Lf(l),Lf(c)):l},[]);return a&&a.length>0?a:r&&r.props&&r.props.data&&r.props.data.length>0?r.props.data:e&&e.length&&Ee(i)&&Ee(o)?e.slice(i,o+1):[]},C7=function(e,n,r,s){var i=e.graphicalItems,o=e.tooltipAxis,a=zw(n,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(l,u){var c=u.props.hide;if(c)return l;var h=u.props.data,f;if(o.dataKey&&!o.allowDuplicatedCategory){var d=h===void 0?a:h;f=J1(d,o.dataKey,s)}else f=h&&h[r]||a[r];return f?[].concat(Lf(l),[nTe(u,f)]):l},[])},e6=function(e,n,r,s){var i=s||{x:e.chartX,y:e.chartY},o=c_e(i,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=zCe(o,a,u,l);if(c>=0&&u){var h=u[c]&&u[c].value,f=C7(e,n,c,h),d=h_e(r,a,c,i);return{activeTooltipIndex:c,activeLabel:h,activePayload:f,activeCoordinate:d}}return null},f_e=function(e,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,h=e.children,f=e.stackOffset,d=c7(c,i),p=r.reduce(function(m,g){var y=g.props,v=y.type,b=y.dataKey,x=y.allowDataOverflow,w=y.allowDuplicatedCategory,S=y.scale,k=y.ticks,I=g.props[o],T=zw(e.data,{graphicalItems:s.filter(function(L){return L.props[o]===I}),dataStartIndex:l,dataEndIndex:u}),N=T.length;if(!m[I]){var A,R,O;if(b){if(A=yx(T,b,v),v==="category"&&d){var M=D1e(A);w&&M?(R=A,A=Tx(0,N)):w||(A=u4(g.props.domain,A,g).reduce(function(L,V){return L.indexOf(V)>=0?L:[].concat(Lf(L),[V])},[]))}else if(v==="category")w?A=A.filter(function(L){return L!==""&&!Xe(L)}):A=u4(g.props.domain,A,g).reduce(function(L,V){return L.indexOf(V)>=0||V===""||Xe(V)?L:[].concat(Lf(L),[V])},[]);else if(v==="number"){var z=jCe(T,s.filter(function(L){return L.props[o]===I&&!L.props.hide}),b,i);z&&(A=z)}d&&(v==="number"||S!=="auto")&&(O=yx(T,b,"category"))}else d?A=Tx(0,N):a&&a[I]&&a[I].hasStack&&v==="number"?A=f==="expand"?[0,1]:h7(a[I].stackGroups,l,u):A=u7(T,s.filter(function(L){return L.props[o]===I&&!L.props.hide}),v,!0);if(v==="number")A=w$(h,A,I,i,k),g.props.domain&&(A=f7(g.props.domain,A,x));else if(v==="category"&&g.props.domain){var B=g.props.domain,K=A.every(function(L){return B.indexOf(L)>=0});K&&(A=B)}return me(me({},m),{},ui({},I,me(me({},g.props),{},{axisType:i,domain:A,categoricalDomain:O,duplicateDomain:R,originalDomain:g.props.domain,isCategorical:d,layout:c})))}return m},{});return p},d_e=function(e,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,h=e.children,f=zw(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),d=f.length,p=c7(c,i),m=-1,g=r.reduce(function(y,v){var b=v.props[o];if(!y[b]){m++;var x;return p?x=Tx(0,d):a&&a[b]&&a[b].hasStack?(x=h7(a[b].stackGroups,l,u),x=w$(h,x,b,i)):(x=f7(s.defaultProps.domain,u7(f,r.filter(function(w){return w.props[o]===b&&!w.props.hide}),"number"),s.defaultProps.allowDataOverflow),x=w$(h,x,b,i)),me(me({},y),{},ui({},b,me(me({axisType:i},s.defaultProps),{},{hide:!0,orientation:yi(l_e,"".concat(i,".").concat(m%2),null),domain:x,originalDomain:s.defaultProps.domain,isCategorical:p,layout:c})))}return y},{});return g},p_e=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,h="".concat(s,"Id"),f=Xo(c,i),d={};return f&&f.length?d=f_e(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(d=d_e(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),d},m_e=function(e){var n=el(e),r=tl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:Z_(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:vx(n,r)}},t6=function(e){var n=e.children,r=e.defaultShowTooltip,s=$a(n,Mm.displayName),i=s&&s.props&&s.props.startIndex||0,o=s&&s.props&&s.props.endIndex||e.data&&e.data.length-1||0;return{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Xe(r)?!1:r}},g_e=function(e){return!e||!e.length?!1:e.some(function(n){var r=Ol(n&&n.type);return r&&r.indexOf("Bar")>=0})},n6=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},y_e=function(e,n){var r=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,h=r.children,f=r.margin||{},d=$a(h,Mm.displayName),p=$a(h,Of.displayName),m=Object.keys(l).reduce(function(b,x){var w=l[x],S=w.orientation;return!w.mirror&&!w.hide?me(me({},b),{},ui({},S,b[S]+w.width)):b},{left:f.left||0,right:f.right||0}),g=Object.keys(o).reduce(function(b,x){var w=o[x],S=w.orientation;return!w.mirror&&!w.hide?me(me({},b),{},ui({},S,yi(b,"".concat(S))+w.height)):b},{top:f.top||0,bottom:f.bottom||0}),y=me(me({},g),m),v=y.bottom;return d&&(y.bottom+=d.props.height||Mm.defaultProps.height),p&&n&&(y=WCe(y,s,r,n)),me(me({brushBottom:v},y),{},{width:u-y.left-y.right,height:c-y.top-y.bottom})},v_e=function(e){var n,r,s=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,a=o===void 0?"axis":o,l=e.validateTooltipEventTypes,u=l===void 0?["axis"]:l,c=e.axisComponents,h=e.legendContent,f=e.formatAxisMap,d=e.defaultProps,p=function(y,v){var b=v.graphicalItems,x=v.stackGroups,w=v.offset,S=v.updateId,k=v.dataStartIndex,I=v.dataEndIndex,T=y.barSize,N=y.layout,A=y.barGap,R=y.barCategoryGap,O=y.maxBarSize,M=n6(N),z=M.numericAxisName,B=M.cateAxisName,K=g_e(b),L=K&&VCe({barSize:T,stackGroups:x}),V=[];return b.forEach(function(j,Q){var Z=zw(y.data,{dataStartIndex:k,dataEndIndex:I},j),oe=j.props,fe=oe.dataKey,le=oe.maxBarSize,ye=j.props["".concat(z,"Id")],Ce=j.props["".concat(B,"Id")],ve=c.reduce(function(Ur,Wn){var rs,jn=v["".concat(Wn.axisType,"Map")],ws=j.props["".concat(Wn.axisType,"Id")],En=jn&&jn[ws];return me(me({},Ur),{},(rs={},ui(rs,Wn.axisType,En),ui(rs,"".concat(Wn.axisType,"Ticks"),tl(En)),rs))},{}),ee=ve[B],ce=ve["".concat(B,"Ticks")],we=x&&x[ye]&&x[ye].hasStack&&eTe(j,x[ye].stackGroups),ne=Ol(j.type).indexOf("Bar")>=0,Re=vx(ee,ce),$e=[];if(ne){var qe,Ue,it=Xe(le)?O:le,St=(qe=(Ue=vx(ee,ce,!0))!==null&&Ue!==void 0?Ue:it)!==null&&qe!==void 0?qe:0;$e=UCe({barGap:A,barCategoryGap:R,bandSize:St!==Re?St:Re,sizeList:L[Ce],maxBarSize:it}),St!==Re&&($e=$e.map(function(Ur){return me(me({},Ur),{},{position:me(me({},Ur.position),{},{offset:Ur.position.offset-St/2})})}))}var cr=j&&j.type&&j.type.getComposedData;if(cr){var Bt;V.push({props:me(me({},cr(me(me({},ve),{},{displayedData:Z,props:y,dataKey:fe,item:j,bandSize:Re,barPosition:$e,offset:w,stackedData:we,layout:N,dataStartIndex:k,dataEndIndex:I}))),{},(Bt={key:j.key||"item-".concat(Q)},ui(Bt,z,ve[z]),ui(Bt,B,ve[B]),ui(Bt,"animationId",S),Bt)),childIndex:gSe(j,y.children),item:j})}}),V},m=function(y,v){var b=y.props,x=y.dataStartIndex,w=y.dataEndIndex,S=y.updateId;if(!mL({props:b}))return null;var k=b.children,I=b.layout,T=b.stackOffset,N=b.data,A=b.reverseStackOrder,R=n6(I),O=R.numericAxisName,M=R.cateAxisName,z=Xo(k,i),B=QCe(N,z,"".concat(O,"Id"),"".concat(M,"Id"),T,A),K=c.reduce(function(Z,oe){var fe="".concat(oe.axisType,"Map");return me(me({},Z),{},ui({},fe,p_e(b,me(me({},oe),{},{graphicalItems:z,stackGroups:oe.axisType===O&&B,dataStartIndex:x,dataEndIndex:w}))))},{}),L=y_e(me(me({},K),{},{props:b,graphicalItems:z}),v==null?void 0:v.legendBBox);Object.keys(K).forEach(function(Z){K[Z]=f(b,K[Z],L,Z.replace("Map",""),s)});var V=K["".concat(M,"Map")],j=m_e(V),Q=p(b,me(me({},K),{},{dataStartIndex:x,dataEndIndex:w,updateId:S,graphicalItems:z,stackGroups:B,offset:L}));return me(me({formattedGraphicalItems:Q,graphicalItems:z,offset:L,stackGroups:B},j),K)};return r=n=function(g){t_e(v,g);var y=n_e(v);function v(b){var x;return ZEe(this,v),x=y.call(this,b),x.uniqueChartId=void 0,x.clipPathId=void 0,x.legendInstance=void 0,x.deferId=void 0,x.container=void 0,x.clearDeferId=function(){!Xe(x.deferId)&&Z4&&Z4(x.deferId),x.deferId=null},x.handleLegendBBoxUpdate=function(w){if(w){var S=x.state,k=S.dataStartIndex,I=S.dataEndIndex,T=S.updateId;x.setState(me({legendBBox:w},m({props:x.props,dataStartIndex:k,dataEndIndex:I,updateId:T},me(me({},x.state),{},{legendBBox:w}))))}},x.handleReceiveSyncEvent=function(w,S,k){var I=x.props.syncId;I===w&&S!==x.uniqueChartId&&(x.clearDeferId(),x.deferId=J4&&J4(x.applySyncEvent.bind(k$(x),k)))},x.handleBrushChange=function(w){var S=w.startIndex,k=w.endIndex;if(S!==x.state.dataStartIndex||k!==x.state.dataEndIndex){var I=x.state.updateId;x.setState(function(){return me({dataStartIndex:S,dataEndIndex:k},m({props:x.props,dataStartIndex:S,dataEndIndex:k,updateId:I},x.state))}),x.triggerSyncEvent({dataStartIndex:S,dataEndIndex:k})}},x.handleMouseEnter=function(w){var S=x.props.onMouseEnter,k=x.getMouseInfo(w);if(k){var I=me(me({},k),{},{isTooltipActive:!0});x.setState(I),x.triggerSyncEvent(I),Ze(S)&&S(I,w)}},x.triggeredAfterMouseMove=function(w){var S=x.props.onMouseMove,k=x.getMouseInfo(w),I=k?me(me({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(I),x.triggerSyncEvent(I),Ze(S)&&S(I,w)},x.handleItemMouseEnter=function(w){x.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})},x.handleItemMouseLeave=function(){x.setState(function(){return{isTooltipActive:!1}})},x.handleMouseMove=function(w){w&&Ze(w.persist)&&w.persist(),x.triggeredAfterMouseMove(w)},x.handleMouseLeave=function(w){var S=x.props.onMouseLeave,k={isTooltipActive:!1};x.setState(k),x.triggerSyncEvent(k),Ze(S)&&S(k,w),x.cancelThrottledTriggerAfterMouseMove()},x.handleOuterEvent=function(w){var S=mSe(w),k=yi(x.props,"".concat(S));if(S&&Ze(k)){var I;/.*touch.*/i.test(S)?I=x.getMouseInfo(w.changedTouches[0]):I=x.getMouseInfo(w);var T=k;T(I,w)}},x.handleClick=function(w){var S=x.props.onClick,k=x.getMouseInfo(w);if(k){var I=me(me({},k),{},{isTooltipActive:!0});x.setState(I),x.triggerSyncEvent(I),Ze(S)&&S(I,w)}},x.handleMouseDown=function(w){var S=x.props.onMouseDown;if(Ze(S)){var k=x.getMouseInfo(w);S(k,w)}},x.handleMouseUp=function(w){var S=x.props.onMouseUp;if(Ze(S)){var k=x.getMouseInfo(w);S(k,w)}},x.handleTouchMove=function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.handleMouseMove(w.changedTouches[0])},x.handleTouchStart=function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.handleMouseDown(w.changedTouches[0])},x.handleTouchEnd=function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.handleMouseUp(w.changedTouches[0])},x.verticalCoordinatesGenerator=function(w){var S=w.xAxis,k=w.width,I=w.height,T=w.offset;return s4(zu.getTicks(me(me(me({},zu.defaultProps),S),{},{ticks:tl(S,!0),viewBox:{x:0,y:0,width:k,height:I}})),T.left,T.left+T.width)},x.horizontalCoordinatesGenerator=function(w){var S=w.yAxis,k=w.width,I=w.height,T=w.offset;return s4(zu.getTicks(me(me(me({},zu.defaultProps),S),{},{ticks:tl(S,!0),viewBox:{x:0,y:0,width:k,height:I}})),T.top,T.top+T.height)},x.axesTicksGenerator=function(w){return tl(w,!0)},x.renderCursor=function(w){var S=x.state,k=S.isTooltipActive,I=S.activeCoordinate,T=S.activePayload,N=S.offset,A=S.activeTooltipIndex,R=x.getTooltipEventType();if(!w||!w.props.cursor||!k||!I||s!=="ScatterChart"&&R!=="axis")return null;var O=x.props.layout,M,z=Sx;if(s==="ScatterChart")M=I,z=g7;else if(s==="BarChart")M=x.getCursorRectangle(),z=$A;else if(O==="radial"){var B=x.getCursorPoints(),K=B.cx,L=B.cy,V=B.radius,j=B.startAngle,Q=B.endAngle;M={cx:K,cy:L,startAngle:j,endAngle:Q,innerRadius:V,outerRadius:V},z=m7}else M={points:x.getCursorPoints()},z=Sx;var Z=w.key||"_recharts-cursor",oe=me(me(me(me({stroke:"#ccc",pointerEvents:"none"},N),M),Gt(w.props.cursor)),{},{payload:T,payloadIndex:A,key:Z,className:"recharts-tooltip-cursor"});return ae.exports.isValidElement(w.props.cursor)?ae.exports.cloneElement(w.props.cursor,oe):ae.exports.createElement(z,oe)},x.renderPolarAxis=function(w,S,k){var I=yi(w,"type.axisType"),T=yi(x.state,"".concat(I,"Map")),N=T[w.props["".concat(I,"Id")]];return ae.exports.cloneElement(w,me(me({},N),{},{className:I,key:w.key||"".concat(S,"-").concat(k),ticks:tl(N,!0)}))},x.renderXAxis=function(w,S,k){var I=x.state.xAxisMap,T=I[w.props.xAxisId];return x.renderAxis(T,w,S,k)},x.renderYAxis=function(w,S,k){var I=x.state.yAxisMap,T=I[w.props.yAxisId];return x.renderAxis(T,w,S,k)},x.renderGrid=function(w){var S=x.state,k=S.xAxisMap,I=S.yAxisMap,T=S.offset,N=x.props,A=N.width,R=N.height,O=el(k),M=FEe(I,function(K){return x7(K.domain,u_e)}),z=M||el(I),B=w.props||{};return ae.exports.cloneElement(w,{key:w.key||"grid",x:Ee(B.x)?B.x:T.left,y:Ee(B.y)?B.y:T.top,width:Ee(B.width)?B.width:T.width,height:Ee(B.height)?B.height:T.height,xAxis:O,yAxis:z,offset:T,chartWidth:A,chartHeight:R,verticalCoordinatesGenerator:B.verticalCoordinatesGenerator||x.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:B.horizontalCoordinatesGenerator||x.horizontalCoordinatesGenerator})},x.renderPolarGrid=function(w){var S=w.props,k=S.radialLines,I=S.polarAngles,T=S.polarRadius,N=x.state,A=N.radiusAxisMap,R=N.angleAxisMap,O=el(A),M=el(R),z=M.cx,B=M.cy,K=M.innerRadius,L=M.outerRadius;return ae.exports.cloneElement(w,{polarAngles:Ht(I)?I:tl(M,!0).map(function(V){return V.coordinate}),polarRadius:Ht(T)?T:tl(O,!0).map(function(V){return V.coordinate}),cx:z,cy:B,innerRadius:K,outerRadius:L,key:w.key||"polar-grid",radialLines:k})},x.renderLegend=function(){var w=x.state.formattedGraphicalItems,S=x.props,k=S.children,I=S.width,T=S.height,N=x.props.margin||{},A=I-(N.left||0)-(N.right||0),R=a7({children:k,formattedGraphicalItems:w,legendWidth:A,legendContent:h});if(!R)return null;var O=R.item,M=X4(R,["item"]);return ae.exports.cloneElement(O,me(me({},M),{},{chartWidth:I,chartHeight:T,margin:N,ref:function(B){x.legendInstance=B},onBBoxUpdate:x.handleLegendBBoxUpdate}))},x.renderTooltip=function(){var w=x.props.children,S=$a(w,Qu.displayName);if(!S)return null;var k=x.state,I=k.isTooltipActive,T=k.activeCoordinate,N=k.activePayload,A=k.activeLabel,R=k.offset;return ae.exports.cloneElement(S,{viewBox:me(me({},R),{},{x:R.left,y:R.top}),active:I,label:A,payload:I?N:[],coordinate:T})},x.renderBrush=function(w){var S=x.props,k=S.margin,I=S.data,T=x.state,N=T.offset,A=T.dataStartIndex,R=T.dataEndIndex,O=T.updateId;return ae.exports.cloneElement(w,{key:w.key||"_recharts-brush",onChange:B0(x.handleBrushChange,null,w.props.onChange),data:I,x:Ee(w.props.x)?w.props.x:N.left,y:Ee(w.props.y)?w.props.y:N.top+N.height+N.brushBottom-(k.bottom||0),width:Ee(w.props.width)?w.props.width:N.width,startIndex:A,endIndex:R,updateId:"brush-".concat(O)})},x.renderReferenceElement=function(w,S,k){if(!w)return null;var I=k$(x),T=I.clipPathId,N=x.state,A=N.xAxisMap,R=N.yAxisMap,O=N.offset,M=w.props,z=M.xAxisId,B=M.yAxisId;return ae.exports.cloneElement(w,{key:w.key||"".concat(S,"-").concat(k),xAxis:A[z],yAxis:R[B],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:T})},x.renderActivePoints=function(w){var S=w.item,k=w.activePoint,I=w.basePoint,T=w.childIndex,N=w.isRange,A=[],R=S.props.key,O=S.item.props,M=O.activeDot,z=O.dataKey,B=me(me({index:T,dataKey:z,cx:k.x,cy:k.y,r:4,fill:TA(S.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value,key:"".concat(R,"-activePoint-").concat(T)},Gt(M)),U1(M));return A.push(v.renderActiveDot(M,B)),I?A.push(v.renderActiveDot(M,me(me({},B),{},{cx:I.x,cy:I.y,key:"".concat(R,"-basePoint-").concat(T)}))):N&&A.push(null),A},x.renderGraphicChild=function(w,S,k){var I=x.filterFormatItem(w,S,k);if(!I)return null;var T=x.getTooltipEventType(),N=x.state,A=N.isTooltipActive,R=N.tooltipAxis,O=N.activeTooltipIndex,M=N.activeLabel,z=x.props.children,B=$a(z,Qu.displayName),K=I.props,L=K.points,V=K.isRange,j=K.baseLine,Q=I.item.props,Z=Q.activeDot,oe=Q.hide,fe=!oe&&A&&B&&Z&&O>=0,le={};T!=="axis"&&B&&B.props.trigger==="click"?le={onClick:B0(x.handleItemMouseEnter,null,w.props.onCLick)}:T!=="axis"&&(le={onMouseLeave:B0(x.handleItemMouseLeave,null,w.props.onMouseLeave),onMouseEnter:B0(x.handleItemMouseEnter,null,w.props.onMouseEnter)});var ye=ae.exports.cloneElement(w,me(me({},I.props),le));function Ce(we){return typeof R.dataKey=="function"?R.dataKey(we.payload):null}if(fe){var ve,ee;if(R.dataKey&&!R.allowDuplicatedCategory){var ce=typeof R.dataKey=="function"?Ce:"payload.".concat(R.dataKey.toString());ve=J1(L,ce,M),ee=V&&j&&J1(j,ce,M)}else ve=L[O],ee=V&&j&&j[O];if(!Xe(ve))return[ye].concat(Lf(x.renderActivePoints({item:I,activePoint:ve,basePoint:ee,childIndex:O,isRange:V})))}return V?[ye,null,null]:[ye,null]},x.renderCustomized=function(w,S,k){return ae.exports.cloneElement(w,me(me({key:"recharts-customized-".concat(k)},x.props),x.state))},x.uniqueChartId=Xe(b.id)?pw("recharts"):b.id,x.clipPathId="".concat(x.uniqueChartId,"-clip"),b.throttleDelay&&(x.triggeredAfterMouseMove=UEe(x.triggeredAfterMouseMove,b.throttleDelay)),x.state={},x}return e_e(v,[{key:"componentDidMount",value:function(){Xe(this.props.syncId)||this.addListener()}},{key:"componentDidUpdate",value:function(x){Xe(x.syncId)&&!Xe(this.props.syncId)&&this.addListener(),!Xe(x.syncId)&&Xe(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),Xe(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){typeof this.triggeredAfterMouseMove.cancel=="function"&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=$a(this.props.children,Qu.displayName);if(x&&qEe(x.props.shared)){var w=x.props.shared?"axis":"item";return u.indexOf(w)>=0?w:a}return a}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var w=W2e(this.container),S=j2e(x,w),k=this.inRange(S.chartX,S.chartY);if(!k)return null;var I=this.state,T=I.xAxisMap,N=I.yAxisMap,A=this.getTooltipEventType();if(A!=="axis"&&T&&N){var R=el(T).scale,O=el(N).scale,M=R&&R.invert?R.invert(S.chartX):null,z=O&&O.invert?O.invert(S.chartY):null;return me(me({},S),{},{xValue:M,yValue:z})}var B=e6(this.state,this.props.data,this.props.layout,k);return B?me(me({},S),B):null}},{key:"getCursorRectangle",value:function(){var x=this.props.layout,w=this.state,S=w.activeCoordinate,k=w.offset,I=w.tooltipAxisBandSize,T=I/2;return{stroke:"none",fill:"#ccc",x:x==="horizontal"?S.x-T:k.left+.5,y:x==="horizontal"?k.top+.5:S.y-T,width:x==="horizontal"?I:k.width-1,height:x==="horizontal"?k.height-1:I}}},{key:"getCursorPoints",value:function(){var x=this.props.layout,w=this.state,S=w.activeCoordinate,k=w.offset,I,T,N,A;if(x==="horizontal")I=S.x,N=I,T=k.top,A=k.top+k.height;else if(x==="vertical")T=S.y,A=T,I=k.left,N=k.left+k.width;else if(!Xe(S.cx)||!Xe(S.cy))if(x==="centric"){var R=S.cx,O=S.cy,M=S.innerRadius,z=S.outerRadius,B=S.angle,K=Kr(R,O,M,B),L=Kr(R,O,z,B);I=K.x,T=K.y,N=L.x,A=L.y}else{var V=S.cx,j=S.cy,Q=S.radius,Z=S.startAngle,oe=S.endAngle,fe=Kr(V,j,Q,Z),le=Kr(V,j,Q,oe);return{points:[fe,le],cx:V,cy:j,radius:Q,startAngle:Z,endAngle:oe}}return[{x:I,y:T},{x:N,y:A}]}},{key:"inRange",value:function(x,w){var S=this.props.layout;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,I=x>=k.left&&x<=k.left+k.width&&w>=k.top&&w<=k.top+k.height;return I?{x,y:w}:null}var T=this.state,N=T.angleAxisMap,A=T.radiusAxisMap;if(N&&A){var R=el(N);return f4({x,y:w},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,w=this.getTooltipEventType(),S=$a(x,Qu.displayName),k={};S&&w==="axis"&&(S.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var I=U1(this.props,this.handleOuterEvent);return me(me({},I),k)}},{key:"addListener",value:function(){ai.on(cI,this.handleReceiveSyncEvent),ai.setMaxListeners&&ai._maxListeners&&ai.setMaxListeners(ai._maxListeners+1)}},{key:"removeListener",value:function(){ai.removeListener(cI,this.handleReceiveSyncEvent),ai.setMaxListeners&&ai._maxListeners&&ai.setMaxListeners(ai._maxListeners-1)}},{key:"triggerSyncEvent",value:function(x){var w=this.props.syncId;Xe(w)||ai.emit(cI,w,this.uniqueChartId,x)}},{key:"applySyncEvent",value:function(x){var w=this.props,S=w.layout,k=w.syncMethod,I=this.state.updateId,T=x.dataStartIndex,N=x.dataEndIndex;if(!Xe(x.dataStartIndex)||!Xe(x.dataEndIndex))this.setState(me({dataStartIndex:T,dataEndIndex:N},m({props:this.props,dataStartIndex:T,dataEndIndex:N,updateId:I},this.state)));else if(Xe(x.activeTooltipIndex))this.setState(x);else{var A=x.chartX,R=x.chartY,O=x.activeTooltipIndex,M=this.state,z=M.offset,B=M.tooltipTicks;if(!z)return;if(typeof k=="function")O=k(B,x);else if(k==="value"){O=-1;for(var K=0;K<B.length;K++)if(B[K].value===x.activeLabel){O=K;break}}var L=me(me({},z),{},{x:z.left,y:z.top}),V=Math.min(A,L.x+L.width),j=Math.min(R,L.y+L.height),Q=B[O]&&B[O].value,Z=C7(this.state,this.props.data,O),oe=B[O]?{x:S==="horizontal"?B[O].coordinate:V,y:S==="horizontal"?j:B[O].coordinate}:I7;this.setState(me(me({},x),{},{activeLabel:Q,activeCoordinate:oe,activePayload:Z,activeTooltipIndex:O}))}}},{key:"filterFormatItem",value:function(x,w,S){for(var k=this.state.formattedGraphicalItems,I=0,T=k.length;I<T;I++){var N=k[I];if(N.item===x||N.props.key===x.key||w===Ol(N.item.type)&&S===N.childIndex)return N}return null}},{key:"renderAxis",value:function(x,w,S,k){var I=this.props,T=I.width,N=I.height;return ae.exports.createElement(zu,{...x,className:"recharts-".concat(x.axisType," ").concat(x.axisType),key:w.key||"".concat(S,"-").concat(k),viewBox:{x:0,y:0,width:T,height:N},ticksGenerator:this.axesTicksGenerator})}},{key:"renderClipPath",value:function(){var x=this.clipPathId,w=this.state.offset,S=w.left,k=w.top,I=w.height,T=w.width;return D("defs",{children:D("clipPath",{id:x,children:D("rect",{x:S,y:k,height:I,width:T})})})}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(w,S){var k=K4(S,2),I=k[0],T=k[1];return me(me({},w),{},ui({},I,T.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(w,S){var k=K4(S,2),I=k[0],T=k[1];return me(me({},w),{},ui({},I,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var w,S;return(w=this.state.xAxisMap)===null||w===void 0||(S=w[x])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(x){var w,S;return(w=this.state.yAxisMap)===null||w===void 0||(S=w[x])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(x){var w=this.state.formattedGraphicalItems;if(w&&w.length)for(var S=0,k=w.length;S<k;S++){var I=w[S],T=I.props,N=I.item,A=Ol(N.type);if(A==="Bar"){var R=(T.data||[]).find(function(M){return a$e(x,M)});if(R)return{graphicalItem:I,payload:R}}else if(A==="RadialBar"){var O=(T.data||[]).find(function(M){return f4(x,M)});if(O)return{graphicalItem:I,payload:O}}}return null}},{key:"render",value:function(){var x=this;if(!mL(this))return null;var w=this.props,S=w.children,k=w.className,I=w.width,T=w.height,N=w.style,A=w.compact,R=X4(w,["children","className","width","height","style","compact"]),O=Gt(R),M={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(A)return ue(uT,{...O,width:I,height:T,children:[this.renderClipPath(),yL(S,M)]});var z=this.parseEventsOfWrapper();return ue("div",{className:bn("recharts-wrapper",k),style:me({position:"relative",cursor:"default",width:I,height:T},N),...z,ref:function(K){x.container=K},children:[ue(uT,{...O,width:I,height:T,children:[this.renderClipPath(),yL(S,M)]}),this.renderLegend(),this.renderTooltip()]})}}]),v}(ae.exports.Component),n.displayName=s,n.defaultProps=me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d),n.getDerivedStateFromProps=function(g,y){var v=g.data,b=g.children,x=g.width,w=g.height,S=g.layout,k=g.stackOffset,I=g.margin;if(Xe(y.updateId)){var T=t6(g);return me(me(me({},T),{},{updateId:0},m(me(me({props:g},T),{},{updateId:0}),y)),{},{prevData:v,prevWidth:x,prevHeight:w,prevLayout:S,prevStackOffset:k,prevMargin:I,prevChildren:b})}if(v!==y.prevData||x!==y.prevWidth||w!==y.prevHeight||S!==y.prevLayout||k!==y.prevStackOffset||!Em(I,y.prevMargin)){var N=t6(g),A={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},R=me(me({},e6(y,v,S)),{},{updateId:y.updateId+1}),O=me(me(me({},N),A),R);return me(me(me({},O),m(me({props:g},O),y)),{},{prevData:v,prevWidth:x,prevHeight:w,prevLayout:S,prevStackOffset:k,prevMargin:I,prevChildren:b})}if(!ZW(b,y.prevChildren)){var M=!Xe(v),z=M?y.updateId:y.updateId+1;return me(me({updateId:z},m(me(me({props:g},y),{},{updateId:z}),y)),{},{prevChildren:b})}return null},n.renderActiveDot=function(g,y){var v;return ae.exports.isValidElement(g)?v=ae.exports.cloneElement(g,y):Ze(g)?v=g(y):v=D(NA,{...y}),D(Zs,{className:"recharts-active-dot",children:v},y.key)},r},x_e=v_e({chartName:"LineChart",GraphicalChild:pl,axisComponents:[{axisType:"xAxis",AxisComp:Lw},{axisType:"yAxis",AxisComp:Bw}],formatAxisMap:bNe});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gh=function(){return Gh=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gh.apply(this,arguments)},T7=function(t){return{loading:t==null,value:t}},b_e=function(){return function(t,e){switch(e.type){case"error":return Gh(Gh({},t),{error:e.error,loading:!1,value:void 0});case"reset":return T7(e.defaultValue);case"value":return Gh(Gh({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},w_e=function(t){var e=t?t():void 0,n=ae.exports.useReducer(b_e(),T7(e)),r=n[0],s=n[1],i=function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},o=function(l){s({type:"error",error:l})},a=function(l){s({type:"value",value:l})};return ae.exports.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},S_e=function(t,e,n){var r=ae.exports.useRef(t);return ae.exports.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},k_e=function(t,e){var n=!t&&!e,r=!!t&&!!e&&pue(t,e);return n||r},I_e=function(t,e){return S_e(t,k_e,e)},C_e=function(t,e){var n=w_e(),r=n.error,s=n.loading,i=n.reset,o=n.setError,a=n.setValue,l=n.value,u=I_e(t,i);ae.exports.useEffect(function(){if(!u.current){a(void 0);return}var h=e!=null&&e.snapshotListenOptions?MM(u.current,e.snapshotListenOptions,a,o):MM(u.current,a,o);return function(){h()}},[u.current]);var c=[l,s,r];return ae.exports.useMemo(function(){return c},c)};function T_e(){const[t]=Ob($c),[e,n,r]=C_e(fue(M9,`workout/${t.email}/poses`),{snapshotListenOptions:{includeMetadataChanges:!0}});let s;return e&&(s=e.docs.map(i=>({id:i.id,...i.data()})),console.log(s[s.length-1].id)),ue("div",{className:"relative",children:[D("div",{className:"",children:D(Ef,{})}),D("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:ue("div",{class:"lg:w-8/12 lg:mx-auto mb-8 pt-20",children:[ue("section",{class:"flex flex-wrap items-center p-4 md:py-8",children:[D("div",{class:"md:w-3/12 md:ml-16",children:D("img",{class:"w-20 h-20 md:w-40 md:h-40 object-cover rounded-full\r border-2 border-pink-600 p-1",src:"https://i.pinimg.com/736x/6e/b8/d9/6eb8d959e858c648a00fc269e3bbf579.jpg",alt:"profile"})}),ue("div",{class:"w-8/12 md:w-7/12 ml-4",children:[ue("p",{className:"text-2xl text-gray-600 mb-8","data-aos":"zoom-y-out","data-aos-delay":"150",children:["Email:"," ",D("a",{className:"underline-offset-8 underline text-blue-600 text-2xl",href:`mailto:${t.email}`,children:t.email})]}),ue("ul",{class:"hidden md:flex space-x-8 mb-4",children:[ue("li",{children:[ue("span",{class:"font-semibold",children:[e&&s.length," "]}),"Workouts"]}),ue("li",{children:[ue("span",{class:"font-semibold",children:[e&&((s[s.length-1].id-s[0].id)/(1e3*60*60*24)+1).toFixed(0)," "]}),"day(s) of Yoga"]})]}),ue("div",{class:"hidden md:block",children:[D("h1",{class:"font-semibold",children:e&&(s.length<100?"Beginner":"Novice")}),ue("span",{children:["5 more days until ",D("strong",{children:"Novice"})]})]})]})]}),e&&ue(x_e,{width:800,height:300,data:s,margin:{top:0,right:30,left:-33,bottom:0},children:[D(OA,{strokeDasharray:"3 3"}),D(Lw,{dataKey:i=>(console.log(new Date(Number(i.id))),new Date(Number(i.id))),hide:!0}),D(Bw,{}),D(Qu,{}),D(Of,{}),D(pl,{type:"monotone",name:"Vrikshasana",dataKey:"tree",stroke:"#82ca9d"}),D(pl,{type:"monotone",name:"Utkatasana",dataKey:"chair",stroke:"#8884d8"}),D(pl,{type:"monotone",name:"Bhujangasana",dataKey:"cobra",stroke:"#b107e0"}),D(pl,{type:"monotone",name:"Adho Mukha Svanasana",dataKey:"dog",stroke:"#ff7300"})]})]})})]})}var $7={exports:{}};(function(t,e){(function(r,s){t.exports=s(ae.exports)})(Dt,function(n){return function(r){var s={};function i(o){if(s[o])return s[o].exports;var a=s[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=s,i.d=function(o,a,l){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:l})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(a&1&&(o=i(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var u in o)i.d(l,u,function(c){return o[c]}.bind(null,u));return l},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,s,i){i.r(s);var o=i("react"),a=function(){var f=function(d,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)g.hasOwnProperty(y)&&(m[y]=g[y])},f(d,p)};return function(d,p){f(d,p);function m(){this.constructor=d}d.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}(),l=function(){return l=Object.assign||function(f){for(var d,p=1,m=arguments.length;p<m;p++){d=arguments[p];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(f[g]=d[g])}return f},l.apply(this,arguments)},u=function(f,d){var p={};for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&d.indexOf(m)<0&&(p[m]=f[m]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,m=Object.getOwnPropertySymbols(f);g<m.length;g++)d.indexOf(m[g])<0&&Object.prototype.propertyIsEnumerable.call(f,m[g])&&(p[m[g]]=f[m[g]]);return p};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(d){var p=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return p?new Promise(function(m,g){p.call(navigator,d,m,g)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function c(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var h=function(f){a(d,f);function d(p){var m=f.call(this,p)||this;return m.canvas=null,m.ctx=null,m.requestUserMediaId=0,m.unmounted=!1,m.state={hasUserMedia:!1},m}return d.prototype.componentDidMount=function(){var p=this,m=p.state,g=p.props;if(this.unmounted=!1,!c()){g.onUserMediaError("getUserMedia not supported");return}m.hasUserMedia||this.requestUserMedia(),g.children&&typeof g.children!="function"&&console.warn("children must be a function")},d.prototype.componentDidUpdate=function(p){var m=this.props;if(!c()){m.onUserMediaError("getUserMedia not supported");return}var g=JSON.stringify(p.audioConstraints)!==JSON.stringify(m.audioConstraints),y=JSON.stringify(p.videoConstraints)!==JSON.stringify(m.videoConstraints),v=p.minScreenshotWidth!==m.minScreenshotWidth,b=p.minScreenshotHeight!==m.minScreenshotHeight;(y||v||b)&&(this.canvas=null,this.ctx=null),(g||y)&&(this.stopAndCleanup(),this.requestUserMedia())},d.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},d.stopMediaStream=function(p){p&&(p.getVideoTracks&&p.getAudioTracks?(p.getVideoTracks().map(function(m){p.removeTrack(m),m.stop()}),p.getAudioTracks().map(function(m){p.removeTrack(m),m.stop()})):p.stop())},d.prototype.stopAndCleanup=function(){var p=this.state;p.hasUserMedia&&(d.stopMediaStream(this.stream),p.src&&window.URL.revokeObjectURL(p.src))},d.prototype.getScreenshot=function(p){var m=this,g=m.state,y=m.props;if(!g.hasUserMedia)return null;var v=this.getCanvas(p);return v&&v.toDataURL(y.screenshotFormat,y.screenshotQuality)},d.prototype.getCanvas=function(p){var m=this,g=m.state,y=m.props;if(!this.video||!g.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var v=this.video.videoWidth,b=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var x=v/b;v=y.minScreenshotWidth||this.video.clientWidth,b=v/x,y.minScreenshotHeight&&b<y.minScreenshotHeight&&(b=y.minScreenshotHeight,v=b*x)}this.canvas=document.createElement("canvas"),this.canvas.width=(p==null?void 0:p.width)||v,this.canvas.height=(p==null?void 0:p.height)||b,this.ctx=this.canvas.getContext("2d")}var w=this,S=w.ctx,k=w.canvas;return S&&k&&(y.mirrored&&(S.translate(k.width,0),S.scale(-1,1)),S.imageSmoothingEnabled=y.imageSmoothing,S.drawImage(this.video,0,0,(p==null?void 0:p.width)||k.width,(p==null?void 0:p.height)||k.height),y.mirrored&&(S.scale(-1,1),S.translate(-k.width,0))),k},d.prototype.requestUserMedia=function(){var p=this,m=this.props,g=function(b,x){var w={video:typeof x<"u"?x:!0};m.audio&&(w.audio=typeof b<"u"?b:!0),p.requestUserMediaId++;var S=p.requestUserMediaId;navigator.mediaDevices.getUserMedia(w).then(function(k){p.unmounted||S!==p.requestUserMediaId?d.stopMediaStream(k):p.handleUserMedia(null,k)}).catch(function(k){p.handleUserMedia(k)})};if("mediaDevices"in navigator)g(m.audioConstraints,m.videoConstraints);else{var y=function(b){return{optional:[{sourceId:b}]}},v=function(b){var x=b.deviceId;return typeof x=="string"?x:Array.isArray(x)&&x.length>0?x[0]:typeof x=="object"&&x.ideal?x.ideal:null};MediaStreamTrack.getSources(function(b){var x=null,w=null;b.forEach(function(I){I.kind==="audio"?x=I.id:I.kind==="video"&&(w=I.id)});var S=v(m.audioConstraints);S&&(x=S);var k=v(m.videoConstraints);k&&(w=k),g(y(x),y(w))})}},d.prototype.handleUserMedia=function(p,m){var g=this.props;if(p||!m){this.setState({hasUserMedia:!1}),g.onUserMediaError(p);return}this.stream=m;try{this.video&&(this.video.srcObject=m),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(m)})}g.onUserMedia(m)},d.prototype.render=function(){var p=this,m=this,g=m.state,y=m.props,v=y.audio;y.forceScreenshotSourceSize,y.onUserMedia,y.onUserMediaError,y.screenshotFormat,y.screenshotQuality,y.minScreenshotWidth,y.minScreenshotHeight,y.audioConstraints,y.videoConstraints,y.imageSmoothing;var b=y.mirrored,x=y.style,w=x===void 0?{}:x,S=y.children,k=u(y,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),I=b?l(l({},w),{transform:(w.transform||"")+" scaleX(-1)"}):w,T={getScreenshot:this.getScreenshot.bind(this)};return o.createElement(o.Fragment,null,o.createElement("video",l({autoPlay:!0,src:g.src,muted:!v,playsInline:!0,ref:function(N){p.video=N},style:I},k)),S&&S(T))},d.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},d}(o.Component);s.default=h},react:function(r,s){r.exports=n}}).default})})($7);const $_e=EN($7.exports);var N_e={};(function(){var t;function e(C){var E=0;return function(){return E<C.length?{done:!1,value:C[E++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,E,_){return C==Array.prototype||C==Object.prototype||(C[E]=_.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dt=="object"&&Dt];for(var E=0;E<C.length;++E){var _=C[E];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=r(this);function i(C,E){if(E)e:{var _=s;C=C.split(".");for(var U=0;U<C.length-1;U++){var J=C[U];if(!(J in _))break e;_=_[J]}C=C[C.length-1],U=_[C],E=E(U),E!=U&&E!=null&&n(_,C,{configurable:!0,writable:!0,value:E})}}i("Symbol",function(C){function E(pe){if(this instanceof E)throw new TypeError("Symbol is not a constructor");return new _(U+(pe||"")+"_"+J++,pe)}function _(pe,te){this.g=pe,n(this,"description",{configurable:!0,writable:!0,value:te})}if(C)return C;_.prototype.toString=function(){return this.g};var U="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",J=0;return E}),i("Symbol.iterator",function(C){if(C)return C;C=Symbol("Symbol.iterator");for(var E="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),_=0;_<E.length;_++){var U=s[E[_]];typeof U=="function"&&typeof U.prototype[C]!="function"&&n(U.prototype,C,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return C});function o(C){return C={next:C},C[Symbol.iterator]=function(){return this},C}function a(C){var E=typeof Symbol<"u"&&Symbol.iterator&&C[Symbol.iterator];return E?E.call(C):{next:e(C)}}function l(C){if(!(C instanceof Array)){C=a(C);for(var E,_=[];!(E=C.next()).done;)_.push(E.value);C=_}return C}var u=typeof Object.create=="function"?Object.create:function(C){function E(){}return E.prototype=C,new E},c;if(typeof Object.setPrototypeOf=="function")c=Object.setPrototypeOf;else{var h;e:{var f={a:!0},d={};try{d.__proto__=f,h=d.a;break e}catch{}h=!1}c=h?function(C,E){if(C.__proto__=E,C.__proto__!==E)throw new TypeError(C+" is not extensible");return C}:null}var p=c;function m(C,E){if(C.prototype=u(E.prototype),C.prototype.constructor=C,p)p(C,E);else for(var _ in E)if(_!="prototype")if(Object.defineProperties){var U=Object.getOwnPropertyDescriptor(E,_);U&&Object.defineProperty(C,_,U)}else C[_]=E[_];C.ea=E.prototype}function g(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function y(C){if(C.l)throw new TypeError("Generator is already running");C.l=!0}g.prototype.o=function(C){this.h=C};function v(C,E){C.j={U:E,V:!0},C.g=C.m||C.s}g.prototype.return=function(C){this.j={return:C},this.g=this.s};function b(C,E,_){return C.g=_,{value:E}}function x(C){this.g=new g,this.h=C}function w(C,E){y(C.g);var _=C.g.i;return _?S(C,"return"in _?_.return:function(U){return{value:U,done:!0}},E,C.g.return):(C.g.return(E),k(C))}function S(C,E,_,U){try{var J=E.call(C.g.i,_);if(!(J instanceof Object))throw new TypeError("Iterator result "+J+" is not an object");if(!J.done)return C.g.l=!1,J;var pe=J.value}catch(te){return C.g.i=null,v(C.g,te),k(C)}return C.g.i=null,U.call(C.g,pe),k(C)}function k(C){for(;C.g.g;)try{var E=C.h(C.g);if(E)return C.g.l=!1,{value:E.value,done:!1}}catch(_){C.g.h=void 0,v(C.g,_)}if(C.g.l=!1,C.g.j){if(E=C.g.j,C.g.j=null,E.V)throw E.U;return{value:E.return,done:!0}}return{value:void 0,done:!0}}function I(C){this.next=function(E){return y(C.g),C.g.i?E=S(C,C.g.i.next,E,C.g.o):(C.g.o(E),E=k(C)),E},this.throw=function(E){return y(C.g),C.g.i?E=S(C,C.g.i.throw,E,C.g.o):(v(C.g,E),E=k(C)),E},this.return=function(E){return w(C,E)},this[Symbol.iterator]=function(){return this}}function T(C,E){return E=new I(new x(E)),p&&C.prototype&&p(E,C.prototype),E}function N(C,E){C instanceof String&&(C+="");var _=0,U=!1,J={next:function(){if(!U&&_<C.length){var pe=_++;return{value:E(pe,C[pe]),done:!1}}return U=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}var A=typeof Object.assign=="function"?Object.assign:function(C,E){for(var _=1;_<arguments.length;_++){var U=arguments[_];if(U)for(var J in U)Object.prototype.hasOwnProperty.call(U,J)&&(C[J]=U[J])}return C};i("Object.assign",function(C){return C||A}),i("Promise",function(C){function E(te){this.h=0,this.i=void 0,this.g=[],this.o=!1;var he=this.j();try{te(he.resolve,he.reject)}catch(xe){he.reject(xe)}}function _(){this.g=null}function U(te){return te instanceof E?te:new E(function(he){he(te)})}if(C)return C;_.prototype.h=function(te){if(this.g==null){this.g=[];var he=this;this.i(function(){he.l()})}this.g.push(te)};var J=s.setTimeout;_.prototype.i=function(te){J(te,0)},_.prototype.l=function(){for(;this.g&&this.g.length;){var te=this.g;this.g=[];for(var he=0;he<te.length;++he){var xe=te[he];te[he]=null;try{xe()}catch(Oe){this.j(Oe)}}}this.g=null},_.prototype.j=function(te){this.i(function(){throw te})},E.prototype.j=function(){function te(Oe){return function(et){xe||(xe=!0,Oe.call(he,et))}}var he=this,xe=!1;return{resolve:te(this.C),reject:te(this.l)}},E.prototype.C=function(te){if(te===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(te instanceof E)this.F(te);else{e:switch(typeof te){case"object":var he=te!=null;break e;case"function":he=!0;break e;default:he=!1}he?this.u(te):this.m(te)}},E.prototype.u=function(te){var he=void 0;try{he=te.then}catch(xe){this.l(xe);return}typeof he=="function"?this.G(he,te):this.m(te)},E.prototype.l=function(te){this.s(2,te)},E.prototype.m=function(te){this.s(1,te)},E.prototype.s=function(te,he){if(this.h!=0)throw Error("Cannot settle("+te+", "+he+"): Promise already settled in state"+this.h);this.h=te,this.i=he,this.h===2&&this.D(),this.A()},E.prototype.D=function(){var te=this;J(function(){if(te.B()){var he=s.console;typeof he<"u"&&he.error(te.i)}},1)},E.prototype.B=function(){if(this.o)return!1;var te=s.CustomEvent,he=s.Event,xe=s.dispatchEvent;return typeof xe>"u"?!0:(typeof te=="function"?te=new te("unhandledrejection",{cancelable:!0}):typeof he=="function"?te=new he("unhandledrejection",{cancelable:!0}):(te=s.document.createEvent("CustomEvent"),te.initCustomEvent("unhandledrejection",!1,!0,te)),te.promise=this,te.reason=this.i,xe(te))},E.prototype.A=function(){if(this.g!=null){for(var te=0;te<this.g.length;++te)pe.h(this.g[te]);this.g=null}};var pe=new _;return E.prototype.F=function(te){var he=this.j();te.J(he.resolve,he.reject)},E.prototype.G=function(te,he){var xe=this.j();try{te.call(he,xe.resolve,xe.reject)}catch(Oe){xe.reject(Oe)}},E.prototype.then=function(te,he){function xe(gt,ot){return typeof gt=="function"?function(Ve){try{Oe(gt(Ve))}catch(tt){et(tt)}}:ot}var Oe,et,Wt=new E(function(gt,ot){Oe=gt,et=ot});return this.J(xe(te,Oe),xe(he,et)),Wt},E.prototype.catch=function(te){return this.then(void 0,te)},E.prototype.J=function(te,he){function xe(){switch(Oe.h){case 1:te(Oe.i);break;case 2:he(Oe.i);break;default:throw Error("Unexpected state: "+Oe.h)}}var Oe=this;this.g==null?pe.h(xe):this.g.push(xe),this.o=!0},E.resolve=U,E.reject=function(te){return new E(function(he,xe){xe(te)})},E.race=function(te){return new E(function(he,xe){for(var Oe=a(te),et=Oe.next();!et.done;et=Oe.next())U(et.value).J(he,xe)})},E.all=function(te){var he=a(te),xe=he.next();return xe.done?U([]):new E(function(Oe,et){function Wt(Ve){return function(tt){gt[Ve]=tt,ot--,ot==0&&Oe(gt)}}var gt=[],ot=0;do gt.push(void 0),ot++,U(xe.value).J(Wt(gt.length-1),et),xe=he.next();while(!xe.done)})},E}),i("Object.is",function(C){return C||function(E,_){return E===_?E!==0||1/E===1/_:E!==E&&_!==_}}),i("Array.prototype.includes",function(C){return C||function(E,_){var U=this;U instanceof String&&(U=String(U));var J=U.length;for(_=_||0,0>_&&(_=Math.max(_+J,0));_<J;_++){var pe=U[_];if(pe===E||Object.is(pe,E))return!0}return!1}}),i("String.prototype.includes",function(C){return C||function(E,_){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(E instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(E,_||0)!==-1}}),i("Array.prototype.keys",function(C){return C||function(){return N(this,function(E){return E})}});var R=this||self;function O(C,E){C=C.split(".");var _=R;C[0]in _||typeof _.execScript>"u"||_.execScript("var "+C[0]);for(var U;C.length&&(U=C.shift());)C.length||E===void 0?_[U]&&_[U]!==Object.prototype[U]?_=_[U]:_=_[U]={}:_[U]=E}function M(C,E){return E=String.fromCharCode.apply(null,E),C==null?E:C+E}var z,B=typeof TextDecoder<"u",K,L=typeof TextEncoder<"u";function V(C){if(L)C=(K||(K=new TextEncoder)).encode(C);else{var E=void 0;E=E===void 0?!1:E;for(var _=0,U=new Uint8Array(3*C.length),J=0;J<C.length;J++){var pe=C.charCodeAt(J);if(128>pe)U[_++]=pe;else{if(2048>pe)U[_++]=pe>>6|192;else{if(55296<=pe&&57343>=pe){if(56319>=pe&&J<C.length){var te=C.charCodeAt(++J);if(56320<=te&&57343>=te){pe=1024*(pe-55296)+te-56320+65536,U[_++]=pe>>18|240,U[_++]=pe>>12&63|128,U[_++]=pe>>6&63|128,U[_++]=pe&63|128;continue}else J--}if(E)throw Error("Found an unpaired surrogate");pe=65533}U[_++]=pe>>12|224,U[_++]=pe>>6&63|128}U[_++]=pe&63|128}}C=U.subarray(0,_)}return C}var j={},Q=null;function Z(C,E){E===void 0&&(E=0),le(),E=j[E];for(var _=Array(Math.floor(C.length/3)),U=E[64]||"",J=0,pe=0;J<C.length-2;J+=3){var te=C[J],he=C[J+1],xe=C[J+2],Oe=E[te>>2];te=E[(te&3)<<4|he>>4],he=E[(he&15)<<2|xe>>6],xe=E[xe&63],_[pe++]=Oe+te+he+xe}switch(Oe=0,xe=U,C.length-J){case 2:Oe=C[J+1],xe=E[(Oe&15)<<2]||U;case 1:C=C[J],_[pe]=E[C>>2]+E[(C&3)<<4|Oe>>4]+xe+U}return _.join("")}function oe(C){var E=C.length,_=3*E/4;_%3?_=Math.floor(_):"=.".indexOf(C[E-1])!=-1&&(_="=.".indexOf(C[E-2])!=-1?_-2:_-1);var U=new Uint8Array(_),J=0;return fe(C,function(pe){U[J++]=pe}),U.subarray(0,J)}function fe(C,E){function _(xe){for(;U<C.length;){var Oe=C.charAt(U++),et=Q[Oe];if(et!=null)return et;if(!/^[\s\xa0]*$/.test(Oe))throw Error("Unknown base64 encoding at char: "+Oe)}return xe}le();for(var U=0;;){var J=_(-1),pe=_(0),te=_(64),he=_(64);if(he===64&&J===-1)break;E(J<<2|pe>>4),te!=64&&(E(pe<<4&240|te>>2),he!=64&&E(te<<6&192|he))}}function le(){if(!Q){Q={};for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),E=["+/=","+/","-_=","-_.","-_"],_=0;5>_;_++){var U=C.concat(E[_].split(""));j[_]=U;for(var J=0;J<U.length;J++){var pe=U[J];Q[pe]===void 0&&(Q[pe]=J)}}}}var ye=typeof Uint8Array.prototype.slice=="function",Ce;function ve(C,E,_){return E===_?Ce||(Ce=new Uint8Array(0)):ye?C.slice(E,_):new Uint8Array(C.subarray(E,_))}var ee=0,ce=0;function we(C,E){E=E===void 0?{}:E,E=E.v===void 0?!1:E.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=E,C&&ne(this,C)}function ne(C,E){E=E.constructor===Uint8Array?E:E.constructor===ArrayBuffer?new Uint8Array(E):E.constructor===Array?new Uint8Array(E):E.constructor===String?oe(E):E instanceof Uint8Array?new Uint8Array(E.buffer,E.byteOffset,E.byteLength):new Uint8Array(0),C.h=E,C.j=0,C.i=C.h.length,C.g=C.j}we.prototype.reset=function(){this.g=this.j};function Re(C){var E=C.h,_=E[C.g],U=_&127;return 128>_?(C.g+=1,U):(_=E[C.g+1],U|=(_&127)<<7,128>_?(C.g+=2,U):(_=E[C.g+2],U|=(_&127)<<14,128>_?(C.g+=3,U):(_=E[C.g+3],U|=(_&127)<<21,128>_?(C.g+=4,U):(_=E[C.g+4],U|=(_&15)<<28,128>_?(C.g+=5,U>>>0):(C.g+=5,128<=E[C.g++]&&128<=E[C.g++]&&128<=E[C.g++]&&128<=E[C.g++]&&C.g++,U)))))}function $e(C){var E=C.h[C.g],_=C.h[C.g+1],U=C.h[C.g+2],J=C.h[C.g+3];return C.g+=4,_=(E<<0|_<<8|U<<16|J<<24)>>>0,C=2*(_>>31)+1,E=_>>>23&255,_&=8388607,E==255?_?NaN:1/0*C:E==0?C*Math.pow(2,-149)*_:C*Math.pow(2,E-150)*(_+Math.pow(2,23))}var qe=[];function Ue(){this.g=new Uint8Array(64),this.h=0}Ue.prototype.push=function(C){if(!(this.h+1<this.g.length)){var E=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(E)}this.g[this.h++]=C},Ue.prototype.length=function(){return this.h},Ue.prototype.end=function(){var C=this.g,E=this.h;return this.h=0,ve(C,0,E)};function it(C,E){for(;127<E;)C.push(E&127|128),E>>>=7;C.push(E)}function St(C){var E={},_=E.N===void 0?!1:E.N;this.o={v:E.v===void 0?!1:E.v},this.N=_,E=this.o,qe.length?(_=qe.pop(),E&&(_.v=E.v),C&&ne(_,C),C=_):C=new we(C,E),this.g=C,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}St.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function cr(C){var E=C.g;if((E=E.g==E.i)||(E=C.j)||(E=C.g,E=E.l||0>E.g||E.g>E.i),E)return!1;C.m=C.g.g,E=Re(C.g);var _=E&7;return _!=0&&_!=5&&_!=1&&_!=2&&_!=3&&_!=4?(C.j=!0,!1):(C.i=E,C.l=E>>>3,C.h=_,!0)}function Bt(C){switch(C.h){case 0:if(C.h!=0)Bt(C);else{for(C=C.g;C.h[C.g]&128;)C.g++;C.g++}break;case 1:C.h!=1?Bt(C):(C=C.g,C.g+=8);break;case 2:if(C.h!=2)Bt(C);else{var E=Re(C.g);C=C.g,C.g+=E}break;case 5:C.h!=5?Bt(C):(C=C.g,C.g+=4);break;case 3:E=C.l;do{if(!cr(C)){C.j=!0;break}if(C.h==4){C.l!=E&&(C.j=!0);break}Bt(C)}while(1);break;default:C.j=!0}}function Ur(C,E,_){var U=C.g.i,J=Re(C.g),pe=C.g.g+J;if(C.g.i=pe,_(E,C),_=pe-C.g.g,_!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+J+" bytes, instead read "+(J-_)+" bytes, either the data ended unexpectedly or the message misreported its own length");return C.g.g=pe,C.g.i=U,E}function Wn(C){var E=Re(C.g);C=C.g;var _=C.g;C.g+=E,C=C.h;var U;if(B)(U=z)||(U=z=new TextDecoder("utf-8",{fatal:!1})),U=U.decode(C.subarray(_,_+E));else{E=_+E;for(var J=[],pe=null,te,he,xe;_<E;)te=C[_++],128>te?J.push(te):224>te?_>=E?J.push(65533):(he=C[_++],194>te||(he&192)!==128?(_--,J.push(65533)):J.push((te&31)<<6|he&63)):240>te?_>=E-1?J.push(65533):(he=C[_++],(he&192)!==128||te===224&&160>he||te===237&&160<=he||((U=C[_++])&192)!==128?(_--,J.push(65533)):J.push((te&15)<<12|(he&63)<<6|U&63)):244>=te?_>=E-2?J.push(65533):(he=C[_++],(he&192)!==128||(te<<28)+(he-144)>>30!==0||((U=C[_++])&192)!==128||((xe=C[_++])&192)!==128?(_--,J.push(65533)):(te=(te&7)<<18|(he&63)<<12|(U&63)<<6|xe&63,te-=65536,J.push((te>>10&1023)+55296,(te&1023)+56320))):J.push(65533),8192<=J.length&&(pe=M(pe,J),J.length=0);U=M(pe,J)}return U}function rs(){this.h=[],this.i=0,this.g=new Ue}function jn(C,E){E.length!==0&&(C.h.push(E),C.i+=E.length)}function ws(C){var E=C.i+C.g.length();if(E===0)return new Uint8Array(0);E=new Uint8Array(E);for(var _=C.h,U=_.length,J=0,pe=0;pe<U;pe++){var te=_[pe];te.length!==0&&(E.set(te,J),J+=te.length)}return _=C.g,U=_.h,U!==0&&(E.set(_.g.subarray(0,U),J),_.h=0),C.h=[E],E}function En(C,E,_){if(_!=null){it(C.g,8*E+5),C=C.g;var U=_;U=(_=0>U?1:0)?-U:U,U===0?0<1/U?ee=ce=0:(ce=0,ee=2147483648):isNaN(U)?(ce=0,ee=2147483647):34028234663852886e22<U?(ce=0,ee=(_<<31|2139095040)>>>0):11754943508222875e-54>U?(U=Math.round(U/Math.pow(2,-149)),ce=0,ee=(_<<31|U)>>>0):(E=Math.floor(Math.log(U)/Math.LN2),U*=Math.pow(2,-E),U=Math.round(8388608*U),16777216<=U&&++E,ce=0,ee=(_<<31|E+127<<23|U&8388607)>>>0),_=ee,C.push(_>>>0&255),C.push(_>>>8&255),C.push(_>>>16&255),C.push(_>>>24&255)}}var oo=typeof Uint8Array=="function";function ao(C,E,_){if(C!=null)return typeof C=="object"?oo&&C instanceof Uint8Array?_(C):Qa(C,E,_):E(C)}function Qa(C,E,_){if(Array.isArray(C)){for(var U=Array(C.length),J=0;J<C.length;J++)U[J]=ao(C[J],E,_);return Array.isArray(C)&&C.W&&Su(U),U}U={};for(J in C)U[J]=ao(C[J],E,_);return U}function zd(C){return typeof C=="number"?isFinite(C)?C:String(C):C}var Vd={W:{value:!0,configurable:!0}};function Su(C){return Array.isArray(C)&&!Object.isFrozen(C)&&Object.defineProperties(C,Vd),C}var ku;function Vs(C,E,_){var U=ku;ku=null,C||(C=U),U=this.constructor.ca,C||(C=U?[U]:[]),this.j=U?0:-1,this.i=null,this.g=C;e:{if(U=this.g.length,C=U-1,U&&(U=this.g[C],!(U===null||typeof U!="object"||Array.isArray(U)||oo&&U instanceof Uint8Array))){this.l=C-this.j,this.h=U;break e}E!==void 0&&-1<E?(this.l=Math.max(E,C+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(_)for(E=0;E<_.length;E++)C=_[E],C<this.l?(C+=this.j,(U=this.g[C])?Su(U):this.g[C]=hh):(zR(this),(U=this.h[C])?Su(U):this.h[C]=hh)}var hh=Object.freeze(Su([]));function zR(C){var E=C.l+C.j;C.g[E]||(C.h=C.g[E]={})}function Mn(C,E,_){return E===-1?null:(_===void 0?0:_)||E>=C.l?C.h?C.h[E]:void 0:C.g[E+C.j]}function VR(C){var E=E===void 0?!1:E,_=Mn(C,1,E);return _==null&&(_=hh),_===hh&&(_=Su([]),Ut(C,1,_,E)),_}function Ao(C,E,_){return C=Mn(C,E),C=C==null?C:+C,C==null?_===void 0?0:_:C}function Ut(C,E,_,U){(U===void 0?0:U)||E>=C.l?(zR(C),C.h[E]=_):C.g[E+C.j]=_}function AS(C,E){C.i||(C.i={});var _=C.i[1];if(!_){var U=VR(C);_=[];for(var J=0;J<U.length;J++)_[J]=new E(U[J]);C.i[1]=_}return _}function UR(C,E,_,U){var J=AS(C,_);E=E||new _,C=VR(C),U!=null?(J.splice(U,0,E),C.splice(U,0,fh(E))):(J.push(E),C.push(fh(E)))}Vs.prototype.toJSON=function(){var C=fh(this);return Qa(C,zd,Z)};function fh(C,E){if(C.i)for(var _ in C.i){var U=C.i[_];if(Array.isArray(U))for(var J=0;J<U.length;J++)U[J]&&fh(U[J]);else U&&fh(U)}return C.g}Vs.prototype.toString=function(){return fh(this).toString()};function WR(C,E){return C=Mn(C,E),C==null?0:C}function jR(C,E){return C=Mn(C,E),C==null?"":C}function OS(C,E){if(C=C.m){jn(E,E.g.end());for(var _=0;_<C.length;_++)jn(E,C[_])}}function Ud(C,E){if(E.h==4)return!1;var _=E.m;return Bt(E),E.N||(E=ve(E.g.h,_,E.g.g),(_=C.m)?_.push(E):C.m=[E]),!0}function ss(C,E){var _=void 0;return new(_||(_=Promise))(function(U,J){function pe(xe){try{he(E.next(xe))}catch(Oe){J(Oe)}}function te(xe){try{he(E.throw(xe))}catch(Oe){J(Oe)}}function he(xe){xe.done?U(xe.value):new _(function(Oe){Oe(xe.value)}).then(pe,te)}he((E=E.apply(C,void 0)).next())})}function Wd(C){Vs.call(this,C)}m(Wd,Vs);function AQ(C,E){for(;cr(E);)switch(E.i){case 8:var _=Re(E.g);Ut(C,1,_);break;case 21:_=$e(E.g),Ut(C,2,_);break;case 26:_=Wn(E),Ut(C,3,_);break;case 34:_=Wn(E),Ut(C,4,_);break;default:if(!Ud(C,E))return C}return C}function RS(C){Vs.call(this,C,-1,OQ)}m(RS,Vs),RS.prototype.addClassification=function(C,E){return UR(this,C,Wd,E),this};var OQ=[1];function jd(C){Vs.call(this,C)}m(jd,Vs);function RQ(C,E){for(;cr(E);)switch(E.i){case 13:var _=$e(E.g);Ut(C,1,_);break;case 21:_=$e(E.g),Ut(C,2,_);break;case 29:_=$e(E.g),Ut(C,3,_);break;case 37:_=$e(E.g),Ut(C,4,_);break;case 45:_=$e(E.g),Ut(C,5,_);break;default:if(!Ud(C,E))return C}return C}function GR(C){Vs.call(this,C,-1,DQ)}m(GR,Vs);var DQ=[1];function DS(C){Vs.call(this,C)}m(DS,Vs);function HR(C,E,_){if(_=C.createShader(_===0?C.VERTEX_SHADER:C.FRAGMENT_SHADER),C.shaderSource(_,E),C.compileShader(_),!C.getShaderParameter(_,C.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+C.getShaderInfoLog(_));return _}function PQ(C){return AS(C,Wd).map(function(E){return{index:WR(E,1),Y:Ao(E,2),label:Mn(E,3)!=null?jR(E,3):void 0,displayName:Mn(E,4)!=null?jR(E,4):void 0}})}function MQ(C){return{x:Ao(C,1),y:Ao(C,2),z:Ao(C,3),visibility:Mn(C,4)!=null?Ao(C,4):void 0}}function PS(C){e:{var E=new GR;for(C=new St(C);cr(C);)switch(C.i){case 10:var _=Ur(C,new jd,RQ);UR(E,_,jd,void 0);break;default:if(!Ud(E,C))break e}}return AS(E,jd).map(MQ)}function MS(C,E){this.h=C,this.g=E,this.l=0}function qR(C,E,_){return FQ(C,E),typeof C.g.canvas.transferToImageBitmap=="function"?Promise.resolve(C.g.canvas.transferToImageBitmap()):_?Promise.resolve(C.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(C.g.canvas):(C.i===void 0&&(C.i=document.createElement("canvas")),new Promise(function(U){C.i.height=C.g.canvas.height,C.i.width=C.g.canvas.width,C.i.getContext("2d",{}).drawImage(C.g.canvas,0,0,C.g.canvas.width,C.g.canvas.height),U(C.i)}))}function FQ(C,E){var _=C.g;if(C.m===void 0){var U=HR(_,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),J=HR(_,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),pe=_.createProgram();if(_.attachShader(pe,U),_.attachShader(pe,J),_.linkProgram(pe),!_.getProgramParameter(pe,_.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+_.getProgramInfoLog(pe));U=C.m=pe,_.useProgram(U),J=_.getUniformLocation(U,"sampler0"),C.j={I:_.getAttribLocation(U,"aVertex"),H:_.getAttribLocation(U,"aTex"),da:J},C.s=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,C.s),_.enableVertexAttribArray(C.j.I),_.vertexAttribPointer(C.j.I,2,_.FLOAT,!1,0,0),_.bufferData(_.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),_.STATIC_DRAW),_.bindBuffer(_.ARRAY_BUFFER,null),C.o=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,C.o),_.enableVertexAttribArray(C.j.H),_.vertexAttribPointer(C.j.H,2,_.FLOAT,!1,0,0),_.bufferData(_.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),_.STATIC_DRAW),_.bindBuffer(_.ARRAY_BUFFER,null),_.uniform1i(J,0)}U=C.j,_.useProgram(C.m),_.canvas.width=E.width,_.canvas.height=E.height,_.viewport(0,0,E.width,E.height),_.activeTexture(_.TEXTURE0),C.h.bindTexture2d(E.glName),_.enableVertexAttribArray(U.I),_.bindBuffer(_.ARRAY_BUFFER,C.s),_.vertexAttribPointer(U.I,2,_.FLOAT,!1,0,0),_.enableVertexAttribArray(U.H),_.bindBuffer(_.ARRAY_BUFFER,C.o),_.vertexAttribPointer(U.H,2,_.FLOAT,!1,0,0),_.bindFramebuffer(_.DRAW_FRAMEBUFFER?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,null),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),_.colorMask(!0,!0,!0,!0),_.drawArrays(_.TRIANGLE_FAN,0,4),_.disableVertexAttribArray(U.I),_.disableVertexAttribArray(U.H),_.bindBuffer(_.ARRAY_BUFFER,null),C.h.bindTexture2d(0)}function LQ(C){this.g=C}var BQ=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function zQ(C,E){return E+C}function KR(C,E){window[C]=E}function VQ(C){var E=document.createElement("script");return E.setAttribute("src",C),E.setAttribute("crossorigin","anonymous"),new Promise(function(_){E.addEventListener("load",function(){_()},!1),E.addEventListener("error",function(){_()},!1),document.body.appendChild(E)})}function UQ(){return ss(this,function C(){return T(C,function(E){switch(E.g){case 1:return E.m=2,b(E,WebAssembly.instantiate(BQ),4);case 4:E.g=3,E.m=0;break;case 2:return E.m=0,E.j=null,E.return(!1);case 3:return E.return(!0)}})})}function FS(C){if(this.g=C,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=C&&C.locateFile||zQ,typeof window=="object")var E=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")E=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=E,C.options){E=a(Object.keys(C.options));for(var _=E.next();!_.done;_=E.next()){_=_.value;var U=C.options[_].default;U!==void 0&&(this.j[_]=typeof U=="function"?U():U)}}}t=FS.prototype,t.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function WQ(C,E){return C.g.files===void 0?[]:typeof C.g.files=="function"?C.g.files(E):C.g.files}function jQ(C){return ss(C,function E(){var _=this,U,J,pe,te,he,xe,Oe,et,Wt,gt,ot;return T(E,function(Ve){switch(Ve.g){case 1:return U=_,_.R?(J=WQ(_,_.j),b(Ve,UQ(),2)):Ve.return();case 2:if(pe=Ve.h,typeof window=="object")return KR("createMediapipeSolutionsWasm",{locateFile:_.locateFile}),KR("createMediapipeSolutionsPackedAssets",{locateFile:_.locateFile}),xe=J.filter(function(tt){return tt.data!==void 0}),Oe=J.filter(function(tt){return tt.data===void 0}),et=Promise.all(xe.map(function(tt){var mt=a0(U,tt.url);if(tt.path!==void 0){var kt=tt.path;mt=mt.then(function(Ir){return U.overrideFile(kt,Ir),Promise.resolve(Ir)})}return mt})),Wt=Promise.all(Oe.map(function(tt){return tt.simd===void 0||tt.simd&&pe||!tt.simd&&!pe?VQ(U.locateFile(tt.url,U.S)):Promise.resolve()})).then(function(){return ss(U,function tt(){var mt,kt,Ir=this;return T(tt,function(Zt){if(Zt.g==1)return mt=window.createMediapipeSolutionsWasm,kt=window.createMediapipeSolutionsPackedAssets,b(Zt,mt(kt),2);Ir.h=Zt.h,Zt.g=0})})}),gt=function(){return ss(U,function tt(){var mt=this;return T(tt,function(kt){return mt.g.graph&&mt.g.graph.url?kt=b(kt,a0(mt,mt.g.graph.url),0):(kt.g=0,kt=void 0),kt})})}(),b(Ve,Promise.all([Wt,et,gt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return te=J.filter(function(tt){return tt.simd===void 0||tt.simd&&pe||!tt.simd&&!pe}).map(function(tt){return U.locateFile(tt.url,U.S)}),importScripts.apply(null,l(te)),b(Ve,createMediapipeSolutionsWasm(Module),6);case 6:_.h=Ve.h,_.l=new OffscreenCanvas(1,1),_.h.canvas=_.l,he=_.h.GL.createContext(_.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),_.h.GL.makeContextCurrent(he),Ve.g=4;break;case 7:if(_.l=document.createElement("canvas"),ot=_.l.getContext("webgl2",{}),!ot&&(ot=_.l.getContext("webgl",{}),!ot))return alert("Failed to create WebGL canvas context when passing video frame."),Ve.return();_.D=ot,_.h.canvas=_.l,_.h.createContext(_.l,!0,!0,{});case 4:_.i=new _.h.SolutionWasm,_.R=!1,Ve.g=0}})})}function GQ(C){return ss(C,function E(){var _=this,U,J,pe,te,he,xe,Oe,et;return T(E,function(Wt){if(Wt.g==1){if(_.g.graph&&_.g.graph.url&&_.P===_.g.graph.url)return Wt.return();if(_.o=!0,!_.g.graph||!_.g.graph.url){Wt.g=2;return}return _.P=_.g.graph.url,b(Wt,a0(_,_.g.graph.url),3)}for(Wt.g!=2&&(U=Wt.h,_.i.loadGraph(U)),J=a(Object.keys(_.B)),pe=J.next();!pe.done;pe=J.next())te=pe.value,_.i.overrideFile(te,_.B[te]);if(_.B={},_.g.listeners)for(he=a(_.g.listeners),xe=he.next();!xe.done;xe=he.next())Oe=xe.value,XQ(_,Oe);et=_.j,_.j={},_.setOptions(et),Wt.g=0})})}t.reset=function(){return ss(this,function C(){var E=this;return T(C,function(_){E.i&&(E.i.reset(),E.m={},E.s={}),_.g=0})})},t.setOptions=function(C,E){var _=this;if(E=E||this.g.options){for(var U=[],J=[],pe={},te=a(Object.keys(C)),he=te.next();!he.done;pe={K:pe.K,L:pe.L},he=te.next()){var xe=he.value;xe in this.j&&this.j[xe]===C[xe]||(this.j[xe]=C[xe],he=E[xe],he!==void 0&&(he.onChange&&(pe.K=he.onChange,pe.L=C[xe],U.push(function(Oe){return function(){return ss(_,function et(){var Wt,gt=this;return T(et,function(ot){if(ot.g==1)return b(ot,Oe.K(Oe.L),2);Wt=ot.h,Wt===!0&&(gt.o=!0),ot.g=0})})}}(pe))),he.graphOptionXref&&(xe={valueNumber:he.type===1?C[xe]:0,valueBoolean:he.type===0?C[xe]:!1,valueString:he.type===2?C[xe]:""},he=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),he.graphOptionXref),xe),J.push(he))))}(U.length!==0||J.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(J),this.u=(this.u===void 0?[]:this.u).concat(U))}};function HQ(C){return ss(C,function E(){var _=this,U,J,pe,te,he,xe,Oe;return T(E,function(et){switch(et.g){case 1:if(!_.o)return et.return();if(!_.u){et.g=2;break}U=a(_.u),J=U.next();case 3:if(J.done){et.g=5;break}return pe=J.value,b(et,pe(),4);case 4:J=U.next(),et.g=3;break;case 5:_.u=void 0;case 2:if(_.A){for(te=new _.h.GraphOptionChangeRequestList,he=a(_.A),xe=he.next();!xe.done;xe=he.next())Oe=xe.value,te.push_back(Oe);_.i.changeOptions(te),te.delete(),_.A=void 0}_.o=!1,et.g=0}})})}t.initialize=function(){return ss(this,function C(){var E=this;return T(C,function(_){return _.g==1?b(_,jQ(E),2):_.g!=3?b(_,GQ(E),3):b(_,HQ(E),0)})})};function a0(C,E){return ss(C,function _(){var U=this,J,pe;return T(_,function(te){return E in U.F?te.return(U.F[E]):(J=U.locateFile(E,""),pe=fetch(J).then(function(he){return he.arrayBuffer()}),U.F[E]=pe,te.return(pe))})})}t.overrideFile=function(C,E){this.i?this.i.overrideFile(C,E):this.B[C]=E},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(C,E){return ss(this,function _(){var U=this,J,pe,te,he,xe,Oe,et,Wt,gt;return T(_,function(ot){switch(ot.g){case 1:return U.g.inputs?(J=1e3*(E==null?performance.now():E),b(ot,U.C,2)):ot.return();case 2:return b(ot,U.initialize(),3);case 3:for(pe=new U.h.PacketDataList,te=a(Object.keys(C)),he=te.next();!he.done;he=te.next())if(xe=he.value,Oe=U.g.inputs[xe]){e:{var Ve=U,tt=C[xe];switch(Oe.type){case"video":var mt=Ve.m[Oe.stream];if(mt||(mt=new MS(Ve.h,Ve.D),Ve.m[Oe.stream]=mt),Ve=mt,Ve.l===0&&(Ve.l=Ve.h.createTexture()),typeof HTMLVideoElement<"u"&&tt instanceof HTMLVideoElement){var kt=tt.videoWidth;mt=tt.videoHeight}else typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement?(kt=tt.naturalWidth,mt=tt.naturalHeight):(kt=tt.width,mt=tt.height);mt={glName:Ve.l,width:kt,height:mt},kt=Ve.g,kt.canvas.width=mt.width,kt.canvas.height=mt.height,kt.activeTexture(kt.TEXTURE0),Ve.h.bindTexture2d(Ve.l),kt.texImage2D(kt.TEXTURE_2D,0,kt.RGBA,kt.RGBA,kt.UNSIGNED_BYTE,tt),Ve.h.bindTexture2d(0),Ve=mt;break e;case"detections":for(mt=Ve.m[Oe.stream],mt||(mt=new LQ(Ve.h),Ve.m[Oe.stream]=mt),Ve=mt,Ve.data||(Ve.data=new Ve.g.DetectionListData),Ve.data.reset(tt.length),mt=0;mt<tt.length;++mt){kt=tt[mt];var Ir=Ve.data,Zt=Ir.setBoundingBox,Ss=mt,Gn=kt.T,ht=new DS;Ut(ht,1,Gn.Z),Ut(ht,2,Gn.$),Ut(ht,3,Gn.height),Ut(ht,4,Gn.width),Ut(ht,5,Gn.rotation),Ut(ht,6,Gn.X);var Nt=Gn=new rs;En(Nt,1,Mn(ht,1)),En(Nt,2,Mn(ht,2)),En(Nt,3,Mn(ht,3)),En(Nt,4,Mn(ht,4)),En(Nt,5,Mn(ht,5));var Pt=Mn(ht,6);if(Pt!=null&&Pt!=null){it(Nt.g,48);var yt=Nt.g,Et=Pt;Pt=0>Et,Et=Math.abs(Et);var ft=Et>>>0;for(Et=Math.floor((Et-ft)/4294967296),Et>>>=0,Pt&&(Et=~Et>>>0,ft=(~ft>>>0)+1,4294967295<ft&&(ft=0,Et++,4294967295<Et&&(Et=0))),ee=ft,ce=Et,Pt=ee,ft=ce;0<ft||127<Pt;)yt.push(Pt&127|128),Pt=(Pt>>>7|ft<<25)>>>0,ft>>>=7;yt.push(Pt)}if(OS(ht,Nt),Gn=ws(Gn),Zt.call(Ir,Ss,Gn),kt.O)for(Ir=0;Ir<kt.O.length;++Ir)ht=kt.O[Ir],Nt=!!ht.visibility,Zt=Ve.data,Ss=Zt.addNormalizedLandmark,Gn=mt,ht=Object.assign(Object.assign({},ht),{visibility:Nt?ht.visibility:0}),Nt=new jd,Ut(Nt,1,ht.x),Ut(Nt,2,ht.y),Ut(Nt,3,ht.z),ht.visibility&&Ut(Nt,4,ht.visibility),yt=ht=new rs,En(yt,1,Mn(Nt,1)),En(yt,2,Mn(Nt,2)),En(yt,3,Mn(Nt,3)),En(yt,4,Mn(Nt,4)),En(yt,5,Mn(Nt,5)),OS(Nt,yt),ht=ws(ht),Ss.call(Zt,Gn,ht);if(kt.M)for(Ir=0;Ir<kt.M.length;++Ir){if(Zt=Ve.data,Ss=Zt.addClassification,Gn=mt,ht=kt.M[Ir],Nt=new Wd,Ut(Nt,2,ht.Y),ht.index&&Ut(Nt,1,ht.index),ht.label&&Ut(Nt,3,ht.label),ht.displayName&&Ut(Nt,4,ht.displayName),yt=ht=new rs,ft=Mn(Nt,1),ft!=null&&ft!=null)if(it(yt.g,8),Pt=yt.g,0<=ft)it(Pt,ft);else{for(Et=0;9>Et;Et++)Pt.push(ft&127|128),ft>>=7;Pt.push(1)}En(yt,2,Mn(Nt,2)),Pt=Mn(Nt,3),Pt!=null&&(Pt=V(Pt),it(yt.g,26),it(yt.g,Pt.length),jn(yt,yt.g.end()),jn(yt,Pt)),Pt=Mn(Nt,4),Pt!=null&&(Pt=V(Pt),it(yt.g,34),it(yt.g,Pt.length),jn(yt,yt.g.end()),jn(yt,Pt)),OS(Nt,yt),ht=ws(ht),Ss.call(Zt,Gn,ht)}}Ve=Ve.data;break e;default:Ve={}}}switch(et=Ve,Wt=Oe.stream,Oe.type){case"video":pe.pushTexture2d(Object.assign(Object.assign({},et),{stream:Wt,timestamp:J}));break;case"detections":gt=et,gt.stream=Wt,gt.timestamp=J,pe.pushDetectionList(gt);break;default:throw Error("Unknown input config type: '"+Oe.type+"'")}}return U.i.send(pe),b(ot,U.C,4);case 4:pe.delete(),ot.g=0}})})};function qQ(C,E,_){return ss(C,function U(){var J,pe,te,he,xe,Oe,et=this,Wt,gt,ot,Ve,tt,mt,kt,Ir;return T(U,function(Zt){switch(Zt.g){case 1:if(!_)return Zt.return(E);for(J={},pe=0,te=a(Object.keys(_)),he=te.next();!he.done;he=te.next())xe=he.value,Oe=_[xe],typeof Oe!="string"&&Oe.type==="texture"&&E[Oe.stream]!==void 0&&++pe;1<pe&&(et.G=!1),Wt=a(Object.keys(_)),he=Wt.next();case 2:if(he.done){Zt.g=4;break}if(gt=he.value,ot=_[gt],typeof ot=="string")return kt=J,Ir=gt,b(Zt,KQ(et,gt,E[ot]),14);if(Ve=E[ot.stream],ot.type==="detection_list"){if(Ve){for(var Ss=Ve.getRectList(),Gn=Ve.getLandmarksList(),ht=Ve.getClassificationsList(),Nt=[],Pt=0;Pt<Ss.size();++Pt){var yt=Ss.get(Pt);e:{var Et=new DS;for(yt=new St(yt);cr(yt);)switch(yt.i){case 13:var ft=$e(yt.g);Ut(Et,1,ft);break;case 21:ft=$e(yt.g),Ut(Et,2,ft);break;case 29:ft=$e(yt.g),Ut(Et,3,ft);break;case 37:ft=$e(yt.g),Ut(Et,4,ft);break;case 45:ft=$e(yt.g),Ut(Et,5,ft);break;case 48:for(var Fn=yt.g,hr=128,LS=0,Iu=ft=0;4>Iu&&128<=hr;Iu++)hr=Fn.h[Fn.g++],LS|=(hr&127)<<7*Iu;if(128<=hr&&(hr=Fn.h[Fn.g++],LS|=(hr&127)<<28,ft|=(hr&127)>>4),128<=hr)for(Iu=0;5>Iu&&128<=hr;Iu++)hr=Fn.h[Fn.g++],ft|=(hr&127)<<7*Iu+3;128>hr?(Fn=LS>>>0,hr=ft>>>0,(ft=hr&2147483648)&&(Fn=~Fn+1>>>0,hr=~hr>>>0,Fn==0&&(hr=hr+1>>>0)),Fn=4294967296*hr+(Fn>>>0),ft=ft?-Fn:Fn):(Fn.l=!0,ft=void 0),Ut(Et,6,ft);break;default:if(!Ud(Et,yt))break e}}Et={Z:Ao(Et,1),$:Ao(Et,2),height:Ao(Et,3),width:Ao(Et,4),rotation:Ao(Et,5,0),X:WR(Et,6)},yt=PS(Gn.get(Pt)),Fn=ht.get(Pt);e:for(ft=new RS,Fn=new St(Fn);cr(Fn);)switch(Fn.i){case 10:ft.addClassification(Ur(Fn,new Wd,AQ));break;default:if(!Ud(ft,Fn))break e}Et={T:Et,O:yt,M:PQ(ft)},Nt.push(Et)}Ss=Nt}else Ss=[];J[gt]=Ss,Zt.g=7;break}if(ot.type==="proto_list"){if(Ve){for(Ss=Array(Ve.size()),Gn=0;Gn<Ve.size();Gn++)Ss[Gn]=Ve.get(Gn);Ve.delete()}else Ss=[];J[gt]=Ss,Zt.g=7;break}if(Ve===void 0){Zt.g=3;break}if(ot.type==="float_list"){J[gt]=Ve,Zt.g=7;break}if(ot.type==="proto"){J[gt]=Ve,Zt.g=7;break}if(ot.type!=="texture")throw Error("Unknown output config type: '"+ot.type+"'");return tt=et.s[gt],tt||(tt=new MS(et.h,et.D),et.s[gt]=tt),b(Zt,qR(tt,Ve,et.G),13);case 13:mt=Zt.h,J[gt]=mt;case 7:ot.transform&&J[gt]&&(J[gt]=ot.transform(J[gt])),Zt.g=3;break;case 14:kt[Ir]=Zt.h;case 3:he=Wt.next(),Zt.g=2;break;case 4:return Zt.return(J)}})})}function KQ(C,E,_){return ss(C,function U(){var J=this,pe;return T(U,function(te){return typeof _=="number"||_ instanceof Uint8Array||_ instanceof J.h.Uint8BlobList?te.return(_):_ instanceof J.h.Texture2dDataOut?(pe=J.s[E],pe||(pe=new MS(J.h,J.D),J.s[E]=pe),te.return(qR(pe,_,J.G))):te.return(void 0)})})}function XQ(C,E){for(var _=E.name||"$",U=[].concat(l(E.wants)),J=new C.h.StringList,pe=a(E.wants),te=pe.next();!te.done;te=pe.next())J.push_back(te.value);pe=C.h.PacketListener.implement({onResults:function(he){for(var xe={},Oe=0;Oe<E.wants.length;++Oe)xe[U[Oe]]=he.get(Oe);var et=C.listeners[_];et&&(C.C=qQ(C,xe,E.outs).then(function(Wt){Wt=et(Wt);for(var gt=0;gt<E.wants.length;++gt){var ot=xe[U[gt]];typeof ot=="object"&&ot.hasOwnProperty&&ot.hasOwnProperty("delete")&&ot.delete()}Wt&&(C.C=Wt)}))}}),C.i.attachMultiListener(J,pe),J.delete()}t.onResults=function(C,E){this.listeners[E||"$"]=C},O("Solution",FS),O("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function XR(C){switch(C===void 0&&(C=0),C){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function YR(C){var E=this;C=C||{},this.g=new FS({locateFile:C.locateFile,files:function(_){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:XR(_.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:PS},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:PS},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(_){return ss(E,function U(){var J,pe,te=this,he;return T(U,function(xe){return xe.g==1?(J=XR(_),pe="third_party/mediapipe/modules/pose_landmark/"+J,b(xe,a0(te.g,J),2)):(he=xe.h,te.g.overrideFile(pe,he),xe.return(!0))})})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}t=YR.prototype,t.reset=function(){this.g.reset()},t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(C){this.g.onResults(C)},t.initialize=function(){return ss(this,function C(){var E=this;return T(C,function(_){return b(_,E.g.initialize(),0)})})},t.send=function(C,E){return ss(this,function _(){var U=this;return T(_,function(J){return b(J,U.g.send(C,E),0)})})},t.setOptions=function(C){this.g.setOptions(C)},O("Pose",YR),O("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),O("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),O("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),O("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),O("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),O("VERSION","0.4.1633558788")}).call(Dt);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E_e=1e-7,__e=1e-4;class N7{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class DA{refCount(e){return ii("refCount")}incRef(e){return ii("incRef")}timerAvailable(){return!0}time(e){return ii("time")}read(e){return ii("read")}readSync(e){return ii("readSync")}readToGPU(e,n){return ii("readToGPU")}numDataIds(){return ii("numDataIds")}disposeData(e,n){return ii("disposeData")}write(e,n,r){return ii("write")}move(e,n,r,s,i){return ii("move")}memory(){return ii("memory")}floatPrecision(){return ii("floatPrecision")}epsilon(){return this.floatPrecision()===32?E_e:__e}dispose(){return ii("dispose")}}function ii(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_e(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Ih(t,e,n)}function Oc(t,e,n){return Math.max(t,Math.min(e,n))}function E7(t){return t%2===0?t:t+1}function Ih(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function O_e(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function P(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function no(t,e,n=""){P(Ct(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function PA(t){P(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Bf(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||oa(t)&&!n)for(let r=0;r<t.length;++r)Bf(t[r],e,n);else e.push(t);return e}function ie(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Ct(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function zf(t){return t%1===0}function C$(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function af(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function r6(t,e=r=>0,n){return new Promise((r,s)=>{let i=0;const o=()=>{if(t()){r();return}i++;const a=e(i);if(n!=null&&i>=n){s();return}setTimeout(o,a)};o()})}function _7(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function pt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),P(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),P(t.every(r=>zf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function du(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:pt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Pr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function ms(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function R_e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function D_e(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function A7(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function oa(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function T$(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function P_e(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Dg(t){return typeof t=="string"||t instanceof String}function M_e(t){return typeof t=="boolean"}function $$(t){return typeof t=="number"}function Pg(t){return Array.isArray(t)?Pg(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":$$(t)?"float32":Dg(t)?"string":M_e(t)?"bool":"float32"}function N$(t){return!!(t&&t.constructor&&t.call&&t.apply)}function E$(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ge(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function O7(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)s[l]=O7(t+l*a,o,n,r)}return s}function Ki(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return O7(0,t,e,n)}function MA(t,e){const n=es(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function es(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function R7(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Ki(t,new Float32Array(n));if(e==="int32")return Ki(t,new Int32Array(n));if(e==="bool")return Ki(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function D7(t){t.forEach(e=>{P(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Jo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Mg(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Vf(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s6="tfjsflags";class F_e{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=L_e,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(re().getBool("IS_TEST")||re().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];re().getBool("IS_TEST")||re().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Vf(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);s6 in e&&e[s6].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=z_e(s,i)})}}function L_e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(B_e(e,r[0],r[1]),r.join("="))),e}function B_e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function z_e(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function re(){return P7}let P7=null;function V_e(t){P7=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let hI;function M7(){if(hI==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");hI=t}return hI}function U_e(){const t=M7();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function FA(t,e){const n=U_e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Vw="Abs",Fg="Acos",Lg="Acosh",Cd="Add",Uw="AddN",LA="All",BA="Any",Ww="ArgMax",jw="ArgMin",Bg="Asin",zg="Asinh",Vg="Atan",Ug="Atanh",Wg="Atan2",Gw="AvgPool",zA="AvgPoolGrad",Hw="AvgPool3D",VA="AvgPool3DGrad",qw="BatchMatMul",Kw="BatchToSpaceND",UA="Bincount",W_e="BroadcastTo",WA="BroadcastArgs",jg="Cast",Gg="Ceil",Hg="ClipByValue",jA="Complex",Xw="ComplexAbs",Yw="Concat",Qw="Conv2D",GA="Conv2DBackpropFilter",Jw="Conv2DBackpropInput",Zw="Conv3D",HA="Conv3DBackpropFilterV2",qA="Conv3DBackpropInputV2",qg="Cos",Kg="Cosh",KA="Cumprod",e2="Cumsum",XA="CropAndResize",YA="DenseBincount",QA="DepthToSpace",t2="DepthwiseConv2dNative",JA="DepthwiseConv2dNativeBackpropFilter",ZA="DepthwiseConv2dNativeBackpropInput",F7="Diag",n2="Dilation2D",_$="Dilation2DBackpropInput",A$="Dilation2DBackpropFilter",Xg="RealDiv",e3="Einsum",Yg="Elu",t3="EluGrad",Qg="Erf",r2="Equal",Jg="Exp",s2="ExpandDims",Zg="Expm1",n3="FFT",r3="Fill",s3="FlipLeftRight",ey="Floor",ty="FloorDiv",i2="FusedBatchNorm",o2="GatherV2",i3="GatherNd",a2="Greater",ny="GreaterEqual",ry="Identity",o3="IFFT",a3="Imag",sy="IsFinite",iy="IsInf",oy="IsNan",l2="LeakyRelu",u2="Less",c2="LessEqual",l3="LinSpace",ay="Log",ly="Log1p",h2="LogicalAnd",f2="LogicalNot",d2="LogicalOr",j_e="LogSoftmax",p2="LRN",u3="LRNGrad",m2="Max",uy="Maximum",g2="MaxPool",c3="MaxPoolGrad",y2="MaxPool3D",h3="MaxPool3DGrad",f3="MaxPoolWithArgmax",v2="Mean",x2="Min",cy="Minimum",b2="MirrorPad",hy="Mod",d3="Multinomial",fy="Multiply",w2="Neg",S2="NotEqual",p3="NonMaxSuppressionV3",m3="NonMaxSuppressionV4",g3="NonMaxSuppressionV5",k2="OnesLike",I2="OneHot",C2="Pack",T2="PadV2",dy="Pow",$2="Prelu",N2="Prod",y3="Range",v3="Real",py="Reciprocal",my="Relu",E2="Reshape",_2="ResizeNearestNeighbor",x3="ResizeNearestNeighborGrad",A2="ResizeBilinear",b3="ResizeBilinearGrad",gy="Relu6",O2="Reverse",yy="Round",vy="Rsqrt",w3="ScatterNd",S3="SearchSorted",R2="Select",xy="Selu",D2="Slice",by="Sin",wy="Sinh",Sy="Sign",ky="Sigmoid",Iy="Softplus",Cy="Sqrt",P2="Sum",M2="SpaceToBatchND",F2="SplitV",L2="Softmax",k3="SparseFillEmptyRows",I3="SparseReshape",C3="SparseSegmentMean",T3="SparseSegmentSum",$3="SparseToDense",Ty="SquaredDifference",N3="Square",E3="StridedSlice",_3="StringNGrams",A3="StringSplit",O3="StringToHashBucketFast",$y="Sub",Ny="Tan",Ey="Tanh",_y="Tile",R3="TopK",D3="Transform",lf="Transpose",P3="Unique",B2="Unpack",z2="UnsortedSegmentSum",V2="ZerosLike",Ay="Step",O$="FromPixels",M3="RotateWithOffset",Ox="_FusedMatMul",Rx="FusedConv2D",Dx="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hi(...t){re().getBool("IS_TEST")||re().getBool("PROD")||console.warn(...t)}function G_e(...t){re().getBool("IS_TEST")||re().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Px=FA("kernelRegistry",()=>new Map),R$=FA("gradRegistry",()=>new Map);function D$(t,e){const n=B7(t,e);return Px.get(n)}function i6(t){return R$.get(t)}function o6(t){const e=Px.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function L7(t){const{kernelName:e,backendName:n}=t,r=B7(e,n);Px.has(r)&&hi(`The kernel '${e}' for backend '${n}' is already registered`),Px.set(r,t)}function H_e(t){const{kernelName:e}=t;R$.has(e)&&re().getBool("DEBUG")&&hi(`Overriding the gradient for '${e}'`),R$.set(e,t)}function B7(t,e){return`${e}_${t}`}var P$=dn,Vi=null;try{Vi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function dn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}dn.prototype.__isLong__;Object.defineProperty(dn.prototype,"__isLong__",{value:!0});function si(t){return(t&&t.__isLong__)===!0}dn.isLong=si;var a6={},l6={};function eh(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=l6[t],r)?r:(n=pn(t,(t|0)<0?-1:0,!0),s&&(l6[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=a6[t],r)?r:(n=pn(t,t<0?-1:0,!1),s&&(a6[t]=n),n))}dn.fromInt=eh;function Ui(t,e){if(isNaN(t))return e?Ju:Wi;if(e){if(t<0)return Ju;if(t>=z7)return W7}else{if(t<=-c6)return Xs;if(t+1>=c6)return U7}return t<0?Ui(-t,e).neg():pn(t%Uf|0,t/Uf|0,e)}dn.fromNumber=Ui;function pn(t,e,n){return new dn(t,e,n)}dn.fromBits=pn;var Mx=Math.pow;function F3(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Wi;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return F3(t.substring(1),e,n).neg();for(var s=Ui(Mx(n,8)),i=Wi,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var u=Ui(Mx(n,a));i=i.mul(u).add(Ui(l))}else i=i.mul(s),i=i.add(Ui(l))}return i.unsigned=e,i}dn.fromString=F3;function Eo(t,e){return typeof t=="number"?Ui(t,e):typeof t=="string"?F3(t,e):pn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}dn.fromValue=Eo;var u6=1<<16,q_e=1<<24,Uf=u6*u6,z7=Uf*Uf,c6=z7/2,h6=eh(q_e),Wi=eh(0);dn.ZERO=Wi;var Ju=eh(0,!0);dn.UZERO=Ju;var Hh=eh(1);dn.ONE=Hh;var V7=eh(1,!0);dn.UONE=V7;var M$=eh(-1);dn.NEG_ONE=M$;var U7=pn(-1,2147483647,!1);dn.MAX_VALUE=U7;var W7=pn(-1,-1,!0);dn.MAX_UNSIGNED_VALUE=W7;var Xs=pn(0,-2147483648,!1);dn.MIN_VALUE=Xs;var Te=dn.prototype;Te.toInt=function(){return this.unsigned?this.low>>>0:this.low};Te.toNumber=function(){return this.unsigned?(this.high>>>0)*Uf+(this.low>>>0):this.high*Uf+(this.low>>>0)};Te.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Xs)){var n=Ui(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=Ui(Mx(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),u=o.sub(l.mul(i)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};Te.getHighBits=function(){return this.high};Te.getHighBitsUnsigned=function(){return this.high>>>0};Te.getLowBits=function(){return this.low};Te.getLowBitsUnsigned=function(){return this.low>>>0};Te.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Xs)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&(e&1<<n)==0;n--);return this.high!=0?n+33:n+1};Te.isZero=function(){return this.high===0&&this.low===0};Te.eqz=Te.isZero;Te.isNegative=function(){return!this.unsigned&&this.high<0};Te.isPositive=function(){return this.unsigned||this.high>=0};Te.isOdd=function(){return(this.low&1)===1};Te.isEven=function(){return(this.low&1)===0};Te.equals=function(e){return si(e)||(e=Eo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Te.eq=Te.equals;Te.notEquals=function(e){return!this.eq(e)};Te.neq=Te.notEquals;Te.ne=Te.notEquals;Te.lessThan=function(e){return this.comp(e)<0};Te.lt=Te.lessThan;Te.lessThanOrEqual=function(e){return this.comp(e)<=0};Te.lte=Te.lessThanOrEqual;Te.le=Te.lessThanOrEqual;Te.greaterThan=function(e){return this.comp(e)>0};Te.gt=Te.greaterThan;Te.greaterThanOrEqual=function(e){return this.comp(e)>=0};Te.gte=Te.greaterThanOrEqual;Te.ge=Te.greaterThanOrEqual;Te.compare=function(e){if(si(e)||(e=Eo(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Te.comp=Te.compare;Te.negate=function(){return!this.unsigned&&this.eq(Xs)?Xs:this.not().add(Hh)};Te.neg=Te.negate;Te.add=function(e){si(e)||(e=Eo(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,h=0,f=0,d=0;return d+=i+u,f+=d>>>16,d&=65535,f+=s+l,h+=f>>>16,f&=65535,h+=r+a,c+=h>>>16,h&=65535,c+=n+o,c&=65535,pn(f<<16|d,c<<16|h,this.unsigned)};Te.subtract=function(e){return si(e)||(e=Eo(e)),this.add(e.neg())};Te.sub=Te.subtract;Te.multiply=function(e){if(this.isZero())return Wi;if(si(e)||(e=Eo(e)),Vi){var n=Vi.mul(this.low,this.high,e.low,e.high);return pn(n,Vi.get_high(),this.unsigned)}if(e.isZero())return Wi;if(this.eq(Xs))return e.isOdd()?Xs:Wi;if(e.eq(Xs))return this.isOdd()?Xs:Wi;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(h6)&&e.lt(h6))return Ui(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,h=0,f=0,d=0,p=0;return p+=o*c,d+=p>>>16,p&=65535,d+=i*c,f+=d>>>16,d&=65535,d+=o*u,f+=d>>>16,d&=65535,f+=s*c,h+=f>>>16,f&=65535,f+=i*u,h+=f>>>16,f&=65535,f+=o*l,h+=f>>>16,f&=65535,h+=r*c+s*u+i*l+o*a,h&=65535,pn(d<<16|p,h<<16|f,this.unsigned)};Te.mul=Te.multiply;Te.divide=function(e){if(si(e)||(e=Eo(e)),e.isZero())throw Error("division by zero");if(Vi){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Vi.div_u:Vi.div_s)(this.low,this.high,e.low,e.high);return pn(n,Vi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ju:Wi;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ju;if(e.gt(this.shru(1)))return V7;i=Ju}else{if(this.eq(Xs)){if(e.eq(Hh)||e.eq(M$))return Xs;if(e.eq(Xs))return Hh;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Wi)?e.isNegative()?Hh:M$:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Xs))return this.unsigned?Ju:Wi;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Wi}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Mx(2,a-48),u=Ui(r),c=u.mul(e);c.isNegative()||c.gt(s);)r-=l,u=Ui(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Hh),i=i.add(u),s=s.sub(c)}return i};Te.div=Te.divide;Te.modulo=function(e){if(si(e)||(e=Eo(e)),Vi){var n=(this.unsigned?Vi.rem_u:Vi.rem_s)(this.low,this.high,e.low,e.high);return pn(n,Vi.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Te.mod=Te.modulo;Te.rem=Te.modulo;Te.not=function(){return pn(~this.low,~this.high,this.unsigned)};Te.and=function(e){return si(e)||(e=Eo(e)),pn(this.low&e.low,this.high&e.high,this.unsigned)};Te.or=function(e){return si(e)||(e=Eo(e)),pn(this.low|e.low,this.high|e.high,this.unsigned)};Te.xor=function(e){return si(e)||(e=Eo(e)),pn(this.low^e.low,this.high^e.high,this.unsigned)};Te.shiftLeft=function(e){return si(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):pn(0,this.low<<e-32,this.unsigned)};Te.shl=Te.shiftLeft;Te.shiftRight=function(e){return si(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):pn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Te.shr=Te.shiftRight;Te.shiftRightUnsigned=function(e){if(si(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return pn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?pn(n,0,this.unsigned):pn(n>>>e-32,0,this.unsigned)};Te.shru=Te.shiftRightUnsigned;Te.shr_u=Te.shiftRightUnsigned;Te.toSigned=function(){return this.unsigned?pn(this.low,this.high,!1):this};Te.toUnsigned=function(){return this.unsigned?this:pn(this.low,this.high,!0)};Te.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Te.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Te.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};dn.fromBytes=function(e,n,r){return r?dn.fromBytesLE(e,n):dn.fromBytesBE(e,n)};dn.fromBytesLE=function(e,n){return new dn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};dn.fromBytesBE=function(e,n){return new dn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const K_e=YQ({__proto__:null,default:P$},[P$]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vu=P$||K_e;function U2(t){return Vu.fromString(t,!0,16)}const j7=U2("c3a5c85c97cb3127"),Fu=U2("b492b66fbe98f273"),cs=U2("9ae16a3b2f90404f");function F$(t){return t.xor(t.shru(47))}function G7(t,e,n){const r=t.slice(e,e+n);return Vu.fromBytes(Array.from(r),!0,!0)}function on(t,e){return G7(t,e,8)}function f6(t,e){return G7(t,e,4)}function dr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Dl(t,e,n=U2("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function X_e(t,e,n,r,s,i){s=s.add(t),i=dr(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(dr(s,44)),[s.add(r),i.add(o)]}function W0(t,e,n,r){return X_e(on(t,e),on(t,e+8),on(t,e+16),on(t,e+24),n,r)}function Y_e(t,e=t.length){if(e>=8){const n=cs.add(e*2),r=on(t,0).add(cs),s=on(t,e-8),i=dr(s,37).mul(n).add(r),o=dr(r,25).add(s).mul(n);return Dl(i,o,n)}if(e>=4){const n=cs.add(e*2),r=f6(t,0);return Dl(r.shl(3).add(e),f6(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return F$(cs.mul(i).xor(j7.mul(o))).mul(cs)}return cs}function Q_e(t,e=t.length){const n=cs.add(e*2),r=on(t,0).mul(Fu),s=on(t,8),i=on(t,e-8).mul(n),o=on(t,e-16).mul(cs);return Dl(dr(r.add(s),43).add(dr(i,30)).add(o),r.add(dr(s.add(cs),18)).add(i),n)}function J_e(t,e=t.length){const n=cs.add(e*2),r=on(t,0).mul(cs),s=on(t,8),i=on(t,e-8).mul(n),o=on(t,e-16).mul(cs),a=dr(r.add(s),43).add(dr(i,30)).add(o),l=Dl(a,r.add(dr(s.add(cs),18)).add(i),n),u=on(t,16).mul(n),c=on(t,24),h=a.add(on(t,e-32)).mul(n),f=l.add(on(t,e-24)).mul(n);return Dl(dr(u.add(c),43).add(dr(h,30)).add(f),u.add(dr(c.add(r),18)).add(h),n)}function Z_e(t,e=t.length){const n=Vu.fromNumber(81,!0);if(e<=32)return e<=16?Y_e(t,e):Q_e(t,e);if(e<=64)return J_e(t,e);let r=n,s=n.mul(Fu).add(113),i=F$(s.mul(cs).add(113)).mul(cs),o=[Vu.UZERO,Vu.UZERO],a=[Vu.UZERO,Vu.UZERO];r=r.mul(cs).add(on(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=dr(r.add(s).add(o[0]).add(on(t,l+8)),37).mul(Fu),s=dr(s.add(o[1]).add(on(t,l+48)),42).mul(Fu),r=r.xor(a[1]),s=s.add(o[0]).add(on(t,l+40)),i=dr(i.add(a[0]),33).mul(Fu),o=W0(t,l,o[1].mul(Fu),r.add(a[0])),a=W0(t,l+32,i.add(a[1]),s.add(on(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const h=Fu.add(i.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=dr(r.add(s).add(o[0]).add(on(t,l+8)),37).mul(h),s=dr(s.add(o[1]).add(on(t,l+48)),42).mul(h),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(on(t,l+40))),i=dr(i.add(a[0]),33).mul(h),o=W0(t,l,o[1].mul(h),r.add(a[0])),a=W0(t,l+32,i.add(a[1]),s.add(on(t,l+16))),[i,r]=[r,i],Dl(Dl(o[0],a[0],h).add(F$(s).mul(j7)).add(i),Dl(o[1],a[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pu(t,e){return e==="string"?Pl(t):th([t],e)}function eAe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function th(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Bf(t)),re().getBool("DEBUG")&&R_e(t,e),eAe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Is(){return re().platform.now()}function Pl(t,e="utf-8"){return e=e||"utf-8",re().platform.encode(t,e)}function Kl(t,e="utf-8"){return e=e||"utf-8",re().platform.decode(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tAe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new rAe)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=Is();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const u of s)u.dataSync();o=Promise.resolve({kernelMs:Is()-a})}if(re().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<s.length;u++){const c=s[u];c.data().then(h=>{nAe(h,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function nAe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class rAe{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?af(`${s}ms`,9):s.error,l=af(e,25),u=n.rank,c=n.size,h=af(n.shape.toString(),14);let f="";for(const d in i){const p=i[d];if(p!=null){const m=p.shape||n.shape,g=m.length;f+=`${d}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${h}	%c${c}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const h in c){const f=c[h];let d=!1;for(let p=0;p<e.length;p++)if(r[f.id]){u.outputs.forEach(m=>r[m.id]=!0),d=!0,s[u.id]=!0;break}if(d)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let h=0;h<u.outputs.length;h++)if(i[u.outputs[h].id]){for(const f in c)i[c[f].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(s[u.id]&&o[u.id]){const c={};for(const f in u.inputs){const d=u.inputs[f];r[d.id]&&(c[f]=d)}const h=Object.assign({},u);h.inputs=c,h.outputs=u.outputs,a.push(h)}}return a}function iAe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!Ct(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const h=t[c.id];t[c.id]=r(h,u),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6=20,up=3,fI=7;function oAe(t,e,n,r){const s=Ge(e),i=aAe(t,e,n,s),o=e.length,a=jv(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function aAe(t,e,n,r){const s=ie(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?Cp(t):t;if(a>1)for(let u=0;u<s/i;u++){const c=u*i;for(let h=0;h<i;h++)o[h]=Math.max(o[h],Ip(l[c+h],0,n).length)}return o}function Ip(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(fI))} + ${parseFloat(t[1].toFixed(fI))}j`:Dg(t)?r=`'${t}'`:n==="bool"?r=H7(t):r=parseFloat(t.toFixed(fI)).toString(),af(r,e)}function H7(t){return t===0?"false":"true"}function jv(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Cp(t);return[Ip(m[0],0,n)]}return n==="bool"?[H7(t[0])]:[t[0].toString()]}if(l===1){if(a>d6){const g=up*o;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-up)*o,a*o));return n==="complex64"&&(y=Cp(y),v=Cp(v)),["["+y.map((b,x)=>Ip(b,s[x],n)).join(", ")+", ..., "+v.map((b,x)=>Ip(b,s[a-up+x],n)).join(", ")+"]"]}const m=n==="complex64"?Cp(t):Array.from(t);return["["+m.map((g,y)=>Ip(g,s[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),h=r[0]*o,f=[];if(a>d6){for(let m=0;m<up;m++){const g=m*h,y=g+h;f.push(...jv(t.slice(g,y),u,n,c,s,!1))}f.push("...");for(let m=a-up;m<a;m++){const g=m*h,y=g+h;f.push(...jv(t.slice(g,y),u,n,c,s,m===a-1))}}else for(let m=0;m<a;m++){const g=m*h,y=g+h;f.push(...jv(t.slice(g,y),u,n,c,s,m===a-1))}const d=l===2?",":"";f[0]="["+f[0]+d;for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+d;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(i?"":p),f}function Cp(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ie(e),r!=null){const s=r.length;P(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ms(n,this.size),this.strides=Ge(e)}set(e,...n){n.length===0&&(n=[0]),P(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return go().makeTensor(this.values,this.shape,this.dtype)}}let go=null,Ch=null;function lAe(t){go=t}function uAe(t){Ch=t}class Xt{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ie(e),this.strides=Ge(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Ch.buffer(this.shape,this.dtype,e)}bufferSync(){return Ch.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ki(this.shape,e,this.dtype==="complex64")}arraySync(){return Ki(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=go().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Kl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),go().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=go().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Kl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await go().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(go().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ch.print(this,e)}clone(){return this.throwIfDisposed(),Ch.clone(this)}toString(e=!1){const n=this.dataSync();return oAe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ch.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),go().makeVariable(this,e,n,r)}}Object.defineProperty(Xt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function se(){return FA("Tensor",()=>Xt)}se();class Fx extends Xt{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Ct(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);go().disposeTensor(this),this.dataId=e.dataId,go().incRef(this,null)}dispose(){go().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Fx,Symbol.hasInstance,{value:t=>t instanceof Xt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var p6;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(p6||(p6={}));var L$;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(L$||(L$={}));var B$;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(B$||(B$={}));var z$;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(z$||(z$={}));var V$;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(V$||(V$={}));const cAe={float32:z$,int32:L$,bool:B$,complex64:V$};function ti(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return cAe[t][e]}function L3(t){return ti(t,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(t,e){if(t.dtype===e.dtype)return[t,e];const n=ti(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function q7(t){const e=[];return K7(t,e,new Set),e}function K7(t,e,n){if(t==null)return;if(t instanceof Xt){e.push(t);return}if(!hAe(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),K7(i,e,n))}}function hAe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dI(t){return t.kernelName!=null}class m6{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Wf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new m6}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(hi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new tAe(this.backendInstance),!0}setupRegisteredKernels(){o6(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){o6(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof DA)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,hi(`Initialization of backend ${e} failed`),hi(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return hi(`Initialization of backend ${e} failed`),hi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Wf.nextTensorId++}nextVariableId(){return Wf.nextVariableId++}clone(e){const n=G.runKernel(ry,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return G.runKernel(jg,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(D$(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=dI(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(dI(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=D$(p,this.backendName);P(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,b);const x=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(p,m,x);r=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:p}=e,m=g=>{!s||(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:h}=e,f=dI(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(d=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),n=d.outputs)}),s&&this.addTapeNode(u,c,n,f,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=i6(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(P(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&Dg(e[0])&&(i=e.map(l=>Pl(l)));const o=s.write(i,n,r),a=new Xt(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),u=P_e(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new Xt(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new Fx(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*T$(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Fx||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*T$(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=i6(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=u=>(u=u.map((c,h)=>{if(c==null){const f=r[h],d=es(f.size,f.dtype);return this.makeTensor(d,f.shape,f.dtype)}return c}),s(u.length>1?u:u[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=q7(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(P(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));P(i instanceof Xt,()=>"The result y returned by f() must be a tensor.");const o=sAe(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r==null?fAe(i.shape):r,iAe(a,o,u=>this.tidy(u),dAe);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return P(N$(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{P(n.every(a=>a instanceof Xt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),P(r.value instanceof Xt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),P(N$(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];P(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),P(c.every(f=>f instanceof Xt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return c.forEach((f,d)=>{h[d]=()=>f}),h};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Is(),r=await this.backend.time(e);return r.wallMs=Is()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new m6;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Wf.nextTensorId=0;Wf.nextVariableId=0;function fAe(t){const e=MA(ie(t),"float32");return G.makeTensor(e,t,"float32")}function X7(){const t=M7();if(t._tfengine==null){const e=new F_e(t);t._tfengine=new Wf(e)}return V_e(t._tfengine.ENV),lAe(()=>t._tfengine),t._tfengine}const G=X7();function dAe(t,e){const n={a:t,b:e};return G.runKernel(Cd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pAe(){return typeof navigator<"u"&&navigator!=null}function Y7(t){if(t||pAe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Q7(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zi=re();Zi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Zi.registerFlag("IS_BROWSER",()=>Q7());Zi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Zi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Zi.registerFlag("PROD",()=>!1);Zi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Zi.getBool("DEBUG"));Zi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Zi.registerFlag("IS_TEST",()=>!1);Zi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);Zi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Zi.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oy(t,e){let n=t;if(oa(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||oa(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&re().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&J7(t,r,[]),r}function J7(t,e,n){if(n=n||[],!Array.isArray(t)&&!oa(t)){P(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}P(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),P(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)J7(t[s],r,n.concat(s))}function g6(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function F(t,e,n,r="numeric"){if(t instanceof Xt)return g6(r,t.dtype,e,n),t;let s=Pg(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),g6(r,s,e,n),t==null||!oa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Oy(t,s);!oa(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?th(t,s):Bf(t,[],!0);return G.makeTensor(a,i,s)}function Z7(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>F(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe="__op";function q(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+mAe;const s=(...i)=>{G.startScope(n);try{const o=r(...i);return Vf(o)&&console.error("Cannot return a Promise inside of tidy."),G.endScope(o),o}catch(o){throw G.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gAe(t,e){const n=F(t,"real","complex"),r=F(e,"imag","complex");no(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return G.runKernel(jA,s)}const Xl=q({complex_:gAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ry(t,e,n,r){if(r==null&&(r=Pg(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!oa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){D7(e);const s=ie(e),i=ie(n);P(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==ie(e.slice(o)):!0;P(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!oa(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?th(t,r):Bf(t,[],!0),G.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ml(t,e,n){const r=Oy(t,n);return Ry(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lx=4;async function v6(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async h=>{const f=await l.bytes(),d=f.reduce((g,y)=>g+y.length,0)+Lx*f.length,p=new Uint8Array(d);let m=0;for(let g=0;g<f.length;g++){const y=f[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=Lx,p.set(y,m),m+=y.length}h(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:yAe(i),specs:n}}function eG(t,e){const n={};let r,s=0;for(const i of e){const o=i.name,a=i.dtype,l=i.shape,u=ie(l);let c;if("quantization"in i){const h=i.quantization;if(h.dtype==="uint8"||h.dtype==="uint16"){if(!("min"in h&&"scale"in h))throw new Error(`Weight ${i.name} with quantization ${h.dtype} doesn't have corresponding metadata min and scale.`)}else if(h.dtype==="float16"){if(a!=="float32")throw new Error(`Weight ${i.name} is quantized with ${h.dtype} which only supports weights of type float32 not ${a}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${h.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const f=y6[h.dtype],d=t.slice(s,s+u*f),p=h.dtype==="uint8"?new Uint8Array(d):new Uint16Array(d);if(a==="float32")if(h.dtype==="uint8"||h.dtype==="uint16"){c=new Float32Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];c[m]=g*h.scale+h.min}}else if(h.dtype==="float16")r===void 0&&(r=IAe()),c=r(p);else throw new Error(`Unsupported quantization type ${h.dtype} for weight type float32.`);else if(a==="int32"){if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error(`Unsupported quantization type ${h.dtype} for weight type int32.`);c=new Int32Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];c[m]=Math.round(g*h.scale+h.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${a}`);s+=u*f}else if(a==="string"){const h=ie(i.shape);c=[];for(let f=0;f<h;f++){const d=new Uint32Array(t.slice(s,s+Lx))[0];s+=Lx;const p=new Uint8Array(t.slice(s,s+d));c.push(p),s+=d}}else{const h=y6[a],f=t.slice(s,s+u*h);if(a==="float32")c=new Float32Array(f);else if(a==="int32")c=new Int32Array(f);else if(a==="bool")c=new Uint8Array(f);else if(a==="complex64"){c=new Float32Array(f);const d=new Float32Array(c.length/2),p=new Float32Array(c.length/2);for(let y=0;y<d.length;y++)d[y]=c[y*2],p[y]=c[y*2+1];const m=Ml(d,l,"float32"),g=Ml(p,l,"float32");n[o]=Xl(m,g),m.dispose(),g.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${a}`);s+=u*h}a!=="complex64"&&(n[o]=Ml(c,l,a))}return n}function yAe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const B3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function x6(t){return B3?Buffer.byteLength(t):new Blob([t]).size}function vAe(t){if(B3)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function xAe(t){if(B3){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function tG(t){if(t.length===1)return t[0];let e=0;t.forEach(s=>{e+=s.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(s=>{n.set(new Uint8Array(s),r),r+=s.byteLength}),n.buffer}function nG(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}async function bAe(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),t.weightsManifest!=null){const[r,s]=await e(t.weightsManifest);n.weightSpecs=r,n.weightData=s}return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),n}function W2(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:x6(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:x6(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function wAe(){const t=n=>{let r=n<<13,s=0;for(;(r&8388608)===0;)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function SAe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function kAe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function IAe(){const t=wAe(),e=SAe(),n=kAe();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Zn.instance==null&&(Zn.instance=new Zn),Zn.instance}static registerSaveRouter(e){Zn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Zn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Zn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Zn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Zn.getInstance().loadRouters:Zn.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const rG=t=>Zn.getSaveHandlers(t),sG=(t,e)=>Zn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U$="tensorflowjs",W$=1,Zu="models_store",ml="model_info_store";function iG(){if(!re().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function j$(t){const e=t.result;e.createObjectStore(Zu,{keyPath:"modelPath"}),e.createObjectStore(ml,{keyPath:"modelPath"})}class Rc{constructor(e){if(this.indexedDB=iG(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(U$,W$);i.onupgradeneeded=()=>j$(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Zu,"readonly"),u=a.objectStore(Zu).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(o.close(),s(u.error)),a.oncomplete=()=>o.close()}else{const a=W2(n),l=o.transaction(ml,"readwrite");let u=l.objectStore(ml);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a});let h;c.onsuccess=()=>{h=o.transaction(Zu,"readwrite");const d=h.objectStore(Zu).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a});d.onsuccess=()=>r({modelArtifactsInfo:a}),d.onerror=p=>{u=l.objectStore(ml);const m=u.delete(this.modelPath);m.onsuccess=()=>(o.close(),s(d.error)),m.onerror=g=>(o.close(),s(d.error))}},c.onerror=f=>(o.close(),s(c.error)),l.oncomplete=()=>{h==null?o.close():h.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}Rc.URL_SCHEME="indexeddb://";const oG=t=>re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Rc.URL_SCHEME)?CAe(t.slice(Rc.URL_SCHEME.length)):null;Zn.registerSaveRouter(oG);Zn.registerLoadRouter(oG);function CAe(t){return new Rc(t)}function TAe(t){return t.startsWith(Rc.URL_SCHEME)?t.slice(Rc.URL_SCHEME.length):t}class $Ae{constructor(){this.indexedDB=iG()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(U$,W$);r.onupgradeneeded=()=>j$(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(ml,"readonly"),a=i.objectStore(ml).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=TAe(e),new Promise((n,r)=>{const s=this.indexedDB.open(U$,W$);s.onupgradeneeded=()=>j$(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(ml,"readwrite"),a=o.objectStore(ml),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),h=()=>{u=i.transaction(Zu,"readwrite");const d=u.objectStore(Zu).delete(e);d.onsuccess=()=>n(l.result.modelArtifactsInfo),d.onerror=p=>r(l.error)};c.onsuccess=h,c.onerror=f=>(h(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wa="/",Th="tensorflowjs_models",aG="info",NAe="model_topology",EAe="weight_specs",_Ae="weight_data",AAe="model_metadata";function lG(t){return{info:[Th,t,aG].join(wa),topology:[Th,t,NAe].join(wa),weightSpecs:[Th,t,EAe].join(wa),weightData:[Th,t,_Ae].join(wa),modelMetadata:[Th,t,AAe].join(wa)}}function uG(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function OAe(t){const e=t.split(wa);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(wa)}function RAe(t){return t.startsWith(Dc.URL_SCHEME)?t.slice(Dc.URL_SCHEME.length):t}class Dc{constructor(e){if(!re().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=lG(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=W2(e);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,vAe(e.weightData));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch{throw uG(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=xAe(o),n}}Dc.URL_SCHEME="localstorage://";const cG=t=>re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Dc.URL_SCHEME)?DAe(t.slice(Dc.URL_SCHEME.length)):null;Zn.registerSaveRouter(cG);Zn.registerLoadRouter(cG);function DAe(t){return new Dc(t)}class PAe{constructor(){P(re().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),P(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Th+wa,r=wa+aG;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=OAe(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=RAe(e);const n=lG(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return uG(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6="://";class hl{constructor(){this.managers={}}static getInstance(){return hl.instance==null&&(hl.instance=new hl),hl.instance}static registerManager(e,n){P(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(b6)&&(e=e.slice(0,e.indexOf(b6))),P(e.length>0,()=>"scheme must not be an empty string.");const r=hl.getInstance();P(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=this.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MAe{fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}}if(re().get("IS_BROWSER")){re().setPlatform("browser",new MAe);try{hl.registerManager(Dc.URL_SCHEME,new PAe)}catch{}try{hl.registerManager(Rc.URL_SCHEME,new $Ae)}catch{}}const FAe={},LAe=Object.freeze(Object.defineProperty({__proto__:null,default:FAe},Symbol.toStringTag,{value:"Module"})),Dy=JQ(LAe);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe={importFetch:()=>Dy};let pI;class zAe{constructor(){this.util=Dy,this.textEncoder=new this.util.TextEncoder}fetch(e,n){return re().global.fetch!=null?re().global.fetch(e,n):(pI==null&&(pI=BAe.importFetch()),pI(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}re().get("IS_NODE")&&!re().get("IS_BROWSER")&&re().setPlatform("node",new zAe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dt(t,e="float32",n){return e=e||"float32",D7(t),new xr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t,e){const n=F(t,"x","cast");if(!D_e(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return G.runKernel(jg,r,s)}const Ie=q({cast_:VAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(t){const n={x:F(t,"x","clone","string_or_numeric")};return G.runKernel(ry,n)}const Fl=q({clone_:UAe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */X7();const jAe={buffer:dt,cast:Ie,clone:Fl,print:WAe};uAe(jAe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe="model",HAe=".json",qAe=".weights.bin";function w6(t){return new Promise(e=>setTimeout(e)).then(t)}class Pc{constructor(e){if(!re().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Pc.URL_SCHEME)&&(e=e.slice(Pc.URL_SCHEME.length)),(e==null||e.length===0)&&(e=GAe),this.modelJsonFileName=e+HAe,this.weightDataFileName=e+qAe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=nG(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await w6(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;a.download=this.weightDataFileName,a.href=n,await w6(()=>a.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:W2(e)}}}}Pc.URL_SCHEME="downloads://";const KAe=t=>re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Pc.URL_SCHEME)?XAe(t.slice(Pc.URL_SCHEME.length)):null;Zn.registerSaveRouter(KAe);function XAe(t="model"){return new Pc(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6(t,e,n,r){o(t),n=n==null?0:n,r=r==null?1:r,a(n,r);let s=0;const i=l=>(l.then(u=>{const c=n+ ++s/t.length*(r-n);return e(c),u}),l);function o(l){P(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){P(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),P(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),P(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function YAe(t,e){e==null&&(e={});const n=e.fetchFunc==null?re().platform.fetch:e.fetchFunc,r=t.map(h=>n(h,e.requestInit,{isBinary:!0})),s=0,i=.5,a=(e.onProgress==null?await Promise.all(r):await S6(r,e.onProgress,s,i)).map(h=>h.arrayBuffer()),l=.5,u=1;return e.onProgress==null?await Promise.all(a):await S6(a,e.onProgress,l,u)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe="application/octet-stream",JAe="application/json";class z3{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(P(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=re().platform.fetch,P(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&P(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=nG(e,r);n.body.append("model.json",new Blob([JSON.stringify(s)],{type:JAe}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:QAe}),"model.weights.bin");const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:W2(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return bAe(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=ZAe(n),i=this.weightPathPrefix||r,o=[];for(const c of e)o.push(...c.weights);const a=[],l=[];for(const c of e)for(const h of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(h)):a.push(i+h+s);this.weightUrlConverter&&a.push(...await Promise.all(l));const u=await YAe(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,tG(u)]}}z3.URL_SCHEME_REGEX=/^https?:\/\//;function ZAe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function k6(t){return t.match(z3.URL_SCHEME_REGEX)!=null}const hG=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>k6(r)):n=k6(t),n)return fG(t,e)}return null};Zn.registerSaveRouter(hG);Zn.registerLoadRouter(hG);function fG(t,e){return new z3(t,e)}function G$(t,e){return fG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(t,e,n=!1,r=!1){let s=F(t,"a","matMul"),i=F(e,"b","matMul");[s,i]=Pn(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return G.runKernel(qw,o,a)}const Mt=q({matMul_:e3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t,e,n=1,r=0){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:F(t,"indices","oneHot","int32")},o={depth:e,onValue:n,offValue:r};return G.runKernel(I2,i,o)}const V3=q({oneHot_:t3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ga(){return G}function H$(){return G.memory()}function Y(t,e){return G.tidy(t,e)}function je(t){q7(t).forEach(n=>n.dispose())}function _r(t){return G.keep(t)}function Bx(){return G.backendName}function dG(t,e,n=1){return G.registerBackend(t,e,n)}function pG(){return G.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(t){const n={input:F(t,"input","imag")};return G.runKernel(a3,n)}const j2=q({imag_:n3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(t){const n={x:F(t,"x","neg")};return G.runKernel(w2,n)}const wn=q({neg_:r3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t){const n={input:F(t,"input","real")};return G.runKernel(v3,n)}const Fm=q({real_:s3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3e(t,e,n){const r=F(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),P(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{P(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?Y(()=>{let o=Fm(r),a=j2(r);return o=G.runKernel(lf,{x:o},i),a=G.runKernel(lf,{x:a},i),n&&(a=wn(a)),Xl(o,a)}):G.runKernel(lf,s,i)}const xt=q({transpose_:i3e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jf(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function ur(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function rt(t,e){const n=[],r=Math.max(t.length,e.length);for(let s=0;s<r;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else n.unshift(i)}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(t,e,n){if(PA(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Oy(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ry(t,e,r,n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Tu;function a3e(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(s&&s&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(D$(O$,G.backendName)!=null){const p={pixels:t},m={numChannels:e};return G.runKernel(O$,p,m)}const[u,c]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let h;if(o)h=t.getContext("2d").getImageData(0,0,u,c).data;else if(r||n)h=t.data;else if(i||s||a){if(Tu==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Tu=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Tu=document.createElement("canvas").getContext("2d");Tu.canvas.width=u,Tu.canvas.height=c,Tu.drawImage(t,0,0,u,c),h=Tu.getImageData(0,0,u,c).data}let f;if(e===4)f=new Int32Array(h);else{const p=u*c;f=new Int32Array(p*e);for(let m=0;m<p;m++)for(let g=0;g<e;++g)f[m*e+g]=h[m*4+g]}return o3e(f,[c,u,e],"int32")}async function U3(t,e){let n=F(t,"img","toPixels");if(!(t instanceof Xt)){const u=n;n=Ie(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let u=0;u<r*s;++u){const c=[0,0,0,255];for(let f=0;f<i;f++){const d=o[u*i+f];if(n.dtype==="float32"){if(d<0||d>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${d}.`)}else if(n.dtype==="int32"&&(d<0||d>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${d}.`);i===1?(c[0]=d*a,c[1]=d*a,c[2]=d*a):c[f]=d*a}const h=u*4;l[h+0]=Math.round(c[0]),l[h+1]=Math.round(c[1]),l[h+2]=Math.round(c[2]),l[h+3]=Math.round(c[3])}if(e!=null){e.width=s,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,s,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const mG=q({fromPixels_:a3e});function W3(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ie(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let h=0;h<s.length-1;++h)o*=s[h];const a=t.shape,l=s.slice();l.pop();let u=1;for(let h=i;h<n;++h)u*=a[h],l.push(a[h]);const c=[...Ge(t.shape).map(h=>h/u),1].slice(0,i);return[l,o,u,c]}function gG(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function yG(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}gG(n,e,t)}function Py(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let h=s;h<i;++h)o*=n[h];const a=s<1?1:s,l=ie(e.shape)/a,u=[...Ge(n.slice(0,s)),1],c=ie(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$=-2,l3e=-1;function j3(t,e,n){const r=t.shape.length;P(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),P(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)P(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function u3e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function G3(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function vG(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function xG(t,e,n){return n<=t?n:n-(e-1)}function bG(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function c3e(t,e,n,r,s,i,o,a,l){const u=t.length;let c=new Array(u),h=new Array(u),f=new Array(u);if(e.length&&n>0){const d=e[0],p=n+1;c=wG(o,d,p,r,t),h=SG(a,d,p,s,t),f=vG(i,d,p,t)}else for(let d=0;d<u;d++)c[d]=IG(o,r,i,t,d,l),h[d]=CG(a,s,i,t,d,l),f[d]=kG(i,d,l);return{begin:c,end:h,strides:f}}function wG(t,e,n,r,s){const i=[...s],o=bG(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=xG(e,n,a);let u=r[l];t&1<<l&&(u=0),i[a]=u}return i}function SG(t,e,n,r,s){const i=[...s],o=bG(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=xG(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[a]=u}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=Oc(0,i[a],s[a])}return i}function kG(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function IG(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=Oc(0,o,l-1),o}function CG(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=Oc(0,o,l):o=Oc(-1,o,l-1),o}function H3(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function q3(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function G2(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{P(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(P(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function K3(t,e,n,r,s,i,o,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const h={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<h.dims;b++)c&&(1<<b&a)!==0&&h.numAddAxisAfterEllipsis++,1<<b&o&&(c=!0);c||(h.ellipsisMask|=1<<h.dims,h.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};h3e(h,f);let d=!0,p=!0,m=!0;const g=[],y=[];for(let b=0;b<t.length;++b){if(f.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const x=!!(f.shrinkAxisMask&1<<b),w=t[b];if(w===-1){g.push(x?1:-1);continue}const S=[f.beginMask&1<<b,f.endMask&1<<b],k=[f.strides[b]>0?0:-1,f.strides[b]>0?w:w-1];if(x&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[b]===1;const I=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(x){const R=f.begin[b]<0?w+f.begin[b]:f.begin[b];if(f.begin[b]=R,f.end[b]=f.begin[b]+1,R<0||R>=w)throw Error(`slice index ${f.begin[b]} of dimension ${b} out of bounds.`)}else f.begin[b]=I6(f.begin[b],0,f.strides[b],w,S,k),f.end[b]=I6(f.end[b],1,f.strides[b],w,S,k);const A=f.strides[b]===1&&f.begin[b]===0&&f.end[b]===w;d=d&&A,p=p&&(b===0&&f.strides[b]===1||A)}else d=d&&f.strides[b]===1&&I,p=p&&(b===0&&f.strides[b]===1||I);let T,N=!1;if(f.beginValid&&f.endValid?(T=f.end[b]-f.begin[b],N=!0):x?(T=1,N=!0):I&&w>=0&&(f.strides[b]<0?T=-w:T=w,N=!0),N){let A;T===0||T<0!=f.strides[b]<0?A=0:A=Math.trunc(T/f.strides[b])+(T%f.strides[b]!==0?1:0),g.push(A)}else g.push(-1)}for(let b=0;b<f.finalShapeGatherIndices.length;++b){const x=f.finalShapeGatherIndices[b];x>=0?y.push(g[x]):x===q$&&y.push(1)}return{finalShapeSparse:y.filter((b,x)=>f.finalShapeGatherIndices[x]!==q$),finalShape:y,isIdentity:d,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function h3e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(q$),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(l3e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function I6(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const f3e=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:j3,maskToAxes:u3e,computeOutShape:G3,stridesWithElidedDims:vG,getNormalizedAxes:c3e,startIndicesWithElidedDims:wG,stopIndicesWithElidedDims:SG,stridesForAxis:kG,startForAxis:IG,stopForAxis:CG,isSliceContinous:H3,computeFlatOffset:q3,parseSliceParams:G2,sliceInfo:K3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Td{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Li{constructor(){this.classNameMap={}}static getMap(){return Li.instance==null&&(Li.instance=new Li),Li.instance}static register(e){Li.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ge(t){P(t.className!=null,()=>"Class being registered does not have the static className property defined."),P(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),P(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Li.register(t)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(t,e){let n=F(t,"a","add"),r=F(e,"b","add");[n,r]=Pn(n,r);const s={a:n,b:r};return G.runKernel(Cd,s)}const de=q({add_:d3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(t,e){let n=F(t,"a","floorDiv"),r=F(e,"b","floorDiv");[n,r]=Pn(n,r);const s={a:n,b:r};return G.runKernel(ty,s)}const X3=q({floorDiv_:p3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3e(t,e){let n=F(t,"a","div"),r=F(e,"b","div");if([n,r]=Pn(n,r),n.dtype==="int32"&&r.dtype==="int32")return X3(n,r);const s={a:n,b:r},i={};return G.runKernel(Xg,s,i)}const Ne=q({div_:m3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(t,e){let n=F(t,"a","mul"),r=F(e,"b","mul");[n,r]=Pn(n,r);const s={a:n,b:r};return G.runKernel(fy,s)}const W=q({mul_:g3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(t){const e=F(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return G.runKernel(Xw,n)}else{const n={x:e};return G.runKernel(Vw,n)}}const tr=q({abs_:y3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3e(t){const n={x:F(t,"x","acos")};return G.runKernel(Fg,n)}const TG=q({acos_:v3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(t){const n={x:F(t,"x","acosh")};return G.runKernel(Lg,n)}const $G=q({acosh_:x3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t){P(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),P(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>F(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Ct(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return G.runKernel(Uw,r)}const w3e=q({addN_:b3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(t,e=null,n=!1){const s={x:F(t,"x","all","bool")},i={axis:e,keepDims:n};return G.runKernel(LA,s,i)}const Y3=q({all_:S3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3e(t,e=null,n=!1){const s={x:F(t,"x","any","bool")},i={axis:e,keepDims:n};return G.runKernel(BA,s,i)}const zx=q({any_:k3e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t,e=0){const r={x:F(t,"x","argMax")},s={axis:e};return G.runKernel(Ww,r,s)}const Mc=q({argMax_:I3e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3e(t,e=0){const r={x:F(t,"x","argMin")},s={axis:e};return G.runKernel(jw,r,s)}const NG=q({argMin_:C3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(t){const n={x:F(t,"x","asin")};return G.runKernel(Bg,n)}const EG=q({asin_:T3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(t){const n={x:F(t,"x","asinh")};return G.runKernel(zg,n)}const _G=q({asinh_:$3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(t){const n={x:F(t,"x","atan")};return G.runKernel(Vg,n)}const AG=q({atan_:N3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t,e){let n=F(t,"a","atan2"),r=F(e,"b","atan2");[n,r]=Pn(n,r);const s={a:n,b:r};return G.runKernel(Wg,s)}const OG=q({atan2_:E3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3e(t){const n={x:F(t,"x","atanh")};return G.runKernel(Ug,n)}const RG=q({atanh_:_3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function My(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=Ka(s);return wr(t,a,n,i,r,null,null,l)}function ro(t,e,n,r,s,i,o="channelsLast"){const[a,l]=Vx(e);let u;if(o==="channelsLast")u=[a,l,t[3],t[3]];else if(o==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return wr(t,u,n,r,s,i,!1,o)}function qa(t,e,n,r,s,i,o="NDHWC"){const[a,l,u]=K$(e);let c,h;if(o==="NDHWC")h="channelsLast",c=[a,l,u,t[4],t[4]];else if(o==="NCDHW")h="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return mu(t,c,n,r,s,!1,h,i)}function wr(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,u,c,h]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,h]=t;else if(a==="channelsFirst")[l,h,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,d,,p]=e,[m,g]=Vx(n),[y,v]=Vx(r),b=uf(f,y),x=uf(d,v),{padInfo:w,outHeight:S,outWidth:k}=R3e(s,u,c,m,g,b,x,i,a),I=o?p*h:p;let T;return a==="channelsFirst"?T=[l,I,S,k]:a==="channelsLast"&&(T=[l,S,k,I]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:h,outHeight:S,outWidth:k,outChannels:I,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:d,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:t,outShape:T,filterShape:e}}function mu(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,u,c,h,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,h,f]=t;else if(o==="channelsFirst")[l,f,u,c,h]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,p,m,,g]=e,[y,v,b]=K$(n),[x,w,S]=K$(r),k=uf(d,x),I=uf(p,w),T=uf(m,S),{padInfo:N,outDepth:A,outHeight:R,outWidth:O}=D3e(s,u,c,h,y,v,b,k,I,T,a),M=i?g*f:g;let z;return o==="channelsFirst"?z=[l,M,A,R,O]:o==="channelsLast"&&(z=[l,A,R,O,M]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:h,inChannels:f,outDepth:A,outHeight:R,outWidth:O,outChannels:M,padInfo:N,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:d,filterHeight:p,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:x,dilationHeight:w,dilationWidth:S,inShape:t,outShape:z,filterShape:e}}function A3e(t,e,n,r,s){r==null&&(r=Q3(t,e,n));const i=t[0],o=t[1],a=lc((i-e+2*r)/n+1,s),l=lc((o-e+2*r)/n+1,s);return[a,l]}function O3e(t,e,n,r,s,i){s==null&&(s=Q3(t,e,r));const o=t[0],a=t[1],l=t[2],u=lc((o-e+2*s)/r+1,i),c=lc((a-e+2*s)/r+1,i),h=lc((l-e+2*s)/r+1,i);return[u,c,h,n]}function Q3(t,e,n,r=1){const s=uf(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Vx(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function K$(t){return typeof t=="number"?[t,t,t]:t}function uf(t,e){return e<=1?t:t+(t-1)*(e-1)}function R3e(t,e,n,r,s,i,o,a,l){let u,c,h;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const d=A3e([e,n],i,r,t,a);c=d[0],h=d[1]}else if(t==="same"){c=Math.ceil(e/r),h=Math.ceil(n/s);const f=Math.max(0,(c-1)*r+i-e),d=Math.max(0,(h-1)*s+o-n),p=Math.floor(f/2),m=f-p,g=Math.floor(d/2),y=d-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),h=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],d=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:f,bottom:d,left:p,right:m,type:f===0&&d===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=lc((e-i+f+d)/r+1,a),h=lc((n-o+p+m)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:h}}function D3e(t,e,n,r,s,i,o,a,l,u,c){let h,f,d,p;if(typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=O3e([e,n,r,1],a,1,s,t,c);f=g[0],d=g[1],p=g[2]}else if(t==="same"){f=Math.ceil(e/s),d=Math.ceil(n/i),p=Math.ceil(r/o);const m=(f-1)*s+a-e,g=(d-1)*i+l-n,y=(p-1)*o+u-r,v=Math.floor(m/2),b=m-v,x=Math.floor(g/2),w=g-x,S=Math.floor(y/2),k=y-S;h={top:x,bottom:w,left:S,right:k,front:v,back:b,type:"SAME"}}else if(t==="valid")h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((e-a+1)/s),d=Math.ceil((n-l+1)/i),p=Math.ceil((r-u+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:f,outHeight:d,outWidth:p}}function lc(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Yl(t){const[e,n,r]=Vx(t);return e===1&&n===1&&r===1}function Br(t,e){return Yl(t)||Yl(e)}function Ka(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function xs(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")P(zf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{P(zf(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t,e){const r={x:F(t,"x","reshape","string_or_numeric")},s={shape:e};return G.runKernel(E2,r,s)}const H=q({reshape_:P3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(t,e,n,r,s){const i=F(t,"x","avgPool","float32"),o=1;P(Br(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=H(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),xs("avgPool",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let h=G.runKernel(Gw,u,c);return h=Ie(h,i.dtype),l?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const H2=q({avgPool_:M3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3e(t,e,n,r,s,i="NDHWC"){const o=F(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=H(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),P(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),P(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),xs("avgPool3d",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let h=G.runKernel(Hw,u,c);return h=Ie(h,a.dtype),l?H(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const DG=q({avgPool3d_:F3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(t,e=0){P(t.length>=1,()=>"Pass at least one tensor to concat");const n=Z7(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Fl(n[0]);const r=n,s={axis:e};return G.runKernel(Yw,r,s)}const Rn=q({concat_:L3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(t){const n={x:F(t,"x","sigmoid","float32")};return G.runKernel(ky,n)}const ha=q({sigmoid_:B3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3e(t,e,n){const r=F(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return G.runKernel(D2,s,i)}const Je=q({slice_:z3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(t){const n={x:F(t,"x","tanh","float32")};return G.runKernel(Ey,n)}const q2=q({tanh_:V3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3e(t,e,n){const r=F(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);P(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),P(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),P(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return G.runKernel(Kw,i,o)}const K2=q({batchToSpaceND_:U3e});function W3e(t){let e;return t.rank===0||t.rank===1?e=H(t,[1,1,1,t.size]):t.rank===2?e=H(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=H(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t,e,n,r,s,i){i==null&&(i=.001);const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let u;s!=null&&(u=F(s,"scale","batchNorm"));let c;r!=null&&(c=F(r,"offset","batchNorm")),P(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:W3e(o),scale:u,offset:c,mean:a,variance:l},d={varianceEpsilon:i},p=G.runKernel(i2,f,d);return H(p,o.shape)}const Gf=q({batchNorm_:j3e});function G3e(t,e,n,r,s,i){const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let u;s!=null&&(u=F(s,"scale","batchNorm"));let c;return r!=null&&(c=F(r,"offset","batchNorm")),P(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),P(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),P(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Gf(o,a,l,c,u,i)}const H3e=q({batchNorm2d_:G3e});function q3e(t,e,n,r,s,i){const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let u;s!=null&&(u=F(s,"scale","batchNorm"));let c;return r!=null&&(c=F(r,"offset","batchNorm")),P(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),P(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),P(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Gf(o,a,l,c,u,i)}const K3e=q({batchNorm3d_:q3e});function X3e(t,e,n,r,s,i){const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let u;s!=null&&(u=F(s,"scale","batchNorm"));let c;return r!=null&&(c=F(r,"offset","batchNorm")),P(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),P(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),P(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Gf(o,a,l,c,u,i)}const Y3e=q({batchNorm4d_:X3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q3e(t,e,n){const r=F(t,"x","bincount"),s=F(e,"weights","bincount");P(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return G.runKernel(UA,i,o)}const PG=q({bincount_:Q3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(t,e){const n=F(t,"s0","broadcastArgs","int32"),r=F(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return G.runKernel(WA,s)}const Z3e=q({broadcastArgs_:J3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eOe(t,e){let n=F(t,"broadcastTo","x");const r=n.shape;if(e.some(u=>!(u>0)||u%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=H(n,u)}const s=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(s[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return Fl(n);const a={x:n},l={reps:i};return G.runKernel(_y,a,l)}const uc=q({broadcastTo_:eOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tOe(t){const n={x:F(t,"x","ceil","float32")};return G.runKernel(Gg,n)}const MG=q({ceil_:tOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nOe(t,e,n){const r=F(t,"x","clipByValue");P(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`);const s={x:r},i={clipValueMin:e,clipValueMax:n};return G.runKernel(Hg,s,i)}const Rs=q({clipByValue_:nOe});function rOe(t){return Rn(t,0)}const sOe=q({concat1d_:rOe});function iOe(t,e){return Rn(t,e)}const oOe=q({concat2d_:iOe});function aOe(t,e){return Rn(t,e)}const lOe=q({concat3d_:aOe});function uOe(t,e){return Rn(t,e)}const cOe=q({concat4d_:uOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOe(t,e,n,r,s="NHWC",i=[1,1],o){const a=F(t,"x","conv2d","float32"),l=F(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),P(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),xs("conv2d",r,o);const h=s==="NHWC"?u.shape[3]:u.shape[1];P(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),P(Br(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const f={x:u,filter:l},d={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=G.runKernel(Qw,f,d);return c?H(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ql=q({conv2d_:hOe});function fOe(t,e,n,r,s="NWC",i=1,o){const a=F(t,"x","conv1d"),l=F(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=H(a,[1,a.shape[0],a.shape[1]])),P(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),P(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),xs("conv1d",r,o),P(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),P(Br(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),P(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=H(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=H(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=Ql(f,h,[1,n],r,"NHWC",[1,i],o);return c?H(g,[g.shape[2],g.shape[3]]):H(g,[g.shape[0],g.shape[2],g.shape[3]])}const J3=q({conv1d_:fOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(t,e,n,r,s,i="NHWC",o){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),P(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),P(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),P(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?a[3]:a[1],h=i==="NHWC"?l.shape[3]:l.shape[1];P(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),P(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),xs("conv2dDerInput",s,o);const f={dy:l,filter:n},d={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},p=G.runKernel(Jw,f,d);return u?H(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Z3=q({conv2DBackpropInput_:dOe});function pOe(t,e,n,r,s,i){const o=F(t,"x","conv2dTranspose"),a=F(e,"filter","conv2dTranspose");return Z3(n,o,a,r,s,"NHWC",i)}const eO=q({conv2dTranspose_:pOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=F(t,"x","conv3d"),a=F(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=H(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),P(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),P(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),P(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),P(Br(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),P(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`);const c={x:l,filter:a},h={strides:n,pad:r,dataFormat:s,dilations:i},f=G.runKernel(Zw,c,h);return u?H(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const FG=q({conv3d_:mOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(t,e,n,r,s){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=H(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];P(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),P(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),P(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),P(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),P(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},h={pad:s,strides:r,inputShape:i},f=G.runKernel(qA,c,h);return a?H(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const LG=q({conv3DBackpropInput_:gOe});function yOe(t,e,n,r,s){const i=F(t,"x","conv3dTranspose"),o=F(e,"filter","conv3dTranspose");return LG(n,i,o,r,s)}const vOe=q({conv3dTranspose_:yOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(t){const n={x:F(t,"x","cos","float32")};return G.runKernel(qg,n)}const X2=q({cos_:xOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bOe(t){const n={x:F(t,"x","cosh","float32")};return G.runKernel(Kg,n)}const tO=q({cosh_:bOe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wOe(t,e=0,n=!1,r=!1){const i={x:F(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return G.runKernel(KA,i,o)}const Ux=q({cumprod_:wOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SOe(t,e=0,n=!1,r=!1){const i={x:F(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return G.runKernel(e2,i,o)}const nO=q({cumsum_:SOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(t,e,n,r=!1){const s=F(t,"x","denseBincount"),i=F(e,"weights","denseBincount");P(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),P(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return G.runKernel(YA,o,a)}const IOe=q({denseBincount_:kOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function COe(t,e,n="NHWC"){const r=F(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];P(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),P(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),P(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),P(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return G.runKernel(QA,a,l)}const BG=q({depthToSpace_:COe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TOe(t,e,n,r,s="NHWC",i=[1,1],o){const a=F(t,"x","depthwiseConv2d","float32"),l=F(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),P(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),P(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),xs("depthwiseConv2d",r,o);const h={x:u,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},d=G.runKernel(t2,h,f);return c?H(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Fy=q({depthwiseConv2d_:TOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(t,e,n,r,s=[1,1],i="NHWC"){const o=F(t,"x","dilation2d"),a=F(e,"filter","dilation2d");P(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),P(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),P(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=H(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:a},h={strides:n,pad:r,dilations:s},f=G.runKernel(n2,c,h);return u?H(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const zG=q({dilation2d_:$Oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NOe(t,e){let n=F(t,"a","equal","string_or_numeric"),r=F(e,"b","equal","string_or_numeric");[n,r]=Pn(n,r),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(r2,s)}const Io=q({equal_:NOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t,e,n){const r=F(e,"a","where"),s=F(n,"b","where"),i=F(t,"condition","where","bool"),o=rt(rt(i.shape,r.shape),s.shape),a=uc(i,o),l=uc(r,o),u=uc(s,o),c={condition:a,t:l,e:u};return G.runKernel(R2,c)}const Ds=q({where_:EOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(t){const n={x:F(t,"x","zerosLike")};return G.runKernel(V2,n)}const bt=q({zerosLike_:_Oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(t,e){let n=F(t,"a","div"),r=F(e,"b","div");[n,r]=Pn(n,r);const s=Ne(n,r),i=bt(s),o=Io(r,i);return Ds(o,i,s)}const VG=q({divNoNan_:AOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(t,e){const n=F(t,"t1","dot"),r=F(e,"t2","dot");P((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(P(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=H(n,[1,-1]),a=H(r,[-1,1]),l=Mt(o,a);return H(l,[])}else if(n.rank===1&&r.rank===2){const o=H(n,[1,-1]),a=H(r,[r.shape[0],r.shape[1]]),l=Mt(o,a);return H(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=H(r,[-1,1]),a=Mt(n,o);return H(a,[a.size])}else{const o=H(r,[r.shape[0],r.shape[1]]);return Mt(n,o)}}const ROe=q({dot_:OOe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(t,...e){const n=e.map((s,i)=>F(s,`tensors${i}`,"einsum")),r={equation:t};return G.runKernel(e3,n,r)}const POe=q({einsum_:DOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(t){const n={x:F(t,"x","elu","float32")};return G.runKernel(Yg,n)}const Ly=q({elu_:MOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(t){let e=F(t,"x","erf");P(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ie(e,"float32"));const n={x:e};return G.runKernel(Qg,n)}const UG=q({erf_:FOe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function WG(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Sr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function zn(t,e){const n=e.map(r=>1);return WG(t,n,e)}function zr(t,e,n){P(rO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Nn(t,e){if(rO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function gu(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Vn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t,e=null,n=!1){const s={x:F(t,"x","max")},i={reductionIndices:e,keepDims:n};return G.runKernel(m2,s,i)}const Xi=q({max_:LOe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(t,e=null,n=!1){const s={x:F(t,"x","min")},i={axis:e,keepDims:n};return G.runKernel(x2,s,i)}const Wx=q({min_:BOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t,e){let n=F(t,"base","pow"),r=F(e,"exp","pow");[n,r]=Pn(n,r);const s={a:n,b:r};return G.runKernel(dy,s)}const Fc=q({pow_:zOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ze(t,e){if((oa(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&oa(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ry(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(t){const n={x:F(t,"x","sqrt","float32")};return G.runKernel(Cy,n)}const ts=q({sqrt_:VOe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t){const e=F(t,"x","square"),n={};return G.runKernel("Square",{x:e},n)}const Yt=q({square_:UOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t,e=null,n=!1){let r=F(t,"x","sum");r.dtype==="bool"&&(r=Ie(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return G.runKernel(P2,s,i)}const Be=q({sum_:WOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(t,e="euclidean",n=null,r=!1){t=F(t,"x","norm");const s=jG(t,e,n);let i=s.shape;if(r){const o=pt(n,t.shape);i=zn(s.shape,o)}return H(s,i)}function jG(t,e,n=null){if(t.rank===0)return tr(t);if(t.rank!==1&&n===null)return jG(H(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Be(tr(t),n);if(e===1/0)return Xi(tr(t),n);if(e===-1/0)return Wx(tr(t),n);if(e==="euclidean"||e===2)return ts(Be(Fc(tr(t),ze(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Xi(Be(tr(t),n[0]),n[1]-1);if(e===1/0)return Xi(Be(tr(t),n[1]),n[0]);if(e===-1/0)return Wx(Be(tr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ts(Be(Yt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Hf=q({norm_:jOe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOe(t,e=null,n=!1){return Hf(t,"euclidean",e,n)}const GG=q({euclideanNorm_:GOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t){const n={x:F(t,"x","exp")};return G.runKernel(Jg,n)}const Ps=q({exp_:HOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qOe(t,e=0){const n=F(t,"x","expandDims","string_or_numeric");P(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return G.runKernel(s2,r,s)}const qn=q({expandDims_:qOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(t){const n={x:F(t,"x","expm1")};return G.runKernel(Zg,n)}const HG=q({expm1_:KOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(t,e){const n=F(t,"x","tile","string_or_numeric");P(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return G.runKernel(_y,r,s)}const ji=q({tile_:XOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOe(t,e,n,r="float32"){e==null&&(e=t);const s=dt([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=H(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return ji(qn(o,0),[n[0],1,1]);if(n.length===2)return ji(qn(qn(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return ji(qn(qn(qn(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const qG=q({eye_:YOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(t,e,n){const r={shape:t,value:e,dtype:n};return G.runKernel(r3,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(t){const n={x:F(t,"x","floor","float32")};return G.runKernel(ey,n)}const zy=q({floor_:QOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOe(t,e,n=0,r=0){const s=F(t,"x","gather"),i=F(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return G.runKernel(o2,o,a)}const Ll=q({gather_:JOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t,e){let n=F(t,"a","greater","string_or_numeric"),r=F(e,"b","greater","string_or_numeric");[n,r]=Pn(n,r),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(a2,s)}const Ti=q({greater_:ZOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(t,e){let n=F(t,"a","greaterEqual","string_or_numeric"),r=F(e,"b","greaterEqual","string_or_numeric");[n,r]=Pn(n,r),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(ny,s)}const nh=q({greaterEqual_:eRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(t){const n={x:F(t,"x","isFinite")};return G.runKernel(sy,n)}const nRe=q({isFinite_:tRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rRe(t){const n={x:F(t,"x","isInf")};return G.runKernel(iy,n)}const sRe=q({isInf_:rRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(t){const n={x:F(t,"x","isNaN")};return G.runKernel(oy,n)}const KG=q({isNaN_:iRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t,e=.2){const r={x:F(t,"x","leakyRelu")},s={alpha:e};return G.runKernel(l2,r,s)}const Y2=q({leakyRelu_:oRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t,e){let n=F(t,"a","less","string_or_numeric"),r=F(e,"b","less","string_or_numeric");[n,r]=Pn(n,r),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(u2,s)}const sO=q({less_:aRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRe(t,e){let n=F(t,"a","lessEqual","string_or_numeric"),r=F(e,"b","lessEqual","string_or_numeric");[n,r]=Pn(n,r),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(c2,s)}const rh=q({lessEqual_:lRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return G.runKernel(l3,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t,e=5,n=1,r=1,s=.5){const i=F(t,"x","localResponseNormalization");P(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),P(zf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=H(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:s},c=G.runKernel(p2,l,u);return a?H(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const XG=q({localResponseNormalization_:cRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const n={x:F(t,"x","log","float32")};return G.runKernel(ay,n)}const bi=q({log_:hRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fRe(t){const n={x:F(t,"x","log1p")};return G.runKernel(ly,n)}const Q2=q({log1p_:fRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(t,e){P(N$(t),()=>"The f passed in variableGrads(f) must be a function"),P(e==null||Array.isArray(e)&&e.every(u=>u instanceof Fx),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in G.registeredVariables)e.push(G.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,s=e.length;e=e.filter(u=>u.trainable),P(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=G.gradients(t,e,null,i);P(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),P(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Ua(t){return G.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t){const n={x:F(t,"x","softplus")};return G.runKernel(Iy,n)}const $d=q({softplus_:pRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(t){const e=F(t,"x","logSigmoid");return Ua(r=>({value:wn($d(wn(r))),gradFunc:o=>W(o,ha(wn(r)))}))(e)}const gRe=q({logSigmoid_:mRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t,e){let n=F(t,"a","sub"),r=F(e,"b","sub");[n,r]=Pn(n,r);const s={a:n,b:r};return G.runKernel($y,s)}const _e=q({sub_:yRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t,e=-1){const n=F(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ua((s,i)=>{const a=Xi(s,e,!0),l=_e(s,a),u=_e(Ie(l,"float32"),bi(Be(Ps(l),e,!0)));return i([u]),{value:u,gradFunc:(h,f)=>{const[d]=f,p=!0,m=Ps(d);return _e(h,W(Be(h,e,p),m))}}})(n)}const iO=q({logSoftmax_:vRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xRe(t,e=null,n=!1){const r=F(t,"x","logSumExp"),s=pt(e,r.shape),i=Xi(r,s,!0),o=_e(r,i),a=Ps(o),l=Be(a,s),u=bi(l),c=de(H(i,u.shape),u);if(n){const h=zn(c.shape,s);return H(c,h)}return c}const YG=q({logSumExp_:xRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bRe(t,e){const n=F(t,"a","logicalAnd","bool"),r=F(e,"b","logicalAnd","bool");rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(h2,s)}const aa=q({logicalAnd_:bRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wRe(t){const n={x:F(t,"x","logicalNot","bool")};return G.runKernel(f2,n)}const J2=q({logicalNot_:wRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SRe(t,e){const n=F(t,"a","logicalOr","bool"),r=F(e,"b","logicalOr","bool");rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(d2,s)}const oO=q({logicalOr_:SRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRe(t,e){const n=F(t,"a","logicalXor","bool"),r=F(e,"b","logicalXor","bool");return rt(n.shape,r.shape),aa(oO(t,e),J2(aa(t,e)))}const IRe=q({logicalXor_:kRe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0=2147483648;function CRe(t,e,n="left"){const r=F(t,"sortedSequence","searchSorted"),s=F(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=H(r,[-1,i]),l=H(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ie(l.shape)>=j0)throw new Error(`values tensor size must less than ${j0}`);if(a.shape[1]>=j0)throw new Error(`trailing dim_size must less than ${j0} for int32 output type, was ${a.shape[1]}`);const u={sortedSequence:a,values:l},c={side:n};return G.runKernel(S3,u,c)}const QG=q({searchSorted_:CRe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TRe(t,e){return QG(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Re(t,e,n,r,s){const i=F(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=H(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),P(Br(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),xs("maxPool",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s},h=G.runKernel(g2,u,c);return l?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Z2=q({maxPool_:$Re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRe(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=F(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=H(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),P(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),P(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),xs("maxPool3d",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},h=G.runKernel(y2,u,c);return l?H(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const JG=q({maxPool3d_:NRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(t,e,n,r,s=!1){const o={x:F(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=G.runKernel(f3,o,a);return{result:l[0],indexes:l[1]}}const _Re=q({maxPoolWithArgmax_:ERe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(t,e){let n=F(t,"a","maximum"),r=F(e,"b","maximum");[n,r]=Pn(n,r),n.dtype==="bool"&&(n=Ie(n,"int32"),r=Ie(r,"int32")),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(uy,s)}const fa=q({maximum_:ARe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(t,e=null,n=!1){const s={x:F(t,"x","mean")},i={axis:e,keepDims:n};return G.runKernel(v2,s,i)}const An=q({mean_:ORe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kn(t,e="float32"){if(e==="complex64"){const r=Kn(t,"float32"),s=Kn(t,"float32");return Xl(r,s)}const n=es(ie(t),e);return G.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(t,e="float32"){if(e==="complex64"){const r=Xa(t,"float32"),s=Kn(t,"float32");return Xl(r,s)}const n=MA(ie(t),e);return G.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(t,e){let n=F(t,"a","minimum"),r=F(e,"b","minimum");[n,r]=Pn(n,r),n.dtype==="bool"&&(n=Ie(n,"int32"),r=Ie(r,"int32")),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(cy,s)}const Nd=q({minimum_:RRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DRe(t,e,n){P(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=F(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");P(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)P(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),P(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return G.runKernel(b2,o,i)}const aO=q({mirrorPad_:DRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PRe(t,e){let n=F(t,"a","mod"),r=F(e,"b","mod");[n,r]=Pn(n,r);const s={a:n,b:r};return G.runKernel(hy,s)}const ZG=q({mod_:PRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MRe(t,e=null,n=!1){t=F(t,"x","moments");const r=pt(e,t.shape),s=An(t,r,n);let i=s.shape;n||(i=zn(s.shape,r));const o=Yt(_e(Ie(t,"float32"),H(s,i))),a=An(o,r,n);return{mean:s,variance:a}}const lO=q({moments_:MRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FRe(t,e,n,r=!1){const s=F(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?H(s,[1,-1]):s},u={numSamples:e,seed:n,normalized:r},c=G.runKernel(d3,l,u);return o===1?H(c,[c.size]):c}const LRe=q({multinomial_:FRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BRe(t,e){let n=F(t,"a","notEqual","string_or_numeric"),r=F(e,"b","notEqual","string_or_numeric");[n,r]=Pn(n,r),rt(n.shape,r.shape);const s={a:n,b:r};return G.runKernel(S2,s)}const qf=q({notEqual_:BRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRe(t){const n={x:F(t,"x","onesLike")};return G.runKernel(k2,n)}const wi=q({onesLike_:zRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(t,e,n=0){const r=F(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return G.runKernel(T2,i,s)}const Lc=q({pad_:VRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function URe(t,e,n){const r=F(t,"x","spaceToBatchND");P(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),P(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),P(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return G.runKernel(M2,s,i)}const eS=q({spaceToBatchND_:URe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WRe(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=F(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(Br(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const c=ro(l.shape,e,i,s,r),h=[c.dilationHeight,c.dilationWidth];let f;r==="same"?f=GRe([c.filterHeight,c.filterWidth],h):f=[[0,0],[0,0]];const d=h[0]===1&&h[1]===1,[p,m]=jRe([c.inHeight,c.inWidth],h,f),g=d?r:"valid",y=d?l:eS(l,h,p),b=(n==="avg"?()=>H2(y,e,i,g,o):()=>Z2(y,e,i,g,o))(),x=d?b:K2(b,h,m);return u?H(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function jRe(t,e,n){const r=n.map(c=>c[0]),s=n.map(c=>c[1]),i=t.concat(r,s),o=e.map((c,h)=>(c-i[h]%c)%c),a=s.map((c,h)=>c+o[h]),l=e.map((c,h)=>[r[h],a[h]]),u=e.map((c,h)=>[0,o[h]]);return[l,u]}function GRe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const HRe=q({pool_:WRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qRe(t,e){const n=F(t,"x","prelu"),r=F(e,"alpha","prelu"),s={x:n,alpha:r};return G.runKernel($2,s)}const tS=q({prelu_:qRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KRe(t,e=null,n=!1){let r=F(t,"x","prod");r.dtype==="bool"&&(r=Ie(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return G.runKernel(N2,s,i)}const uO=q({prod_:KRe});var eH={exports:{}};(function(t){(function(e,n,r){function s(l){var u=this,c=a();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new s(l),h=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,h&&(typeof h=="object"&&i(h,c),f.state=function(){return i(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Dt,t,!1)})(eH);var tH={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Dt,t,!1)})(tH);var nH={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Dt,t,!1)})(nH);var rH={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.x,h=l.i,f,d;return f=c[h],f^=f>>>7,d=f^f<<24,f=c[h+1&7],d^=f^f>>>10,f=c[h+3&7],d^=f^f>>>3,f=c[h+4&7],d^=f^f<<7,f=c[h+7&7],f=f^f<<13,d^=f^f<<9,c[h]=d,l.i=h+1&7,d};function u(c,h){var f,d=[];if(h===(h|0))d[0]=h;else for(h=""+h,f=0;f<h.length;++f)d[f&7]=d[f&7]<<15^h.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],c.x=d,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Dt,t,!1)})(rH);var sH={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.w,h=l.X,f=l.i,d,p;return l.w=c=c+1640531527|0,p=h[f+34&127],d=h[f=f+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=h[f]=p^d,l.i=f,p+(c^c>>>16)|0};function u(c,h){var f,d,p,m,g,y=[],v=128;for(h===(h|0)?(d=h,h=null):(h=h+"\0",d=0,v=Math.max(v,h.length)),p=0,m=-32;m<v;++m)h&&(d^=h.charCodeAt((m+32)%h.length)),m===0&&(g=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=d+g,p=f==0?p+1:0);for(p>=128&&(y[(h&&h.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=y[p+34&127],f=y[p=p+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,y[p]=d^f;c.w=g,c.X=y,c.i=p}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Dt,t,!1)})(sH);var iH={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var h=l.b,f=l.c,d=l.d,p=l.a;return h=h<<25^h>>>7^f,f=f-d|0,d=d<<24^d>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^f,l.c=f=f-d|0,l.d=d<<16^f>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Dt,t,!1)})(iH);var oH={exports:{}};(function(t){(function(e,n){var r=this,s=256,i=6,o=52,a="random",l=n.pow(s,i),u=n.pow(2,o),c=u*2,h=s-1,f;function d(x,w,S){var k=[];w=w==!0?{entropy:!0}:w||{};var I=y(g(w.entropy?[x,b(e)]:x==null?v():x,3),k),T=new p(k),N=function(){for(var A=T.g(i),R=l,O=0;A<u;)A=(A+O)*s,R*=s,O=T.g(1);for(;A>=c;)A/=2,R/=2,O>>>=1;return(A+O)/R};return N.int32=function(){return T.g(4)|0},N.quick=function(){return T.g(4)/4294967296},N.double=N,y(b(T.S),e),(w.pass||S||function(A,R,O,M){return M&&(M.S&&m(M,T),A.state=function(){return m(T,{})}),O?(n[a]=A,R):A})(N,I,"global"in w?w.global:this==n,w.state)}n["seed"+a]=d;function p(x){var w,S=x.length,k=this,I=0,T=k.i=k.j=0,N=k.S=[];for(S||(x=[S++]);I<s;)N[I]=I++;for(I=0;I<s;I++)N[I]=N[T=h&T+x[I%S]+(w=N[I])],N[T]=w;(k.g=function(A){for(var R,O=0,M=k.i,z=k.j,B=k.S;A--;)R=B[M=h&M+1],O=O*s+B[h&(B[M]=B[z=h&z+R])+(B[z]=R)];return k.i=M,k.j=z,O})(s)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var S=[],k=typeof x,I;if(w&&k=="object")for(I in x)try{S.push(g(x[I],w-1))}catch{}return S.length?S:k=="string"?x:x+"\0"}function y(x,w){for(var S=x+"",k,I=0;I<S.length;)w[h&I]=h&(k^=w[h&I]*19)+S.charCodeAt(I++);return b(w)}function v(){try{var x;return f&&(x=f.randomBytes)?x=x(s):(x=new Uint8Array(s),(r.crypto||r.msCrypto).getRandomValues(x)),b(x)}catch{var w=r.navigator,S=w&&w.plugins;return[+new Date,r,S,r.screen,b(e)]}}function b(x){return String.fromCharCode.apply(0,x)}if(y(n.random(),e),t.exports){t.exports=d;try{f=Dy}catch{}}})([],Math)})(oH);var XRe=eH.exports,YRe=tH.exports,QRe=nH.exports,JRe=rH.exports,ZRe=sH.exports,eDe=iH.exports,sh=oH.exports;sh.alea=XRe;sh.xor128=YRe;sh.xorwow=QRe;sh.xorshift7=JRe;sh.xor4096=ZRe;sh.tychei=eDe;var aH=sh;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lH{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=aH.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class tDe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=aH.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDe(t,e=0,n=1,r,s){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new lH(e,n,r,!1,s),o=dt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const rDe=q({randomNormal_:nDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDe(t,e=0,n=1,r="float32",s){const i=dt(t,r),o=new tDe(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const Vy=q({randomUniform_:sDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lm(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return G.runKernel(y3,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const n={x:F(t,"x","reciprocal")};return G.runKernel(py,n)}const uH=q({reciprocal_:iDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t){const n={x:F(t,"x","relu")};return G.runKernel(my,n)}const da=q({relu_:oDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aDe(t){const n={x:F(t,"x","relu6")};return G.runKernel(gy,n)}const cO=q({relu6_:aDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t,e){const r={x:F(t,"x","reverse")},s={dims:e};return G.runKernel(O2,r,s)}const Wa=q({reverse_:lDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t){const n={x:F(t,"x","round")};return G.runKernel(yy,n)}const hO=q({round_:uDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t){const n={x:F(t,"x","rsqrt","float32")};return G.runKernel(vy,n)}const fO=q({rsqrt_:cDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t){const n={x:F(t,"x","selu")};return G.runKernel(xy,n)}const dO=q({selu_:hDe});function fDe(t,e,n,r,s,i=[1,1],o="NHWC"){const a=F(t,"x","separableConv2d"),l=F(e,"depthwiseFilter","separableConv2d"),u=F(n,"pointwiseFilter","separableConv2d");let c=a,h=!1;if(a.rank===3&&(h=!0,c=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),P(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),P(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),P(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),P(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],d=l.shape[3];P(u.shape[2]===f*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*d}, but got ${u.shape[2]}.`);const p=Fy(c,l,r,s,o,i),g=Ql(p,u,1,"valid",o);return h?H(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const cH=q({separableConv2d_:fDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function dDe(t,e){const n=F(t,"x","setdiff1d"),r=F(e,"y","setdiff1d");P(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),P(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),P(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let c=0;c<s.length;c++)o.has(s[c])||a++;const l=new xr([a],n.dtype),u=new xr([a],"int32");for(let c=0,h=0;c<s.length;c++)o.has(s[c])||(l.values[h]=s[c],u.values[h]=c,h++);return[l.toTensor(),u.toTensor()]}const pDe=dDe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(t){const n={x:F(t,"x","sign")};return G.runKernel(Sy,n)}const hH=q({sign_:mDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const n={x:F(t,"x","sin","float32")};return G.runKernel(by,n)}const pO=q({sin_:gDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(t){const n={x:F(t,"x","sinh")};return G.runKernel(wy,n)}const mO=q({sinh_:yDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t,e,n){const r=F(t,"x","slice1d");return P(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Je(r,[e],[n])}const gO=q({slice1d_:vDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xDe(t,e,n){const r=F(t,"x","slice2d");return P(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Je(r,e,n)}const fH=q({slice2d_:xDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t,e,n){const r=F(t,"x","slice3d");return P(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Je(r,e,n)}const yO=q({slice3d_:bDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(t,e,n){const r=F(t,"x","slice4d");return P(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Je(r,e,n)}const jx=q({slice4d_:wDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(t,e=-1){const n=F(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return G.runKernel(L2,r,s)}const nS=q({softmax_:SDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return G.runKernel(n3,e)}const vO=q({fft_:kDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return G.runKernel(o3,e)}const Gx=q({ifft_:IDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=H(t,[n,e]);r=Gx(s)}else{const s=[n,2*(e-1)],i=H(Fm(t),[n,e]),o=H(j2(t),[n,e]),a=Wa(Je(i,[0,1],[n,e-2]),1),l=W(Wa(Je(o,[0,1],[n,e-2]),1),ze(-1)),u=Rn([i,a],1),c=Rn([o,l],1),h=H(Xl(u,c),[s[0],s[1]]);r=Gx(h)}if(r=Fm(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=H(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const dH=q({irfft_:CDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t,e,n=0){const s={x:F(t,"x","split")},i={numOrSizeSplits:e,axis:n};return G.runKernel(F2,s,i)}const ei=q({split_:TDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $De(t,e){P(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,s=Je(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,s=Rn([t,Kn(p)],t.shape.length-1),n=e}else s=t;const i=bt(s),o=H(Xl(s,i),[r,n]),a=vO(o),l=Math.floor(n/2)+1,u=Fm(a),c=j2(a),h=ei(u,[l,n-l],u.shape.length-1),f=ei(c,[l,n-l],c.shape.length-1),d=s.shape.slice();return d[s.shape.length-1]=l,H(Xl(h[0],f[0]),d)}const xO=q({rfft_:$De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(t,e){let n=F(t,"a","squaredDifference"),r=F(e,"b","squaredDifference");[n,r]=Pn(n,r),rt(n.shape,r.shape);const s={a:n,b:r},i={};return G.runKernel(Ty,s,i)}const bO=q({squaredDifference_:NDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(t,e){const n=F(t,"x","squeeze");return H(n,du(n.shape,e).newShape)}const At=q({squeeze_:EDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(t,e=0){const n=Z7(t,"tensors","stack","string_or_numeric");P(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&P(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return G.runKernel(C2,r,s)}const eo=q({stack_:_De});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t,e=0){const r={x:F(t,"x","step")},s={alpha:e};return G.runKernel(Ay,r,s)}const Uy=q({step_:ADe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const c={x:F(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return G.runKernel(E3,c,h)}const pH=q({stridedSlice_:ODe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t){const n={x:F(t,"x","tan","float32")};return G.runKernel(Ny,n)}const mH=q({tan_:RDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xn(t,e){PA(t);const n=Oy(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ry(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bo(t,e,n){if(PA(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Oy(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ry(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t,e=1,n=!0){const r=F(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=G.runKernel(R3,i,o);return{values:a,indices:l}}const gH=q({topk_:DDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t,e=0,n=1,r,s){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new lH(e,n,r,!0,s),o=dt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const wO=q({truncatedNormal_:PDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t,e=0){const n=F(t,"x","unique","string_or_numeric");P(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=G.runKernel(P3,r,s);return{values:i,indices:o}}const X$=q({unique_:MDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t,e,n){const r=F(t,"x","unsortedSegmentSum"),s=F(e,"segmentIds","unsortedSegmentSum","int32");P(zf(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return G.runKernel(z2,i,o)}const yH=q({unsortedSegmentSum_:FDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(t,e=0){const n=F(t,"x","unstack","string_or_numeric");P(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return G.runKernel(B2,r,s)}const Co=q({unstack_:LDe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDe(t,e){return QG(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zDe(t,e=!0,n,r){return G.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SO(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=dt(t,"int32"),s=dt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function VDe(t){const e=F(t,"condition","whereAsync","bool"),n=await e.data(),r=SO(e.shape,n);return t!==e&&e.dispose(),r}const UDe=VDe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(t,e,n){const r=F(t,"indices","scatterND","int32"),s=F(e,"updates","scatterND");yG(s,r,n);const i={indices:r,updates:s},o={shape:n};return G.runKernel(w3,i,o)}const jDe=q({scatterND_:WDe});function GDe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(t,e,n,r=0){const s=F(t,"sparseIndices","sparseToDense","int32"),i=F(e,"sparseValues","sparseToDense","string_or_numeric"),o=F(r,"defaultValue","sparseToDense",i.dtype);GDe(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},l={outputShape:n};return G.runKernel($3,a,l)}const vH=q({sparseToDense_:HDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t,e){const n=F(e,"indices","gatherND","int32"),s={params:F(t,"x","gatherND","string_or_numeric"),indices:n};return G.runKernel(i3,s)}const KDe=q({gatherND_:qDe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t,e){if(e==null)return t.shape.slice();if(Ct(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t,e,n,r){const s=F(t,"x","dropout");if(P(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),P(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Xt?s.clone():s;const i=XDe(s,n),o=1-e,a=Ne(zy(de(Vy(i,0,1,"float32",r),o)),o);return W(s,a)}const QDe=q({dropout_:YDe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function xH(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return Xn(s,"float32")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDe(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=H(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=H(e,[1,e.shape[0],e.shape[1],e.shape[2]])),P(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),P(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),P(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?a.shape[3]:a.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];P(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),P(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),xs("conv2dDerFilter",s,o);const h={x:a,dy:l},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return G.runKernel(GA,h,f)}const kO=q({conv2DBackpropFilter_:ZDe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rS(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return W(t,Uy(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function sS(t,e){let n=e;const r=ur(t.shape,e.shape);return r.length>0&&(n=Be(n,r)),H(n,t.shape)}function iS(t,e,n,r){if(e==="linear")return t;if(e==="relu")return da(t);if(e==="elu")return Ly(t);if(e==="relu6")return cO(t);if(e==="prelu")return tS(t,n);if(e==="leakyrelu")return Y2(t,r);if(e==="sigmoid")return ha(t);throw new Error(`Unknown fused activation ${e}.`)}const oS=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",oS(G.state.gradientDepth,l)===!1){P(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=Ql(t,e,n,r,s,i,o);return a!=null&&(S=de(S,a)),iS(S,l,u,c)}const h=F(t,"x","conv2d","float32"),f=F(e,"filter","conv2d","float32");let d=h,p=!1;h.rank===3&&(p=!0,d=H(h,[1,h.shape[0],h.shape[1],h.shape[2]])),P(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),P(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),xs("fused conv2d",r,o);const m=s==="NHWC"?d.shape[3]:d.shape[1];P(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),P(Br(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const g=wr(d.shape,f.shape,n,i,r,o);let y;a!=null&&(y=F(a,"bias","fused conv2d"),[y]=Pn(y,h),s==="NHWC"?rt(g.outShape,y.shape):(P(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),P(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(u!=null){const S=u.shape;if(P(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)P(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{rt(S,g.outShape)}catch{const I=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(I)}v=F(u,"prelu weights","fused conv2d")}const b=(S,k)=>{P(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[I,T,N,A]=k,R=rS(S,N,l);P(Yl(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const O=Z3(T.shape,R,I,n,r),M=kO(T,R,I.shape,n,r),z=[O,M];if(A!=null){const B=sS(A,R);z.push(B)}return z},x={x:d,filter:f,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?Ua((k,I,T)=>{let N=G.runKernel(Rx,x,w);return T([I,k,N]),p&&(N=H(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:b}})(d,f):Ua((k,I,T,N)=>{let A=G.runKernel(Rx,x,w);return N([I,k,A,T]),p&&(A=H(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:b}})(d,f,y)}const bH=q({fusedConv2d_:ePe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=H(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return G.runKernel(JA,u,c)}const wH=q({depthwiseConv2dNativeBackpropFilter_:tPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},h=G.runKernel(ZA,u,c);return l?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const SH=q({depthwiseConv2dNativeBackpropInput_:nPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(oS(G.state.gradientDepth,l)===!1){let w=Fy(t,e,n,r,s,i,o);return a!=null&&(w=de(w,a)),iS(w,l,u,c)}const h=F(t,"x","depthwiseConv2d","float32"),f=F(e,"filter","depthwiseConv2d","float32");let d=h,p=!1;h.rank===3&&(p=!0,d=H(h,[1,h.shape[0],h.shape[1],h.shape[2]])),P(d.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),P(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),P(d.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${d.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),i==null&&(i=[1,1]),P(Br(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),xs("fused depthwiseConv2d",r,o);const m=wr(d.shape,f.shape,n,i,r,o,!0);let g;a!=null&&(g=F(a,"bias","fused conv2d"),[g]=Pn(g,h),rt(m.outShape,g.shape));let y;u!=null&&(y=F(u,"prelu weights","fused depthwiseConv2d"));const v=(w,S)=>{P(Yl(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[k,I,T,N]=S,A=rS(w,T,l),R=SH(I.shape,A,k,n,r,i,o),O=wH(I,A,k.shape,n,r,i,o);if(N!=null){const M=sS(g,A);return[R,O,M]}return[R,O]},b={x:d,filter:f,bias:g,preluActivationWeights:y},x={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?Ua((S,k,I)=>{let T=G.runKernel(Dx,b,x);return I([k,S,T]),p&&(T=H(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:v}})(d,f):Ua((S,k,I,T)=>{let N=G.runKernel(Dx,b,x);return T([k,S,N,I]),p&&(N=H(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:v}})(d,f,g)}const sPe=q({fusedDepthwiseConv2d_:rPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a}){if(oS(G.state.gradientDepth,i)===!1){let A=Mt(t,e,n,r);return s!=null&&(A=de(A,s)),iS(A,i,o,a)}let l=F(t,"a","fused matMul"),u=F(e,"b","fused matMul");[l,u]=Pn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],d=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=ie(p),y=ie(m);P(c===h,()=>`Error in fused matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=rt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,d]),x=n?H(l,[g,c,f]):H(l,[g,f,c]),w=r?H(u,[y,d,h]):H(u,[y,h,d]);let S;s!=null&&(S=F(s,"bias","fused matMul"),[S]=Pn(S,l),rt(b,S.shape));let k;o!=null&&(k=F(o,"prelu weights","fused matMul"));const I=(A,R)=>{const[O,M,z,B]=R,K=rS(H(A,z.shape),z,i);let L,V;if(!n&&!r?(L=Mt(K,M,!1,!0),V=Mt(O,K,!0,!1)):!n&&r?(L=Mt(K,M,!1,!1),V=Mt(K,O,!0,!1)):n&&!r?(L=Mt(M,K,!1,!0),V=Mt(O,K,!1,!1)):(L=Mt(M,K,!0,!0),V=Mt(K,O,!0,!0)),s!=null){const j=sS(B,K);return[L,V,j]}else return[L,V]},T={a:x,b:w,bias:S,preluActivationWeights:k},N={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?Ua((R,O,M)=>{const z=G.runKernel(Ox,T,N);return M([R,O,z]),{value:H(z,b),gradFunc:I}})(x,w):Ua((R,O,M,z)=>{const B=G.runKernel(Ox,T,N);return z([R,O,B,M]),{value:H(B,b),gradFunc:I}})(x,w,S)}const Y$=q({fusedMatMul_:iPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(t){return xH(t,.54,.46)}const itt=q({hammingWindow_:oPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aPe(t){return xH(t,.5,.5)}const lPe=q({hannWindow_:aPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(Je(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,l=Rn([Je(t,i,e-a),By([a],s)]);o.push(l),i+=n}return o.length===0?bo([],[0,e]):H(Rn(o),[o.length,e])}const cPe=q({frame_:uPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(t,e,n,r,s=lPe){r==null&&(r=JDe(e));const i=cPe(t,e,n),o=W(i,s(e));return xO(o,r)}const ott=q({stft_:hPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(t,e,n,r,s="bilinear",i=0){const o=F(t,"image","cropAndResize"),a=F(e,"boxes","cropAndResize","float32"),l=F(n,"boxInd","cropAndResize","int32"),u=a.shape[0];P(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),P(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),P(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),P(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),P(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),P(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const c={image:o,boxes:a,boxInd:l},h={method:s,extrapolationValue:i,cropSize:r};return G.runKernel(XA,c,h)}const dPe=q({cropAndResize_:fPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pPe(t){const e=F(t,"image","flipLeftRight","float32");P(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return G.runKernel(s3,n,{})}const mPe=q({flipLeftRight_:pPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(t){const e=F(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];P(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),P(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,ji(e,s)}const yPe=q({grayscaleToRGB_:gPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vPe(t,e,n=0,r=.5){const s=F(t,"image","rotateWithOffset","float32");P(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return G.runKernel(M3,i,o)}const xPe=q({rotateWithOffset_:vPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ed(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),P(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),P(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),P(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),P(e.rank===1,()=>"scores must be a 1D tensor"),P(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),P(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bPe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=F(t,"boxes","nonMaxSuppression","float32"),o=F(e,"scores","nonMaxSuppression","float32"),a=Ed(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return G.runKernel(p3,{boxes:i,scores:o},l)}const wPe=q({nonMaxSuppression_:bPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SPe(t,e,n){const r=kPe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function kPe(t,e,n){return CPe(t,e,n||IPe)}function IPe(t,e){return t>e?1:t<e?-1:0}function CPe(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IO(t,e,n,r,s){return $O(t,e,n,r,s,0)}function CO(t,e,n,r,s,i){return $O(t,e,n,r,s,0,!1,i,!0)}function TO(t,e,n,r,s,i){return $O(t,e,n,r,s,i,!0)}function $O(t,e,n,r,s,i,o=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>s&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(C6);const c=i>0?-.5/i:0,h=[],f=[];for(;h.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:b}=g;if(y<s)break;let x=!1;for(let w=h.length-1;w>=b;--w){const S=TPe(t,v,h[w]);if(S>=r){x=!0;break}if(g.score=g.score*$Pe(r,c,S),g.score<=s)break}g.suppressBeginIndex=h.length,x||(g.score===y?(h.push(v),f.push(g.score)):g.score>s&&SPe(u,g,C6))}const d=h.length,p=n-d;a&&p>0&&(h.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:h};return o&&(m.selectedScores=f),l&&(m.validOutputs=d),m}function TPe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),f=Math.max(s[1],s[3]),d=(a-i)*(l-o),p=(h-u)*(f-c);if(d<=0||p<=0)return 0;const m=Math.max(i,u),g=Math.max(o,c),y=Math.min(a,h),v=Math.min(l,f),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(d+p-b)}function $Pe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function C6(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function NPe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=F(t,"boxes","nonMaxSuppressionAsync"),o=F(e,"scores","nonMaxSuppressionAsync"),a=Ed(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:h}=IO(u,c,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),Xn(h,"int32")}const EPe=NPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Pe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),l=Ed(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},h=G.runKernel(g3,u,c);return{selectedIndices:h[0],selectedScores:h[1]}}const APe=q({nonMaxSuppressionWithScore_:_Pe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function OPe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),l=Ed(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),c=u[0],h=u[1],{selectedIndices:f,selectedScores:d}=TO(c,h,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Xn(f,"int32"),selectedScores:Xn(d)}}const RPe=OPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),l=Ed(o,a,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,f={boxes:o,scores:a},d={maxOutputSize:u,iouThreshold:c,scoreThreshold:h,padToMaxOutputSize:i},p=G.runKernel(m3,f,d);return{selectedIndices:p[0],validOutputs:p[1]}}const PPe=q({nonMaxSuppressionPadded_:DPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function MPe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),l=Ed(o,a,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,[f,d]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:m}=CO(f,d,u,c,h,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Xn(p,"int32"),validOutputs:ze(m,"int32")}}const FPe=MPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPe(t,e,n=!1,r=!1){const s=F(t,"images","resizeBilinear");P(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),P(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),P(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=H(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=G.runKernel(A2,a,l);return o?H(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const kH=q({resizeBilinear_:LPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(t,e,n=!1,r=!1){const s=F(t,"images","resizeNearestNeighbor");P(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),P(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),P(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),P(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=H(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=G.runKernel(_2,a,l);return o?H(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const IH=q({resizeNearestNeighbor_:BPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPe(t,e="binary",n=!1,r=.5){const s=F(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let u=W(Xn([r]),255),c,h,f,d;if(P(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),P(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),P(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),P(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[c,h,f]=ei(s,[1,1,1],-1);const g=W(c,i),y=W(h,o),v=W(f,a);d=de(de(g,y),v)}else d=t;if(e==="otsu"){const g=PG(Ie(hO(d),"int32"),Ml([]),256);u=VPe(g,l)}const p=n?rh(d,u):Ti(d,u);return Ie(W(p,255),"int32")}function VPe(t,e){let n=Xn([-1]),r=Xn([0]),s=Xn([0]),i,o,a,l,u,c;for(let h=0;h<t.size-1;h++){i=Je(t,0,h+1),o=Je(t,h+1),u=Ne(Be(i),e),c=Ne(Be(o),e);const f=Be(W(i,Lm(0,i.size)));a=Ne(f,Be(i));const d=By(o.shape,i.size),p=de(Lm(0,o.size),d),m=W(o,p);l=Ne(Be(m),Be(o));const g=_e(a,l),y=_e(a,l),v=W(u,c);s=W(W(v,g),y);const b=Ti(s,r);r=Ds(b,s,r),n=Ds(b,Xn([h]),n)}return n}const UPe=q({threshold_:zPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPe(t,e,n="nearest",r="constant",s=0,i){const o=F(t,"image","transform","float32"),a=F(e,"transforms","transform","float32");P(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),P(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),P(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},u={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return G.runKernel(D3,l,u)}const jPe=q({transform_:WPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GPe(t,e,n){P(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),P(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=F(t,"a","bandPart");P(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const a=H(Lm(0,i,1,"int32"),[-1,1]),l=Lm(0,o,1,"int32"),u=_e(a,l),c=aa(rh(u,ze(+e,"int32")),nh(u,ze(-n,"int32"))),h=Kn([i,o],r.dtype);return H(eo(Co(H(r,[-1,i,o])).map(f=>Ds(c,f,h))),s)}const HPe=q({bandPart_:GPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(t){let e;if(Array.isArray(t)){e=!1,P(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)P(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=ei(t,t.shape[0],0).map(s=>At(s,[0]));P(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(G.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=W(Be(W(n[o],i)),n[o]);i=_e(i,a)}return Ne(i,Hf(i,"euclidean"))}));return e?eo(n,0):n}const KPe=q({gramSchmidt_:qPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t,e=!1){if(P(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return T6(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Co(H(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[u,c]=T6(l,e);s.push(u),i.push(c)});const o=H(eo(s,0),t.shape),a=H(eo(i,0),t.shape);return[o,a]}}function T6(t,e=!1){return G.tidy(()=>{P(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=qG(n),i=Fl(t);const o=bo([[1]],[1,1]);let a=Fl(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,h=a,f=s;[a,i,s]=G.tidy(()=>{const d=Je(i,[u,u],[n-u,1]),p=Hf(d),m=Je(i,[u,u],[1,1]),g=Ds(Ti(m,0),bo([[-1]]),bo([[1]])),y=_e(m,W(g,p)),v=Ne(d,y);v.shape[0]===1?a=Fl(o):a=Rn([o,Je(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const b=wn(Ne(Mt(g,y),p)),x=Je(i,[u,0],[n-u,r]),w=W(b,a),S=xt(a);if(u===0)i=_e(x,Mt(w,Mt(S,x)));else{const T=_e(x,Mt(w,Mt(S,x)));i=Rn([Je(i,[0,0],[u,r]),T],0)}const k=xt(w),I=Je(s,[0,u],[n,s.shape[1]-u]);if(u===0)s=_e(I,Mt(Mt(I,a),k));else{const T=_e(I,Mt(Mt(I,a),k));s=Rn([Je(s,[0,0],[n,u]),T],1)}return[a,i,s]}),je([c,h,f])}return!e&&n>r&&(s=Je(s,[0,0],[n,r]),i=Je(i,[0,0],[r,r])),[s,i]})}const YPe=q({qr_:XPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Es;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Es||(Es={}));function QPe(t,e,n=Es.SUM_BY_NONZERO_WEIGHTS){const r=F(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=F(e,"weights","computeWeightedLoss"));const i=s==null?r:W(r,s);if(n===Es.NONE)return i;if(n===Es.SUM)return Be(i);if(n===Es.MEAN){if(s==null)return An(i);{const o=r.size/s.size,a=Ne(Be(i),Be(s));return o>1?Ne(a,ze(o)):a}}if(n===Es.SUM_BY_NONZERO_WEIGHTS){if(s==null)return Ne(Be(i),ze(r.size));{const o=W(s,Xa(r.shape)),a=Ie(Be(qf(o,ze(0))),"float32");return Ne(Be(i),a)}}throw Error(`Unknown reduction: ${n}`)}const yu=q({computeWeightedLoss_:QPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JPe(t,e,n,r=Es.SUM_BY_NONZERO_WEIGHTS){const s=F(t,"labels","absoluteDifference"),i=F(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=F(n,"weights","absoluteDifference")),no(s.shape,i.shape,"Error in absoluteDifference: ");const a=tr(_e(s,i));return yu(a,o,r)}const att=q({absoluteDifference_:JPe});function ZPe(t,e,n,r,s=Es.SUM_BY_NONZERO_WEIGHTS){const i=F(t,"labels","cosineDistance"),o=F(e,"predictions","cosineDistance");let a=null;r!=null&&(a=F(r,"weights","cosineDistance")),no(i.shape,o.shape,"Error in cosineDistance: ");const l=ze(1),u=_e(l,Be(W(i,o),n,!0));return yu(u,a,s)}const ltt=q({cosineDistance_:ZPe});function eMe(t,e,n,r=Es.SUM_BY_NONZERO_WEIGHTS){let s=F(t,"labels","hingeLoss");const i=F(e,"predictions","hingeLoss");let o=null;n!=null&&(o=F(n,"weights","hingeLoss")),no(s.shape,i.shape,"Error in hingeLoss: ");const a=ze(1);s=_e(W(ze(2),s),a);const l=da(_e(a,W(s,i)));return yu(l,o,r)}const utt=q({hingeLoss_:eMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(t,e,n,r=1,s=Es.SUM_BY_NONZERO_WEIGHTS){const i=F(t,"labels","huberLoss"),o=F(e,"predictions","huberLoss");let a=null;n!=null&&(a=F(n,"weights","huberLoss")),no(i.shape,o.shape,"Error in huberLoss: ");const l=ze(r),u=tr(_e(o,i)),c=Nd(u,l),h=_e(u,c),f=de(W(ze(.5),Yt(c)),W(l,h));return yu(f,a,s)}const ctt=q({huberLoss_:tMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(t,e,n,r=1e-7,s=Es.SUM_BY_NONZERO_WEIGHTS){const i=F(t,"labels","logLoss"),o=F(e,"predictions","logLoss");let a=null;n!=null&&(a=F(n,"weights","logLoss")),no(i.shape,o.shape,"Error in logLoss: ");const l=ze(1),u=ze(r),c=wn(W(i,bi(de(o,u)))),h=W(_e(l,i),bi(de(_e(l,o),u))),f=_e(c,h);return yu(f,a,s)}const htt=q({logLoss_:nMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(t,e,n,r=Es.SUM_BY_NONZERO_WEIGHTS){const s=F(t,"labels","meanSquaredError"),i=F(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=F(n,"weights","meanSquaredError")),no(s.shape,i.shape,"Error in meanSquaredError: ");const a=bO(s,i);return yu(a,o,r)}const ftt=q({meanSquaredError_:rMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(t,e){const n=F(t,"labels","sigmoidCrossEntropyWithLogits"),r=F(e,"logits","sigmoidCrossEntropyWithLogits");no(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=da(r),i=W(r,n),o=Q2(Ps(wn(tr(r))));return de(_e(s,i),o)}function iMe(t,e,n,r=0,s=Es.SUM_BY_NONZERO_WEIGHTS){let i=F(t,"multiClassLabels","sigmoidCrossEntropy");const o=F(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=F(n,"weights","sigmoidCrossEntropy")),no(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=ze(r),c=ze(1),h=ze(.5);i=de(W(i,_e(c,u)),W(h,u))}const l=sMe(i,o);return yu(l,a,s)}const dtt=q({sigmoidCrossEntropy_:iMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oMe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Ua((s,i,o)=>{const l=YG(i,[n],!0),u=_e(Ie(i,"float32"),l);o([s,u]);const c=wn(W(u,s));return{value:Be(c,[n]),gradFunc:(d,p)=>{const[m,g]=p,y=zn(d.shape,[n]);return[W(H(d,y),_e(Ie(m,"float32"),Ps(g))),W(H(d,y),_e(Ps(g),Ie(m,"float32")))]}}})(t,e)}function aMe(t,e,n,r=0,s=Es.SUM_BY_NONZERO_WEIGHTS){let i=F(t,"onehotLabels","softmaxCrossEntropy");const o=F(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=F(n,"weights","softmaxCrossEntropy")),no(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=ze(r),c=ze(1),h=ze(i.shape[1]);i=de(W(i,_e(c,u)),Ne(u,h))}const l=oMe(i,o);return yu(l,a,s)}const ptt=q({softmaxCrossEntropy_:aMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(t,e,n,r){const s=F(t,"indices","sparseFillEmptyRows","int32"),i=F(e,"values","sparseFillEmptyRows"),o=F(n,"denseShape","sparseFillEmptyRows","int32"),a=F(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:i,denseShape:o,defaultValue:a},u=G.runKernel(k3,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const uMe=q({sparseFillEmptyRows_:lMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cMe(t,e,n){const r=F(t,"inputIndices","sparseReshape","int32"),s=F(e,"inputShape","sparseReshape","int32"),i=F(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=G.runKernel(I3,o);return{outputIndices:a[0],outputShape:a[1]}}const hMe=q({sparseReshape_:cMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(t,e,n){const r=F(t,"data","sparseSegmentMean"),s=F(e,"indices","sparseSegmentMean","int32"),i=F(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return G.runKernel(C3,o)}const dMe=q({sparseSegmentMean_:fMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(t,e,n){const r=F(t,"data","sparseSegmentSum"),s=F(e,"indices","sparseSegmentSum","int32"),i=F(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return G.runKernel(T3,o)}const mMe=q({sparseSegmentSum_:pMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(t,e,n,r,s,i,o,a){const l=F(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=F(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},h={data:l,dataSplits:u},f=G.runKernel(_3,h,c);return{nGrams:f[0],nGramsSplits:f[1]}}const yMe=q({stringNGrams_:gMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(t,e,n=!0){const r=F(t,"input","stringSplit","string"),s=F(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=G.runKernel(A3,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const xMe=q({stringSplit_:vMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bMe(t,e){const n=F(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return G.runKernel(O3,s,r)}const wMe=q({stringToHashBucketFast_:bMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ar={flipLeftRight:mPe,grayscaleToRGB:yPe,resizeNearestNeighbor:IH,resizeBilinear:kH,rotateWithOffset:xPe,cropAndResize:dPe,nonMaxSuppression:wPe,nonMaxSuppressionAsync:EPe,nonMaxSuppressionWithScore:APe,nonMaxSuppressionWithScoreAsync:RPe,nonMaxSuppressionPadded:PPe,nonMaxSuppressionPaddedAsync:FPe,threshold:UPe,transform:jPe},SMe={bandPart:HPe,gramSchmidt:KPe,qr:YPe},G0={sparseFillEmptyRows:uMe,sparseReshape:hMe,sparseSegmentMean:dMe,sparseSegmentSum:mMe},mI={stringNGrams:yMe,stringSplit:xMe,stringToHashBucketFast:wMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vu extends Td{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return je(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return dRe(e,n)}dispose(){this.iterations_!=null&&je(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ze(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(vu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NO extends vu{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=G.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:Y(()=>bt(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:Y(()=>bt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,u=this.accumulatedUpdates[s].variable;Y(()=>{const c=de(W(l,this.rho),W(Yt(a),1-this.rho)),h=W(Ne(ts(de(u,this.epsilon)),ts(de(l,this.epsilon))),a),f=de(W(u,this.rho),W(Yt(h),1-this.rho));l.assign(c),u.assign(f);const d=de(W(h,-this.learningRate),i);i.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(je(this.accumulatedGrads.map(e=>e.variable)),je(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}NO.className="Adadelta";ge(NO);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EO extends vu{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=G.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:Y(()=>By(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;Y(()=>{const l=de(a,Yt(o));a.assign(l);const u=de(W(Ne(o,ts(de(l,G.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&je(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}EO.className="Adagrad";ge(EO);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _O extends vu{constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Y(()=>{this.accBeta1=ze(n).variable(),this.accBeta2=ze(r).variable()}),s==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Y(()=>{const r=_e(1,this.accBeta1),s=_e(1,this.accBeta2);n.forEach((i,o)=>{const a=G.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Y(()=>bt(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:Y(()=>bt(a).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,h=this.accumulatedSecondMoment[o].variable,f=de(W(c,this.beta1),W(u,1-this.beta1)),d=de(W(h,this.beta2),W(Yt(u),1-this.beta2)),p=Ne(f,r),m=Ne(d,s);c.assign(f),h.assign(d);const g=de(W(Ne(p,de(ts(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(W(this.accBeta1,this.beta1)),this.accBeta2.assign(W(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&je(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Y(()=>{this.accBeta1.assign(Fc(this.beta1,this.iterations_+1)),this.accBeta2.assign(Fc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}_O.className="Adam";ge(_O);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class AO extends vu{constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Y(()=>{this.iteration=ze(0).variable(),this.accBeta1=ze(n).variable()}),s==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Y(()=>{const r=_e(1,this.accBeta1),s=Ne(-this.learningRate,de(W(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=G.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:bt(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:bt(a).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,h=this.accumulatedWeightedInfNorm[o].variable,f=de(W(c,this.beta1),W(u,1-this.beta1)),d=W(h,this.beta2),p=tr(u),m=fa(d,p);c.assign(f),h.assign(m);const g=de(W(Ne(s,r),Ne(f,de(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(de(this.iteration,1)),this.accBeta1.assign(W(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&je(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}AO.className="Adamax";ge(AO);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aS extends vu{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=G.registeredVariables[r];Y(()=>{const a=de(W(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=_r(ze(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}aS.className="SGD";ge(aS);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OO extends aS{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ze(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=G.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:Y(()=>bt(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&Y(()=>{let l;const u=de(W(this.m,o),a);this.useNesterov?l=de(W(this.c,de(a,W(u,this.m))),i):l=de(W(this.c,u),i),o.assign(u),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&je(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}OO.className="Momentum";ge(OO);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RO extends vu{constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=G.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=G.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:Y(()=>bt(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:Y(()=>bt(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:Y(()=>bt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,u=this.accumulatedMoments[s].variable;Y(()=>{const c=de(W(l,this.decay),W(Yt(a),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[s].variable,f=de(W(h,this.decay),W(a,1-this.decay)),d=Ne(W(a,this.learningRate),ts(_e(c,de(Yt(f),this.epsilon)))),p=de(W(u,this.momentum),d);l.assign(c),h.assign(f),u.assign(p);const m=_e(i,p);i.assign(m)}else{const h=de(W(l,this.decay),W(Yt(a),1-this.decay)),f=de(W(u,this.momentum),Ne(W(a,this.learningRate),ts(de(h,this.epsilon))));l.assign(h),u.assign(f);const d=_e(i,f);i.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&je(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&je(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&je(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}RO.className="RMSProp";ge(RO);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $u{static sgd(e){return new aS(e)}static momentum(e,n,r=!1){return new OO(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new RO(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new _O(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new NO(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new AO(e,n,r,s,i)}static adagrad(e,n=.1){return new EO(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xh={sgd:$u.sgd,momentum:$u.momentum,adadelta:$u.adadelta,adagrad:$u.adagrad,rmsprop:$u.rmsprop,adamax:$u.adamax,adam:$u.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kMe=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function CH(){return new Promise(t=>kMe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DO(t,e){const n=t[0].length;t.forEach((s,i)=>{P(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),P(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)P(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Zo(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PO=30;function lS(t){return t<=PO?t:E$(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MO(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wy(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function jy(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function Gy(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function FO(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function LO(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uS=1.7580993408473768,cS=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BO=.3275911,zO=.254829592,VO=-.284496736,UO=1.421413741,WO=-1.453152027,jO=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function TH(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function $H(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function NH(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function GO(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function EH(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function _H(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function AH(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gI="->",IMe=/->/g,$6=",",N6="...";function HO(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(IMe,"").length)/gI.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${gI}").`);const[r,s]=t.split(gI);P(r.indexOf(N6)===-1,()=>`The ellipsis notation ("${N6}") is not supported yet.`);const i=r.split($6),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<s.length;++f){const d=s[f];if(!i.some(p=>p.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);a.indexOf(d)===-1&&a.push(d)}for(let f=0;f<r.length;++f){const d=r[f];a.indexOf(d)===-1&&d!==$6&&a.push(d)}const l=new Array(i.length);for(let f=0;f<o;++f){if(new Set(i[f].split("")).size!==i[f].length)throw new Error(`Found duplicate axes in input component ${i[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let d=0;d<i[f].length;++d)l[f].push(a.indexOf(i[f][d]))}const u=a.length,c=s.length,h=[];for(let f=c;f<u;++f)h.push(f);return{allDims:a,summedDims:h,idDims:l}}function qO(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function KO(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:P(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function XO(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=CMe(e,a);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function YO(t){return t.every((e,n)=>e===n)}function CMe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function QO(t,e,n=0){let r=[];if(typeof e=="number")P(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);P(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}P(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OH(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function RH(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function DH(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PH(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function MH(t,e){return`size ${t} must be non-negative, not ${e}`}function FH(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function LH(t,e){const n=ie(t),r=ie(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function BH(t,e){const n=ie(t),r=ie(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$(){return"segment ids must be >= 0"}function zH(){return"segment ids are not increasing"}function VH(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function UH(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WH(t,e){let n=!1,r;for(t<=PO?(r=t,n=!0):r=E$(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=E$(t,r+1);return r}function jH(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function JO(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const o=t.shape[n],a=[];let l=1,u=1,c=1;for(let h=0;h<r;++h)a.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<n;h++)a.push(t.shape[h]),u*=t.shape[h];for(let h=r;h<s;h++)a.push(e.shape[h]);for(let h=n+1;h<i;h++)a.push(t.shape[h]),c*=t.shape[h];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:a}}const TMe=Object.freeze(Object.defineProperty({__proto__:null,segOpComputeOptimalWindowSize:WH,computeOutShape:jH,collectGatherOpShapeInfo:JO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bc(t){try{return t.map(e=>Kl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function GH(t){return t.map(e=>Pl(e))}const $Me=Object.freeze(Object.defineProperty({__proto__:null,slice_util:f3e,segment_util:TMe,fromUint8ToStringArray:Bc,fromStringArrayToUint8:GH,upcastType:ti,axesAreInnerMostDims:rO,combineLocations:WG,computeOutAndReduceShapes:Sr,expandShapeToKeepDim:zn,assertAxesAreInnerMostDims:zr,getAxesPermutation:Nn,getUndoAxesPermutation:gu,getInnerMostAxes:Vn,getBroadcastDims:jf,getReductionAxes:ur,assertAndGetBroadcastShape:rt,assertParamsConsistent:DO,computeOutShape:Zo,computeDilation2DInfo:My,computePool2DInfo:ro,computePool3DInfo:qa,computeConv2DInfo:wr,computeConv3DInfo:mu,computeDefaultPad:Q3,tupleValuesAreOne:Yl,eitherStridesOrDilationsAreOne:Br,convertConv2DDataFormat:Ka,checkPadOnDimRoundingMode:xs,getFusedDyActivation:rS,getFusedBiasGradient:sS,applyActivation:iS,shouldFuse:oS,PARALLELIZE_THRESHOLD:PO,computeOptimalWindowSize:lS,getImageCenter:MO,getReshaped:Wy,getPermuted:jy,getReshapedPermuted:Gy,getSliceBeginCoords:FO,getSliceSize:LO,prepareAndValidate:W3,validateUpdateShape:gG,validateInput:yG,calculateShapes:Py,SELU_SCALEALPHA:uS,SELU_SCALE:cS,ERF_P:BO,ERF_A1:zO,ERF_A2:VO,ERF_A3:UO,ERF_A4:WO,ERF_A5:jO,warn:hi,log:G_e,mergeRealAndImagArrays:ja,splitRealAndImagArrays:TH,complexWithEvenIndex:$H,complexWithOddIndex:NH,getComplexWithIndex:GO,assignToTypedArray:EH,exponents:_H,exponent:AH,decodeEinsumEquation:HO,getEinsumPermutation:qO,checkEinsumDimSizes:KO,getEinsumComputePath:XO,isIdentityPermutation:YO,prepareSplitSize:QO,getSparseFillEmptyRowsIndicesDenseShapeMismatch:OH,getSparseFillEmptyRowsNegativeIndexErrorMessage:RH,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:DH,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:PH,getSparseReshapeNegativeOutputDimErrorMessage:MH,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:FH,getSparseReshapeInputOutputMultipleErrorMessage:LH,getSparseReshapeInputOutputMismatchErrorMessage:BH,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Q$,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:zH,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:VH,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:UH},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NMe=re();NMe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Oi;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Oi||(Oi={}));var E6;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(E6||(E6={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EMe={};function HH(t){return EMe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd;if(i.type==="tensor")return ds(e.inputNames[i.inputIndexStart],n,r,s);if(i.type==="tensors")return e.inputNames.slice(a,l).map(f=>ds(f,n,r,s));const u=ds(e.inputNames.slice(a)[0],n,r,s),c=u.dataSync();return i.type==="number"?c[0]:Ki(u.shape,c)}const o=e.attrParams[t];return o&&o.value}function ds(t,e,n,r){const[s,i]=Us(t);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[Hx(s,a)]);return o!==void 0?e[Hx(s,o)][i]:void 0}function _Me(t,e,n){return e[Hx(t,n.currentContextId)]}function Po(t,e){const[n,r,s]=Us(t);return[Hx(n,e&&e.currentContextId),r,s]}function Hx(t,e){return e?`${t}-${e}`:t}function Us(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,s=Number(e[e.length-1]);return[n,s,r]}function Gv(t,e,n){let r=$("pad",t,e,n);if(r==="explicit"){r=$("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function ya(t){return t.kept?t:Fl(t)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AMe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],OMe=Object.freeze(Object.defineProperty({__proto__:null,json:AMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RMe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],DMe=Object.freeze(Object.defineProperty({__proto__:null,json:RMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PMe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],MMe=Object.freeze(Object.defineProperty({__proto__:null,json:PMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FMe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],LMe=Object.freeze(Object.defineProperty({__proto__:null,json:FMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BMe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],zMe=Object.freeze(Object.defineProperty({__proto__:null,json:BMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VMe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],UMe=Object.freeze(Object.defineProperty({__proto__:null,json:VMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WMe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],jMe=Object.freeze(Object.defineProperty({__proto__:null,json:WMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GMe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],HMe=Object.freeze(Object.defineProperty({__proto__:null,json:GMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qMe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],KMe=Object.freeze(Object.defineProperty({__proto__:null,json:qMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XMe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],YMe=Object.freeze(Object.defineProperty({__proto__:null,json:XMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QMe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],JMe=Object.freeze(Object.defineProperty({__proto__:null,json:QMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],eFe=Object.freeze(Object.defineProperty({__proto__:null,json:ZMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tFe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],nFe=Object.freeze(Object.defineProperty({__proto__:null,json:tFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rFe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],sFe=Object.freeze(Object.defineProperty({__proto__:null,json:rFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iFe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],oFe=Object.freeze(Object.defineProperty({__proto__:null,json:iFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aFe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],lFe=Object.freeze(Object.defineProperty({__proto__:null,json:aFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uFe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],cFe=Object.freeze(Object.defineProperty({__proto__:null,json:uFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],fFe=Object.freeze(Object.defineProperty({__proto__:null,json:hFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dFe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],pFe=Object.freeze(Object.defineProperty({__proto__:null,json:dFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _6{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[OMe,DMe,MMe,LMe,zMe,UMe,jMe,HMe,KMe,YMe,JMe,eFe,nFe,sFe,oFe,lFe,cFe,fFe,pFe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?s.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&o.push(m[g.name]),m),{});let l=[];const u=[];let c={},h={};n!=null&&(c=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));const f=Object.keys(a);f.forEach(m=>{const g=a[m];g.inputNames.forEach((y,v)=>{const[b,,x]=Po(y),w=a[b];if(w.outputs!=null){const S=w.outputs.indexOf(x);if(S!==-1){const k=`${b}:${S}`;g.inputNames[v]=k}}g.inputs.push(w),w.children.push(g)})}),Object.keys(h).length===0?f.forEach(m=>{const g=a[m];g.children.length===0&&u.push(g)}):Object.keys(h).forEach(m=>{const[g]=Po(m),y=a[g];y!=null&&(y.signatureKey=h[m],u.push(y))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[g]=Po(m),y=a[g];y&&(y.signatureKey=c[m],l.push(y))}):l=s;let d={};e.library!=null&&e.library.function!=null&&(d=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:a,inputs:l,outputs:u,weights:i,placeholders:s,signature:n,functions:d};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=HH(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=J$(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=J$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=iN(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=iN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=eN(e.attr,i.tfName,i.defaultValue||0),a===void 0&&!!i.tfDeprecatedName&&(a=eN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=sN(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=sN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Z$(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=Z$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=aN(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=aN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=rN(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=rN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=oN(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=oN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=tN(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=tN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=nN(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=nN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=A6(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=A6(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((h,f)=>(h[f.name]=this.mapNode(f),f.op==="Const"&&s.push(h[f.name]),h),{}));const o=[],a=[];e.signature.inputArg.forEach(h=>{const[f]=Po(h.name),d={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:ZO(h.type),type:"dtype"}},children:[]};d.signatureKey=h.name,o.push(d),i[f]=d}),Object.keys(i).forEach(h=>{const f=i[h];f.inputNames.forEach((d,p)=>{const[m,,g]=Po(d),y=i[m];if(y.outputs!=null){const v=y.outputs.indexOf(g);if(v!==-1){const b=`${m}:${v}`;f.inputNames[p]=b}}f.inputs.push(y),y.children.push(f)})});const u=e.ret;e.signature.outputArg.forEach(h=>{const[f,d]=Po(u[h.name]),p=i[f];p!=null&&(p.defaultOutput=d,a.push(p))});const c=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function mFe(t){const e=re().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function qH(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):mFe(t);return e?n:n.toLowerCase()}function J$(t,e,n,r=!1){const s=t[e];return s!=null?qH(s.s,r):n}function Z$(t,e,n){const r=t[e];return r?r.b:n}function eN(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function ZO(t){switch(typeof t=="string"&&(t=Oi[t]),t){case Oi.DT_FLOAT:case Oi.DT_HALF:return"float32";case Oi.DT_INT32:case Oi.DT_INT64:case Oi.DT_INT8:case Oi.DT_UINT8:return"int32";case Oi.DT_BOOL:return"bool";case Oi.DT_DOUBLE:return"float32";case Oi.DT_STRING:return"string";default:return null}}function A6(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function tN(t,e,n){const r=t[e];return r&&r.type?ZO(r.type):n}function nN(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>ZO(s)):n}function KH(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function rN(t,e,n){const r=t[e];return r&&r.shape?KH(r.shape):n}function sN(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function iN(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>qH(i,r)):n}function oN(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>KH(s)):n}function aN(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gFe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return ds(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return ds(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return eN(this.node.rawAttrs,e,n);if(r.s!=null)return J$(this.node.rawAttrs,e,n);if(r.b!=null)return Z$(this.node.rawAttrs,e,n);if(r.shape!=null)return rN(this.node.rawAttrs,e,n);if(r.type!=null)return tN(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return sN(this.node.rawAttrs,e,n);if(r.list.s!=null)return iN(this.node.rawAttrs,e,n);if(r.list.shape!=null)return oN(this.node.rawAttrs,e,n);if(r.list.b!=null)return aN(this.node.rawAttrs,e,n);if(r.list.type!=null)return nN(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yFe=(t,e,n)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[de($("a",t,e,n),$("b",t,e,n))];case"AddN":return[w3e($("tensors",t,e,n))];case"FloorMod":case"Mod":return[ZG($("a",t,e,n),$("b",t,e,n))];case"Mul":return[W($("a",t,e,n),$("b",t,e,n))];case"RealDiv":case"Div":return[Ne($("a",t,e,n),$("b",t,e,n))];case"DivNoNan":return[VG($("a",t,e,n),$("b",t,e,n))];case"FloorDiv":return[X3($("a",t,e,n),$("b",t,e,n))];case"Sub":return[_e($("a",t,e,n),$("b",t,e,n))];case"Minimum":return[Nd($("a",t,e,n),$("b",t,e,n))];case"Maximum":return[fa($("a",t,e,n),$("b",t,e,n))];case"Pow":return[Fc($("a",t,e,n),$("b",t,e,n))];case"SquaredDifference":return[bO($("a",t,e,n),$("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFe=(t,e,n)=>{switch(t.op){case"Abs":case"ComplexAbs":return[tr($("x",t,e,n))];case"Acos":return[TG($("x",t,e,n))];case"Acosh":return[$G($("x",t,e,n))];case"Asin":return[EG($("x",t,e,n))];case"Asinh":return[_G($("x",t,e,n))];case"Atan":return[AG($("x",t,e,n))];case"Atan2":return[OG($("x",t,e,n),$("y",t,e,n))];case"Atanh":return[RG($("x",t,e,n))];case"Ceil":return[MG($("x",t,e,n))];case"Complex":return[Xl($("real",t,e,n),$("imag",t,e,n))];case"Cos":return[X2($("x",t,e,n))];case"Cosh":return[tO($("x",t,e,n))];case"Elu":return[Ly($("x",t,e,n))];case"Erf":return[UG($("x",t,e,n))];case"Exp":return[Ps($("x",t,e,n))];case"Expm1":return[HG($("x",t,e,n))];case"Floor":return[zy($("x",t,e,n))];case"Log":return[bi($("x",t,e,n))];case"Log1p":return[Q2($("x",t,e,n))];case"Imag":return[j2($("x",t,e,n))];case"Neg":return[wn($("x",t,e,n))];case"Reciprocal":return[uH($("x",t,e,n))];case"Real":return[Fm($("x",t,e,n))];case"Relu":return[da($("x",t,e,n))];case"Round":return[hO($("x",t,e,n))];case"Selu":return[dO($("x",t,e,n))];case"Sigmoid":return[ha($("x",t,e,n))];case"Sin":return[pO($("x",t,e,n))];case"Sign":return[hH($("x",t,e,n))];case"Sinh":return[mO($("x",t,e,n))];case"Softplus":return[$d($("x",t,e,n))];case"Sqrt":return[ts($("x",t,e,n))];case"Square":return[Yt($("x",t,e,n))];case"Tanh":return[q2($("x",t,e,n))];case"Tan":return[mH($("x",t,e,n))];case"ClipByValue":return[Rs($("x",t,e,n),$("clipValueMin",t,e,n),$("clipValueMax",t,e,n))];case"Relu6":return[cO($("x",t,e,n))];case"Rsqrt":return[fO(ds(t.inputNames[0],e,n))];case"Prod":return[uO($("x",t,e,n),$("axes",t,e,n))];case"LeakyRelu":return[Y2($("x",t,e,n),$("alpha",t,e,n))];case"Prelu":return[tS($("x",t,e,n),$("alpha",t,e,n))];case"IsNan":return[KG(ds(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Di(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){P(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];P(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function O6(t){return!(typeof t=="number"||t.some(e=>e<0))}function cp(t,e,n){let r=lN(t,n);const s=!O6(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=lN(i.shape,r)}),!O6(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function lN(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xFe{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=ze(0),_r(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Di(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,_r(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(!!n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return Ml([],[0].concat(this.elementShape));const r=this.readMany(e);return Di(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),eo(r,0)}concat(e){if(!!e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Ml([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return Di(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Rn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Co(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];Y(()=>{n=H(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=l===0?0:s[l-1],c=[0,u,0],h=[1,e[l],i];o[l]=H(Je(n,c,h),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zc{constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Di(n,i.shape,"TensorList shape mismatch: "),_r(i)}),this.idTensor=ze(0),this.maxNumElements=s,_r(this.idTensor)}get id(){return this.idTensor.id}copy(){return new zc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Di(e,this.elementShape,"TensorList shape mismatch: ");const s=cp(this.elementShape,this.tensors,e);return Y(()=>{const i=this.tensors.map(o=>H(o,s));return eo(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=cp(this.elementShape,this.tensors,e),s=this.tensors.pop();return Di(s.shape,e,"TensorList shape mismatch: "),H(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Di(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");_r(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new zc([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Di(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=cp(this.elementShape,this.tensors,n);return H(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Di(this.elementShape,n.shape,"TensorList shape mismatch: "),_r(n),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Di(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=cp(this.elementShape,this.tensors,r);return e.length===0?Ml([],[0].concat(s)):Y(()=>{const i=e.map(o=>H(this.tensors[o],s));return eo(i,0)})}concat(e,n){if(!!e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Di(this.elementShape,n,"TensorList shape mismatch: ");const r=cp(this.elementShape,this.tensors,n);return this.size()===0?Ml([],[0].concat(r)):Y(()=>{const s=this.tensors.map(i=>H(i,r));return Rn(s,0)})}}function bFe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);Di(s,e,"TensorList shape mismatch: ");const i=Co(t);return new zc(i,e,r)}function wFe(t,e,n){return new zc([],t,e,n)}function SFe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new zc([],n,t.dtype,r),o=Co(t,0);return e.forEach((a,l)=>{i.setItem(a,o[l])}),i}function kFe(t,e,n){let r=0;const s=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=lN(i,n),a=r===0?0:t.size/r,l=Y(()=>{const c=[];t=H(t,[1,r,a]);for(let h=0;h<e.length;++h){const f=h===0?0:s[h-1],d=[0,f,0],p=[1,e[h],a];c[h]=H(Je(t,d,p),o)}return t.dispose(),c}),u=new zc([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IFe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=$("thenBranch",t,e,n),s=$("elseBranch",t,e,n),i=$("cond",t,e,n),o=$("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=$("body",t,e,n),s=$("cond",t,e,n),i=$("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const h=u.map(d=>d.id);c.forEach(d=>{!d.kept&&a.indexOf(d.id)===-1&&h.indexOf(d.id)===-1&&d.dispose()});const f=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await f[0].data(),f.forEach(d=>{!d.kept&&a.indexOf(d.id)===-1&&h.indexOf(d.id)===-1&&d.dispose()})}return u}case"LoopCond":{const r=$("pred",t,e,n);return[ya(r)]}case"Switch":{const r=$("pred",t,e,n);let s=$("data",t,e,n);return s.kept||(s=ya(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>ds(s,e,n)!==void 0);if(r){const s=ds(r,e,n);return[ya(s)]}return}case"Enter":{const r=$("frameName",t,e,n),s=$("tensor",t,e,n);return n.enterFrame(r),[ya(s)]}case"Exit":{const r=$("tensor",t,e,n);return n.exitFrame(),[ya(r)]}case"NextIteration":{const r=$("tensor",t,e,n);return n.nextIteration(),[ya(r)]}case"TensorArrayV3":{const r=$("size",t,e,n),s=$("dtype",t,e,n),i=$("elementShape",t,e,n),o=$("dynamicSize",t,e,n),a=$("clearAfterRead",t,e,n),l=$("identicalElementShapes",t,e,n),u=$("name",t,e,n),c=new xFe(u,s,r,i,l,o,a);return n.addTensorArray(c),[c.idTensor,ze(1)]}case"TensorArrayWriteV3":{const r=$("tensorArrayId",t,e,n),s=$("index",t,e,n),i=$("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=$("tensorArrayId",t,e,n),s=$("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=$("tensorArrayId",t,e,n),s=$("indices",t,e,n),i=$("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=$("tensorArrayId",t,e,n),s=$("indices",t,e,n),i=$("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=$("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=$("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=$("tensorArrayId",t,e,n),s=$("tensor",t,e,n),i=$("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=$("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[ze(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=$("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=$("tensorListId",t,e,n),s=$("index",t,e,n),i=$("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=$("tensorListId",t,e,n),s=$("index",t,e,n),i=$("elementShape",t,e,n),o=$("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=$("indices",t,e,n),s=$("tensor",t,e,n),i=$("elementShape",t,e,n),o=$("numElements",t,e,n),a=SFe(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=$("elementShape",t,e,n),s=$("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=$(i,t,e,n),a=wFe(r,s,o);return n.addTensorList(a),[a.idTensor]}case"TensorListGather":{const r=$("tensorListId",t,e,n),s=$("indices",t,e,n),i=$("elementShape",t,e,n),o=$("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=$("tensorListId",t,e,n),s=$("elementShape",t,e,n),i=$("elementDType",t,e,n),o=$("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=$("tensor",t,e,n),s=$("elementShape",t,e,n),i=$("elementDType",t,e,n),o=bFe(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=$("tensorListId",t,e,n),s=n.getTensorList(r.id),i=$("dtype",t,e,n),o=$("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=$("tensorListId",t,e,n),s=$("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=$("tensorListId",t,e,n),s=$("elementShape",t,e,n),i=$("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=$("tensor",t,e,n),s=$("elementShape",t,e,n),i=$("lengths",t,e,n),o=kFe(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=$("tensorListId",t,e,n),s=n.getTensorList(r.id);return[ze(s.size(),"int32")]}case"TensorListResize":{const r=$("tensorListId",t,e,n),s=$("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R6(t,e,n){const[r,s]=$("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",l=r==="fusedbatchnorm",u=$("numArgs",t,e,n);if(i){if(a&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=$("strides",t,e,n),h=Gv(t,e,n),f=$("dataFormat",t,e,n).toUpperCase(),d=$("dilations",t,e,n);let[p,m]=$("args",t,e,n);o&&(m=p,p=void 0);const g=$("leakyreluAlpha",t,e,n);return{stride:c,pad:h,dataFormat:f,dilations:d,biasArg:p,preluArg:m,activationFunc:s,leakyreluAlpha:g}}const CFe=(t,e,n)=>{switch(t.op){case"Conv1D":{const r=$("stride",t,e,n),s=$("pad",t,e,n),i=$("dataFormat",t,e,n).toUpperCase(),o=$("dilation",t,e,n);return[J3($("x",t,e,n),$("filter",t,e,n),r,s,i,o)]}case"Conv2D":{const r=$("strides",t,e,n),s=Gv(t,e,n),i=$("dataFormat",t,e,n).toUpperCase(),o=$("dilations",t,e,n);return[Ql($("x",t,e,n),$("filter",t,e,n),[r[1],r[2]],s,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:r,pad:s,dataFormat:i,dilations:o,biasArg:a,preluArg:l,activationFunc:u,leakyreluAlpha:c}=R6(t,e,n);return[bH({x:$("x",t,e,n),filter:$("filter",t,e,n),strides:[r[1],r[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:a,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:s,dataFormat:i,dilations:o,biasArg:a,preluArg:l,activationFunc:u,leakyreluAlpha:c}=R6(t,e,n);return[sPe({x:$("x",t,e,n),filter:$("filter",t,e,n),strides:[r[1],r[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:a,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=$("outputShape",t,e,n),s=$("strides",t,e,n),i=Gv(t,e,n);return[eO($("x",t,e,n),$("filter",t,e,n),r,[s[1],s[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=$("strides",t,e,n),s=Gv(t,e,n),i=$("dilations",t,e,n),o=$("dataFormat",t,e,n).toUpperCase();return[Fy($("input",t,e,n),$("filter",t,e,n),[r[1],r[2]],s,o,[i[1],i[2]])]}case"Conv3D":{const r=$("strides",t,e,n),s=$("pad",t,e,n),i=$("dataFormat",t,e,n).toUpperCase(),o=$("dilations",t,e,n);return[FG($("x",t,e,n),$("filter",t,e,n),[r[1],r[2],r[3]],s,i,[o[1],o[2],o[3]])]}case"AvgPool":{const r=$("strides",t,e,n),s=$("pad",t,e,n),i=$("kernelSize",t,e,n);return[H2($("x",t,e,n),[i[1],i[2]],[r[1],r[2]],s)]}case"MaxPool":{const r=$("strides",t,e,n),s=$("pad",t,e,n),i=$("kernelSize",t,e,n);return[Z2($("x",t,e,n),[i[1],i[2]],[r[1],r[2]],s)]}case"MaxPoolWithArgmax":{const r=$("strides",t,e,n),s=$("pad",t,e,n),i=$("kernelSize",t,e,n),o=$("includeBatchInIndex",t,e,n),{result:a,indexes:l}=_Re($("x",t,e,n),[i[1],i[2]],[r[1],r[2]],s,o);return[a,l]}case"AvgPool3D":{const r=$("strides",t,e,n),s=$("pad",t,e,n),i=$("kernelSize",t,e,n);return[DG($("x",t,e,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],s)]}case"MaxPool3D":{const r=$("strides",t,e,n),s=$("pad",t,e,n),i=$("kernelSize",t,e,n);return[JG($("x",t,e,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],s)]}case"Dilation2D":{const r=$("strides",t,e,n),s=$("pad",t,e,n),i=$("dilations",t,e,n),o=r[1],a=r[2],l=i[1],u=i[2];return[zG($("x",t,e,n),$("filter",t,e,n),[o,a],s,[l,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFe=(t,e,n)=>{switch(t.op){case"Fill":{const r=$("shape",t,e,n),s=$("dtype",t,e,n),i=$("value",t,e,n);return[By(r,i,s)]}case"LinSpace":{const r=$("start",t,e,n),s=$("stop",t,e,n),i=$("num",t,e,n);return[uRe(r,s,i)]}case"Multinomial":{const r=$("logits",t,e,n),s=$("numSamples",t,e,n),i=$("seed",t,e,n);return[LRe(r,s,i)]}case"OneHot":{const r=$("indices",t,e,n),s=$("depth",t,e,n),i=$("onValue",t,e,n),o=$("offValue",t,e,n);return[V3(r,s,i,o)]}case"Ones":return[Xa($("shape",t,e,n),$("dtype",t,e,n))];case"OnesLike":return[wi($("x",t,e,n))];case"RandomUniform":return[Vy($("shape",t,e,n),$("minval",t,e,n),$("maxval",t,e,n),$("dtype",t,e,n))];case"Range":{const r=$("start",t,e,n),s=$("stop",t,e,n),i=$("step",t,e,n);return[Lm(r,s,i,$("dtype",t,e,n))]}case"TruncatedNormal":{const r=$("shape",t,e,n),s=$("mean",t,e,n),i=$("stdDev",t,e,n),o=$("seed",t,e,n);return[wO(r,s,i,$("dtype",t,e,n),o)]}case"Zeros":return[Kn($("shape",t,e,n),$("dtype",t,e,n))];case"ZerosLike":return[bt($("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yI(t,e,n){const r=$("boxes",t,e,n),s=$("scores",t,e,n),i=$("maxOutputSize",t,e,n),o=$("iouThreshold",t,e,n),a=$("scoreThreshold",t,e,n),l=$("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const $Fe=async(t,e,n)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}=yI(t,e,n),u=await Ar.nonMaxSuppressionWithScoreAsync(r,s,i,o,a,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a}=yI(t,e,n),l=$("padToMaxOutputSize",t,e,n),u=await Ar.nonMaxSuppressionPaddedAsync(r,s,i,o,a,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a}=yI(t,e,n);return[await Ar.nonMaxSuppressionAsync(r,s,i,o,a)]}case"Where":{const r=Ie($("condition",t,e,n),"bool"),s=[await UDe(r)];return r.dispose(),s}case"ListDiff":return pDe($("x",t,e,n),$("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NFe=(t,e,n)=>{switch(t.op){case"LowerBound":{const r=$("sortedSequence",t,e,n),s=$("values",t,e,n);return[TRe(r,s)]}case"TopKV2":{const r=$("x",t,e,n),s=$("k",t,e,n),i=$("sorted",t,e,n),o=gH(r,s,i);return[o.values,o.indices]}case"UpperBound":{const r=$("sortedSequence",t,e,n),s=$("values",t,e,n);return[BDe(r,s)]}case"Unique":{const r=$("x",t,e,n),s=X$(r);return[s.values,s.indices]}case"UniqueV2":{const r=$("x",t,e,n),s=$("axis",t,e,n),i=X$(r,s);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EFe=(t,e,n)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=$("default",t,e,n);return[ds(t.name,e,n)||r];case"Placeholder":return[ds(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=$("x",t,e,n);return[ya(u)]}case"IdentityN":return $("x",t,e,n).map(u=>ya(u));case"Snapshot":const s=$("x",t,e,n);return[ya(s)];case"Shape":return[Xn($("x",t,e,n).shape,"int32")];case"ShapeN":return $("x",t,e,n).map(u=>Xn(u.shape));case"Size":return[ze($("x",t,e,n).size,"int32")];case"Rank":return[ze($("x",t,e,n).rank,"int32")];case"NoOp":return[ze(1)];case"Print":const i=$("x",t,e,n),o=$("data",t,e,n),a=$("message",t,e,n),l=$("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,l));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Fe{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ze(0),this.tensorMap=new Map,_r(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ze(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),Y(()=>{const s=Co(n),i=r.length,o=s.length;P(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const l=r[a],u=s[a];_r(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Y(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return eo(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r!=null?r:n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AFe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=$("keyDType",t,e,n),i=$("valueDType",t,e,n),o=new _Fe(s,i);return r.addHashTable(t.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const s=$("tableHandle",t,e,n,r),i=$("keys",t,e,n),o=$("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=$("tableHandle",t,e,n,r),i=$("keys",t,e,n),o=$("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=$("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OFe=(t,e,n)=>{switch(t.op){case"ResizeBilinear":{const r=$("images",t,e,n),s=$("size",t,e,n),i=$("alignCorners",t,e,n),o=$("halfPixelCenters",t,e,n);return[Ar.resizeBilinear(r,[s[0],s[1]],i,o)]}case"ResizeNearestNeighbor":{const r=$("images",t,e,n),s=$("size",t,e,n),i=$("alignCorners",t,e,n),o=$("halfPixelCenters",t,e,n);return[Ar.resizeNearestNeighbor(r,[s[0],s[1]],i,o)]}case"CropAndResize":{const r=$("image",t,e,n),s=$("boxes",t,e,n),i=$("boxInd",t,e,n),o=$("cropSize",t,e,n),a=$("method",t,e,n),l=$("extrapolationValue",t,e,n);return[Ar.cropAndResize(r,s,i,o,a,l)]}case"ImageProjectiveTransformV3":{const r=$("images",t,e,n),s=$("transforms",t,e,n),i=$("outputShape",t,e,n),o=$("fillValue",t,e,n),a=$("interpolation",t,e,n),l=$("fillMode",t,e,n);return[Ar.transform(r,s,a.toLowerCase(),l.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFe=(t,e,n)=>{switch(t.op){case"Equal":return[Io($("a",t,e,n),$("b",t,e,n))];case"NotEqual":return[qf($("a",t,e,n),$("b",t,e,n))];case"Greater":return[Ti($("a",t,e,n),$("b",t,e,n))];case"GreaterEqual":return[nh($("a",t,e,n),$("b",t,e,n))];case"Less":return[sO($("a",t,e,n),$("b",t,e,n))];case"LessEqual":return[rh($("a",t,e,n),$("b",t,e,n))];case"LogicalAnd":return[aa($("a",t,e,n),$("b",t,e,n))];case"LogicalNot":return[J2($("a",t,e,n))];case"LogicalOr":return[oO($("a",t,e,n),$("b",t,e,n))];case"Select":case"SelectV2":return[Ds($("condition",t,e,n),$("a",t,e,n),$("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DFe=(t,e,n)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Mt($("a",t,e,n),$("b",t,e,n),$("transposeA",t,e,n),$("transposeB",t,e,n))];case"Einsum":return[POe($("equation",t,e,n),...$("tensors",t,e,n))];case"Transpose":return[xt($("x",t,e,n),$("perm",t,e,n))];case"_FusedMatMul":const[r,s]=$("fusedOps",t,e,n),i=r==="biasadd",o=s==="prelu",a=$("numArgs",t,e,n),l=$("leakyreluAlpha",t,e,n);if(i){if(o&&a!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,c]=$("args",t,e,n);return[Y$({a:$("a",t,e,n),b:$("b",t,e,n),transposeA:$("transposeA",t,e,n),transposeB:$("transposeB",t,e,n),bias:u,activation:s,preluActivationWeights:c,leakyreluAlpha:l})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PFe=(t,e,n)=>{switch(t.op){case"EuclideanNorm":return[GG($("x",t,e,n),$("axis",t,e,n),$("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[Gf($("x",t,e,n),$("mean",t,e,n),$("variance",t,e,n),$("offset",t,e,n),$("scale",t,e,n),$("epsilon",t,e,n))];case"FusedBatchNormV3":return[Gf($("x",t,e,n),$("mean",t,e,n),$("variance",t,e,n),$("offset",t,e,n),$("scale",t,e,n),$("epsilon",t,e,n))];case"LRN":return[XG($("x",t,e,n),$("radius",t,e,n),$("bias",t,e,n),$("alpha",t,e,n),$("beta",t,e,n))];case"Softmax":return[nS($("x",t,e,n))];case"LogSoftmax":return[iO($("x",t,e,n))];case"SparseToDense":return[vH($("sparseIndices",t,e,n),$("outputShape",t,e,n),$("sparseValues",t,e,n),$("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MFe=(t,e,n)=>{switch(t.op){case"Max":{const o=$("axis",t,e,n),a=$("keepDims",t,e,n);return[Xi($("x",t,e,n),o,a)]}case"Mean":{const o=$("axis",t,e,n),a=$("keepDims",t,e,n);return[An($("x",t,e,n),o,a)]}case"Min":{const o=$("axis",t,e,n),a=$("keepDims",t,e,n);return[Wx($("x",t,e,n),o,a)]}case"Sum":{const o=$("axis",t,e,n),a=$("keepDims",t,e,n);return[Be($("x",t,e,n),o,a)]}case"All":{const o=$("axis",t,e,n),a=$("keepDims",t,e,n);return[Y3($("x",t,e,n),o,a)]}case"Any":{const o=$("axis",t,e,n),a=$("keepDims",t,e,n);return[zx($("x",t,e,n),o,a)]}case"ArgMax":{const o=$("axis",t,e,n);return[Mc($("x",t,e,n),o)]}case"ArgMin":{const o=$("axis",t,e,n);return[NG($("x",t,e,n),o)]}case"Prod":{const o=$("axis",t,e,n),a=$("keepDims",t,e,n);return[uO($("x",t,e,n),o,a)]}case"Cumprod":{const o=$("axis",t,e,n),a=$("exclusive",t,e,n),l=$("reverse",t,e,n);return[Ux($("x",t,e,n),o,a,l)]}case"Cumsum":{const o=$("axis",t,e,n),a=$("exclusive",t,e,n),l=$("reverse",t,e,n);return[nO($("x",t,e,n),o,a,l)]}case"Bincount":const r=$("x",t,e,n),s=$("weights",t,e,n),i=$("size",t,e,n);return[PG(r,s,i)];case"DenseBincount":{const o=$("x",t,e,n),a=$("weights",t,e,n),l=$("size",t,e,n),u=$("binaryOutput",t,e,n);return[IOe(o,a,l,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FFe=(t,e,n)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=$("n",t,e,n),s=$("axis",t,e,n);let i=$("tensors",t,e,n);return i=i.slice(0,r),[Rn(i,s)]}case"Gather":{const r=$("x",t,e,n),s=$("indices",t,e,n);return[Ll(r,Ie(s,"int32"),0)]}case"GatherV2":{const r=$("axis",t,e,n),s=$("batchDims",t,e,n),i=$("x",t,e,n),o=$("indices",t,e,n);return[Ll(i,Ie(o,"int32"),r,s)]}case"Reverse":{const r=$("dims",t,e,n),s=[];for(let o=0;o<r.length;o++)r[o]&&s.push(o);const i=$("x",t,e,n);return[Wa(i,s)]}case"ReverseV2":{const r=$("axis",t,e,n),s=$("x",t,e,n);return[Wa(s,r)]}case"Slice":{const r=$("begin",t,e,n),s=$("size",t,e,n);return[Je($("x",t,e,n),r,s)]}case"StridedSlice":{const r=$("begin",t,e,n),s=$("end",t,e,n),i=$("strides",t,e,n),o=$("beginMask",t,e,n),a=$("endMask",t,e,n),l=$("ellipsisMask",t,e,n),u=$("newAxisMask",t,e,n),c=$("shrinkAxisMask",t,e,n),h=$("x",t,e,n);return[pH(h,r,s,i,o,a,l,u,c)]}case"Pack":return Y(()=>{const r=$("axis",t,e,n),s=$("tensors",t,e,n),i=s[0].shape,o=At(s[0]).shape,a=s.map(l=>{const u=Ct(l.shape,i);if(!u&&!Ct(At(l).shape,o))throw new Error("the input tensors shape does not match");return u?l:H(l,i)});return[eo(a,r)]});case"Unpack":{const r=$("axis",t,e,n),s=$("tensor",t,e,n);return Co(s,r)}case"Tile":{const r=$("reps",t,e,n);return[ji($("x",t,e,n),r)]}case"Split":case"SplitV":{const r=$("axis",t,e,n),s=$("numOrSizeSplits",t,e,n),i=$("x",t,e,n);return ei(i,s,r)}case"ScatterNd":{const r=$("indices",t,e,n),s=$("values",t,e,n),i=$("shape",t,e,n);return[jDe(r,s,i)]}case"GatherNd":{const r=$("x",t,e,n),s=$("indices",t,e,n);return[KDe(r,s)]}case"SparseToDense":{const r=$("sparseIndices",t,e,n),s=$("outputShape",t,e,n),i=$("sparseValues",t,e,n),o=$("defaultValue",t,e,n);return[vH(r,i,s,i.dtype===o.dtype?o:Ie(o,i.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LFe=(t,e,n)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:s,emptyRowIndicator:i,reverseIndexMap:o}=G0.sparseFillEmptyRows($("indices",t,e,n),$("values",t,e,n),$("denseShape",t,e,n),$("defaultValue",t,e,n));return[r,s,i,o]}case"SparseReshape":{const{outputIndices:r,outputShape:s}=G0.sparseReshape($("inputIndices",t,e,n),$("inputShape",t,e,n),$("newShape",t,e,n));return[r,s]}case"SparseSegmentMean":return[G0.sparseSegmentMean($("data",t,e,n),$("indices",t,e,n),$("segmentIds",t,e,n))];case"SparseSegmentSum":return[G0.sparseSegmentSum($("data",t,e,n),$("indices",t,e,n),$("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BFe=(t,e,n)=>{switch(t.op){case"FFT":return[vO($("x",t,e,n))];case"IFFT":return[Gx($("x",t,e,n))];case"RFFT":return[xO($("x",t,e,n))];case"IRFFT":return[dH($("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zFe=(t,e,n)=>{switch(t.op){case"StringNGrams":{const{nGrams:r,nGramsSplits:s}=mI.stringNGrams($("data",t,e,n),$("dataSplits",t,e,n),$("separator",t,e,n),$("nGramWidths",t,e,n),$("leftPad",t,e,n),$("rightPad",t,e,n),$("padWidth",t,e,n),$("preserveShortSequences",t,e,n));return[r,s]}case"StringSplit":{const{indices:r,values:s,shape:i}=mI.stringSplit($("input",t,e,n),$("delimiter",t,e,n),$("skipEmpty",t,e,n));return[r,s,i]}case"StringToHashBucketFast":return[mI.stringToHashBucketFast($("input",t,e,n),$("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VFe=(t,e,n)=>{switch(t.op){case"Cast":return[Ie($("x",t,e,n),$("dtype",t,e,n))];case"ExpandDims":{const r=$("axis",t,e,n);return[qn($("x",t,e,n),r)]}case"Squeeze":{const r=$("axis",t,e,n);return[At($("x",t,e,n),r)]}case"Reshape":return[H($("x",t,e,n),$("shape",t,e,n))];case"MirrorPad":return[aO($("x",t,e,n),$("padding",t,e,n),$("mode",t,e,n))];case"PadV2":case"Pad":return[Lc($("x",t,e,n),$("padding",t,e,n),$("constantValue",t,e,n))];case"SpaceToBatchND":{const r=$("blockShape",t,e,n),s=$("paddings",t,e,n);return[eS($("x",t,e,n),r,s)]}case"BatchToSpaceND":{const r=$("blockShape",t,e,n),s=$("crops",t,e,n);return[K2($("x",t,e,n),r,s)]}case"DepthToSpace":{const r=$("blockSize",t,e,n),s=$("dataFormat",t,e,n).toUpperCase();return[BG($("x",t,e,n),r,s)]}case"BroadcastTo":return[uc($("x",t,e,n),$("shape",t,e,n))];case"BroadcastArgs":return[Z3e($("s0",t,e,n),$("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6(t,e,n,r){const s=((i,o,a)=>{switch(i.category){case"arithmetic":return Y(()=>yFe(i,o,a));case"basic_math":return Y(()=>vFe(i,o,a));case"control":return IFe(i,o,a);case"convolution":return Y(()=>CFe(i,o,a));case"creation":return Y(()=>TFe(i,o,a));case"dynamic":return $Fe(i,o,a);case"evaluation":return Y(()=>NFe(i,o,a));case"image":return Y(()=>OFe(i,o,a));case"graph":return Y(()=>EFe(i,o,a));case"logical":return Y(()=>RFe(i,o,a));case"matrices":return Y(()=>DFe(i,o,a));case"normalization":return Y(()=>PFe(i,o,a));case"reduction":return Y(()=>MFe(i,o,a));case"slice_join":return Y(()=>FFe(i,o,a));case"sparse":return Y(()=>LFe(i,o,a));case"spectral":return Y(()=>BFe(i,o,a));case"string":return Y(()=>zFe(i,o,a));case"transformation":return Y(()=>VFe(i,o,a));case"hash_table":return AFe(i,o,a,r);case"custom":const l=HH(i.op);if(l&&l.customExecutor)return l.customExecutor(new gFe(i,o,a));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Vf(s)?s.then(i=>[].concat(i)):[].concat(s)}class P6{constructor(e={},n={},r={},s={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const l=new Set,u=Object.keys(t).map(f=>Us(f)[0]);let c=[];r!=null&&(c=r.map(f=>Us(f.name)[0]));const h=[...e];for(;h.length>0;){const f=h.pop();if((XH(f)||HFe(f)||qFe(f))&&o==null&&(o=f,a=o.children.map(d=>d.name).filter(d=>s.has(d))),s.add(f.name),n[f.name]==null&&u.indexOf(f.name)===-1&&c.indexOf(f.name)===-1){if(f.inputs.length===0){i.push(f.name);continue}f.inputs.forEach(d=>{l.has(d.name)||(l.add(d.name),h.push(d))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function UFe(t,e,n){const{usedNodes:r,inputs:s}=n,i=[],o=Object.keys(s).map(c=>Us(c)[0]).map(c=>t.nodes[c]),a=t.initNodes;o.forEach(c=>{r.has(c.name)&&i.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&i.push(c)}),a!=null&&a.forEach(c=>{r.has(c.name)&&i.push(c)});const l=new Set,u=[];for(;i.length>0;){const c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(h=>{!l.has(h.name)&&r.has(h.name)&&h.inputs.every(f=>l.has(f.name))&&i.push(h)})}return u}const WFe=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],jFe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],GFe=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function XH(t){return WFe.indexOf(t.op)>=0}function HFe(t){return jFe.indexOf(t.op)>=0}function qFe(t){return GFe.indexOf(t.op)>=0}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qx{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new qx(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPERATOR)+"--"+s.join(this.SEPERATOR)}compile(e,n){const r=M6(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const a=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${a}] from the provided inputs [${l}]. Missing the following inputs: [${s}]`)}return UFe(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(h=>this.graph.nodes[Us(h)[0]]),i=n.map(h=>Us(h)[0]);let o=i.map(h=>this.graph.nodes[h]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const a=this.getCompilationKey(s,o);let l=this.compiledMap.get(a);l==null&&(l=this.compile(e,o),this.compiledMap.set(a,l));const u={},c={};return Y(()=>{const h=new P6(this.weightMap,u,c,this.functionExecutorMap),f=Object.assign({},this.weightMap);Object.keys(e).forEach(m=>{const[g,y]=Us(m),v=[];v[y]=e[m],f[g]=v});const d=this.getFrozenTensorIds(f),p={};for(let m=0;m<l.length;m++){const g=l[m];if(!f[g.name]){const y=D6(g,f,h,this._resourceManager);if(Vf(y))throw new Error(`The execution of the op '${g.op}' returned a promise. Please use model.executeAsync() instead.`);f[g.name]=y,this.checkTensorForDisposal(g.name,g,f,h,d,i,p)}}return this.parent==null&&h.dispose(d),n.map(m=>ds(m,f,h))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){n.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=_Me(l.name,r,s);u!=null&&u.forEach(c=>{if(c&&!c.kept&&!i.has(c.id)){const h=a[c.id];if(h===1){if(!this.keepTensorForDebug)c.dispose();else{const[f,d]=Po(n.name,s);this.intermediateTensors[f]?this.intermediateTensors[f][d]=c:(this.intermediateTensors[f]=[],this.intermediateTensors[f][d]=c)}delete a[c.id]}else h!=null&&a[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){!this.intermediateTensors||(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){!this.tensorsMap||Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(r=>{r&&!r.kept&&!r.isDisposed&&!this.keepIds.has(r.id)&&r.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,s={},i={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=re().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new P6(this.weightMap,s,i,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,n,r);const a=n.map(c=>ds(c,this.tensorsMap,o)),l=a.map(c=>c.id),u=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...l,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),a}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(b=>this.graph.nodes[Us(b)[0]]),a=r.map(b=>Us(b)[0]);let l=a.map(b=>this.graph.nodes[b]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:h,syncInputs:f}=M6(e,l,this.weightMap,this._initNodes),d=[...o,...this.graph.weights,...this._initNodes||[]].map(b=>({node:b,contexts:n.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(b=>{const[x,w]=Us(b),S=[];S[w]=e[b],p[x]=S});const m={},g=this.getFrozenTensorIds(p),y={};for(;d.length>0;){const b=this.processStack(o,d,n,p,y,g,a,m,u);await Promise.all(b)}h==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=l.filter(b=>!XH(b)&&!ds(b.name,p,n)).map(b=>b.name);if(v.length>0){let b="";throw h!=null&&(b=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${b}`)}return p}processStack(e,n,r,s,i,o,a,l,u){const c=[];for(;n.length>0;){const h=n.pop();r.currentContext=h.contexts;let f="";if(h.node.op==="Enter"&&$("isConstant",h.node,s,r)&&([f]=Po(h.node.name,r)),s[h.node.name]==null){const d=D6(h.node,s,r,this._resourceManager);f||([f]=Po(h.node.name,r));const p=r.currentContext;Vf(d)?c.push(d.then(m=>(s[f]=m,r.currentContext=p,this.checkTensorForDisposal(f,h.node,s,r,o,a,l),this.processChildNodes(h.node,n,r,s,i,u),m))):(s[f]=d,this.checkTensorForDisposal(f,h.node,s,r,o,a,l),this.processChildNodes(h.node,n,r,s,i,u))}else this.processChildNodes(h.node,n,r,s,i,u)}return c}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[l]=Po(a.name,r);i[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(u=>!!ds(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(u=>!!ds(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=Us(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);P(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&P(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const s=this._signature.inputs[r];n[s.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=Us(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=Us(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class KFe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XFe="?tfjs-format=file",YFe="model.json";class QFe{constructor(e,n={}){this.modelUrl=e,this.loadOptions=n,this.version="n/a",n==null&&(this.loadOptions={}),this.resourceManager=new KFe}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=G$(e,this.loadOptions);else{const n=sG(e,this.loadOptions);if(n.length===0)n.push(G$(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Vf(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r;this.artifacts.userDefinedMetadata!=null&&this.artifacts.userDefinedMetadata.signature!=null?r=this.artifacts.userDefinedMetadata.signature:r=this.artifacts.signature,this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const s=eG(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new qx(_6.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(s),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=_6.Instance.transformGraph(e.modelInitializer);this.initializer=new qx(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=rG(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof Xt)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,s)=>(n[r]=e[s],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function Kf(t,e={}){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=JFe(t));const n=new QFe(t,e);return await n.load(),n}function JFe(t){return t.endsWith("/")||(t=t+"/"),`${t}${YFe}${XFe}`}/** @license See the LICENSE file. *//**
    * @license
    * Copyright 2022 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var YH=function(t,e){return(YH=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])})(t,e)};function QH(t,e){function n(){this.constructor=t}YH(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var nn=function(){return(nn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function Ot(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function a(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){var c;u.done?s(u.value):(c=u.value,c instanceof n?c:new n(function(h){h(c)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}function Rt(t,e){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&c[0]?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!((s=s.length>0&&s[s.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(c[0]===6&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(h){c=[6,h],r=0}finally{n=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function ec(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),s=0;for(e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}var la=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],Bm=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"],ZFe={left:[1,2,3,7,9,11,13,15,17,19,21,23,25,27,29,31],right:[4,5,6,8,10,12,14,16,18,20,22,24,26,28,30,32],middle:[0]},eLe={left:[1,3,5,7,9,11,13,15],right:[2,4,6,8,10,12,14,16],middle:[0]},tLe=[[0,1],[0,2],[1,3],[2,4],[5,6],[5,7],[5,11],[6,8],[6,12],[7,9],[8,10],[11,12],[11,13],[12,14],[13,15],[14,16]],nLe=[[0,1],[0,4],[1,2],[2,3],[3,7],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[11,23],[12,14],[14,16],[12,24],[13,15],[15,17],[16,18],[16,20],[15,17],[15,19],[15,21],[16,22],[17,19],[18,20],[23,25],[23,24],[24,26],[25,27],[26,28],[27,29],[28,30],[27,31],[28,32],[29,31],[30,32]];function Kx(t){return t instanceof SVGAnimatedLength?t.baseVal.value:t}function JH(t){return Ot(this,void 0,void 0,function(){var e,n;return Rt(this,function(r){switch(r.label){case 0:return e=document.createElement("canvas"),t instanceof Xt?[4,U3(t,e)]:[3,2];case 1:return r.sent(),[3,3];case 2:e.width=Kx(t.width),e.height=Kx(t.height),n=e.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0),r.label=3;case 3:return[2,e]}})})}function ZH(t){return Ot(this,void 0,void 0,function(){var e,n,r,s,i,o;return Rt(this,function(a){switch(a.label){case 0:return t instanceof Xt?(e=t.shape.slice(0,2),n=e[0],r=e[1],s=ImageData.bind,[4,U3(t)]):[3,2];case 1:return[2,new(s.apply(ImageData,[void 0,a.sent(),r,n]))];case 2:return i=document.createElement("canvas"),o=i.getContext("2d"),i.width=Kx(t.width),i.height=Kx(t.height),o.drawImage(t,0,0),[2,o.getImageData(0,0,i.width,i.height)]}})})}function rLe(t){return Ot(this,void 0,void 0,function(){var e,n;return Rt(this,function(r){switch(r.label){case 0:return t instanceof SVGImageElement||t instanceof OffscreenCanvas?[4,JH(t)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:return e=n,[2,mG(e,4)]}})})}function eq(t){if(t<0||t>=256)throw new Error("Mask value must be in range [0, 255] but got "+t);if(!Number.isInteger(t))throw new Error("Mask value must be an integer but got "+t)}var hp={runtime:"mediapipe",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,modelType:"full"},sLe=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ot(this,void 0,void 0,function(){return Rt(this,function(e){return[2,this.mask]})})},t.prototype.toImageData=function(){return Ot(this,void 0,void 0,function(){return Rt(this,function(e){return[2,ZH(this.mask)]})})},t.prototype.toTensor=function(){return Ot(this,void 0,void 0,function(){return Rt(this,function(e){return[2,rLe(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"canvasimagesource"},t}();function iLe(t){return eq(t),"person"}var oLe=function(){function t(e){var n,r=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.poseSolution=new N_e.Pose({locateFile:function(s,i){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+s:i+"/"+s}}),e.modelType){case"lite":n=0;break;case"heavy":n=2;break;case"full":default:n=1}this.poseSolution.setOptions({modelComplexity:n,smoothLandmarks:e.enableSmoothing,enableSegmentation:e.enableSegmentation,smoothSegmentation:e.smoothSegmentation,selfieMode:this.selfieMode}),this.poseSolution.onResults(function(s){if(r.height=s.image.height,r.width=s.image.width,s.poseLandmarks==null)r.poses=[];else{var i=r.translateOutput(s.poseLandmarks,s.poseWorldLandmarks);s.segmentationMask&&(i.segmentation={maskValueToLabel:iLe,mask:new sLe(s.segmentationMask)}),r.poses=[i]}})}return t.prototype.translateOutput=function(e,n){var r=this,s={keypoints:e.map(function(i,o){return{x:i.x*r.width,y:i.y*r.height,z:i.z,score:i.visibility,name:Bm[o]}})};return n!=null&&(s.keypoints3D=n.map(function(i,o){return{x:i.x,y:i.y,z:i.z,score:i.visibility,name:Bm[o]}})),s},t.prototype.estimatePoses=function(e,n,r){return Ot(this,void 0,void 0,function(){var s,i;return Rt(this,function(o){switch(o.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.poseSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Xt?(i=ImageData.bind,[4,U3(e)]):[3,2];case 1:return s=new(i.apply(ImageData,[void 0,o.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:s=e,o.label=3;case 3:return e=s,[4,this.poseSolution.send({image:e},r)];case 4:return o.sent(),[2,this.poses]}})})},t.prototype.dispose=function(){this.poseSolution.close()},t.prototype.reset=function(){this.poseSolution.reset()},t.prototype.initialize=function(){return this.poseSolution.initialize()},t}();function aLe(t){return Ot(this,void 0,void 0,function(){var e,n;return Rt(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return nn({},hp);var i=nn({},s);return i.runtime="mediapipe",i.enableSegmentation==null&&(i.enableSegmentation=hp.enableSegmentation),i.enableSmoothing==null&&(i.enableSmoothing=hp.enableSmoothing),i.smoothSegmentation==null&&(i.smoothSegmentation=hp.smoothSegmentation),i.modelType==null&&(i.modelType=hp.modelType),i}(t),[4,(n=new oLe(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function zm(t){return t instanceof Xt?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function tq(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function eR(t){return t instanceof Xt?t:mG(t)}function nq(t,e,n){return uN(n,"inputResolution"),[1/n.width*t[0][0]*e.width,1/n.height*t[0][1]*e.width,t[0][3]*e.width,1/n.width*t[1][0]*e.height,1/n.height*t[1][1]*e.height,t[1][3]*e.height,0,0]}function uN(t,e){P(t.width!==0,function(){return e+" width cannot be 0."}),P(t.height!==0,function(){return e+" height cannot be 0."})}function vI(t,e,n){var r=n.rotationVectorStartKeypointIndex,s=n.rotationVectorEndKeypointIndex,i=t.locationData,o=i.relativeKeypoints[r].x*e.width,a=i.relativeKeypoints[r].y*e.height,l=i.relativeKeypoints[s].x*e.width,u=i.relativeKeypoints[s].y*e.height,c=2*Math.sqrt((l-o)*(l-o)+(u-a)*(u-a)),h=function(f,d,p){var m,g=f.locationData,y=p.rotationVectorStartKeypointIndex,v=p.rotationVectorEndKeypointIndex;m=p.rotationVectorTargetAngle?p.rotationVectorTargetAngle:Math.PI*p.rotationVectorTargetAngleDegree/180;var b=g.relativeKeypoints[y].x*d.width,x=g.relativeKeypoints[y].y*d.height,w=g.relativeKeypoints[v].x*d.width,S=g.relativeKeypoints[v].y*d.height;return tq(m-Math.atan2(-(S-x),w-b))}(t,e,n);return{xCenter:o/e.width,yCenter:a/e.height,width:c/e.width,height:c/e.height,rotation:h}}function rq(t){if(t.length!==16)throw new Error("Array length must be 16 but got "+t.length);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}function xI(t,e,n,r,s,i,o){return t[e][s]*(t[n][i]*t[r][o]-t[n][o]*t[r][i])}function as(t,e,n){var r=(e+1)%4,s=(e+2)%4,i=(e+3)%4,o=(n+1)%4,a=(n+2)%4,l=(n+3)%4;return xI(t,r,s,i,o,a,l)+xI(t,s,i,r,o,a,l)+xI(t,i,r,s,o,a,l)}function F6(t,e,n){n===void 0&&(n={ignoreRotation:!1});for(var r=[],s=0,i=t;s<i.length;s++){var o=i[s],a=o.x-.5,l=o.y-.5,u=n.ignoreRotation?0:e.rotation,c=Math.cos(u)*a-Math.sin(u)*l,h=Math.sin(u)*a+Math.cos(u)*l;c=c*e.width+e.xCenter,h=h*e.height+e.yCenter;var f=o.z*e.width,d=nn({},o);d.x=c,d.y=h,d.z=f,r.push(d)}return r}function sq(t,e){var n=function(r,s,i,o){var a=s-r,l=o-i;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var u=l/a;return{scale:u,offset:i-r*u}}(0,255,e[0],e[1]);return Y(function(){return de(W(t,n.scale),n.offset)})}function cN(t,e,n){var r,s,i,o,a,l,u,c,h,f,d,p,m,g,y=e.outputTensorSize,v=e.keepAspectRatio,b=e.borderMode,x=e.outputTensorFloatRange,w=zm(t),S=function(T,N){return N?{xCenter:N.xCenter*T.width,yCenter:N.yCenter*T.height,width:N.width*T.width,height:N.height*T.height,rotation:N.rotation}:{xCenter:.5*T.width,yCenter:.5*T.height,width:T.width,height:T.height,rotation:0}}(w,n),k=function(T,N,A){if(A===void 0&&(A=!1),!A)return{top:0,left:0,right:0,bottom:0};var R=N.height,O=N.width;uN(N,"targetSize"),uN(T,"roi");var M,z,B=R/O,K=T.height/T.width,L=0,V=0;return B>K?(M=T.width,z=T.width*B,V=(1-K/B)/2):(M=T.height/B,z=T.height,L=(1-B/K)/2),T.width=M,T.height=z,{top:V,left:L,right:L,bottom:V}}(S,y,v),I=(r=S,s=w.width,i=w.height,o=!1,a=r.width,l=r.height,u=o?-1:1,c=Math.cos(r.rotation),h=Math.sin(r.rotation),f=r.xCenter,d=r.yCenter,p=1/s,m=1/i,(g=new Array(16))[0]=a*c*u*p,g[1]=-l*h*p,g[2]=0,g[3]=(-.5*a*c*u+.5*l*h+f)*p,g[4]=a*h*u*m,g[5]=l*c*m,g[6]=0,g[7]=(-.5*l*c-.5*a*h*u+d)*m,g[8]=0,g[9]=0,g[10]=a*p,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,rq(g));return{imageTensor:Y(function(){var T=eR(t),N=bo(nq(I,w,y),[1,8]),A=b==="zero"?"constant":"nearest",R=Ar.transform(qn(Ie(T,"float32")),N,"bilinear",A,0,[y.height,y.width]);return x!=null?sq(R,x):R}),padding:k,transformationMatrix:I}}function L6(t,e,n,r){return r===1?.5*(t+e):t+(e-t)*n/(r-1)}function lLe(t){return Y(function(){var e=function(s){return Y(function(){return[Je(s,[0,0,0],[1,-1,1]),Je(s,[0,0,1],[1,-1,-1])]})}(t),n=e[0],r=e[1];return{boxes:At(r),logits:At(n)}})}function iq(t){return t!=null&&t.currentTime!=null}function B6(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0;o<t.length;++o){var a=t[o];n=Math.min(n,a.x),r=Math.max(r,a.x),s=Math.min(s,a.y),i=Math.max(i,a.y),e.locationData.relativeKeypoints.push({x:a.x,y:a.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:s,xMax:r,yMax:i,width:r-n,height:i-s},e}function uLe(t,e,n,r){return Ot(this,void 0,void 0,function(){var s,i,o,a,l;return Rt(this,function(u){switch(u.label){case 0:return t.sort(function(c,h){return Math.max.apply(Math,h.score)-Math.max.apply(Math,c.score)}),s=bo(t.map(function(c){return[c.locationData.relativeBoundingBox.yMin,c.locationData.relativeBoundingBox.xMin,c.locationData.relativeBoundingBox.yMax,c.locationData.relativeBoundingBox.xMax]})),i=Xn(t.map(function(c){return c.score[0]})),[4,Ar.nonMaxSuppressionAsync(s,i,e,n)];case 1:return[4,(o=u.sent()).array()];case 2:return a=u.sent(),l=t.filter(function(c,h){return a.indexOf(h)>-1}),je([s,i,o]),[2,l]}})})}function oq(t,e){return t.map(function(n){var r=nn(nn({},n),{x:n.x*e.width,y:n.y*e.height});return n.z!=null&&(r.z=n.z*e.width),r})}function cLe(t,e,n){return Ot(this,void 0,void 0,function(){var r,s,i,o,a,l,u,c,h,f,d,p,m,g,y,v,b,x,w,S,k,I,T,N;return Rt(this,function(A){switch(A.label){case 0:if(r=At(e,[0]),s=r.shape,i=s[0],o=s[1],a=s[2],t.length!==a)throw new Error("Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: "+t.length+", heatmap length: "+a);return l=[],[4,r.buffer()];case 1:for(u=A.sent(),c=0;c<t.length;c++)if(h=t[c],f=nn({},h),l.push(f),d=Math.trunc(f.x*o),p=Math.trunc(f.y*i),!(d<0||d>=o||p<0||d>=i)){for(m=Math.trunc((n.kernelSize-1)/2),g=Math.max(0,d-m),y=Math.min(o,d+m+1),v=Math.max(0,p-m),b=Math.min(i,p+m+1),x=0,w=0,S=0,k=0,I=v;I<b;++I)for(T=g;T<y;++T)N=u.get(I,T,c),x+=N,k=Math.max(k,N),w+=T*N,S+=I*N;k>=n.minConfidenceToRefine&&x>0&&(f.x=w/o/x,f.y=S/i/x)}return r.dispose(),[2,l]}})})}function z6(t,e){var n=e.left,r=e.top,s=e.left+e.right,i=e.top+e.bottom;return t.map(function(o){return nn(nn({},o),{x:(o.x-n)/(1-s),y:(o.y-r)/(1-i),z:o.z/(1-s)})})}function hLe(t,e,n){return Bx()==="webgl"?function(r,s,i){var o=i.combineWithPreviousRatio.toFixed(2),a={variableNames:["prevMask","newMask"],outputShape:r.shape,userCode:`
  void main() {
      ivec2 coords = getOutputCoords();
      int height = coords[0];
      int width = coords[1];

      float prevMaskValue = getPrevMask(height, width);
      float newMaskValue = getNewMask(height, width);

      /*
      * Assume p := newMaskValue
      * H(p) := 1 + (p * log(p) + (1-p) * log(1-p)) / log(2)
      * uncertainty alpha(p) =
      *   Clamp(1 - (1 - H(p)) * (1 - H(p)), 0, 1) [squaring the
      * uncertainty]
      *
      * The following polynomial approximates uncertainty alpha as a
      * function of (p + 0.5):
      */
      const float c1 = 5.68842;
      const float c2 = -0.748699;
      const float c3 = -57.8051;
      const float c4 = 291.309;
      const float c5 = -624.717;
      float t = newMaskValue - 0.5;
      float x = t * t;

      float uncertainty =
        1.0 - min(1.0, x * (c1 + x * (c2 + x * (c3 + x * (c4 + x * c5)))));

      float outputValue = newMaskValue + (prevMaskValue - newMaskValue) *
                             (uncertainty * `+o+`);

      setOutput(outputValue);
    }
`},l=pG();return Y(function(){var u=l.compileAndRun(a,[r,s]);return ga().makeTensorFromDataId(u.dataId,u.shape,u.dtype)})}(t,e,n):Y(function(){var r=_e(e,.5),s=Yt(r),i=_e(1,Nd(1,W(s,de(5.68842,W(s,de(-.748699,W(s,de(-57.8051,W(s,de(291.309,W(s,-624.717)))))))))));return de(e,W(_e(t,e),W(i,n.combineWithPreviousRatio)))})}function fLe(t,e,n){return Ot(this,void 0,void 0,function(){var r,s,i,o,a;return Rt(this,function(l){switch(l.label){case 0:return r=t[0],s=t[1],i=function(u,c,h){return Y(function(){var f,d,p,m;h.reverseOutputOrder?(d=At(Je(u,[0,h.boxCoordOffset+0],[-1,1])),f=At(Je(u,[0,h.boxCoordOffset+1],[-1,1])),m=At(Je(u,[0,h.boxCoordOffset+2],[-1,1])),p=At(Je(u,[0,h.boxCoordOffset+3],[-1,1]))):(f=At(Je(u,[0,h.boxCoordOffset+0],[-1,1])),d=At(Je(u,[0,h.boxCoordOffset+1],[-1,1])),p=At(Je(u,[0,h.boxCoordOffset+2],[-1,1])),m=At(Je(u,[0,h.boxCoordOffset+3],[-1,1]))),d=de(W(Ne(d,h.xScale),c.w),c.x),f=de(W(Ne(f,h.yScale),c.h),c.y),h.applyExponentialOnBoxSize?(p=W(Ps(Ne(p,h.hScale)),c.h),m=W(Ps(Ne(m,h.wScale)),c.w)):(p=W(Ne(p,h.hScale),c.h),m=W(Ne(m,h.wScale),c.h));var g=_e(f,Ne(p,2)),y=_e(d,Ne(m,2)),v=de(f,Ne(p,2)),b=de(d,Ne(m,2)),x=Rn([H(g,[h.numBoxes,1]),H(y,[h.numBoxes,1]),H(v,[h.numBoxes,1]),H(b,[h.numBoxes,1])],1);if(h.numKeypoints)for(var w=0;w<h.numKeypoints;++w){var S=h.keypointCoordOffset+w*h.numValuesPerKeypoint,k=void 0,I=void 0;h.reverseOutputOrder?(k=At(Je(u,[0,S],[-1,1])),I=At(Je(u,[0,S+1],[-1,1]))):(I=At(Je(u,[0,S],[-1,1])),k=At(Je(u,[0,S+1],[-1,1])));var T=de(W(Ne(k,h.xScale),c.w),c.x),N=de(W(Ne(I,h.yScale),c.h),c.y);x=Rn([x,H(T,[h.numBoxes,1]),H(N,[h.numBoxes,1])],1)}return x})}(s,e,n),o=Y(function(){var u=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(u=Rs(r,-n.scoreClippingThresh,n.scoreClippingThresh)),u=ha(u)):u}),[4,dLe(i,o,n)];case 1:return a=l.sent(),je([i,o]),[2,a]}})})}function dLe(t,e,n){return Ot(this,void 0,void 0,function(){var r,s,i,o,a,l,u,c,h,f,d,p;return Rt(this,function(m){switch(m.label){case 0:return r=[],[4,t.data()];case 1:return s=m.sent(),[4,e.data()];case 2:for(i=m.sent(),o=0;o<n.numBoxes;++o)if(!(n.minScoreThresh!=null&&i[o]<n.minScoreThresh||(a=o*n.numCoords,l=pLe(s[a+0],s[a+1],s[a+2],s[a+3],i[o],n.flipVertically,o),(u=l.locationData.relativeBoundingBox).width<0||u.height<0))){if(n.numKeypoints>0)for((c=l.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,f=0;f<h;f+=n.numValuesPerKeypoint)d=a+n.keypointCoordOffset+f,p={x:s[d+0],y:n.flipVertically?1-s[d+1]:s[d+1]},c.relativeKeypoints.push(p);r.push(l)}return[2,r]}})})}function pLe(t,e,n,r,s,i,o){return{score:[s],ind:o,locationData:{relativeBoundingBox:{xMin:e,yMin:i?1-n:t,xMax:r,yMax:i?1-t:n,width:r-e,height:n-t}}}}function mLe(t,e){return t==="none"?e:function(n){return 1/(1+Math.exp(-n))}(e)}function V6(t,e,n,r){return Ot(this,void 0,void 0,function(){var s,i,o,a,l,u,c,h;return Rt(this,function(f){switch(f.label){case 0:return n=n||e.flipHorizontally||!1,r=r||e.flipVertically||!1,s=t.size,i=s/e.numLandmarks,[4,t.data()];case 1:for(o=f.sent(),a=[],l=0;l<e.numLandmarks;++l)u=l*i,(h={x:0,y:0}).x=n?e.inputImageWidth-o[u]:o[u],i>1&&(h.y=r?e.inputImageHeight-o[u+1]:o[u+1]),i>2&&(h.z=o[u+2]),i>3&&(h.score=mLe(e.visibilityActivation,o[u+3])),a.push(h);for(c=0;c<a.length;++c)(h=a[c]).x=h.x/e.inputImageWidth,h.y=h.y/e.inputImageHeight,h.z=h.z/e.inputImageWidth/(e.normalizeZ||1);return[2,a]}})})}function U6(t,e,n){var r=t.width,s=t.height,i=t.rotation;if(n.rotation==null&&n.rotationDegree==null||(i=function(c,h){return h.rotation!=null?c+=h.rotation:h.rotationDegree!=null&&(c+=Math.PI*h.rotationDegree/180),tq(c)}(i,n)),i===0)t.xCenter=t.xCenter+r*n.shiftX,t.yCenter=t.yCenter+s*n.shiftY;else{var o=(e.width*r*n.shiftX*Math.cos(i)-e.height*s*n.shiftY*Math.sin(i))/e.width,a=(e.width*r*n.shiftX*Math.sin(i)+e.height*s*n.shiftY*Math.cos(i))/e.height;t.xCenter=t.xCenter+o,t.yCenter=t.yCenter+a}if(n.squareLong){var l=Math.max(r*e.width,s*e.height);r=l/e.width,s=l/e.height}else if(n.squareShort){var u=Math.min(r*e.width,s*e.height);r=u/e.width,s=u/e.height}return t.width=r*n.scaleX,t.height=s*n.scaleY,t}function gLe(t,e){return t.map(function(n){var r=nn(nn({},n),{x:n.x/e.width,y:n.y/e.height});return n.z!=null&&(n.z=n.z/e.width),r})}var gl=function(){function t(e){this.alpha=e,this.initialized=!1}return t.prototype.apply=function(e,n){var r;return this.initialized?r=n==null?this.storedValue+this.alpha*(e-this.storedValue):this.storedValue+this.alpha*n*Math.asinh((e-this.storedValue)/n):(r=e,this.initialized=!0),this.rawValue=e,this.storedValue=r,r},t.prototype.applyWithAlpha=function(e,n,r){return this.alpha=n,this.apply(e,r)},t.prototype.hasLastRawValue=function(){return this.initialized},t.prototype.lastRawValue=function(){return this.rawValue},t.prototype.reset=function(){this.initialized=!1},t}(),bI=function(){function t(e){this.frequency=e.frequency,this.minCutOff=e.minCutOff,this.beta=e.beta,this.thresholdCutOff=e.thresholdCutOff,this.thresholdBeta=e.thresholdBeta,this.derivateCutOff=e.derivateCutOff,this.x=new gl(this.getAlpha(this.minCutOff)),this.dx=new gl(this.getAlpha(this.derivateCutOff)),this.lastTimestamp=0}return t.prototype.apply=function(e,n,r){if(e==null)return e;var s=Math.trunc(n);if(this.lastTimestamp>=s)return e;this.lastTimestamp!==0&&s!==0&&(this.frequency=1/(1e-6*(s-this.lastTimestamp))),this.lastTimestamp=s;var i=this.x.hasLastRawValue()?(e-this.x.lastRawValue())*r*this.frequency:0,o=this.dx.applyWithAlpha(i,this.getAlpha(this.derivateCutOff)),a=this.minCutOff+this.beta*Math.abs(o),l=this.thresholdCutOff!=null?this.thresholdCutOff+this.thresholdBeta*Math.abs(o):null;return this.x.applyWithAlpha(e,this.getAlpha(a),l)},t.prototype.getAlpha=function(e){return 1/(1+this.frequency/(2*Math.PI*e))},t}(),hN=function(){function t(e){this.config=e}return t.prototype.apply=function(e,n,r){var s=this;if(e==null)return this.reset(),null;this.initializeFiltersIfEmpty(e);var i=1;if(!this.config.disableValueScaling){if(r<this.config.minAllowedObjectScale)return ec(e);i=1/r}return e.map(function(o,a){var l=nn(nn({},o),{x:s.xFilters[a].apply(o.x,n,i),y:s.yFilters[a].apply(o.y,n,i)});return o.z!=null&&(l.z=s.zFilters[a].apply(o.z,n,i)),l})},t.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},t.prototype.initializeFiltersIfEmpty=function(e){var n=this;this.xFilters!=null&&this.xFilters.length===e.length||(this.xFilters=e.map(function(r){return new bI(n.config)}),this.yFilters=e.map(function(r){return new bI(n.config)}),this.zFilters=e.map(function(r){return new bI(n.config)}))},t}(),wI=function(){function t(e){this.config=e,this.window=[],this.lowPassFilter=new gl(1),this.lastValue=0,this.lastValueScale=1,this.lastTimestamp=-1}return t.prototype.apply=function(e,n,r){if(e==null)return e;var s,i=Math.trunc(n);if(this.lastTimestamp>=i)return e;if(this.lastTimestamp===-1)s=1;else{for(var o=e*r-this.lastValue*this.lastValueScale,a=i-this.lastTimestamp,l=o,u=a,c=(1+this.window.length)*(1e6/30),h=0,f=this.window;h<f.length;h++){var d=f[h];if(u+d.duration>c)break;l+=d.distance,u+=d.duration}var p=l/(1e-6*u);s=1-1/(1+this.config.velocityScale*Math.abs(p)),this.window.unshift({distance:o,duration:a}),this.window.length>this.config.windowSize&&this.window.pop()}return this.lastValue=e,this.lastValueScale=r,this.lastTimestamp=i,this.lowPassFilter.applyWithAlpha(e,s)},t}(),yLe=function(){function t(e){this.config=e}return t.prototype.apply=function(e,n,r){var s=this;if(e==null)return this.reset(),null;var i=1;if(!this.config.disableValueScaling){if(r<this.config.minAllowedObjectScale)return ec(e);i=1/r}return this.initializeFiltersIfEmpty(e),e.map(function(o,a){var l=nn(nn({},o),{x:s.xFilters[a].apply(o.x,n,i),y:s.yFilters[a].apply(o.y,n,i)});return o.z!=null&&(l.z=s.zFilters[a].apply(o.z,n,i)),l})},t.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},t.prototype.initializeFiltersIfEmpty=function(e){var n=this;this.xFilters!=null&&this.xFilters.length===e.length||(this.xFilters=e.map(function(r){return new wI(n.config)}),this.yFilters=e.map(function(r){return new wI(n.config)}),this.zFilters=e.map(function(r){return new wI(n.config)}))},t}(),SI=function(){function t(e){if(e.velocityFilter!=null)this.keypointsFilter=new yLe(e.velocityFilter);else{if(e.oneEuroFilter==null)throw new Error("Either configure velocityFilter or oneEuroFilter, but got "+e+".");this.keypointsFilter=new hN(e.oneEuroFilter)}}return t.prototype.apply=function(e,n,r,s,i){if(s===void 0&&(s=!1),e==null)return this.keypointsFilter.reset(),null;var o=i!=null?function(u,c){return(u.width*c.width+u.height*c.height)/2}(i,r):1,a=s?oq(e,r):e,l=this.keypointsFilter.apply(a,n,o);return s?gLe(l,r):l},t}(),W6=function(){function t(e){this.alpha=e.alpha}return t.prototype.apply=function(e){var n=this;if(e==null)return this.visibilityFilters=null,null;this.visibilityFilters!=null&&this.visibilityFilters.length===e.length||(this.visibilityFilters=e.map(function(a){return new gl(n.alpha)}));for(var r=[],s=0;s<e.length;++s){var i=e[s],o=nn({},i);o.score=this.visibilityFilters[s].apply(i.score),r.push(o)}return r},t}(),vLe={reduceBoxesInLowestlayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:5,minScale:.1484375,maxScale:.75,inputSizeHeight:224,inputSizeWidth:224,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,32,32,32],aspectRatios:[1],fixedAnchorSize:!0},bh={runtime:"tfjs",modelType:"full",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/detector/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"},xLe={maxPoses:1,flipHorizontal:!1},bLe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2254,numCoords:12,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:4,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:224,yScale:224,hScale:224,wScale:224,minScoreThresh:.5},wLe=.3,j6={shiftX:0,shiftY:0,scaleX:1.25,scaleY:1.25,squareLong:!0},SLe={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},kLe={outputTensorSize:{width:256,height:256},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},ILe={numLandmarks:39,inputImageWidth:256,inputImageHeight:256,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},CLe={numLandmarks:39,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},TLe={kernelSize:7,minConfidenceToRefine:.5},G6={alpha:.1},$Le={oneEuroFilter:{frequency:30,minCutOff:.05,beta:80,derivateCutOff:1,minAllowedObjectScale:1e-6}},NLe={oneEuroFilter:{frequency:30,minCutOff:.01,beta:10,derivateCutOff:1,minAllowedObjectScale:1e-6}},ELe={oneEuroFilter:{frequency:30,minCutOff:.1,beta:40,derivateCutOff:1,minAllowedObjectScale:1e-6,disableValueScaling:!0}},_Le={activation:"none"},ALe={combineWithPreviousRatio:.7},OLe=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ot(this,void 0,void 0,function(){return Rt(this,function(e){return[2,JH(this.mask)]})})},t.prototype.toImageData=function(){return Ot(this,void 0,void 0,function(){return Rt(this,function(e){return[2,ZH(this.mask)]})})},t.prototype.toTensor=function(){return Ot(this,void 0,void 0,function(){return Rt(this,function(e){return[2,this.mask]})})},t.prototype.getUnderlyingType=function(){return"tensor"},t}();function RLe(t){return eq(t),"person"}var DLe=function(){function t(e,n,r,s,i,o){this.detectorModel=e,this.landmarkModel=n,this.enableSmoothing=r,this.enableSegmentation=s,this.smoothSegmentation=i,this.modelType=o,this.regionOfInterest=null,this.prevFilteredSegmentationMask=null,this.anchors=function(h){h.reduceBoxesInLowestLayer==null&&(h.reduceBoxesInLowestLayer=!1),h.interpolatedScaleAspectRatio==null&&(h.interpolatedScaleAspectRatio=1),h.fixedAnchorSize==null&&(h.fixedAnchorSize=!1);for(var f=[],d=0;d<h.numLayers;){for(var p=[],m=[],g=[],y=[],v=d;v<h.strides.length&&h.strides[v]===h.strides[d];){var b=L6(h.minScale,h.maxScale,v,h.strides.length);if(v===0&&h.reduceBoxesInLowestLayer)g.push(1),g.push(2),g.push(.5),y.push(.1),y.push(b),y.push(b);else{for(var x=0;x<h.aspectRatios.length;++x)g.push(h.aspectRatios[x]),y.push(b);if(h.interpolatedScaleAspectRatio>0){var w=v===h.strides.length-1?1:L6(h.minScale,h.maxScale,v+1,h.strides.length);y.push(Math.sqrt(b*w)),g.push(h.interpolatedScaleAspectRatio)}}v++}for(var S=0;S<g.length;++S){var k=Math.sqrt(g[S]);p.push(y[S]/k),m.push(y[S]*k)}var I=0,T=0;if(h.featureMapHeight.length>0)I=h.featureMapHeight[d],T=h.featureMapWidth[d];else{var N=h.strides[d];I=Math.ceil(h.inputSizeHeight/N),T=Math.ceil(h.inputSizeWidth/N)}for(var A=0;A<I;++A)for(var R=0;R<T;++R)for(var O=0;O<p.length;++O){var M={xCenter:(R+h.anchorOffsetX)/T,yCenter:(A+h.anchorOffsetY)/I,width:0,height:0};h.fixedAnchorSize?(M.width=1,M.height=1):(M.width=m[O],M.height=p[O]),f.push(M)}d=v}return f}(vLe);var a=Xn(this.anchors.map(function(h){return h.width})),l=Xn(this.anchors.map(function(h){return h.height})),u=Xn(this.anchors.map(function(h){return h.xCenter})),c=Xn(this.anchors.map(function(h){return h.yCenter}));this.anchorTensor={x:u,y:c,w:a,h:l},this.prevFilteredSegmentationMask=this.enableSegmentation?bo([],[0,0]):null}return t.prototype.estimatePoses=function(e,n,r){return Ot(this,void 0,void 0,function(){var s,i,o,a,l,u,c,h,f,d,p,m,g,y,v,b,x,w,S,k,I,T,N;return Rt(this,function(A){switch(A.label){case 0:return s=function(R){var O;if((O=R==null?xLe:nn({},R)).maxPoses==null&&(O.maxPoses=1),O.maxPoses<=0)throw new Error("Invalid maxPoses "+O.maxPoses+". Should be > 0.");if(O.maxPoses>1)throw new Error("Multi-pose detection is not implemented yet. Please set maxPoses to 1.");return O}(n),e==null?(this.reset(),[2,[]]):(this.maxPoses=s.maxPoses,this.timestamp=r!=null?1e3*r:iq(e)?1e6*e.currentTime:null,i=zm(e),o=Y(function(){return Ie(eR(e),"float32")}),(a=this.regionOfInterest)!=null?[3,2]:[4,this.detectPose(o)]);case 1:if((l=A.sent()).length===0)return this.reset(),o.dispose(),[2,[]];u=l[0],a=this.poseDetectionToRoi(u,i),A.label=2;case 2:return[4,this.poseLandmarksByRoi(a,o)];case 3:return c=A.sent(),o.dispose(),c==null?(this.reset(),[2,[]]):(h=c.landmarks,f=c.auxiliaryLandmarks,d=c.poseScore,p=c.worldLandmarks,m=c.segmentationMask,g=this.poseLandmarkFiltering(h,f,p,i),y=g.actualLandmarksFiltered,v=g.auxiliaryLandmarksFiltered,b=g.actualWorldLandmarksFiltered,x=this.poseLandmarksToRoi(v,i),this.regionOfInterest=x,w=this.smoothSegmentation&&m!=null?this.poseSegmentationFiltering(m):m,(S=y!=null?oq(y,i):null)!=null&&S.forEach(function(R,O){R.name=Bm[O]}),(k=b)!=null&&k.forEach(function(R,O){R.name=Bm[O]}),I={score:d,keypoints:S,keypoints3D:k},w!==null&&(T=Y(function(){var R=qn(w,2),O=Lc(R,[[0,0],[0,0],[0,1]]);return aO(O,[[0,0],[0,0],[0,2]],"symmetric")}),this.smoothSegmentation||je(w),N={maskValueToLabel:RLe,mask:new OLe(T)},I.segmentation=N),[2,[I]])}})})},t.prototype.poseSegmentationFiltering=function(e){var n=this.prevFilteredSegmentationMask;return n.size===0?this.prevFilteredSegmentationMask=e:(this.prevFilteredSegmentationMask=hLe(n,e,ALe),je(e)),je(n),this.prevFilteredSegmentationMask},t.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),je([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h,this.prevFilteredSegmentationMask])},t.prototype.reset=function(){this.regionOfInterest=null,this.enableSegmentation&&(je(this.prevFilteredSegmentationMask),this.prevFilteredSegmentationMask=bo([],[0,0])),this.visibilitySmoothingFilterActual=null,this.visibilitySmoothingFilterAuxiliary=null,this.landmarksSmoothingFilterActual=null,this.landmarksSmoothingFilterAuxiliary=null},t.prototype.detectPose=function(e){return Ot(this,void 0,void 0,function(){var n,r,s,i,o,a,l,u,c,h;return Rt(this,function(f){switch(f.label){case 0:return n=cN(e,SLe),r=n.imageTensor,s=n.padding,i=this.detectorModel.predict(r),o=lLe(i),a=o.boxes,[4,fLe([l=o.logits,a],this.anchorTensor,bLe)];case 1:return(u=f.sent()).length===0?(je([r,i,l,a]),[2,u]):[4,uLe(u,this.maxPoses,wLe)];case 2:return c=f.sent(),h=function(d,p){d===void 0&&(d=[]);for(var m=p.left,g=p.top,y=p.left+p.right,v=p.top+p.bottom,b=0;b<d.length;b++){var x=d[b],w=x.locationData.relativeBoundingBox,S=(w.xMin-m)/(1-y),k=(w.yMin-g)/(1-v),I=w.width/(1-y),T=w.height/(1-v);w.xMin=S,w.yMin=k,w.width=I,w.height=T,w.xMax=S+I,w.yMax=k+T;var N=x.locationData.relativeKeypoints;N&&N.forEach(function(A){var R=(A.x-m)/(1-y),O=(A.y-g)/(1-v);A.x=R,A.y=O})}return d}(c,s),je([r,i,l,a]),[2,h]}})})},t.prototype.poseDetectionToRoi=function(e,n){return U6(vI(e,n,{rotationVectorEndKeypointIndex:1,rotationVectorStartKeypointIndex:0,rotationVectorTargetAngleDegree:90}),n,j6)},t.prototype.poseLandmarksByRoi=function(e,n){return Ot(this,void 0,void 0,function(){var r,s,i,o,a,l,u,c,h,f,d,p,m,g;return Rt(this,function(y){switch(y.label){case 0:if(r=zm(n),s=cN(n,kLe,e),i=s.imageTensor,o=s.padding,a=s.transformationMatrix,this.modelType!=="lite"&&this.modelType!=="full"&&this.modelType!=="heavy")throw new Error("Model type must be one of lite, full or heavy,but got "+this.modelType);return l=["ld_3d","output_poseflag","activation_heatmap","world_3d"],this.enableSegmentation&&l.push("activation_segmentation"),u=this.landmarkModel.execute(i,l),[4,this.tensorsToPoseLandmarksAndSegmentation(u)];case 1:return(c=y.sent())==null?(je(u),je(i),[2,null]):(h=c.landmarks,f=c.auxiliaryLandmarks,d=c.poseScore,p=c.worldLandmarks,m=c.segmentationMask,[4,this.poseLandmarksAndSegmentationInverseProjection(r,e,o,a,h,f,p,m)]);case 2:return g=y.sent(),je(u),je(i),[2,nn({poseScore:d},g)]}})})},t.prototype.poseLandmarksAndSegmentationInverseProjection=function(e,n,r,s,i,o,a,l){return Ot(this,void 0,void 0,function(){var u,c,h,f,d,p;return Rt(this,function(m){return u=z6(i,r),c=z6(o,r),h=F6(u,n),f=F6(c,n),d=function(g,y){for(var v=[],b=0,x=g;b<x.length;b++){var w=x[b],S=w.x,k=w.y,I=y.rotation,T=Math.cos(I)*S-Math.sin(I)*k,N=Math.sin(I)*S+Math.cos(I)*k,A=nn({},w);A.x=T,A.y=N,v.push(A)}return v}(a,n),p=null,this.enableSegmentation&&(p=Y(function(){var g=l.shape,y=g[0],v=g[1],b=function(S){var k=rq(new Array(16).fill(0));k[0][0]=as(S,0,0),k[1][0]=-as(S,0,1),k[2][0]=as(S,0,2),k[3][0]=-as(S,0,3),k[0][2]=as(S,2,0),k[1][2]=-as(S,2,1),k[2][2]=as(S,2,2),k[3][2]=-as(S,2,3),k[0][1]=-as(S,1,0),k[1][1]=as(S,1,1),k[2][1]=-as(S,1,2),k[3][1]=as(S,1,3),k[0][3]=-as(S,3,0),k[1][3]=as(S,3,1),k[2][3]=-as(S,3,2),k[3][3]=as(S,3,3);for(var I=S[0][0]*k[0][0]+S[1][0]*k[0][1]+S[2][0]*k[0][2]+S[3][0]*k[0][3],T=0;T<k.length;T++)for(var N=0;N<k.length;N++)k[T][N]/=I;return k}(s),x=bo(nq(b,{width:v,height:y},e),[1,8]),w=[1,y,v,1];return At(Ar.transform(H(l,w),x,"bilinear","constant",0,[e.height,e.width]),[0,3])}),je(l)),[2,{landmarks:h,auxiliaryLandmarks:f,worldLandmarks:d,segmentationMask:p}]})})},t.prototype.tensorsToPoseLandmarksAndSegmentation=function(e){return Ot(this,void 0,void 0,function(){var n,r,s,i,o,a,l,u,c,h,f,d,p;return Rt(this,function(m){switch(m.label){case 0:return n=e[0],r=e[1],s=e[2],i=e[3],o=this.enableSegmentation?e[4]:null,[4,r.data()];case 1:return(a=m.sent()[0])<.5?[2,null]:[4,V6(n,ILe)];case 2:return[4,cLe(m.sent(),s,TLe)];case 3:return l=m.sent(),u=l.slice(0,33),c=l.slice(33,35),[4,V6(i,CLe)];case 4:return h=m.sent(),f=h.slice(0,33),d=function(g,y,v){v===void 0&&(v=!0);for(var b=[],x=0;x<g.length;x++){var w=nn({},y[x]);v&&(w.score=g[x].score),b.push(w)}return b}(u,f,!0),p=this.enableSegmentation?function(g,y,v){return Y(function(){var b=At(g,[0]),x=b.shape[2];if(x===1){var w=b;switch(y.activation){case"none":break;case"sigmoid":w=ha(w);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+y.activation+")")}var S=v?Ar.resizeBilinear(w,[v.height,v.width]):w;return At(S,[2])}throw new Error("Unsupported number of tensor channels "+x)})}(o,_Le):null,[2,{landmarks:u,auxiliaryLandmarks:c,poseScore:a,worldLandmarks:d,segmentationMask:p}]}})})},t.prototype.poseLandmarksToRoi=function(e,n){return U6(vI(B6(e),n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:90}),n,j6)},t.prototype.poseLandmarkFiltering=function(e,n,r,s){var i,o,a;if(this.timestamp!=null&&this.enableSmoothing){var l=vI(B6(n),s,{rotationVectorEndKeypointIndex:0,rotationVectorStartKeypointIndex:1,rotationVectorTargetAngleDegree:90});this.visibilitySmoothingFilterActual==null&&(this.visibilitySmoothingFilterActual=new W6(G6)),i=this.visibilitySmoothingFilterActual.apply(e),this.visibilitySmoothingFilterAuxiliary==null&&(this.visibilitySmoothingFilterAuxiliary=new W6(G6)),o=this.visibilitySmoothingFilterAuxiliary.apply(n),a=this.visibilitySmoothingFilterActual.apply(r),this.landmarksSmoothingFilterActual==null&&(this.landmarksSmoothingFilterActual=new SI($Le)),i=this.landmarksSmoothingFilterActual.apply(i,this.timestamp,s,!0,l),this.landmarksSmoothingFilterAuxiliary==null&&(this.landmarksSmoothingFilterAuxiliary=new SI(NLe)),o=this.landmarksSmoothingFilterAuxiliary.apply(o,this.timestamp,s,!0,l),this.worldLandmarksSmoothingFilterActual==null&&(this.worldLandmarksSmoothingFilterActual=new SI(ELe)),a=this.worldLandmarksSmoothingFilterActual.apply(r,this.timestamp)}else i=e,o=n,a=r;return{actualLandmarksFiltered:i,auxiliaryLandmarksFiltered:o,actualWorldLandmarksFiltered:a}},t}();function PLe(t){return Ot(this,void 0,void 0,function(){var e,n,r,s,i,o;return Rt(this,function(a){switch(a.label){case 0:return e=function(l){var u=nn({},l==null?bh:l);if(u.enableSmoothing==null&&(u.enableSmoothing=bh.enableSmoothing),u.enableSegmentation==null&&(u.enableSegmentation=bh.enableSegmentation),u.smoothSegmentation==null&&(u.smoothSegmentation=bh.smoothSegmentation),u.modelType==null&&(u.modelType=bh.modelType),u.detectorModelUrl==null&&(u.detectorModelUrl=bh.detectorModelUrl),u.landmarkModelUrl==null)switch(u.modelType){case"lite":u.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/lite/2";break;case"heavy":u.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/heavy/2";break;case"full":default:u.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"}return u}(t),n=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([Kf(e.detectorModelUrl,{fromTFHub:n}),Kf(e.landmarkModelUrl,{fromTFHub:r})])];case 1:return s=a.sent(),i=s[0],o=s[1],[2,new DLe(i,o,e.enableSmoothing,e.enableSegmentation,e.smoothSegmentation,e.modelType)]}})})}var cc,hs,aq=function(){function t(e){(function(n){if(n.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but encountered "+n.maxTracks);if(n.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but encountered "+n.maxAge);if(n.keypointTrackerParams!==void 0){if(n.keypointTrackerParams.keypointConfidenceThreshold<0||n.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+n.keypointTrackerParams.keypointConfidenceThreshold);if(n.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but encountered "+n.keypointTrackerParams.minNumberOfKeypoints);for(var r=0,s=n.keypointTrackerParams.keypointFalloff;r<s.length;r++){var i=s[r];if(i<=0)throw new Error("Must specify each keypoint falloff parameterto be positive but encountered "+i)}}})(e),this.tracks=[],this.maxTracks=e.maxTracks,this.maxAge=1e3*e.maxAge,this.minSimilarity=e.minSimilarity,this.nextID=1}return t.prototype.apply=function(e,n){this.filterOldTracks(n);var r=this.computeSimilarity(e);return this.assignTracks(e,r,n),this.updateTracks(n),e},t.prototype.getTracks=function(){return this.tracks.slice()},t.prototype.getTrackIDs=function(){return new Set(this.tracks.map(function(e){return e.id}))},t.prototype.filterOldTracks=function(e){var n=this;this.tracks=this.tracks.filter(function(r){return e-r.lastTimestamp<=n.maxAge})},t.prototype.assignTracks=function(e,n,r){for(var s=Array.from(Array(n[0].length).keys()),i=[],o=0,a=Array.from(Array(e.length).keys());o<a.length;o++){var l=a[o];if(s.length!==0){for(var u=-1,c=-1,h=0,f=s;h<f.length;h++){var d=f[h],p=n[l][d];p>=this.minSimilarity&&p>c&&(u=d,c=p)}if(u>=0){var m=this.tracks[u];m=Object.assign(m,this.createTrack(e[l],r,m.id)),e[l].id=m.id;var g=s.indexOf(u);s.splice(g,1)}else i.push(l)}else i.push(l)}for(var y=0,v=i;y<v.length;y++){l=v[y];var b=this.createTrack(e[l],r);this.tracks.push(b),e[l].id=b.id}},t.prototype.updateTracks=function(e){this.tracks.sort(function(n,r){return r.lastTimestamp-n.lastTimestamp}),this.tracks=this.tracks.slice(0,this.maxTracks)},t.prototype.createTrack=function(e,n,r){var s={id:r||this.nextTrackID(),lastTimestamp:n,keypoints:ec(e.keypoints).map(function(i){return nn({},i)})};return e.box!==void 0&&(s.box=nn({},e.box)),s},t.prototype.nextTrackID=function(){var e=this.nextID;return this.nextID+=1,e},t.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.tracks=this.tracks.filter(function(r){return!e.includes(r.id)})},t.prototype.reset=function(){this.tracks=[]},t}(),MLe=function(t){function e(n){return t.call(this,n)||this}return QH(e,t),e.prototype.computeSimilarity=function(n){var r=this;return n.length===0||this.tracks.length===0?[[]]:n.map(function(s){return r.tracks.map(function(i){return r.iou(s,i)})})},e.prototype.iou=function(n,r){var s=Math.max(n.box.xMin,r.box.xMin),i=Math.max(n.box.yMin,r.box.yMin),o=Math.min(n.box.xMax,r.box.xMax),a=Math.min(n.box.yMax,r.box.yMax);if(s>=o||i>=a)return 0;var l=(o-s)*(a-i);return l/(n.box.width*n.box.height+r.box.width*r.box.height-l)},e}(aq),FLe=function(t){function e(n){var r=t.call(this,n)||this;return r.keypointThreshold=n.keypointTrackerParams.keypointConfidenceThreshold,r.keypointFalloff=n.keypointTrackerParams.keypointFalloff,r.minNumKeyoints=n.keypointTrackerParams.minNumberOfKeypoints,r}return QH(e,t),e.prototype.computeSimilarity=function(n){if(n.length===0||this.tracks.length===0)return[[]];for(var r=[],s=0,i=n;s<i.length;s++){for(var o=i[s],a=[],l=0,u=this.tracks;l<u.length;l++){var c=u[l];a.push(this.oks(o,c))}r.push(a)}return r},e.prototype.oks=function(n,r){for(var s=this.area(r.keypoints)+1e-6,i=0,o=0,a=0;a<n.keypoints.length;++a){var l=n.keypoints[a],u=r.keypoints[a];if(!(l.score<this.keypointThreshold||u.score<this.keypointThreshold)){o+=1;var c=Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2),h=2*this.keypointFalloff[a];i+=Math.exp(-1*c/(2*s*Math.pow(h,2)))}}return o<this.minNumKeyoints?0:i/o},e.prototype.area=function(n){var r=this,s=n.filter(function(l){return l.score>r.keypointThreshold}),i=Math.min.apply(Math,ec([1],s.map(function(l){return l.x}))),o=Math.max.apply(Math,ec([0],s.map(function(l){return l.x}))),a=Math.min.apply(Math,ec([1],s.map(function(l){return l.y})));return(o-i)*(Math.max.apply(Math,ec([0],s.map(function(l){return l.y})))-a)},e}(aq);function lq(t){switch(t){case hs.BlazePose:return Bm.reduce(function(e,n,r){return e[n]=r,e},{});case hs.PoseNet:case hs.MoveNet:return la.reduce(function(e,n,r){return e[n]=r,e},{});default:throw new Error("Model "+t+" is not supported.")}}(function(t){t.Keypoint="keypoint",t.BoundingBox="boundingBox"})(cc||(cc={})),function(t){t.MoveNet="MoveNet",t.BlazePose="BlazePose",t.PoseNet="PoseNet"}(hs||(hs={}));Object.freeze({__proto__:null,getKeypointIndexBySide:function(t){switch(t){case hs.BlazePose:return ZFe;case hs.PoseNet:case hs.MoveNet:return eLe;default:throw new Error("Model "+t+" is not supported.")}},getAdjacentPairs:function(t){switch(t){case hs.BlazePose:return nLe;case hs.PoseNet:case hs.MoveNet:return tLe;default:throw new Error("Model "+t+" is not supported.")}},getKeypointIndexByName:lq});var H6=["SinglePose.Lightning","SinglePose.Thunder","MultiPose.Lightning"],uq={modelType:"SinglePose.Lightning",enableSmoothing:!0},q6={},K6={frequency:30,minCutOff:2.5,beta:300,derivateCutOff:2.5,thresholdCutOff:.5,thresholdBeta:5,disableValueScaling:!0},kI={maxTracks:18,maxAge:1e3,minSimilarity:.2,keypointTrackerParams:{keypointConfidenceThreshold:.3,keypointFalloff:[.026,.025,.025,.035,.035,.079,.079,.072,.072,.062,.062,.107,.107,.087,.087,.089,.089],minNumberOfKeypoints:4}},X6={maxTracks:18,maxAge:1e3,minSimilarity:.15,trackerParams:{}};function LLe(t,e,n,r){for(var s={},i=0,o=la;i<o.length;i++){var a=o[i];s[a]=[e[n[a]].y*r.height,e[n[a]].x*r.width]}if(function(v,b){return(v[b.left_hip].score>.2||v[b.right_hip].score>.2)&&(v[b.left_shoulder].score>.2||v[b.right_shoulder].score>.2)}(e,n)){var l=(s.left_hip[0]+s.right_hip[0])/2,u=(s.left_hip[1]+s.right_hip[1])/2,c=function(v,b,x,w,S){for(var k=["left_shoulder","right_shoulder","left_hip","right_hip"],I=0,T=0,N=0;N<k.length;N++)(z=Math.abs(w-x[k[N]][0]))>I&&(I=z),(B=Math.abs(S-x[k[N]][1]))>T&&(T=B);for(var A=0,R=0,O=0,M=Object.keys(x);O<M.length;O++){var z,B,K=M[O];v[b[K]].score<.2||((z=Math.abs(w-x[K][0]))>A&&(A=z),(B=Math.abs(S-x[K][1]))>R&&(R=B))}return[I,T,A,R]}(e,n,s,l,u),h=c[0],f=c[1],d=c[2],p=c[3],m=Math.max(1.9*f,1.9*h,1.2*d,1.2*p),g=[l-(m=Math.min(m,Math.max(u,r.width-u,l,r.height-l))),u-m];if(m>Math.max(r.width,r.height)/2)return fN(t==null,r);var y=2*m;return{yMin:g[0]/r.height,xMin:g[1]/r.width,yMax:(g[0]+y)/r.height,xMax:(g[1]+y)/r.width,height:(g[0]+y)/r.height-g[0]/r.height,width:(g[1]+y)/r.width-g[1]/r.width}}return fN(t==null,r)}function fN(t,e){var n,r,s,i;return t?e.width>e.height?(n=1,r=e.height/e.width,s=0,i=(e.width/2-e.height/2)/e.width):(n=e.width/e.height,r=1,s=(e.height/2-e.width/2)/e.height,i=0):e.width>e.height?(n=e.width/e.height,r=1,s=(e.height/2-e.width/2)/e.height,i=0):(n=1,r=e.height/e.width,s=0,i=(e.width/2-e.height/2)/e.width),{yMin:s,xMin:i,yMax:s+n,xMax:i+r,height:n,width:r}}function BLe(t){var e,n=t==null?uq:nn({},t);if(n.modelType==null)n.modelType="SinglePose.Lightning";else if(H6.indexOf(n.modelType)<0)throw new Error("Invalid architecture "+n.modelType+". Should be one of "+H6);if(n.enableSmoothing==null&&(n.enableSmoothing=!0),n.minPoseScore!=null&&(n.minPoseScore<0||n.minPoseScore>1))throw new Error("minPoseScore should be between 0.0 and 1.0");if(n.multiPoseMaxDimension!=null&&(n.multiPoseMaxDimension%32!=0||n.multiPoseMaxDimension<32))throw new Error("multiPoseMaxDimension must be a multiple of 32 and higher than 0");if(n.modelType==="MultiPose.Lightning"&&n.enableTracking==null&&(n.enableTracking=!0),n.modelType==="MultiPose.Lightning"&&n.enableTracking===!0)if(n.trackerType==null&&(n.trackerType=cc.BoundingBox),n.trackerType===cc.Keypoint)n.trackerConfig!=null?n.trackerConfig=function(r){var s=Y6(kI,r);return s.keypointTrackerParams=nn({},kI.keypointTrackerParams),r.keypointTrackerParams!=null&&(r.keypointTrackerParams.keypointConfidenceThreshold!=null&&(s.keypointTrackerParams.keypointConfidenceThreshold=r.keypointTrackerParams.keypointConfidenceThreshold),r.keypointTrackerParams.keypointFalloff!=null&&(s.keypointTrackerParams.keypointFalloff=r.keypointTrackerParams.keypointFalloff),r.keypointTrackerParams.minNumberOfKeypoints!=null&&(s.keypointTrackerParams.minNumberOfKeypoints=r.keypointTrackerParams.minNumberOfKeypoints)),s}(n.trackerConfig):n.trackerConfig=kI;else{if(n.trackerType!==cc.BoundingBox)throw new Error("Tracker type not supported by MoveNet");n.trackerConfig!=null?n.trackerConfig=(e=n.trackerConfig,Y6(X6,e)):n.trackerConfig=X6}return n}function Y6(t,e){var n={maxTracks:t.maxTracks,maxAge:t.maxAge,minSimilarity:t.minSimilarity};return e.maxTracks!=null&&(n.maxTracks=e.maxTracks),e.maxAge!=null&&(n.maxAge=e.maxAge),e.minSimilarity!=null&&(n.minSimilarity=e.minSimilarity),n}var zLe=function(){function t(e,n){this.moveNetModel=e,this.modelInputResolution={height:0,width:0},this.keypointIndexByName=lq(hs.MoveNet),n.modelType==="SinglePose.Lightning"?(this.modelInputResolution.width=192,this.modelInputResolution.height=192):n.modelType==="SinglePose.Thunder"&&(this.modelInputResolution.width=256,this.modelInputResolution.height=256),this.multiPoseModel=n.modelType==="MultiPose.Lightning",this.multiPoseModel||(this.keypointFilter=new hN(K6),this.cropRegionFilterYMin=new gl(.9),this.cropRegionFilterXMin=new gl(.9),this.cropRegionFilterYMax=new gl(.9),this.cropRegionFilterXMax=new gl(.9)),this.enableSmoothing=n.enableSmoothing,n.minPoseScore?this.minPoseScore=n.minPoseScore:this.minPoseScore=.25,n.multiPoseMaxDimension?this.multiPoseMaxDimension=n.multiPoseMaxDimension:this.multiPoseMaxDimension=256,this.enableTracking=n.enableTracking,this.multiPoseModel&&this.enableTracking&&(n.trackerType===cc.Keypoint?this.tracker=new FLe(n.trackerConfig):n.trackerType===cc.BoundingBox&&(this.tracker=new MLe(n.trackerConfig)),this.enableSmoothing&&(this.keypointFilterMap=new Map))}return t.prototype.runSinglePersonPoseModel=function(e){return Ot(this,void 0,void 0,function(){var n,r,s,i,o;return Rt(this,function(a){switch(a.label){case 0:if((n=this.moveNetModel.execute(e)).shape.length!==4||n.shape[0]!==1||n.shape[1]!==1||n.shape[2]!==17||n.shape[3]!==3)throw n.dispose(),new Error("Unexpected output shape from model: ["+n.shape+"]");return Bx()==="webgpu"?[3,1]:(r=n.dataSync(),[3,3]);case 1:return[4,n.data()];case 2:r=a.sent(),a.label=3;case 3:for(n.dispose(),s={keypoints:[],score:0},i=0,o=0;o<17;++o)s.keypoints[o]={y:r[3*o],x:r[3*o+1],score:r[3*o+2]},s.keypoints[o].score>.2&&(++i,s.score+=s.keypoints[o].score);return i>0&&(s.score/=i),[2,s]}})})},t.prototype.runMultiPersonPoseModel=function(e){return Ot(this,void 0,void 0,function(){var n,r,s,i,o,a,l,u;return Rt(this,function(c){switch(c.label){case 0:if((n=this.moveNetModel.execute(e)).shape.length!==3||n.shape[0]!==1||n.shape[2]!==56)throw n.dispose(),new Error("Unexpected output shape from model: ["+n.shape+"]");return Bx()==="webgpu"?[3,1]:(r=n.dataSync(),[3,3]);case 1:return[4,n.data()];case 2:r=c.sent(),c.label=3;case 3:for(n.dispose(),s=[],i=r.length/56,o=0;o<i;++o)for(s[o]={keypoints:[]},a=56*o+51,s[o].box={yMin:r[a],xMin:r[a+1],yMax:r[a+2],xMax:r[a+3],width:r[a+3]-r[a+1],height:r[a+2]-r[a]},l=56*o+55,s[o].score=r[l],s[o].keypoints=[],u=0;u<17;++u)s[o].keypoints[u]={y:r[56*o+3*u],x:r[56*o+3*u+1],score:r[56*o+3*u+2]};return[2,s]}})})},t.prototype.estimatePoses=function(e,n,r){return n===void 0&&(n=q6),Ot(this,void 0,void 0,function(){var s,i,o,a,l,u;return Rt(this,function(c){switch(c.label){case 0:return n=function(h){return h==null?q6:nn({},h)}(n),e==null?(this.reset(),[2,[]]):(r==null?iq(e)&&(r=1e6*e.currentTime):r*=1e3,s=eR(e),i=zm(s),o=qn(s,0),e instanceof Xt||s.dispose(),a=[],this.multiPoseModel?[3,2]:[4,this.estimateSinglePose(o,i,r)]);case 1:return a=c.sent(),[3,4];case 2:return[4,this.estimateMultiplePoses(o,i,r)];case 3:a=c.sent(),c.label=4;case 4:for(l=0;l<a.length;++l)for(u=0;u<a[l].keypoints.length;++u)a[l].keypoints[u].name=la[u],a[l].keypoints[u].y*=i.height,a[l].keypoints[u].x*=i.width;return[2,a]}})})},t.prototype.estimateSinglePose=function(e,n,r){return Ot(this,void 0,void 0,function(){var s,i,o,a,l=this;return Rt(this,function(u){switch(u.label){case 0:return this.cropRegion||(this.cropRegion=fN(this.cropRegion==null,n)),s=Y(function(){var c=bo([[l.cropRegion.yMin,l.cropRegion.xMin,l.cropRegion.yMax,l.cropRegion.xMax]]),h=Kn([1],"int32"),f=[l.modelInputResolution.height,l.modelInputResolution.width];return Ie(Ar.cropAndResize(e,c,h,f,"bilinear",0),"int32")}),e.dispose(),[4,this.runSinglePersonPoseModel(s)];case 1:if(i=u.sent(),s.dispose(),i.score<this.minPoseScore)return this.reset(),[2,[]];for(o=0;o<i.keypoints.length;++o)i.keypoints[o].y=this.cropRegion.yMin+i.keypoints[o].y*this.cropRegion.height,i.keypoints[o].x=this.cropRegion.xMin+i.keypoints[o].x*this.cropRegion.width;return r!=null&&this.enableSmoothing&&(i.keypoints=this.keypointFilter.apply(i.keypoints,r,1)),a=LLe(this.cropRegion,i.keypoints,this.keypointIndexByName,n),this.cropRegion=this.filterCropRegion(a),[2,[i]]}})})},t.prototype.estimateMultiplePoses=function(e,n,r){return Ot(this,void 0,void 0,function(){var s,i,o,a,l,u,c,h,f,d,p,m=this;return Rt(this,function(g){switch(g.label){case 0:return n.width>n.height?(i=this.multiPoseMaxDimension,o=Math.round(this.multiPoseMaxDimension*n.height/n.width),s=Ar.resizeBilinear(e,[o,i]),l=i,u=32*Math.ceil(o/32),a=Lc(s,[[0,0],[0,u-o],[0,0],[0,0]])):(i=Math.round(this.multiPoseMaxDimension*n.width/n.height),o=this.multiPoseMaxDimension,s=Ar.resizeBilinear(e,[o,i]),l=32*Math.ceil(i/32),u=o,a=Lc(s,[[0,0],[0,0],[0,l-i],[0,0]])),s.dispose(),e.dispose(),c=Ie(a,"int32"),a.dispose(),[4,this.runMultiPersonPoseModel(c)];case 1:for(h=g.sent(),c.dispose(),h=h.filter(function(y){return y.score>=m.minPoseScore}),d=0;d<h.length;++d)for(f=0;f<h[d].keypoints.length;++f)h[d].keypoints[f].y*=u/o,h[d].keypoints[f].x*=l/i;if(this.enableTracking&&(this.tracker.apply(h,r),this.enableSmoothing)){for(d=0;d<h.length;++d)this.keypointFilterMap.has(h[d].id)||this.keypointFilterMap.set(h[d].id,new hN(K6)),h[d].keypoints=this.keypointFilterMap.get(h[d].id).apply(h[d].keypoints,r,1);p=this.tracker.getTrackIDs(),this.keypointFilterMap.forEach(function(y,v){p.has(v)||m.keypointFilterMap.delete(v)})}return[2,h]}})})},t.prototype.filterCropRegion=function(e){if(e){var n=this.cropRegionFilterYMin.apply(e.yMin),r=this.cropRegionFilterXMin.apply(e.xMin),s=this.cropRegionFilterYMax.apply(e.yMax),i=this.cropRegionFilterXMax.apply(e.xMax);return{yMin:n,xMin:r,yMax:s,xMax:i,height:s-n,width:i-r}}return this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset(),null},t.prototype.dispose=function(){this.moveNetModel.dispose()},t.prototype.reset=function(){this.cropRegion=null,this.resetFilters()},t.prototype.resetFilters=function(){this.keypointFilter.reset(),this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset()},t}();function VLe(t){return t===void 0&&(t=uq),Ot(this,void 0,void 0,function(){var e,n,r,s;return Rt(this,function(i){switch(i.label){case 0:return e=BLe(t),r=!0,e.modelUrl?(r=typeof e.modelUrl=="string"&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,Kf(e.modelUrl,{fromTFHub:r})]):[3,2];case 1:return n=i.sent(),[3,4];case 2:return s=void 0,e.modelType==="SinglePose.Lightning"?s="https://tfhub.dev/google/tfjs-model/movenet/singlepose/lightning/4":e.modelType==="SinglePose.Thunder"?s="https://tfhub.dev/google/tfjs-model/movenet/singlepose/thunder/4":e.modelType==="MultiPose.Lightning"&&(s="https://tfhub.dev/google/tfjs-model/movenet/multipose/lightning/1"),[4,Kf(s,{fromTFHub:r})];case 3:n=i.sent(),i.label=4;case 4:return Bx()==="webgl"&&re().set("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",0),[2,new zLe(n,e)]}})})}var Q6={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:{height:257,width:257}},J6=["MobileNetV1","ResNet50"],Z6={MobileNetV1:[8,16],ResNet50:[16]},ULe=[8,16,32],e5={MobileNetV1:[.5,.75,1],ResNet50:[1]},t5=[1,2,4],WLe={maxPoses:1,flipHorizontal:!1},jLe={maxPoses:5,flipHorizontal:!1,scoreThreshold:.5,nmsRadius:20},GLe=[-123.15,-115.9,-103.06];function II(t){return Math.floor(t/2)}var HLe=function(){function t(e,n){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=n}return t.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},t.prototype.empty=function(){return this.numberOfElements===-1},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(e){for(;e>0&&this.less(II(e),e);)this.exchange(e,II(e)),e=II(e)},t.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var n=2*e;if(n<this.numberOfElements&&this.less(n,n+1)&&n++,!this.less(e,n))break;this.exchange(e,n),e=n}},t.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},t.prototype.less=function(e,n){return this.getValueAt(e)<this.getValueAt(n)},t.prototype.exchange=function(e,n){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[n],this.priorityQueue[n]=r},t}();function qLe(t,e,n,r,s,i){for(var o=i.shape,a=o[0],l=o[1],u=!0,c=Math.max(n-s,0),h=Math.min(n+s+1,a),f=c;f<h;++f){for(var d=Math.max(r-s,0),p=Math.min(r+s+1,l),m=d;m<p;++m)if(i.get(f,m,t)>e){u=!1;break}if(!u)break}return u}function KLe(t){return Ot(this,void 0,void 0,function(){return Rt(this,function(e){return[2,Promise.all(t.map(function(n){return n.buffer()}))]})})}function cq(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+17)}}function hq(t,e,n){var r=cq(t.heatmapY,t.heatmapX,t.id,n),s=r.y,i=r.x;return{x:t.heatmapX*e+i,y:t.heatmapY*e+s}}function fq(t,e,n,r){var s=n.x,i=n.y;return t.some(function(o){var a,l,u,c,h,f,d=o.keypoints;return a=i,l=s,u=d[r].y,c=d[r].x,(h=u-a)*h+(f=c-l)*f<=e})}var n5=la.reduce(function(t,e,n){return t[e]=n,t},{}),dq=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map(function(t){var e=t[0],n=t[1];return[n5[e],n5[n]]}),CI=dq.map(function(t){return t[1]}),r5=dq.map(function(t){return t[0]});function s5(t,e,n){return t<e?e:t>n?n:t}function TI(t,e,n,r){return{y:s5(Math.round(t.y/e),0,n-1),x:s5(Math.round(t.x/e),0,r-1)}}function i5(t,e){return{x:t.x+e.x,y:t.y+e.y}}function o5(t,e,n,r,s,i,o,a){a===void 0&&(a=2);for(var l=r.shape,u=l[0],c=l[1],h={y:e.y,x:e.x},f=i5(h,function(v,b,x){var w=x.shape[2]/2;return{y:x.get(b.y,b.x,v),x:x.get(b.y,b.x,w+v)}}(t,TI(h,i,u,c),o)),d=0;d<a;d++){var p=TI(f,i,u,c),m=cq(p.y,p.x,n,s);f=i5({x:p.x*i,y:p.y*i},{x:m.x,y:m.y})}var g=TI(f,i,u,c),y=r.get(g.y,g.x,n);return{y:f.y,x:f.x,name:la[n],score:y}}function XLe(t,e,n,r,s,i){var o=e.shape[2],a=CI.length,l=new Array(o),u=t.part,c=t.score,h=hq(u,r,n);l[u.id]={score:c,name:la[u.id],y:h.y,x:h.x};for(var f=a-1;f>=0;--f){var d=CI[f],p=r5[f];l[d]&&!l[p]&&(l[p]=o5(f,l[d],p,e,n,r,i))}for(f=0;f<a;++f)d=r5[f],p=CI[f],l[d]&&!l[p]&&(l[p]=o5(f,l[d],p,e,n,r,s));return l}function YLe(t,e,n){return n.reduce(function(r,s,i){var o=s.y,a=s.x,l=s.score;return fq(t,e,{y:o,x:a},i)||(r+=l),r},0)/n.length}function QLe(t,e,n,r,s,i,o,a){return o===void 0&&(o=.5),a===void 0&&(a=20),Ot(this,void 0,void 0,function(){var l,u,c,h,f,d,p,m,g,y,v,b;return Rt(this,function(x){switch(x.label){case 0:return[4,KLe([t,e,n,r])];case 1:for(l=x.sent(),u=l[0],c=l[1],h=l[2],f=l[3],d=[],p=function(w,S,k){for(var I=k.shape,T=I[0],N=I[1],A=I[2],R=new HLe(T*N*A,function(K){return K.score}),O=0;O<T;++O)for(var M=0;M<N;++M)for(var z=0;z<A;++z){var B=k.get(O,M,z);B<w||qLe(z,B,O,M,S,k)&&R.enqueue({score:B,part:{heatmapY:O,heatmapX:M,id:z}})}return R}(o,1,u),m=a*a;d.length<i&&!p.empty();)g=p.dequeue(),y=hq(g.part,s,c),fq(d,m,y,g.part.id)||(v=XLe(g,u,c,s,h,f),b=YLe(d,m,v),d.push({keypoints:v,score:b}));return[2,d]}})})}function JLe(t){var e=t.shape,n=e[0],r=e[1],s=e[2];return Y(function(){var i,o,a=H(t,[n*r,s]),l=Mc(a,0),u=qn(Ne(l,ze(r,"int32")),1),c=qn((i=l,o=r,Y(function(){var h=Ne(i,ze(o,"int32"));return _e(i,W(h,ze(o,"int32")))})),1);return Rn([u,c],1)})}function ZLe(t,e,n){return Y(function(){var r=function(s,i){for(var o=[],a=0;a<la.length;a++){var l=s.get(a,0).valueOf(),u=s.get(a,1).valueOf(),c=e4e(l,u,a,i),h=c.x,f=c.y;o.push(f),o.push(h)}return bo(o,[la.length,2])}(t,n);return de(Ie(W(t.toTensor(),ze(e,"int32")),"float32"),r)})}function e4e(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+la.length)}}function t4e(t,e,n){return Ot(this,void 0,void 0,function(){var r,s,i,o,a,l,u,c,h,f;return Rt(this,function(d){switch(d.label){case 0:return r=0,s=JLe(t),[4,Promise.all([t.buffer(),e.buffer(),s.buffer()])];case 1:return i=d.sent(),o=i[0],a=i[1],l=i[2],[4,(u=ZLe(l,n,a)).buffer()];case 2:return c=d.sent(),h=Array.from(function(p,m){for(var g=m.shape[0],y=new Float32Array(g),v=0;v<g;v++){var b=m.get(v,0),x=m.get(v,1);y[v]=p.get(b,x,v)}return y}(o,l)),f=h.map(function(p,m){return r+=p,{y:c.get(m,0),x:c.get(m,1),score:p,name:la[m]}}),s.dispose(),u.dispose(),[2,{keypoints:f,score:r/f.length}]}})})}function a5(t,e){return(t-1)%e==0}var l5="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",u5="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function c5(t,e){return function(n,r){return(n-1)%r==0}(t,e)?t:Math.floor(t/e)*e+1}var h5=function(){function t(e,n){this.posenetModel=e;var r=this.posenetModel.inputs[0].shape;P(r[1]===-1&&r[2]===-1,function(){return"Input shape ["+r[1]+", "+r[2]+"] must both be equal to or -1"});var s,i,o=(s=n.inputResolution,i=n.outputStride,{height:c5(s.height,i),width:c5(s.width,i)});(function(a){P(ULe.indexOf(a)>=0,function(){return"outputStride of "+a+" is invalid. It must be either 8 or 16."})})(n.outputStride),function(a,l){P(a5(a.height,l),function(){return"height of "+a.height+" is invalid for output stride "+l+"."}),P(a5(a.width,l),function(){return"width of "+a.width+" is invalid for output stride "+l+"."})}(o,n.outputStride),this.inputResolution=o,this.outputStride=n.outputStride,this.architecture=n.architecture}return t.prototype.estimatePoses=function(e,n){return n===void 0&&(n=WLe),Ot(this,void 0,void 0,function(){var r,s,i,o,a,l,u,c,h,f,d,p,m,g,y;return Rt(this,function(v){switch(v.label){case 0:return r=function(b){var x=b;if(x.maxPoses==null&&(x.maxPoses=1),x.maxPoses<=0)throw new Error("Invalid maxPoses "+x.maxPoses+". Should be > 0.");if(x.maxPoses>1){if((x=nn(nn({},jLe),x)).scoreThreshold<0||x.scoreThreshold>1)throw new Error("Invalid scoreThreshold "+x.scoreThreshold+". Should be in range [0.0, 1.0]");if(x.nmsRadius<=0)throw new Error("Invalid nmsRadius "+x.nmsRadius+".")}return x}(n),e==null?[2,[]]:(this.maxPoses=r.maxPoses,s=cN(e,{outputTensorSize:this.inputResolution,keepAspectRatio:!0,borderMode:"replicate"}),i=s.imageTensor,o=s.padding,a=this.architecture==="ResNet50"?de(i,GLe):sq(i,[-1,1]),l=this.posenetModel.predict(a),this.architecture==="ResNet50"?(u=At(l[2],[0]),c=At(l[3],[0]),h=At(l[0],[0]),f=At(l[1],[0])):(u=At(l[0],[0]),c=At(l[1],[0]),h=At(l[2],[0]),f=At(l[3],[0])),d=ha(c),this.maxPoses!==1?[3,2]:[4,t4e(d,u,this.outputStride)]);case 1:return m=v.sent(),p=[m],[3,4];case 2:return[4,QLe(d,u,h,f,this.outputStride,this.maxPoses,r.scoreThreshold,r.nmsRadius)];case 3:p=v.sent(),v.label=4;case 4:return g=zm(e),y=function(b,x,w,S){var k=x.height,I=x.width,T=k/(w.height*(1-S.top-S.bottom)),N=I/(w.width*(1-S.left-S.right)),A=-S.top*w.height,R=-S.left*w.width;if(N===1&&T===1&&A===0&&R===0)return b;for(var O=0,M=b;O<M.length;O++)for(var z=0,B=M[O].keypoints;z<B.length;z++){var K=B[z];K.x=(K.x+R)*N,K.y=(K.y+A)*T}return b}(p,g,this.inputResolution,o),r.flipHorizontal&&(y=function(b,x){for(var w=0,S=b;w<S.length;w++)for(var k=0,I=S[w].keypoints;k<I.length;k++){var T=I[k];T.x=x.width-1-T.x}return b}(y,g)),i.dispose(),a.dispose(),je(l),u.dispose(),c.dispose(),h.dispose(),f.dispose(),d.dispose(),[2,y]}})})},t.prototype.dispose=function(){this.posenetModel.dispose()},t.prototype.reset=function(){},t}();function n4e(t){return t===void 0&&(t=Q6),Ot(this,void 0,void 0,function(){var e,n,r,s,i;return Rt(this,function(o){switch(o.label){case 0:return(e=function(c){var h=c||Q6;if(h.architecture==null&&(h.architecture="MobileNetV1"),J6.indexOf(h.architecture)<0)throw new Error("Invalid architecture "+h.architecture+". Should be one of "+J6);if(h.inputResolution==null&&(h.inputResolution={height:257,width:257}),h.outputStride==null&&(h.outputStride=16),Z6[h.architecture].indexOf(h.outputStride)<0)throw new Error("Invalid outputStride "+h.outputStride+". Should be one of "+Z6[h.architecture]+" for architecture "+h.architecture+".");if(h.multiplier==null&&(h.multiplier=1),e5[h.architecture].indexOf(h.multiplier)<0)throw new Error("Invalid multiplier "+h.multiplier+". Should be one of "+e5[h.architecture]+" for architecture "+h.architecture+".");if(h.quantBytes==null&&(h.quantBytes=4),t5.indexOf(h.quantBytes)<0)throw new Error("Invalid quantBytes "+h.quantBytes+". Should be one of "+t5+" for architecture "+h.architecture+".");if(h.architecture==="MobileNetV1"&&h.outputStride===32&&h.multiplier!==1)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return h}(t)).architecture!=="ResNet50"?[3,2]:(a=e.outputStride,l=e.quantBytes,u="model-stride"+a+".json",n=l===4?u5+"float/"+u:u5+"quant"+l+"/"+u,[4,Kf(e.modelUrl||n)]);case 1:return r=o.sent(),[2,new h5(r,e)];case 2:return s=function(c,h,f){var d={1:"100",.75:"075",.5:"050"},p="model-stride"+c+".json";return f===4?l5+"float/"+d[h]+"/"+p:l5+"quant"+f+"/"+d[h]+"/"+p}(e.outputStride,e.multiplier,e.quantBytes),[4,Kf(e.modelUrl||s)];case 3:return i=o.sent(),[2,new h5(i,e)]}var a,l,u})})}function r4e(t,e){return Ot(this,void 0,void 0,function(){var n,r;return Rt(this,function(s){switch(t){case hs.PoseNet:return[2,n4e(e)];case hs.BlazePose:if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,PLe(e)];if(n.runtime==="mediapipe")return[2,aLe(e)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r);case hs.MoveNet:return[2,VLe(e)];default:throw new Error(t+" is not a supported model name.")}})})}var s4e={modelType:{SINGLEPOSE_LIGHTNING:"SinglePose.Lightning",SINGLEPOSE_THUNDER:"SinglePose.Thunder",MULTIPOSE_LIGHTNING:"MultiPose.Lightning"}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pq={kernelName:Vw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Uy(Ie(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4e={kernelName:Fg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Yt(Ie(n,"float32")),s=ts(_e(ze(1),r));return wn(Ne(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e={kernelName:Lg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ts(_e(Yt(Ie(n,"float32")),1));return Ne(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4e={kernelName:Cd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rt(n.shape,r.shape);return{a:()=>{let a=t;const l=ur(n.shape,s);return l.length>0&&(a=Be(a,l)),H(a,n.shape)},b:()=>{let a=t;const l=ur(r.shape,s);return l.length>0&&(a=Be(a,l)),H(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e={kernelName:Uw,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e={kernelName:Ww,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e={kernelName:jw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e={kernelName:Bg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,ts(_e(ze(1),Yt(Ie(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f4e={kernelName:zg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ts(de(ze(1),Yt(Ie(n,"float32"))));return Ne(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e={kernelName:Wg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rt(n.shape,r.shape);return{a:()=>{const a=de(Yt(n),Yt(r));let l=W(t,Ne(r,a));const u=ur(n.shape,s);return u.length>0&&(l=Be(l,u)),H(l,n.shape)},b:()=>{const a=de(Yt(n),Yt(r));let l=wn(W(t,Ne(n,a)));const u=ur(r.shape,s);return u.length>0&&(l=Be(l,u)),H(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e={kernelName:Vg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,de(Yt(Ie(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4e={kernelName:Ug,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,_e(ze(1),Yt(Ie(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4e(t,e,n,r,s,i){const o=F(t,"dy","avgPool3dGrad"),a=F(e,"input","avgPool3dGrad");let l=o,u=a,c=!1;a.rank===4&&(c=!0,l=H(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=H(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),P(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),P(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),xs("avgPool3dGrad",s,i);const h={dy:l,input:u},f={filterSize:n,strides:r,pad:s,dimRoundingMode:i},d=G.runKernel(VA,h,f);return c?H(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const y4e=q({avgPool3dGrad_:g4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e={kernelName:Hw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>y4e(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4e(t,e,n,r,s){const i=F(t,"dy","avgPoolGrad"),o=F(e,"input","avgPoolGrad");P(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,u=!1;o.rank===3&&(u=!0,a=H(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=H(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),P(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},h={filterSize:n,strides:r,pad:s},f=G.runKernel(zA,c,h);return u?H(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const b4e=q({avgPoolGrad_:x4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e={kernelName:Gw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>b4e(t,r,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e={kernelName:qw,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>Mt(t,s,!1,!0),b:()=>Mt(r,t,!0,!1)}:!i&&o?{a:()=>Mt(t,s,!1,!1),b:()=>Mt(t,r,!0,!1)}:i&&!o?{a:()=>Mt(s,t,!1,!0),b:()=>Mt(r,t,!1,!1)}:{a:()=>Mt(s,t,!0,!0),b:()=>Mt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4e={kernelName:Kw,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>eS(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e={kernelName:W_e,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,o=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Be(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e={kernelName:jg,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e={kernelName:Gg,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:Hg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>Ds(aa(nh(r,s),rh(r,i)),t,bt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4e={kernelName:Xw,inputsToSave:["x"],gradFunc:pq.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e={kernelName:Yw,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=pt(s,e[0].shape)[0],o=r.map(l=>l[i]);return ei(t,o,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e={kernelName:Qw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return P(Yl(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>Z3(r.shape,t,s,o,a,l),filter:()=>kO(r,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e={kernelName:Jw,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Ql(t,s,i,o,a,1,l),filter:()=>kO(t,r,s.shape,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4e(t,e,n,r,s){let i=t;t.rank===4&&(i=H(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=H(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),P(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),P(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),P(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),P(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),P(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:o},l={strides:r,pad:s,filterShape:n};return G.runKernel(HA,a,l)}const R4e=q({conv3DBackpropFilter_:O4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e={kernelName:Zw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;P(Yl(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>LG(o.shape,t,a,s,i),filter:()=>R4e(o,t,a.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e={kernelName:qg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(wn(pO(Ie(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4e={kernelName:Kg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(mO(Ie(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e={kernelName:e2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const a=Nn([s],r.rank);let l=nO(t,s,i,!o);return a!=null&&(l=xt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e={kernelName:t2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=r==null?[1,1]:r;P(Yl(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return P(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),P(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),P(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),P(Br(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),xs("depthwiseConv2d",i,o),{x:()=>SH(l.shape,t,u,s,i,a,o),filter:()=>wH(l,t,u.shape,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e={kernelName:n2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>G.runKernel(_$,i,n),filter:()=>G.runKernel(A$,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e={kernelName:Yg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>G.runKernel(t3,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V4e={kernelName:Qg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=W(Ps(wn(Yt(n))),2/Math.sqrt(Math.PI));return{x:()=>W(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e={kernelName:Jg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4e={kernelName:s2,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>H(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e={kernelName:Zg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Ps(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e={kernelName:ey,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e={kernelName:ty,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rt(n.shape,r.shape);return{a:()=>{const a=Ne(t,Ie(r,"float32")),l=ur(n.shape,s);return l.length>0?H(Be(a,l),n.shape):a},b:()=>{let a=W(t,Ie(n,"float32"));const l=ur(r.shape,s);l.length>0&&(a=H(Be(a,l),r.shape));const u=Yt(r);return wn(Ne(a,Ie(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e={kernelName:i2,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=a==null?ze(1):a,u=ur(i.shape,s.shape),c=[];if(i.rank===1){for(let x=0;x<s.shape.length-1;++x)c.push(s.shape[x]);c.push(1)}const h=_e(s,i),f=W(t,l),d=fO(de(o,ze(r))),p=W(W(W(d,d),d),ze(-.5));return{x:()=>i.rank===1?H(W(W(t,ji(H(d,[1,1,1,i.shape[0]]),c)),l),s.shape):H(W(W(t,d),l),s.shape),mean:()=>{let x=W(W(d,ze(-1)),f);return i.rank===1&&(x=Be(x,u)),H(x,i.shape)},variance:()=>{let x=W(W(p,h),f);return i.rank===1&&(x=Be(x,u)),H(x,i.shape)},scale:()=>{const x=W(h,d);let w=W(t,x);return i.rank===1&&(w=Be(w,u)),H(w,i.shape)},offset:()=>{let x=t;return i.rank===1&&(x=Be(x,u)),H(x,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e={kernelName:o2,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i}=n,o=pt(i,r.shape)[0];return{x:()=>{const l=r.shape,u=s.size,c=l.slice(0,o),h=c.length,f=l.slice(i,l.length).slice(1),d=f.length,p=f5(0,h),m=f5(h+1,h+1+d),g=d5([c,[u],f]),y=H(t,g),v=H(s,[u]),b=d5([[h],p,m]),x=xt(y,b);let w=yH(x,v,r.shape[o]);const S=gu(b);return w=xt(w,S),w},indices:()=>s}}};function f5(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function d5(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e={kernelName:ny,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>bt(n),b:()=>bt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e={kernelName:ry,gradFunc:t=>({x:()=>Ie(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4e={kernelName:sy,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4e={kernelName:iy,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e={kernelName:oy,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6e={kernelName:l2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Ti(r,0);return{x:()=>Ds(i,t,W(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t6e={kernelName:ly,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,de(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6e={kernelName:ay,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,Ie(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6e={kernelName:j_e,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const o=Ps(r);return _e(t,W(Be(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e(t,e,n,r=5,s=1,i=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:o};return G.runKernel(u3,a,l)}const i6e=q({localResponseNormalizationBackprop_:s6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o6e={kernelName:p2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>i6e(r,s,t,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mq(t,e,n,r){return e.rank<n.rank&&(e=H(e,zn(e.shape,r))),t.rank<n.rank&&(t=H(t,zn(t.shape,r))),{x:()=>W(t,Ie(Io(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5={kernelName:m2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=e[1],a=pt(s,i.shape),l=mq(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e={kernelName:uy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>W(t,Ie(nh(n,r),"float32")),b:()=>W(t,Ie(sO(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(t,e,n,r,s,i,o){const a=F(t,"dy","maxPool3dGrad"),l=F(e,"input","maxPool3dGrad"),u=F(n,"output","maxPool3dGrad");let c=a,h=l,f=u,d=!1;l.rank===4&&(d=!0,c=H(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),h=H(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=H(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),P(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),P(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),P(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),xs("maxPool3dGrad",i,o);const p={dy:c,input:h,output:f},m={filterSize:r,strides:s,pad:i,dimRoundingMode:o},g=G.runKernel(h3,p,m);return d?H(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const u6e=q({maxPool3dGrad_:l6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c6e={kernelName:y2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>u6e(t,r,s,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t,e,n,r,s,i,o){const a=F(t,"dy","maxPoolGrad"),l=F(e,"input","maxPoolGrad"),u=F(n,"output","maxPoolGrad");P(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),P(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),P(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),xs("maxPoolGrad",i,o);const c={dy:a,input:l,output:u},h={filterSize:r,strides:s,pad:i,dimRoundingMode:o};return G.runKernel(c3,c,h)}const f6e=q({maxPoolGrad_:h6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6e={kernelName:g2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>f6e(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6e={kernelName:v2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=pt(s,r.shape),a=Sr(r.shape,i)[1],l=ie(a);return{x:()=>{const c=r.shape.slice();i.forEach(d=>{c[d]=1});const h=H(t,c);return Ne(W(h,Xa(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m6e={kernelName:x2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=pt(s,i.shape),l=mq(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e={kernelName:cy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>W(t,Ie(rh(n,r),"float32")),b:()=>W(t,Ie(Ti(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6e={kernelName:b2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>Je(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v6e={kernelName:hy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rt(n.shape,r.shape);return{a:()=>{const a=ur(n.shape,s);return a.length>0?H(Be(t,a),n.shape):t},b:()=>{const a=W(t,wn(zy(Ne(n,r)))),l=ur(r.shape,s);return l.length>0?H(Be(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x6e={kernelName:fy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rt(n.shape,r.shape);return{a:()=>{const a=W(t,Ie(r,"float32")),l=ur(n.shape,s);return l.length>0?H(Be(a,l),n.shape):a},b:()=>{const a=W(t,Ie(n,"float32")),l=ur(r.shape,s);return l.length>0?H(Be(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6e={kernelName:w2,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6e={kernelName:I2,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Kn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6e={kernelName:k2,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k6e={kernelName:C2,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Co(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m5={kernelName:T2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>Je(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I6e={kernelName:dy,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=rt(i.shape,o.shape);return{a:()=>{const c=Ie(o,"float32");let h=W(t,W(c,Fc(i,_e(c,ze(1)))));const f=ur(i.shape,a);return f.length>0&&(h=Be(h,f)),H(h,i.shape)},b:()=>{const c=Ti(i,0),h=Ds(c,bi(i),bt(i));let f=W(t,W(s,h));const d=ur(o.shape,a);return d.length>0&&(f=Be(f,d)),H(f,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C6e={kernelName:$2,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Ti(n,0);return{x:()=>Ds(s,t,W(t,r)),alpha:()=>{let i=Ds(s,bt(t),W(t,n));const o=ur(r.shape,t.shape);return o.length>0&&(i=Be(i,o)),H(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T6e(t,e,n){const r=t.shape.slice();r[n]=1;const s=H(e,r),i=Ux(t,n,!0,!1),o=Ux(t,n,!0,!0),a=W(i,o);return W(s,a)}function $6e(t,e,n){const r=t.shape.length,s=r-n.length,i=Nn(n,r);let o=t;i!=null&&(o=xt(t,i));const a=o.shape.slice(),u=a.splice(r-n.length,n.length).reduce((f,d)=>f*d,1);a.push(u);const c=o.reshape(a);let h=T6e(c,e,s);if(h=h.reshape(o.shape),i!=null){const f=gu(i);h=xt(h,f)}return h}const N6e={kernelName:N2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((o,a)=>a):typeof s=="number"?i=[s]:i=s,{x:()=>$6e(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E6e={kernelName:Xg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rt(n.shape,r.shape);return{a:()=>{const a=Ne(t,Ie(r,"float32")),l=ur(n.shape,s);return l.length>0?H(Be(a,l),n.shape):a},b:()=>{let a=W(t,Ie(n,"float32"));const l=ur(r.shape,s);l.length>0&&(a=H(Be(a,l),r.shape));const u=Yt(r);return wn(Ne(a,Ie(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e={kernelName:py,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,wn(Yt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6e={kernelName:gy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=W(rh(n,6),Uy(n));return{x:()=>W(t,Ie(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6e={kernelName:my,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Ie(Uy(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6e={kernelName:E2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D6e={kernelName:A2,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>G.runKernel(b3,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P6e={kernelName:_2,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>G.runKernel(x3,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6e={kernelName:O2,gradFunc:(t,e,n)=>{const{dims:r}=n,s=pt(r,t.shape);return{x:()=>Wa(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6e={kernelName:yy,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L6e={kernelName:vy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>wn(Ne(t,W(Fc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6e={kernelName:R2,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ie(bt(n),"float32"),t:()=>W(t,Ie(n,t.dtype)),e:()=>W(t,Ie(J2(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6e={kernelName:xy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ti(n,ze(0)),s=ze(uS),i=ze(cS),o=W(t,i),a=W(W(t,s),Ps(Ie(n,"float32")));return Ds(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6e={kernelName:ky,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W(n,_e(ze(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6e={kernelName:Sy,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6e={kernelName:by,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(X2(Ie(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6e={kernelName:wy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(tO(Ie(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6e={kernelName:D2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=G2(r,s,i),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],o[c]-a[c]-l[c]]);return{x:()=>Lc(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6e={kernelName:L2,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,o=W(t,r);return{logits:()=>_e(o,W(Be(o,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q6e={kernelName:Iy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,ha(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5={kernelName:M2,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>K2(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5={kernelName:F2,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Rn(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6e={kernelName:Cy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,W(ts(Ie(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6e={kernelName:N3,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W(Ie(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e={kernelName:Ty,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ze(2);return{a:()=>W(t,W(s,_e(n,r))),b:()=>W(t,W(s,_e(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6e={kernelName:Ay,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6e={kernelName:$y,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rt(n.shape,r.shape);return{a:()=>{let a=t;const l=ur(n.shape,s);return l.length>0&&(a=Be(a,l)),H(a,n.shape)},b:()=>{let a=t;const l=ur(r.shape,s);return l.length>0&&(a=Be(a,l)),H(wn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6e={kernelName:P2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;pt(i,r.shape).forEach(u=>{s[u]=1});const a=H(t,s),l=W(a,Xa(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5e={kernelName:Ny,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,Yt(X2(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t5e={kernelName:Ey,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(_e(ze(1),Yt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n5e={kernelName:_y,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let o=bt(r);if(r.rank===1)for(let a=0;a<s[0];++a)o=de(o,Je(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=de(o,Je(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)o=de(o,Je(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)for(let c=0;c<s[3];++c)o=de(o,Je(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r5e={kernelName:lf,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=gu(s);return{x:()=>xt(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5e={kernelName:B2,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>eo(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i5e={kernelName:z2,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>o5e(t,n)}}};function o5e(t,e){const n=fa(e,bt(e)),r=Ll(t,n);let s=nh(e,ze(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=qn(s,a+1);s=aa(s,Xa(r.shape,"bool"));const o=bt(r);return Ds(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5e={kernelName:V2,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5e=[pq,i4e,o4e,a4e,l4e,u4e,c4e,h4e,f4e,d4e,p4e,m4e,v4e,w4e,S4e,k4e,I4e,C4e,T4e,$4e,N4e,E4e,A4e,_4e,D4e,P4e,M4e,F4e,L4e,B4e,E6e,z4e,V4e,U4e,W4e,j4e,H4e,G4e,q4e,K4e,X4e,Y4e,Q4e,J4e,Z4e,e6e,t6e,n6e,r6e,o6e,p5,p5,a6e,c6e,d6e,p6e,m6e,g6e,y6e,v6e,x6e,b6e,w6e,S6e,k6e,m5,m5,I6e,C6e,N6e,_6e,A6e,O6e,R6e,D6e,P6e,M6e,F6e,L6e,B6e,z6e,V6e,U6e,W6e,j6e,G6e,H6e,q6e,g5,g5,y5,y5,K6e,Y6e,X6e,Q6e,J6e,Z6e,e5e,t5e,n5e,r5e,s5e,i5e,a5e];for(const t of l5e)H_e(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.abs=function(){return this.throwIfDisposed(),tr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.acos=function(){return this.throwIfDisposed(),TG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.acosh=function(){return this.throwIfDisposed(),$G(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.add=function(t){return this.throwIfDisposed(),de(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.all=function(t,e){return this.throwIfDisposed(),Y3(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.any=function(t,e){return this.throwIfDisposed(),zx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.argMax=function(t){return this.throwIfDisposed(),Mc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.argMin=function(t){return this.throwIfDisposed(),NG(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,()=>"The array must have only 1 element."),H(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.asType=function(t){return this.throwIfDisposed(),Ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.as1D=function(){return this.throwIfDisposed(),H(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.as2D=function(t,e){return this.throwIfDisposed(),H(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),H(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),H(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),H(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.asin=function(){return this.throwIfDisposed(),EG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.asinh=function(){return this.throwIfDisposed(),_G(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.atan=function(){return this.throwIfDisposed(),AG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.atan2=function(t){return this.throwIfDisposed(),OG(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.atanh=function(){return this.throwIfDisposed(),RG(this)};se().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),H2(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),K2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Gf(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.broadcastTo=function(t){return this.throwIfDisposed(),uc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.cast=function(t){return this.throwIfDisposed(),Ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.ceil=function(){return this.throwIfDisposed(),MG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Rs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Xt&&(t=[t]),Rn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),J3(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),eO(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Ql(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.cos=function(){return this.throwIfDisposed(),X2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.cosh=function(){return this.throwIfDisposed(),tO(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Ux(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),nO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),BG(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Fy(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),zG(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.divNoNan=function(t){return this.throwIfDisposed(),VG(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.div=function(t){return this.throwIfDisposed(),Ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.dot=function(t){return this.throwIfDisposed(),ROe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.elu=function(){return this.throwIfDisposed(),Ly(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.equal=function(t){return this.throwIfDisposed(),Io(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.erf=function(){return this.throwIfDisposed(),UG(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),GG(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.exp=function(){return this.throwIfDisposed(),Ps(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.expandDims=function(t){return this.throwIfDisposed(),qn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.expm1=function(){return this.throwIfDisposed(),HG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.fft=function(){return this.throwIfDisposed(),vO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.flatten=function(){return this.throwIfDisposed(),H(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.floor=function(){return this.throwIfDisposed(),zy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.floorDiv=function(t){return this.throwIfDisposed(),X3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.gather=function(t,e){return this.throwIfDisposed(),Ll(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.greaterEqual=function(t){return this.throwIfDisposed(),nh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.greater=function(t){return this.throwIfDisposed(),Ti(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.ifft=function(){return this.throwIfDisposed(),Gx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.irfft=function(){return this.throwIfDisposed(),dH(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.isFinite=function(){return this.throwIfDisposed(),nRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.isInf=function(){return this.throwIfDisposed(),sRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.isNaN=function(){return this.throwIfDisposed(),KG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.leakyRelu=function(t){return this.throwIfDisposed(),Y2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.lessEqual=function(t){return this.throwIfDisposed(),rh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.less=function(t){return this.throwIfDisposed(),sO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),XG(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.logSigmoid=function(){return this.throwIfDisposed(),gRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.logSoftmax=function(t){return this.throwIfDisposed(),iO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),YG(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.log=function(){return this.throwIfDisposed(),bi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.log1p=function(){return this.throwIfDisposed(),Q2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.logicalAnd=function(t){return this.throwIfDisposed(),aa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.logicalNot=function(){return this.throwIfDisposed(),J2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.logicalOr=function(t){return this.throwIfDisposed(),oO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.logicalXor=function(t){return this.throwIfDisposed(),IRe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Mt(this,t,e,n)};se().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Z2(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.max=function(t,e){return this.throwIfDisposed(),Xi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.maximum=function(t){return this.throwIfDisposed(),fa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.mean=function(t,e){return this.throwIfDisposed(),An(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.min=function(t,e){return this.throwIfDisposed(),Wx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.minimum=function(t){return this.throwIfDisposed(),Nd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),aO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.mod=function(t){return this.throwIfDisposed(),ZG(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.mul=function(t){return this.throwIfDisposed(),W(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.neg=function(){return this.throwIfDisposed(),wn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Hf(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.notEqual=function(t){return this.throwIfDisposed(),qf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),V3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.onesLike=function(){return this.throwIfDisposed(),wi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.pad=function(t,e){return this.throwIfDisposed(),Lc(this,t,e)};se().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),HRe(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.pow=function(t){return this.throwIfDisposed(),Fc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.prelu=function(t){return this.throwIfDisposed(),tS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.prod=function(t,e){return this.throwIfDisposed(),uO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.reciprocal=function(){return this.throwIfDisposed(),uH(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.relu=function(){return this.throwIfDisposed(),da(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.relu6=function(){return this.throwIfDisposed(),cO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.reshapeAs=function(t){return this.throwIfDisposed(),H(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.reshape=function(t){return this.throwIfDisposed(),H(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),kH(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),IH(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.reverse=function(t){return this.throwIfDisposed(),Wa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.rfft=function(){return this.throwIfDisposed(),xO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.round=function(){return this.throwIfDisposed(),hO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.rsqrt=function(){return this.throwIfDisposed(),fO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.selu=function(){return this.throwIfDisposed(),dO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),cH(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.sigmoid=function(){return this.throwIfDisposed(),ha(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.sign=function(){return this.throwIfDisposed(),hH(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.sin=function(){return this.throwIfDisposed(),pO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.sinh=function(){return this.throwIfDisposed(),mO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.slice=function(t,e){return this.throwIfDisposed(),Je(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.softmax=function(t){return this.throwIfDisposed(),nS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.softplus=function(){return this.throwIfDisposed(),$d(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),eS(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.split=function(t,e){return this.throwIfDisposed(),ei(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.sqrt=function(){return this.throwIfDisposed(),ts(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.square=function(){return this.throwIfDisposed(),Yt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.squaredDifference=function(t){return this.throwIfDisposed(),bO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.squeeze=function(t){return this.throwIfDisposed(),At(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Xt?[this,t]:[this,...t];return eo(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.step=function(t){return this.throwIfDisposed(),Uy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),pH(this,t,e,n,r,s,i,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.sub=function(t){return this.throwIfDisposed(),_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.sum=function(t,e){return this.throwIfDisposed(),Be(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.tan=function(){return this.throwIfDisposed(),mH(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.tanh=function(){return this.throwIfDisposed(),q2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.tile=function(t){return this.throwIfDisposed(),ji(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.toBool=function(){return this.throwIfDisposed(),Ie(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.toFloat=function(){return this.throwIfDisposed(),Ie(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.toInt=function(){return this.throwIfDisposed(),Ie(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.topk=function(t,e){return this.throwIfDisposed(),gH(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.transpose=function(t){return this.throwIfDisposed(),xt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.unique=function(t){return this.throwIfDisposed(),X$(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),yH(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.unstack=function(t){return this.throwIfDisposed(),Co(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.where=function(t,e){return this.throwIfDisposed(),Ds(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */se().prototype.zerosLike=function(){return this.throwIfDisposed(),bt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Mo.prototype)}}class Gi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Gi.prototype)}}class X extends Error{constructor(e){super(e),Object.setPrototypeOf(this,X.prototype)}}class st extends Error{constructor(e){super(e),Object.setPrototypeOf(this,st.prototype)}}class tR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,tR.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gq{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Fo(t,e){if(!t)throw new tR(e)}function v5(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Ns(t){return t.length===1?t[0]:t}function cn(t){return Array.isArray(t)?t:[t]}function va(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Uu(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Ai={};function nR(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function dN(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>dN(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:dN(r))}}}function Hy(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let o;if(i in n)o=n[i];else if(i in Ai)o=Ai[i];else if(o=e[i],o==null)throw new X(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const i=t;if(i.className==null||i.config==null)throw new X(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in Ai?[a,l]=Ai.className:o in e&&([a,l]=e[o]),a==null)throw new X(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const d of Object.keys(Ai))u[d]=Ai[d];for(const d of Object.keys(n))u[d]=n[d];const c=i.config;c.customObjects=u;const h=Object.assign({},Ai);for(const d of Object.keys(n))Ai[d]=n[d];dN(i.config);const f=l(a,i.config,n,s);return Ai=Object.assign({},h),f}else{const u=Object.assign({},Ai);for(const h of Object.keys(n))Ai[h]=n[h];const c=new a(i.config);return Ai=Object.assign({},u),c}}}function u5e(t,e){return t<e?-1:t>e?1:0}function H0(t,e){return-1*u5e(t,e)}function Bl(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function c5e(t){if(t==null)throw new X(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ih(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new X(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function rR(t,e,n=0,r=1/0){return Fo(n>=0),Fo(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function gr(t,e){Array.isArray(t)?(P(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>gr(n,`element ${r+1} of ${e}`))):P(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${yq(t)}.`)}function yq(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>yq(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function h5e(t,e,n){let r=n!=null?n():Is(),s;return(...o)=>{const a=n!=null?n():Is();return a-r<e||(r=a,s=t(...o)),s}}function vq(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let f5e=0;function xq(){return f5e++}const q0={};function hS(t=""){return t in q0||(q0[t]=0),q0[t]+=1,t+q0[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const d5e=["channelsFirst","channelsLast"],p5e=["nearest","bilinear"],m5e=["valid","same","causal"],g5e=["max","avg"],y5e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wh=new Map;function Un(t){ih(d5e,"DataFormat",t)}function v5e(t){ih(p5e,"InterpolationFormat",t)}function $i(t){ih(m5e,"PaddingMode",t)}function bq(t){ih(g5e,"PoolMode",t)}const Xp=[],x5="/";function hc(t,e){Xp.push(t);try{const n=e();return Xp.pop(),n}catch(n){throw Xp.pop(),n}}function x5e(){return Xp.length===0?"":Xp.join(x5)+x5}function wq(t){if(!kq(t))throw new Error("Not a valid tensor name: '"+t+"'");return x5e()+t}function Sq(t){if(!kq(t))throw new Error("Not a valid tensor name: '"+t+"'");wh.has(t)||wh.set(t,0);const e=wh.get(t);if(wh.set(t,wh.get(t)+1),e>0){const n=`${t}_${e}`;return wh.set(n,1),n}else return t}const b5e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function kq(t){return!!t.match(b5e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w5e(t){return t===parseInt(t.toString(),10)}function zl(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Xf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Jl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function To(t,e){if(e<t)throw new X(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let $I;function rr(){return $I==null&&($I=pG().epsilon()),$I}function $o(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fS(t,e){return Ie(t,e)}function qy(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),H(t,n)}function S5e(t,e){return Y(()=>{if(t.shape.length!==2)throw new X(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=qy(t,1);return pN(n,[1,e,1])})}function k5e(t){const e=[zl(t.shape)];return H(t,e)}function I5e(t){if(t.rank<=1)throw new X(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],zl(t.shape,1)];return H(t,e)}function fc(t,e,n){return Y(()=>{switch(t.rank){case 1:return gO(t,e,n);case 2:return fH(t,[e,0],[n,t.shape[1]]);case 3:return yO(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return jx(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Je(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Je(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new X(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function NI(t,e,n){return Y(()=>{switch(t.rank){case 1:return gO(t,e,n);case 2:return fH(t,[0,e],[t.shape[0],n]);case 3:return yO(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return jx(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function K0(t,e,n,r){return Y(()=>{switch(t.rank){case 1:return gO(t,e,n);case 2:switch(r){case 1:return fc(t,e,n);case 2:return NI(t,e,n);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return fc(t,e,n);case 2:return yO(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return NI(t,e,n);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return fc(t,e,n);case 2:return jx(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return jx(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return NI(t,e,n);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function sR(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Rn(t,e)}function b5(t,e){switch(t.rank){case 1:return sOe([t,e]);case 2:return oOe([t,e],0);case 3:return lOe([t,e],0);case 4:return cOe([t,e],0);default:throw new X(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function pN(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new X(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return ji(t,e)}function dS(t,e=0,n=1,r,s){return rDe(t,e,n,r,s)}function ea(t,e,n,r){if(t.rank<2||e.rank<2)throw new st(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new st(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return Y$({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?mN(t.rank,r,$o()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=H(t,[-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=H(xt(e,c),[l,-1]);const h=[...s,...u];return H(Y$({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?mN(t.rank,r,$o()):null,activation:n}),h)}}function Iq(t,e,n){return Y(()=>(Array.isArray(e)?e=Xn(e,"int32"):e=Ie(e,"int32"),Ll(t,e,n)))}function Ky(t){return W(t,t)}function mN(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new X(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?H(e,[1,r[0],1,1,1]):H(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?H(e,[1,1,1,1,r[0]]):H(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?H(e,[1,r[0],1,1]):H(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?H(e,[1,1,1,r[0]]):H(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?H(e,[1,r[0],1]):H(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?H(e,[1,1,r[0]]):H(e,[1].concat(r))}else if(t<3)return e;throw new X(`Unsupported input rank by biasAdd: ${e.rank}`)}function _o(t,e,n){return Y(()=>(n==null&&(n=$o()),Un(n),de(t,mN(t.rank,e,n))))}function C5e(t,e=1){if(e!==1)throw new st(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Ly(t)}function T5e(t){return Y(()=>Ne(t,de(tr(t),1)))}function Cq(t,e,n,r){return Y(()=>QDe(t,e,n,r))}function $5e(t){return Y(()=>{const e=de(.5,W(.2,t));return Rs(e,0,1)})}function Xy(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const N5e=["fanIn","fanOut","fanAvg"],E5e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _5e(t){ih(N5e,"FanMode",t)}function A5e(t){ih(E5e,"Distribution",t)}class so extends Td{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Tq extends so{apply(e,n){return Kn(e,n)}}Tq.className="Zeros";ge(Tq);class iR extends so{apply(e,n){return Xa(e,n)}}iR.className="Ones";ge(iR);class $q extends so{constructor(e){if(super(),typeof e!="object")throw new X(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new X(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Y(()=>W(ze(this.value),Xa(e,n)))}getConfig(){return{value:this.value}}}$q.className="Constant";ge($q);class Nq extends so{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Vy(e,this.minval,this.maxval,n)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Nq.className="RandomUniform";ge(Nq);class Eq extends so{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new st(`randomNormal does not support dType ${n}.`);return dS(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Eq.className="RandomNormal";ge(Eq);class _q extends so{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new st(`truncatedNormal does not support dType ${n}.`);return wO(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}_q.className="TruncatedNormal";ge(_q);class Aq extends so{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Y(()=>{if(e.length!==2||e[0]!==e[1])throw new X("Identity matrix initializer can only be used for 2D square matrices.");return W(this.gain,qG(e[0]))})}getConfig(){return{gain:this.gain}}}Aq.className="Identity";ge(Aq);function O5e(t,e="channelsLast"){let n,r;if(Un(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=zl(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=zl(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=zl(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class ni extends so{constructor(e){if(super(),e.scale<0)throw new X(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,_5e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,A5e(this.distribution),this.seed=e.seed}apply(e,n){const r=O5e(e),s=r[0],i=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,i):o/=Math.max(1,(s+i)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new st(`${this.getClassName()} does not support dType ${n}.`);return wO(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return Vy(e,-a,a,n)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ni.className="VarianceScaling";ge(ni);class oR extends ni{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ni.className}}oR.className="GlorotUniform";ge(oR);class aR extends ni{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ni.className}}aR.className="GlorotNormal";ge(aR);class lR extends ni{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ni.className}}lR.className="HeNormal";ge(lR);class uR extends ni{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ni.className}}uR.className="HeUniform";ge(uR);class cR extends ni{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ni.className}}cR.className="LeCunNormal";ge(cR);class hR extends ni{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ni.className}}hR.className="LeCunNormal";ge(hR);class Oq extends so{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,this.seed!=null)throw new st("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,n){return Y(()=>{if(e.length<2)throw new st("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);const r=e[0]>e[1]?[e[1],e[0]]:e,s=dS(r,0,1,"float32");let i=SMe.gramSchmidt(s);return e[0]>e[1]&&(i=xt(i)),W(this.gain,i)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Oq.className="Orthogonal";ge(Oq);const w5={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function S5(t,e={}){return Hy(t,Li.getMap().classNameMap,e,"initializer")}function $n(t){return nR(t)}function xn(t){if(typeof t=="string"){const e=t in w5?w5[t]:t;if(e==="GlorotNormal")return new aR;if(e==="GlorotUniform")return new oR;if(e==="HeNormal")return new lR;if(e==="HeUniform")return new uR;if(e==="LeCunNormal")return new cR;if(e==="LeCunUniform")return new hR;{const n={};return n.className=e,n.config={},S5(n)}}else return t instanceof so?t:S5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gN(t){return Array.isArray(t)&&Array.isArray(t[0])}function Xx(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function lt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new X(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function qt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new X(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yx(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const k5="Variable";class R5e{constructor(e,n="float32",r=k5,s=!0,i=null){this.dtype=n==null?"float32":n,this.shape=e.shape,this.id=xq(),r=r==null?k5:r,this.originalName=wq(r),this.name=Sq(this.originalName),this.trainable_=s,this.constraint=i,this.val=zDe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),D5e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function D5e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function yN(t){return t.map(e=>e.read())}function fR(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Wo{constructor(e,n,r,s,i,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=a,this.id=xq(),o!=null&&(this.originalName=wq(o),this.name=Sq(this.originalName)),this.rank=n.length}}let P5e=0;class pS{constructor(e,n){this.callArgs=n,this.id=P5e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let M5e=0;class Tt extends Td{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=M5e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=va(r)+"_"+hS(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Gi(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new X(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ns(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ns(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Mo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Mo(`Layer ${this.name} is not connected, no input to return.`);return Ns(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Mo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Mo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ns(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=cn(e),this.inputSpec==null||this.inputSpec.length===0)return;const n=cn(this.inputSpec);if(e.length!==n.length)throw new X(`Layer ${this.name} expects ${n.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let r=0;r<e.length;r++){const s=e[r],i=n[r];if(i==null)continue;const o=s.rank;if(i.ndim!=null&&o!==i.ndim)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(i.maxNDim!=null&&o>i.maxNDim)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(i.minNDim!=null&&o<i.minNDim)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(i.dtype!=null&&s.dtype!==i.dtype)throw new X(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${s.dtype}.`);if(i.axes){const a=s.shape;for(const l in i.axes){const u=Number(l),c=i.axes[l],h=u>=0?a[u]:a[a.length+u];if(c!=null&&[c,null].indexOf(h)===-1)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${a}.`)}}if(i.shape!=null)for(let a=0;a<i.shape.length;++a){const l=i.shape[a],u=s.shape[a];if(l!=null&&u!=null&&l!==u)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=cn(e);let s=!0;for(const o of r)if(!(o instanceof Wo)){s=!1;break}let i=!0;for(const o of r)if(o instanceof Wo){i=!1;break}if(s===i)throw new X("Arguments to apply() must be all SymbolicTensors or all Tensors");return hc(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of cn(e))o.push(a.shape);this.build(Ns(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let o=this.call(e,n);const a=cn(o),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(o=Ns(l),this.activityRegularizer!=null)throw new st("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=F5e(e),a=this.computeOutputShape(o);let l;const u=L5e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,h)=>new Wo(u,c,this,cn(e),n,this.name,h)):l=new Wo(u,a,this,cn(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new st("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Mo(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Mo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Gi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Yx(this.weights)}build(e){this.built=!0}getWeights(e=!1){return yN(e?this.trainableWeights:this.weights)}setWeights(e){Y(()=>{const n=this.weights;if(n.length!==e.length)throw new X(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=yN(n);for(let i=0;i<s.length;++i){const o=s[i],a=n[i],l=e[i];if(!Ct(o.shape,l.shape))throw new X(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}fR(r)})}addWeight(e,n,r,s,i,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new X(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():xn("zeros"));const u=s.apply(n,r),c=new R5e(u,r,e,o,a);return u.dispose(),i!=null&&this.addLoss(()=>i.apply(c.read())),o==null&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=cn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(e,n,r,s,i,o,a=null){const l=cn(e);n=cn(n),r=cn(r),s=cn(s),i=Xx(i),o=Xx(o);const u=[],c=[],h=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),h.push(f.tensorIndex);new pS({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:h,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:o},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function F5e(t){t=cn(t);const e=[];for(const n of t)e.push(n.shape);return Ns(e)}function L5e(t){return"float32"}function Rq(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const o=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],u=Rq(o,a,l);for(const c of u)s.indexOf(c)===-1&&s.push(c)}return s}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Yy extends Tt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:hS("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new X("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new X("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new X("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new Wo(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new pS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new X(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Yy.className="InputLayer";ge(Yy);function B5e(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new X("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Yy({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function z5e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ie(e,t.dtype)}catch{throw new X(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class yl{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof yl)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=z5e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new X(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Wo){if(this.id2Value[e.id]==null)throw new X(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new X(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Wo){if(this.id2Value[e.id]==null)throw new X(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new X(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&je(this.id2Mask)}}const Qx=new gq,Jx=new gq;function V5e(t){Qx!=null&&Qx.setMaxEntries(t),Jx!=null&&Jx.setMaxEntries(t)}function Tp(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),o=i?t:[t],a=o.map(p=>p.name),l=[],u=e.names();for(const p of a)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=a.join(",")+"|"+e.names().sort().join(",");let h=Qx.get(c),f;if(h==null){const p=U5e(o,e);h=p.sorted,f=p.recipientCounts,Qx.put(c,h),Jx.put(c,f)}f={},s||Object.assign(f,Jx.get(c));const d=new yl(e);for(let p=0;p<h.length;++p){if(r!=null){const T=H$().numTensors;T>r.maxNumTensors&&(r.maxNumTensors=T),T<r.minNumTensors&&(r.minNumTensors=T)}const m=h[p],g=m.sourceLayer;if(g instanceof Yy)continue;const y=[],v=[],b=[];let x=!1;for(const T of m.inputs){const N=d.getValue(T),A=d.getMask(T);y.push(N),v.push(A),A!=null&&(x=!0),s||(f[T.name]--,f[T.name]===0&&!e.hasKey(T)&&a.indexOf(T.name)===-1&&!N.isDisposed&&T.sourceLayer.stateful!==!0&&b.push(N))}x&&(n=n||{},n.mask=v[0]);const w=cn(g.apply(y,n));let S=null;g.supportsMasking&&(S=g.computeMask(y,v));const k=j5e(m),I=Array.isArray(k)?k:[k];for(let T=0;T<I.length;++T){d.hasKey(I[T])||d.add(I[T],w[T],Array.isArray(S)?S[0]:S);const N=a.indexOf(I[T].name);N!==-1&&(l[N]=w[T])}s||je(b)}return d.disposeMasks(),i?l:l[0]}function U5e(t,e){P(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=I5(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:o,recipientMap:a}=I5(i,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:W5e(r)}}function W5e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function I5(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=o[o.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(i.length-1);for(const u of a.inputs)s[u.name]==null&&(s[u.name]=new Set),s[u.name].add(a.name),!n.has(u.name)&&i.push(u)}}return{sorted:r,recipientMap:s}}function j5e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5e=re();G5e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,V5e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dR(t,e){return Y(()=>ts(Be(W(t,t),e,!0)))}class Qy extends Td{getConfig(){return{}}}class Dq extends Qy{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Y(()=>{const n=dR(e,this.axis),r=Rs(n,0,this.maxValue);return W(e,Ne(r,de(rr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Dq.className="MaxNorm";ge(Dq);class Pq extends Qy{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Y(()=>Ne(e,de(rr(),dR(e,this.axis))))}getConfig(){return{axis:this.axis}}}Pq.className="UnitNorm";ge(Pq);class Mq extends Qy{apply(e){return da(e)}}Mq.className="NonNeg";ge(Mq);class Fq extends Qy{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Y(()=>{const n=dR(e,this.axis),r=de(W(this.rate,Rs(n,this.minValue,this.maxValue)),W(1-this.rate,n));return W(e,Ne(r,de(rr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Fq.className="MinMaxNorm";ge(Fq);const C5={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function or(t){return nR(t)}function T5(t,e={}){return Hy(t,Li.getMap().classNameMap,e,"constraint")}function ar(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in C5?C5[t]:t,config:{}};return T5(n)}else return t instanceof Qy?t:T5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Nu(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const o=i;e.push(o.data()),n.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];je(r)}}function Lq(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var $5;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})($5||($5={}));const H5e=125;class Vm{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class q5e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class K5e extends Vm{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=Y(()=>de(this.totals[s],W(i,r)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Y(()=>{const s=W(Ne(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),_r(n[r])}))}}class X5e extends Vm{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const o=this.history[i];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(i),r.push(a)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class Y5e extends Vm{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||CH,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=H5e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");$$(this.yieldEvery)&&(this.maybeWait=h5e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await Nu(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Nu(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Nu(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Nu(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Nu(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):$$(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Nu(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Nu(e),await this.trainEnd(e))}}function Bq(t,e){return t==null&&(t={}),t instanceof Vm?[t]:Array.isArray(t)&&t[0]instanceof Vm?t:cn(t).map(r=>new Y5e(r,e))}class Ri{constructor(){}static registerCallbackConstructor(e,n){P(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ri.checkForDuplicate(n),Ri.constructors[e]==null&&(Ri.constructors[e]=[]),Ri.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ri.constructors)Ri.constructors[+n].forEach(s=>{if(s===e)throw new X("Duplicate callback constructor.")})}static clear(){Ri.constructors={}}static createCallbacks(e){const n=[];for(const r in Ri.constructors){const s=+r;e>=s&&n.push(...Ri.constructors[s])}return n.map(r=>new r)}}Ri.constructors={};function zq(t,e,n,r,s,i,o,a,l){const u=new X5e,c=[new K5e,...Ri.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const h=new q5e(c);return h.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:h,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ta(t,e={},n=!1){return Hy(t,Li.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zx(t,e){return Y(()=>{t.dtype!=="float32"&&(t=Ie(t,"float32"));const n=Be(Ky(t),e,!0),r=By(n.shape,rr()),s=ts(fa(n,r));return Ne(t,s)})}function mS(t,e){return Y(()=>An(Ky(_e(e,t)),-1))}function pR(t,e){return Y(()=>An(tr(_e(e,t)),-1))}function mR(t,e){return Y(()=>{const n=_e(t,e),r=Rs(tr(t),rr(),Number.MAX_VALUE),s=tr(Ne(n,r));return W(100,An(s,-1))})}function Q5e(t,e){return Y(()=>{const n=Rs(e,rr(),Number.MAX_VALUE),r=bi(de(1,n)),s=Rs(t,rr(),Number.MAX_VALUE),i=bi(de(1,s));return An(Ky(_e(r,i)),-1)})}function J5e(t,e){return Y(()=>{const n=fa(0,_e(1,W(t,e)));return An(Ky(n),-1)})}function Z5e(t,e){return Y(()=>{const n=fa(0,_e(1,W(t,e)));return An(n,-1)})}function eBe(t,e){return Y(()=>{const n=Be(W(t,e),-1),r=Xi(W(_e(1,t),e),-1);return fa(0,de(1,_e(r,n)))})}function tBe(t,e){return Y(()=>{const n=Math.log(2),r=_e(e,t),s=_e(de(r,$d(W(-2,r))),n);return An(s,-1)})}function Um(t,e,n=!1){return Y(()=>{if(n)e=nS(e);else{const r=Be(e,e.shape.length-1,!0);e=Ne(e,r)}return e=Rs(e,rr(),1-rr()),wn(Be(W(Ie(t,"float32"),bi(e)),e.shape.length-1))})}function eb(t,e,n=!1){return Y(()=>{const r=Ie(zy(k5e(t)),"int32");e=Rs(e,rr(),1-rr());const s=e.shape,i=H(V3(r,s[s.length-1]),s);return Um(i,e,n)})}function nBe(t,e){if(!Ct(t.shape,e.shape))throw new X(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Y(()=>{const n=da(e),r=wn(tr(e));return de(_e(n,W(e,t)),Q2(Ps(r)))})}function gS(t,e){return Y(()=>{let n;return n=Rs(e,rr(),1-rr()),n=bi(Ne(n,_e(1,n))),An(nBe(t,n),-1)})}function rBe(t,e){return Y(()=>{const n=Rs(t,rr(),1),r=Rs(e,rr(),1);return Be(W(t,bi(Ne(n,r))),-1)})}function sBe(t,e){return Y(()=>{const n=bi(de(rr(),e));return An(_e(e,W(t,n)),-1)})}function Vq(t,e){return Y(()=>{const n=Zx(t,-1),r=Zx(e,-1),s=W(n,r);return wn(Be(s,-1))})}const tb={meanSquaredError:mS,meanAbsoluteError:pR,meanAbsolutePercentageError:mR,meanSquaredLogarithmicError:Q5e,squaredHinge:J5e,hinge:Z5e,categoricalHinge:eBe,logcosh:tBe,categoricalCrossentropy:Um,sparseCategoricalCrossentropy:eb,binaryCrossentropy:gS,kullbackLeiblerDivergence:rBe,poisson:sBe,cosineProximity:Vq};function EI(t){if(typeof t=="string"){if(t in tb)return tb[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new X(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Uq(t,e){return Y(()=>{const n=W(.5,wi(e)),r=fS(Ti(e,n),t.dtype);return An(Io(t,r),-1)})}function Wq(t,e){return Y(()=>fS(Io(Mc(t,-1),Mc(e,-1)),"float32"))}function iBe(t,e){return Y(()=>Ie(Be(aa(Io(t,1),Io(e,1))),"float32"))}function oBe(t,e){return Y(()=>Ie(Be(aa(Io(t,0),Io(e,1))),"float32"))}function aBe(t,e){return Y(()=>{const n=iBe(t,e),r=oBe(t,e),s=de(n,r);return Ie(Ds(Ti(s,0),Ne(n,s),0),"float32")})}function lBe(t,e){return gS(t,e)}function uBe(t,e){return t.rank===e.rank&&(t=At(t,[t.rank-1])),e=Mc(e,-1),e.dtype!==t.dtype&&(e=Ie(e,t.dtype)),Ie(Io(t,e),"float32")}const cBe=mS,hBe=mS,fBe=pR,dBe=pR,pBe=mR,mBe=mR,jq=Um,gBe=Vq,Gq=eb,nb={binaryAccuracy:Uq,categoricalAccuracy:Wq,precision:aBe,categoricalCrossentropy:jq,sparseCategoricalCrossentropy:Gq,mse:cBe,MSE:hBe,mae:fBe,MAE:dBe,mape:pBe,MAPE:mBe,cosine:gBe};function yBe(t){if(typeof t=="string"&&t in nb)return nb[t];if(typeof t!="string"&&t!=null)return t;throw new X(`Unknown metric ${t}`)}function X0(t){if(Fo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(tb))if(tb[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(nb))if(nb[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vBe(t){const e={Adagrad:()=>xh.adagrad(.01),Adadelta:()=>xh.adadelta(1,.95,rr()),Adam:()=>xh.adam(.001,.9,.999,rr()),Adamax:()=>xh.adamax(.002,.9,.999,rr(),0),RMSProp:()=>xh.rmsprop(.001,.9,0,rr()),SGD:()=>xh.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new X(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const N5=1*1024*1024;function E5(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!vN(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>N5&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${N5}.`)}}function vN(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!vN(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!vN(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xBe(t,e,n,r=console.log){const s=wBe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let o;if(!s){i.push("Receives inputs"),o=[];for(const c in t.nodesByDepth)o.push(...t.nodesByDepth[c])}r("_".repeat(e)),rb(i,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)s?SBe(a[c],n,r):kBe(a[c],n,o,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=bBe(t),u=Yx(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function bBe(t){let e;return t.collectedTrainableWeights!=null?e=Yx(t.collectedTrainableWeights):e=Yx(t.trainableWeights),e}function wBe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function rb(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function SBe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,s,r,t.countParams().toString()];rb(a,e,n)}function kBe(t,e,n,r){let s,i;try{i=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let f=0;f<h.inboundLayers.length;++f){const d=h.inboundLayers[f].name,p=h.nodeIndices[f],m=h.tensorIndices[f];o.push(`${d}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),u=o.length===0?"":o[0],c=[`${a} (${l})`,i,s,t.countParams().toString(),u];rb(c,e,r);for(let h=1;h<o.length;++h)rb(["","","","",o[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hq(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function sb(t,e){if(t===null)return null;if(typeof t=="string")return Uu(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];Hq(e,s,i)?n.push(i):n.push(sb(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=Uu(r);n[i]=sb(s,i)}}return n}}function xN(t,e){if(t==null)return null;if(typeof t=="string")return va(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];Hq(e,s,i)?n.push(i):n.push(xN(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=va(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=xN(s,r)}return n}}/** @license See the LICENSE file. */const qq="3.18.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class co extends Tt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=hS(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Bl(this.inputs).length!==this.inputs.length)throw new X(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);Bl(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;Fo(x===0,"input layer has >1 nodes"),Fo(w===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const b=this.inputLayers[v];if(!(b instanceof Yy))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},s={},i={},o={},a=[],l=(v,b,x,w,S,k)=>{(w==null||S==null||k==null)&&(w=v.sourceLayer,S=v.nodeIndex,k=v.tensorIndex);const I=w.inboundNodes[S];if(x.indexOf(I)!==-1)throw new Gi(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(b.indexOf(I)!==-1)return;this.containerNodes.add(co.nodeKey(w,S)),w.id in o||(o[w.id]=Object.keys(o).length),x.indexOf(I)===-1&&x.push(I);const T=I.inboundLayers.length;for(let N=0;N<T;N++){const A=I.inputTensors[N],R=I.inboundLayers[N],O=I.nodeIndices[N],M=I.tensorIndices[N];l(A,b,x,R,O,M)}for(b.push(I);x.indexOf(I)>=0;)x.splice(x.indexOf(I),1);a.push(I)},u=[],c=[];for(const v of this.outputs)l(v,u,c);const h=a.slice().reverse();for(const v of h){r[v.id]=v,v.id in n||(n[v.id]=0);let b=n[v.id];const x=s[v.outboundLayer.id]==null?0:s[v.outboundLayer.id];b=Math.max(b,x),s[v.outboundLayer.id]=b,i[v.outboundLayer.id]=v.outboundLayer,n[v.id]=b;for(let w=0;w<v.inboundLayers.length;w++){const S=v.inboundLayers[w],k=v.nodeIndices[w],I=S.inboundNodes[k],T=n[I.id]==null?0:n[I.id];n[I.id]=Math.max(b+1,T),r[I.id]=I}}const f={};for(const v in n){const b=n[v];b in f||(f[b]=[]),f[b].push(r[v])}const d={};for(const v in s){const b=s[v];b in d||(d[b]=[]),d[b].push(i[v])}let p=Object.keys(d).map(v=>parseInt(v,10)).sort(H0);this.layers=[];for(const v of p){const b=d[v];b.sort((x,w)=>{const S=o[x.id],k=o[w.id];return S<k?-1:S>k?1:0});for(const x of b)x instanceof co&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=d,p=Object.keys(f).map(v=>parseInt(v,10)).sort(H0);const m=this.inputs.slice(),g=[];for(const v of p)for(const b of f[v]){const x=b.outboundLayer;if(x!=null){for(const w of b.inputTensors)if(m.indexOf(w)===-1)throw new Gi(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${x.name}". The following previous layers were accessed without issue: ${g}`);for(const w of b.outputTensors)m.push(w);g.push(x.name)}}this.nodesByDepth=f;const y=this.layers.map(v=>v.name);for(const v of y){const b=y.filter(x=>x===v).length;if(b!==1)throw new Gi(`The name "${v}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new pS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new X("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;for(const o of this.layers)for(const a of o.weights){if(r[a.originalName]!=null)throw new X(`Duplicate weight name: ${a.originalName}`);r[a.originalName]=a,s++}const i=[];for(const o in e){let a=o;if(r[o]==null){const l=o.split("/");a=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[a]!=null)i.push([r[a],e[o]]);else if(n)throw new X(`Provided weight data has no target variable: ${o}`);delete r[a]}if(n){const o=[];for(const a in r)o.push(a);if(o.length>0)throw new X(`${o.length} of ${s} weights are not set: ${o}`)}fR(i)}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${qq}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=xN(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Y(()=>{e=cn(e);const r=new yl;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return Tp(this.outputs,r,n)})}computeMask(e,n){return Y(()=>{e=cn(e);let r;return n==null?r=Vc(null,e.length):r=cn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Xx(e);if(n.length!==this.inputLayers.length)throw new X(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";r[c]=u}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(H0);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const h=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],y=u.nodeIndices[m],v=u.tensorIndices[m],b=`${g.name}_${y}_${v}`,x=r[b];h.push(x)}const f=c.computeOutputShape(Ns(h)),d=Xx(f),p=c.inboundNodes.indexOf(u);for(let m=0;m<d.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=d[m]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],h=`${l.name}_${u}_${c}`;o.push(h)}for(let a=0;a<o.length;a++){const l=o[a];Fo(l in r),i.push(r[l])}return Ns(i)}runInternalGraph(e,n){n==null&&(n=Vc(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],h=n[l];r[u.id]=[c,h]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(H0);for(const l of s){const u=this.nodesByDepth[l];for(const c of u){const h=c.outboundLayer,f=c.inputTensors,d=c.outputTensors,p=new Array;for(const m of f)m.id in r&&p.push(r[m.id]);if(p.length===f.length){let m={},g,y,v,b;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[x,w]=p[0];m.mask==null&&(m.mask=w),v=cn(h.call(x,m)),b=cn(h.computeMask(x,w)),g=[x],y=[w]}else g=p.map(x=>x[0]),y=p.map(x=>x[1]),m.mask==null&&(m.mask=y),v=cn(h.call(g,m)),b=cn(h.computeMask(g,y));if(h.activityRegularizer)throw new st("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<d.length;++x){const w=d[x],S=v[x],k=b[x];r[w.id]=[S,k]}}}}const i=[],o=[],a=[];for(const l of this.outputs){Fo(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];a.push(u.shape),i.push(u),o.push(c)}return[i,o,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof co?1:0;for(let i=0;i<s.inboundNodes.length;i++){const o=co.nodeKey(s,i);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null){if(this.layers.length<=n)throw new X(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}else if(e==null)throw new X("Provide either a layer name or layer index");for(const r of this.layers)if(r.name===e)return r;throw new X(`No such layer: ${e}`)}calculateLosses(){return Y(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=co.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),u=[];for(let h=0;h<o.inboundNodes.length;h++){const f=o.inboundNodes[h],d=co.nodeKey(o,h);let p={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const y=f.inboundLayers[g],v=f.nodeIndices[g],b=f.tensorIndices[g],x=co.nodeKey(y,v);let w=n[x];w==null&&(w=0),m.push([y.name,w,b,p])}u.push(m)}}}const c={};c.name=o.name,c.className=a,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],u=co.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const h=this.inputLayersTensorIndices[o];s.push([a.name,c,h])}e.inputLayers=s;const i=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],u=co.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const h=this.outputLayersTensorIndices[o];i.push([a.name,c,h])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},o={};function a(g,y){g.name in o?o[g.name].push(y):o[g.name]=[y]}function l(g,y){const v=[];let b;for(const x of y){const w=x[0],S=x[1],k=x[2];if(b=x[3]==null?{}:x[3],!(w in i)){a(g,y);return}const I=i[w];if(I.inboundNodes.length<=S){a(g,y);return}const T=I.inboundNodes[S];v.push(T.outputTensors[k])}v.length>0&&g.apply(Ns(v),b)}function u(g){const y=g.name,v=ta(g,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(s),i[y]=v,g.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new X(`Corrupted configuration, expected array for nodeData: ${x}`);a(v,x)})}const c=n.name,h=n.layers;for(const g of h)u(g);for(;!c5e(o);)for(const g of h){const y=i[g.name];if(y.name in o){const v=o[y.name];delete o[y.name];for(const b of v)l(y,b)}}const f=[],d=[],p=n.inputLayers;for(const g of p){const y=g[0],v=g[1],b=g[2];Fo(y in i);const w=i[y].inboundNodes[v].outputTensors;f.push(w[b])}const m=n.outputLayers;for(const g of m){const y=g[0],v=g[1],b=g[2];Fo(y in i);const w=i[y].inboundNodes[v].outputTensors;d.push(w[b])}return new e({inputs:f,outputs:d,name:c})}get stateful(){if(this._stateful)throw new X("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Y(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IBe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function Kq(t,e){return IBe(t,e,"classWeight")}async function Xq(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const s=Y(()=>{if(t.shape.length===1)return Fl(t);if(t.shape.length===2){if(t.shape[1]>1)return Mc(t,1);if(t.shape[1]===1)return H(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());je(s);const o=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Xn(o,"float32")}else return null}function CBe(t,e){return W(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const TBe=32;function Yq(t,e){let n,r;const s=e;n=s.xs,r=s.ys,P(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=_5("input",t.inputNames,n),o=_5("output",t.outputNames,r),a=i[0].shape[0];P(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),P(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)P(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)P(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function _5(t,e,n){if(n instanceof Xt)return[n];if(Array.isArray(n))return P(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new X(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function $Be(t){if(t.length===3)throw new st("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function NBe(t,e,n){const r=n.batchesPerEpoch!=null;if(P(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),P(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),P(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),P(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),P(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,o;if(s)if(A5(n.validationData))P(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=$Be(n.validationData);i=g.xs,o=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;s?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=Bq(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:f,history:d}=zq(c,h,n.epochs,null,null,EBe(e,n),null,s,u);f.setModel(t),t.history=d,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let y=0,v=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const b=await m.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:x,ys:w}=Yq(t,b.value),S={};S.batch=v,S.size=x[0].shape[0],await f.onBatchBegin(v,S);const k=[];if(n.classWeight!=null){const N=Kq(n.classWeight,t.outputNames);for(let A=0;A<N.length;++A)k.push(await Xq(w[A],null,N[A]))}const I=x.concat(w).concat(k),T=a(I);je(I);for(let N=0;N<l.length;++N){const A=l[N],R=T[N];S[A]=R,_r(R)}await f.onBatchEnd(v,S),Lq(S),v++,y++}if(r?y>=n.batchesPerEpoch:b.done){if(s){let x;A5(n.validationData)?x=cn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=cn(t.evaluate(i,o,{batchSize:n.validationBatchSize==null?TBe:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=x[w]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function EBe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function A5(t){return typeof t.iterator=="function"}function _Be(t){return typeof t.next=="function"}async function ABe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new st("Verbose mode is not implemented yet.");P(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=_Be(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await o.next();if(i=Y(()=>{if(u.value){const{xs:c,ys:h}=Yq(t,u.value),f=c.concat(h),d=Y(()=>s(f));if(je(f),l===0)for(let m=0;m<d.length;++m)i.push(ze(0));const p=f[0].shape[0];for(let m=0;m<d.length;++m){const g=d[m],y=i[m];i[m]=Y(()=>de(i[m],W(p,g))),l>0&&je(y)}je(d),a+=p,++l}return i}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){const c=i[u];i[u]=Ne(i[u],a),je(c)}return Ns(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bN(t){P(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function $p(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>fc(r,e,n-e)):fc(t,e,n-e)}function gR(t,e){return Y(()=>t==null?null:Array.isArray(t)?t.map(n=>gR(n,e)):Iq(t,e.dtype==="int32"?e:Ie(e,"int32")))}function wN(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}async function OBe(t,e,n,r,s,i,o,a,l,u,c,h,f,d,p){s==null&&(s=32),i==null&&(i=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,d==null))throw new X("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=t.checkNumSamples(n,s,d,"steps_per_epoch");let y;g!=null&&(y=To(0,g)),o==null&&(o=1);const{callbackList:v,history:b}=zq(a,o,i,f,g,d,s,m,h);v.setModel(t),t.history=b,await v.onTrainBegin(),t.stopTraining_=!1;for(let x=f;x<i;++x){await v.onEpochBegin(x);const w={};if(d!=null)throw new st("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new st("batch shuffling is not implemneted yet");c&&A_e(y);const S=Xn(y),k=wN(g,s);for(let I=0;I<k.length;++I){const T={};if(await v.onBatchBegin(I,T),Y(()=>{const N=k[I][0],A=k[I][1],R=fc(S,N,A-N);T.batch=I,T.size=A-N;const O=gR(n,R),M=e(O);for(let z=0;z<r.length;++z){const B=r[z],K=M[z];T[B]=K,_r(K)}if(I===k.length-1&&m){const z=t.testLoop(l,u,s);for(let B=0;B<r.length;++B){const K=r[B],L=z[B];_r(L),w["val_"+K]=L}}}),await v.onBatchEnd(I,T),Lq(T),t.stopTraining_)break}S.dispose()}if(await v.onEpochEnd(x,w),t.stopTraining_)break}return await v.onTrainEnd(),await t.history.syncData(),t.history}async function RBe(t,e,n,r={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;let s,i,o,a,l,u,c,h,f;try{const d=r.batchSize==null?32:r.batchSize;bN(d);const p=!1,m=await t.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,d);s=m[0],i=m[1],f=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new st("validationData including sample weights is not supported yet."):new X(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const T=!0,N=await t.standardizeUserData(l,u,null,null,T,d);c=N[0],h=N[1],y=c.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const T=Math.floor(s[0].shape[0]*(1-r.validationSplit)),N=s[0].shape[0];c=$p(s,T,N),o=s,s=$p(s,0,T),h=$p(i,T,N),a=i,i=$p(i,0,T),y=c.concat(h)}else r.validationSteps!=null&&(g=!0);const v=s.concat(i).concat(f);t.checkTrainableWeightsConsistency();const b=t.makeTrainFunction(),x=t.getDedupedMetricsNames();let w,S;g?(t.makeTestFunction(),w=t.testFunction,S=x.slice().concat(x.map(T=>"val_"+T))):(w=null,y=[],S=x.slice());const k=Bq(r.callbacks,r.yieldEvery);return await OBe(t,b,v,x,d,r.epochs,r.verbose,k,w,y,r.shuffle,S,r.initialEpoch,null,null)}finally{t.isTraining=!1,yo(s,e),yo(i,n),yo(o,e),yo(a,n),yo(c,l),yo(h,u),f!=null&&je(f)}}function Qq(t){const e=[];t instanceof Xt&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(qy(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function yo(t,e){if(t==null)return;const n=[];if(e instanceof Xt)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof Xt)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DBe(t){return t instanceof Xt}function SN(t){return Array.isArray(t)}function O5(t){return!DBe(t)&&!SN(t)}function R5(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(SN(t)&&t.length>0)o=!0;else if(O5(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new X(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let i;if(O5(t)){t=t,i=[];for(const o of e){if(t[o]==null)throw new X(`No data provided for "${o}". Need data for each key in: ${e}`);i.push(t[o])}}else if(SN(t)){if(t=t,t.length!==e.length)throw new X(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new X(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=Qq(i),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new X(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c>=0&&u!==c)throw new X(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function PBe(t,e,n){const r=Bl(t.map(i=>i.shape[0]));r.sort();const s=Bl(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new X(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new X(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!Ct(r,s))throw new X(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function MBe(t,e,n){const r=[mS,gS,Um];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(o!=null){if(o===Um&&i.shape[i.shape.length-1]===1)throw new X(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=i.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const h=l[c],f=u[c];if(f!=null&&h!==f)throw new X(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function D5(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new X(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new X(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new X(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c!==u)throw new X(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function FBe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const LBe="layers-model";class cf extends co{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new X("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");xBe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=vBe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof vu))throw new X("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new X(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(EI(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new X(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>EI(a))}else{const o=EI(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],hc("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=FBe(e.metrics,this.outputNames),i=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};hc("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=s[o];(u=>{const c="";let h,f,d;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[o];g[g.length-1]===1||this.lossFunctions[o]===gS?["accuracy","acc"].indexOf(p)!==-1?f=Uq:["crossentropy","ce"].indexOf(p)!==-1&&(f=lBe):this.lossFunctions[o]===eb?["accuracy","acc"].indexOf(p)!==-1?f=uBe:["crossentropy","ce"].indexOf(p)!==-1&&(f=Gq):["accuracy","acc"].indexOf(p)!==-1?f=Wq:["crossentropy","ce"].indexOf(p)!==-1&&(f=jq);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),d=f,h=c+y}else d=yBe(p),h=c+X0(p);let m;hc(h,()=>{m=d}),i(o,h,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;bN(s);const i=!0,o=this.standardizeUserDataXY(e,n,i,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,s,r.verbose,r.steps);return Ns(u)}finally{yo(o[0],e),yo(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),ABe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new X(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new X(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new X("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),o=new yl;if(e instanceof Xt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new X(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new X(`No value is provided for the model's input ${l.name}`);o.add(l,u)}const a=Tp(i,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Vc(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],o=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,o)=>{i==null&&s.push(e[o])}),new X(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return Y(()=>{const s=this.checkNumSamples(e);if(r)throw new st("Verbose predictLoop() is not implemented yet.");const i=wN(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)Y(()=>{const u=i[a][0],c=i[a][1],h=$p(e,u,c),f=[];if(Array.isArray(h))for(let p=0;p<h.length;++p)f.push({key:this.inputs[p],value:h[p]});else f.push({key:this.inputs[0],value:h});const d=new yl(f);return Tp(this.outputs,d)}).forEach((u,c)=>o[c].push(u));return Ns(o.map(a=>Rn(a,0)))})}predict(e,n={}){const r=Qq(e);D5(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return bN(s),this.predictLoop(r,s)}finally{yo(r,e)}}predictOnBatch(e){D5(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Gi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===eb?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=R5(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=R5(n,this.feedOutputNames,i,!1,"target"),PBe(e,n),MBe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new X(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,i,o);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(s!=null){const c=Kq(s,this.outputNames);u=[];for(let h=0;h<c.length;++h)u.push(await Xq(l[h],null,c[h]))}return[a,l,u]}testLoop(e,n,r,s=0,i){return Y(()=>{const o=this.checkNumSamples(n,r,i,"steps"),a=[];if(s>0)throw new st("Verbose mode is not implemented yet.");if(i!=null)throw new st("steps mode in testLoop() is not implemented yet");{const l=wN(o,r),u=Xn(To(0,o));for(let c=0;c<l.length;++c){const h=l[c][0],f=l[c][1],d=fc(u,h,f-h),p=gR(n,d),m=e(p);if(c===0)for(let g=0;g<m.length;++g)a.push(ze(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=de(a[g],W(f-h,y))}}for(let c=0;c<a.length;++c)a[c]=Ne(a[c],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;v5(e,s)>1&&(i+=`_${v5(e.slice(0,r),s)}`),n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const h=[];for(let m=0;m<this.inputs.length;++m)h.push({key:this.inputs[m],value:r[m]});const f=new yl(h),d=Tp(this.outputs,f,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(s[m],d[m]);i[m]!=null&&(y=CBe(y,i[m]));const v=An(y);n.push(v),m===0?p=y:p=de(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],v=this.metricsTensors[m][1];g=An(y(s[v],d[v]))}_r(g),o.push(g)}return p=An(p),this.calculateLosses().forEach(m=>{p=de(p,m)}),p},l=this.collectedTrainableWeights.map(h=>h.read()),u=!0;return[this.optimizer_.minimize(a,u,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>Y(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let u=0;u<this.inputs.length;++u)o.push({key:this.inputs[u],value:s[u]});const a=new yl(o),l=Tp(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],h=An(c(i[u],l[u]));u===0?r=h:r=de(r,h),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],h=this.metricsTensors[u][1],f=An(c(i[h],l[h]));n.push(f)}return n})}async fit(e,n,r={}){return RBe(this,e,n,r)}async fitDataset(e,n){return NBe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],a=this.makeTrainFunction()(s.concat(i)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return je(a),yo(r[0],e),yo(r[1],n),Ns(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||n.push({name:s[o].originalName,tensor:i[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=H$().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-H$().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=va(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>va(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=va(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[va(X0(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>va(X0(e)));{const e={};for(const n in this.metrics)e[n]=va(X0(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=sb(e.optimizer_config),r=ta(n);let s;if(typeof e.loss=="string")s=Uu(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>Uu(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=Uu(e.loss[o])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(o=>Uu(o));else if(e.metrics!=null){i={};for(const o in e.metrics)i[o]=Uu(e.metrics[o])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=rG(e);if(u.length===0)throw new X(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new X(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new X("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await v6(this.getNamedWeights(n)),s=!1,i=null,a={modelTopology:this.toJSON(i,s),format:LBe,generatedBy:`TensorFlow.js tfjs-layers v${qq}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:h}=await v6(await this.optimizer.getWeights(),u);r.specs.push(...h),r.data=tG([r.data,c])}return this.userDefinedMetadata!=null&&(E5(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){E5(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}cf.className="Model";ge(cf);class Jq extends cf{}Jq.className="Functional";ge(Jq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function BBe(t,e){if(e==null&&(e={}),typeof t=="string"){const n=sG(t,e);if(n.length===0)n.push(G$(t,e));else if(n.length>1)throw new X(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return zBe(t,void 0,e)}async function zBe(t,e,n){if(n==null&&(n={}),t.load==null)throw new X("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let s=r.modelTopology;s.model_config!=null&&(s=s.model_config);const i=n.strict==null?!0:n.strict,o=r.weightData!=null&&r.weightSpecs!=null&&i,a=ta(sb(s),e,o),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new X("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:u,optimizerWeights:c}=VBe(r.weightData,r.weightSpecs);a.loadWeights(u,i),a.optimizer!=null&&c.length>0&&await a.optimizer.setWeights(c),je(u),je(c.map(h=>h.tensor))}return a}function VBe(t,e){const n=eG(t,e),r={},s=[];return e.forEach(i=>{i.group==="optimizer"?s.push({name:i.name,tensor:n[i.name]}):r[i.name]=n[i.name]}),{modelWeights:r,optimizerWeights:s}}class Wm extends cf{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:hS("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new X(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Wm||e instanceof cf;let r;if(n){if(r=e,r.outputs.length!==1)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new X("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new X("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=B5e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new X(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Rq(this.outputs[0])}this.inboundNodes=[],new pS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Vc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(qt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new cf({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Gi("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Gi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Gi("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Gi("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new X("Legacy serialization format not supported yet.");i=n}else P(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof Wm))throw new st(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const c=ta(l,void 0,s);s&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new X("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new X("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Wm.className="Sequential";ge(Wm);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UBe(t,e){return e==null&&(e={}),BBe(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Bs extends Td{getConfig(){return{}}}class Zq extends Bs{apply(e,n=1){return C5e(e,n)}}Zq.className="elu";ge(Zq);class eK extends Bs{apply(e){return dO(e)}}eK.className="selu";ge(eK);class tK extends Bs{apply(e){return da(e)}}tK.className="relu";ge(tK);class nK extends Bs{apply(e){return Y(()=>Nd(6,da(e)))}}nK.className="relu6";ge(nK);class rK extends Bs{apply(e){return e}}rK.className="linear";ge(rK);class sK extends Bs{apply(e){return ha(e)}}sK.className="sigmoid";ge(sK);class iK extends Bs{apply(e){return $5e(e)}}iK.className="hardSigmoid";ge(iK);class oK extends Bs{apply(e){return $d(e)}}oK.className="softplus";ge(oK);class aK extends Bs{apply(e){return T5e(e)}}aK.className="softsign";ge(aK);class lK extends Bs{apply(e){return q2(e)}}lK.className="tanh";ge(lK);class yR extends Bs{apply(e,n=-1){return nS(e,n)}}yR.className="softmax";ge(yR);class uK extends Bs{apply(e,n=-1){return iO(e,n)}}uK.className="logSoftmax";ge(uK);class cK extends Bs{apply(e,n=1){return Y(()=>W(ha(W(e,n)),e))}}cK.className="swish";ge(cK);class hK extends Bs{apply(e){return Y(()=>W(e,q2($d(e))))}}hK.className="mish";ge(hK);function Zl(t){return t.getClassName()}function _I(t,e={}){return Hy(t,Li.getMap().classNameMap,e,"activation")}function eu(t){if(t==null){const e={};return e.className="linear",e.config={},_I(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},_I(e)}else return t instanceof Bs?t:_I(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WBe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class fK extends Td{}class dK extends fK{constructor(e){super(),WBe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Y(()=>{let n=Kn([1]);return this.hasL1&&(n=de(n,Be(W(this.l1,tr(e))))),this.hasL2&&(n=de(n,Be(W(this.l2,Ky(e))))),H(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}dK.className="L1L2";ge(dK);const P5={l1l2:"L1L2"};function rn(t){return nR(t)}function M5(t,e={}){return Hy(t,Li.getMap().classNameMap,e,"regularizer")}function Sn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in P5?P5[t]:t,config:{}};return M5(n)}else return t instanceof fK?t:M5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pK extends Tt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=lt(e);let r=da(e);return this.maxValue!=null&&(r=Rs(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}pK.className="ReLU";ge(pK);class mK extends Tt{constructor(e){super(e==null?{}:e),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=lt(e);return Y2(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}mK.className="LeakyReLU";ge(mK);class gK extends Tt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=xn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Sn(e.alphaRegularizer),this.alphaConstraint=ar(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new X(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=qt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new sr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=lt(e),tS(e,this.alpha.read())}getConfig(){const e={alphaInitializer:$n(this.alphaInitializer),alphaRegularizer:rn(this.alphaRegularizer),alphaConstraint:or(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}gK.className="PReLU";ge(gK);class yK extends Tt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new st(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=lt(e);return Ly(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}yK.className="ELU";ge(yK);class vK extends Tt{constructor(e){super(e==null?{}:e),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=lt(e);return W(r,Ie(Ti(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}vK.className="ThresholdedReLU";ge(vK);class xK extends Tt{constructor(e){super(e==null?{}:e),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new yR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){const r=lt(e);return this.softmax(r,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}xK.className="Softmax";ge(xK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hf(t,e,n){if(typeof t=="number")return Vc(t,e);if(t.length!==e)throw new X(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!w5e(s))throw new X(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function wo(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-i+1,Math.floor((o+r-1)/r)}function Lo(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Jl([n-e,0]);else if(r==="same")t=t*e;else throw new X(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vR(t,e){return Y(()=>(Un(e),e==="channelsFirst"?xt(t,[0,2,3,1]):t))}function bK(t,e){return Y(()=>(Un(e),e==="channelsFirst"?xt(t,[0,2,3,4,1]):t))}function jBe(t,e,n,r=1,s="valid",i,o=1){return Y(()=>{if(i==null&&(i=$o()),Un(i),t.shape.length!==3)throw new X(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new X(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new X(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(i==="channelsFirst"&&(t=xt(t,[0,2,1])),s==="causal")throw new st("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=J3(t,e,r,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=_o(a,n)),a})}function F5(t,e,n,r=[1,1],s="valid",i,o,a=null){return Y(()=>{if(i==null&&(i=$o()),Un(i),t.rank!==3&&t.rank!==4)throw new X(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new X(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=vR(t,i);if(s==="causal")throw new st("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=bH({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=xt(l,[0,3,1,2])),l})}function GBe(t,e,n,r=[1,1,1],s="valid",i,o){return Y(()=>{if(i==null&&(i=$o()),Un(i),t.rank!==4&&t.rank!==5)throw new X(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new X(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=bK(t,i);if(s==="causal")throw new st("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=FG(a,e,r,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=_o(a,n)),i==="channelsFirst"&&(a=xt(a,[0,4,1,2,3])),a})}class yS extends Tt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",yS.verifyArgs(n),this.rank=e,gr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new st(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=hf(n.kernelSize,e,"kernelSize"),this.strides=hf(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,$i(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Un(this.dataFormat),this.activation=eu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=xn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ar(n.biasConstraint),this.biasRegularizer=Sn(n.biasRegularizer),this.activityRegularizer=Sn(n.activityRegularizer),this.dilationRate=hf(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new X(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new X(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new X(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Fo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!rR(e.kernelSize,"number",1,3))throw new X(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Zl(this.activation),useBias:this.useBias,biasInitializer:$n(this.biasInitializer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),biasConstraint:or(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class _d extends yS{constructor(e,n){super(e,n),this.kernel=null,_d.verifyArgs(n),this.filters=n.filters,gr(this.filters,"filters"),this.kernelInitializer=xn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ar(n.kernelConstraint),this.kernelRegularizer=Sn(n.kernelRegularizer)}build(e){e=qt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new X(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Y(()=>{e=lt(e);let r;const s=this.bias==null?null:this.bias.read(),i=vq(this.activation.getClassName());if(i!=null&&this.rank===2)r=F5(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=jBe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=F5(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=GBe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new st("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=qt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const o=wo(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:$n(this.kernelInitializer),kernelRegularizer:rn(this.kernelRegularizer),kernelConstraint:or(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new X(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Jy extends _d{constructor(e){super(2,e),Jy.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!rR(e.kernelSize,"number",1,2))throw new X(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Jy.className="Conv2D";ge(Jy);class Zy extends _d{constructor(e){super(3,e),Zy.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new X(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Zy.className="Conv3D";ge(Zy);class wK extends Jy{constructor(e){if(super(e),this.inputSpec=[new sr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new X(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=qt(e),e.length!==4)throw new X("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new X("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new sr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Y(()=>{let r=lt(e);if(r.shape.length!==4)throw new X(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],u=s[a],c=this.kernelSize[0],h=this.kernelSize[1],f=this.strides[0],d=this.strides[1],p=Lo(l,f,c,this.padding),m=Lo(u,d,h,this.padding),g=[i,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=xt(r,[0,2,3,1]));let y=eO(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=xt(y,[0,3,1,2])),this.bias!=null&&(y=_o(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=qt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[s]=Lo(n[s],l,o,this.padding),n[i]=Lo(n[i],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}wK.className="Conv2DTranspose";ge(wK);class SK extends Zy{constructor(e){if(super(e),this.inputSpec=[new sr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new X(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=qt(e),e.length!==5)throw new X("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new X("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new sr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Y(()=>{let r=lt(e);if(r.shape.length!==5)throw new X(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const u=s[l],c=s[o],h=s[a],f=this.kernelSize[0],d=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=Lo(u,m,f,this.padding),b=Lo(c,g,d,this.padding),x=Lo(h,y,p,this.padding),w=[i,v,b,x,this.filters];this.dataFormat!=="channelsLast"&&(r=xt(r,[0,2,3,4,1]));let S=vOe(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=xt(S,[0,4,1,2,3])),this.bias!==null&&(S=_o(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=qt(e);const n=e.slice();let r,s,i,o;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,o=4):(r=4,s=1,i=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],h=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[s]=Lo(n[s],c,a,this.padding),n[i]=Lo(n[i],h,l,this.padding),n[o]=Lo(n[o],f,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}SK.className="Conv3DTranspose";ge(SK);class kK extends _d{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new X("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new X("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new X(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=xn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Sn(n.depthwiseRegularizer),this.depthwiseConstraint=ar(n.depthwiseConstraint),this.pointwiseInitializer=xn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Sn(n.pointwiseRegularizer),this.pointwiseConstraint=ar(n.pointwiseConstraint)}build(e){if(e=qt(e),e.length<this.rank+2)throw new X(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new X(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new sr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Y(()=>{e=lt(e);let r;if(this.rank===1)throw new st("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=xt(e,[0,2,3,1])),r=cH(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=_o(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=xt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=$n(this.depthwiseInitializer),e.pointwiseInitializer=$n(this.pointwiseInitializer),e.depthwiseRegularizer=rn(this.depthwiseRegularizer),e.pointwiseRegularizer=rn(this.pointwiseRegularizer),e.depthwiseConstraint=or(this.depthwiseConstraint),e.pointwiseConstraint=or(this.pointwiseConstraint),e}}kK.className="SeparableConv";class IK extends kK{constructor(e){super(2,e)}}IK.className="SeparableConv2D";ge(IK);class vS extends _d{constructor(e){super(1,e),vS.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!rR(e.kernelSize,"number",1,1))throw new X(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}vS.className="Conv1D";ge(vS);class CK extends Tt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Y(()=>{if(e=lt(e),this.dataFormat==="channelsLast"){const r=K0(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return K0(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=K0(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return K0(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}CK.className="Cropping2D";ge(CK);class TK extends Tt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,v5e(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Y(()=>{let r=lt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=xt(r,[0,2,3,1]);const i=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?Ar.resizeNearestNeighbor(r,[i,o]):Ar.resizeBilinear(r,[i,o]);return xt(a,[0,3,1,2])}else{const i=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?Ar.resizeNearestNeighbor(r,[i,o]):Ar.resizeBilinear(r,[i,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}TK.className="UpSampling2D";ge(TK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HBe(t,e,n=[1,1],r="valid",s,i){return Y(()=>{s==null&&(s=$o()),Un(s);let o=vR(t,s);if(t.rank!==4)throw new X(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new X(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=Fy(o,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(o=xt(o,[0,3,1,2])),o})}class $K extends yS{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=xn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ar(e.depthwiseConstraint),this.depthwiseRegularizer=Sn(e.depthwiseRegularizer)}build(e){if(e=qt(e),e.length<4)throw new X(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new X(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Y(()=>{e=lt(e);let r=HBe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=_o(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=qt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=wo(n,this.kernelSize[0],this.padding,this.strides[0]),o=wo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,o]:[e[0],i,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=$n(this.depthwiseInitializer),e.depthwiseRegularizer=rn(this.depthwiseRegularizer),e.depthwiseConstraint=or(this.depthwiseRegularizer),e}}$K.className="DepthwiseConv2D";ge($K);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NK(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new X("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function EK(t,e,n,r=!1,s,i,o=!1,a=!1){return Y(()=>{const l=e.shape.length;if(l<3)throw new X(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(To(2,l));if(e=xt(e,u),i!=null)throw new st("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Ie(Ie(s,"bool"),"float32"),s.rank===l-1&&(s=qn(s,-1)),s=xt(s,u)),r&&(e=Wa(e,0),s!=null&&(s=Wa(s,0)));const c=[];let h,f=n;const d=e.shape[0],p=Co(e);let m;s!=null&&(m=Co(s));for(let y=0;y<d;++y){const v=p[y],b=Y(()=>t(v,f));if(s==null)h=b[0],f=b[1];else{const x=Y(()=>{const w=m[y],S=_e(wi(w),w),k=de(W(b[0],w),W(f[0],S)),I=f.map((T,N)=>de(W(b[1][N],w),W(T,S)));return{output:k,newStates:I}});h=x.output,f=x.newStates}a&&c.push(h)}let g;return a&&(g=eo(c,1)),[h,g,f]})}class xu extends Tt{constructor(e){super(e);let n;if(e.cell==null)throw new X("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new wR({cells:e.cell}):n=e.cell,n.stateSize==null)throw new X("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new sr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return To(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){gN(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const o of n)i.push([e[0],o]);return[s].concat(i)}else return s}computeMask(e,n){return Y(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new st("Constants support is not implemented in RNN yet.");gN(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new sr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!Ct(this.stateSpec.map(o=>o.shape[o.shape.length-1]),i))throw new X(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(o=>new sr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Y(()=>{if(!this.stateful)throw new Mo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Kn([r,s])):this.states_=[Kn([r,this.cell.stateSize])];else if(e==null)je(this.states_),this.keptStates!=null&&(je(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Kn([r,s])):this.states_[0]=Kn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):je(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,o];if(!Ct(i.shape,a))throw new X(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>_r(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=NK(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new sr({shape:u.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof Wo){const u=[e].concat(o),c=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=h,f}else return super.apply(e,n)}call(e,n){return Y(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=lt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new X(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},u=EK((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],h=u[1],f=u[2];this.stateful&&this.resetStates(f,s);const d=this.returnSequences?h:c;return this.returnState?[d].concat(f):d})}getInitialState(e){return Y(()=>{let n=Kn(e.shape);return n=Be(n,[1,2]),n=qy(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?pN(n,[1,r]):n):this.cell.stateSize>1?[pN(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===xu.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,n)}static fromConfig(e,n,r={}){const s=n.cell,i=ta(s,r);return new e(Object.assign(n,{cell:i}))}}xu.className="RNN";ge(xu);class xS extends Tt{}class xR extends xS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,gr(this.units,"units"),this.activation=eu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Sn(e.kernelRegularizer),this.recurrentRegularizer=Sn(e.recurrentRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.kernelConstraint=ar(e.kernelConstraint),this.recurrentConstraint=ar(e.recurrentConstraint),this.biasConstraint=ar(e.biasConstraint),this.dropout=Xf([1,Jl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Xf([1,Jl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=qt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Y(()=>{if(e=e,e.length!==2)throw new X(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>wi(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>wi(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?i=ea(W(e,o),this.kernel.read()):i=ea(e,this.kernel.read()),this.bias!=null&&(i=_o(i,this.bias.read())),a!=null&&(r=W(r,a));let l=de(i,ea(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Zl(this.activation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:rn(this.kernelRegularizer),recurrentRegularizer:rn(this.recurrentRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:or(this.kernelConstraint),recurrentConstraint:or(this.recurrentConstraint),biasConstraint:or(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,n)}}xR.className="SimpleRNNCell";ge(xR);class _K extends xu{constructor(e){e.cell=new xR(e),super(e)}call(e,n){return Y(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}_K.className="SimpleRNN";ge(_K);class bR extends xS{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new X("GRUCell does not support reset_after parameter set to true.");this.units=e.units,gr(this.units,"units"),this.activation=eu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=eu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Sn(e.kernelRegularizer),this.recurrentRegularizer=Sn(e.recurrentRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.kernelConstraint=ar(e.kernelConstraint),this.recurrentConstraint=ar(e.recurrentConstraint),this.biasConstraint=ar(e.biasConstraint),this.dropout=Xf([1,Jl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Xf([1,Jl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=qt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Y(()=>{if(e=e,e.length!==2)throw new X(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>wi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>wi(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=W(e,i[0]));let c=ea(e,this.kernel.read());this.useBias&&(c=_o(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=W(s,o[0]));const h=this.recurrentKernel.read(),[f,d]=ei(h,[2*this.units,this.units],h.rank-1),p=ea(s,f),[m,g,y]=ei(c,3,c.rank-1),[v,b]=ei(p,2,p.rank-1);a=this.recurrentActivation.apply(de(m,v)),l=this.recurrentActivation.apply(de(g,b));const x=ea(W(l,s),d);u=this.activation.apply(de(y,x));const w=de(W(a,s),W(de(1,wn(a)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Zl(this.activation),recurrentActivation:Zl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:rn(this.kernelRegularizer),recurrentRegularizer:rn(this.recurrentRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:or(this.kernelConstraint),recurrentConstraint:or(this.recurrentConstraint),biasConstraint:or(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,n)}}bR.className="GRUCell";ge(bR);class AK extends xu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bR(e),super(e)}call(e,n){return Y(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}AK.className="GRU";ge(AK);class bS extends xS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,gr(this.units,"units"),this.activation=eu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=eu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Sn(e.kernelRegularizer),this.recurrentRegularizer=Sn(e.recurrentRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.kernelConstraint=ar(e.kernelConstraint),this.recurrentConstraint=ar(e.recurrentConstraint),this.biasConstraint=ar(e.biasConstraint),this.dropout=Xf([1,Jl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Xf([1,Jl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=qt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,o=this.units;s=new(n=class extends so{apply(l,u){const c=i.apply([o]),h=new iR().apply([o]),f=i.apply([o*2]);return b5(b5(c,h),f)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Y(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new X(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>wi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>wi(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,h;0<this.dropout&&this.dropout<1&&(e=W(e,o[0]));let f=ea(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=W(s,a[0])),f=de(f,ea(s,this.recurrentKernel.read())),this.useBias&&(f=_o(f,this.bias.read()));const[d,p,m,g]=ei(f,4,f.rank-1);l=this.recurrentActivation.apply(d),u=this.recurrentActivation.apply(p),c=de(W(u,i),W(l,this.activation.apply(m))),h=this.recurrentActivation.apply(g);const y=W(h,this.activation.apply(c));return[y,y,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Zl(this.activation),recurrentActivation:Zl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:rn(this.kernelRegularizer),recurrentRegularizer:rn(this.recurrentRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:or(this.kernelConstraint),recurrentConstraint:or(this.recurrentConstraint),biasConstraint:or(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,n)}}bS.className="LSTMCell";ge(bS);class OK extends xu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bS(e),super(e)}call(e,n){return Y(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}OK.className="LSTM";ge(OK);class wR extends xS{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Y(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),i.push(o.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){gN(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{hc(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign({},e,s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(ta(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return yN(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],i[o]])}fR(n)}}wR.className="StackedRNNCells";ge(wR);function tu(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,o=()=>i!=null?i(e(),n):Cq(e(),n),a=()=>Xy(o,e,r);return!s||s<=1?_r(a().clone()):Array(s).fill(void 0).map(a).map(u=>_r(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var qBe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class RK extends xu{constructor(e){if(e.unroll)throw new st("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new st("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new sr({ndim:5})]}call(e,n){return Y(()=>{if(this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new X("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Y(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],o=Kn(i);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){Y(()=>{if(!this.stateful)throw new Mo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kn(i)):this.states_=[Kn(i)];else if(e==null)je(this.states_),this.keptStates!=null&&(je(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kn(i)):this.states_[0]=Kn(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):je(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=i;if(!Ct(l.shape,u))throw new X(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>_r(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],h=wo(u,s[0],i,o[0],a[0]),f=wo(c,s[1],i,o[1],a[1]);return[...e.slice(0,2),...l?[r,h,f]:[h,f,r]]}}RK.className="ConvRNN2D";class SR extends bS{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign({},e,{units:n})),this.filters=n,gr(this.filters,"filters"),this.kernelSize=hf(r,2,"kernelSize"),this.kernelSize.forEach(l=>gr(l,"kernelSize")),this.strides=hf(s||1,2,"strides"),this.strides.forEach(l=>gr(l,"strides")),this.padding=i||"valid",$i(this.padding),this.dataFormat=o||"channelsLast",Un(this.dataFormat),this.dilationRate=hf(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>gr(l,"dilationRate"))}build(e){var n;e=qt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new X(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,o=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends so{apply(f,d){const p=u.apply([c]),m=Xa([c]),g=u.apply([c*2]);return sR([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Y(()=>{if(e.length!==3)throw new X(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>wi(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(j,Q,Z)=>!Q||!Q[Z]?j:W(Q[Z],j);let c=u(s,l,0),h=u(s,l,1),f=u(s,l,2),d=u(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>wi(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(i,p,0),g=u(i,p,1),y=u(i,p,2),v=u(i,p,3);const b=3,[x,w,S,k]=ei(this.kernel.read(),a,b),[I,T,N,A]=this.useBias?ei(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,x,I,this.padding),h=this.inputConv(h,w,T,this.padding),f=this.inputConv(f,S,N,this.padding),d=this.inputConv(d,k,A,this.padding);const[R,O,M,z]=ei(this.recurrentKernel.read(),a,b);m=this.recurrentConv(m,R),g=this.recurrentConv(g,O),y=this.recurrentConv(y,M),v=this.recurrentConv(v,z);const B=this.recurrentActivation.apply(de(c,m)),K=this.recurrentActivation.apply(de(h,g)),L=de(W(K,o),W(B,this.activation.apply(de(f,y)))),V=W(this.recurrentActivation.apply(de(d,v)),this.activation.apply(L));return[V,V,L]})}getConfig(){const e=super.getConfig(),n=qBe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,r)}inputConv(e,n,r,s){const i=Ql(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?_o(i,r,this.dataFormat):i}recurrentConv(e,n){return Ql(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}SR.className="ConvLSTM2DCell";ge(SR);class DK extends RK{constructor(e){const n=new SR(e);super(Object.assign({},e,{cell:n}))}static fromConfig(e,n){return new e(n)}}DK.className="ConvLSTM2D";ge(DK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kR extends Tt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=lt(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return Xy(()=>Cq(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}kR.className="Dropout";ge(kR);class PK extends kR{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}PK.className="SpatialDropout1D";ge(PK);class MK extends Tt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,gr(this.units,"units"),this.activation=eu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ar(e.kernelConstraint),this.biasConstraint=ar(e.biasConstraint),this.kernelRegularizer=Sn(e.kernelRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.activityRegularizer=Sn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=qt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=qt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=lt(e),s=vq(this.activation.getClassName());let i;return s!=null?i=ea(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=ea(r,this.kernel.read()),this.bias!=null&&(i=_o(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Zl(this.activation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:rn(this.kernelRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:or(this.kernelConstraint),biasConstraint:or(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}MK.className="Dense";ge(MK);class FK extends Tt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=qt(e);for(const n of e.slice(1))if(n==null)throw new X(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],zl(e,1)]}call(e,n){return Y(()=>{this.invokeCallHook(e,n);let r=lt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=xt(r,s)}return I5e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}FK.className="Flatten";ge(FK);class LK extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.activation=eu(e.activation)}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=lt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Zl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}LK.className="Activation";ge(LK);class BK extends Tt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Y(()=>(e=lt(e),S5e(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}BK.className="RepeatVector";ge(BK);class zK extends Tt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,o=null;for(let l=0;l<s.length;++l){const u=s[l];if(this.isUnknown(u))if(o===null)o=l;else throw new X("Can only specifiy one unknown dimension.");else i*=u}const a=zl(e);if(o!==null){if(i===0||a%i!==0)throw new X(r);s[o]=a/i}else if(a!==i)throw new X(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=lt(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return H(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}zK.className="Reshape";ge(zK);class VK extends Tt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=To(1,e.dims.length+1);if(!Ct(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new sr({ndim:this.dims.length+1})]}computeOutputShape(e){e=qt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return xt(lt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}VK.className="Permute";ge(VK);class UK extends Tt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=lt(e),s=-1;return zx(qf(r,this.maskValue),s)}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=lt(e),s=-1,i=!0,o=zx(qf(r,this.maskValue),s,i);return W(r,Ie(o,r.dtype))})}}UK.className="Masking";ge(UK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class WK extends Tt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(cn(e.inputLength))}this.inputDim=e.inputDim,gr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,gr(this.outputDim,"outputDim"),this.embeddingsInitializer=xn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Sn(e.embeddingsRegularizer),this.activityRegularizer=Sn(e.activityRegularizer),this.embeddingsConstraint=ar(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Y(()=>this.maskZero?(e=lt(e),qf(e,bt(e))):null)}computeOutputShape(e){if(e=qt(e),this.inputLength==null)return[...e,this.outputDim];const n=cn(this.inputLength);if(n.length!==e.length-1)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],o=e[s+1];if(i!=null&&o!=null&&i!==o)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Y(()=>{this.invokeCallHook(e,n);let r=lt(e);r.dtype!=="int32"&&(r=fS(r,"int32"));const s=Iq(this.embeddings.read(),H(r,[r.size]));return H(s,qt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:$n(this.embeddingsInitializer),embeddingsRegularizer:rn(this.embeddingsRegularizer),activityRegularizer:rn(this.activityRegularizer),embeddingsConstraint:or(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}WK.className="Embedding";ge(WK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class oh extends Tt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new st}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],o=n[s];if(i==null||o==null||i<0||o<0)r.push(null);else if(i===1)r.push(o);else if(o===1)r.push(i);else{if(i!==o)throw new X("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[qt(e)]),e=e,e.length<2)throw new X(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Bl(n),n.length>1)throw new X(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Bl(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Y(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=Jl(s);for(let o of e){const a=o.rank;for(let l=0;l<i-a;++l)o=qy(o,1);r.push(o)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,h=c[0],f=c.slice(1).concat([h]);let d=H(l,[h].concat(zl(c.slice(1))));d=xt(d,[1,0]),d=H(d,f),r.push(d),i=!0}else if(u>1){const c=To(1,u).concat([0]);r.push(xt(l,c)),i=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(i){if(a==null){const l=o.shape,u=l.length,c=l[u-1],h=[c].concat(l.slice(0,l.length-1));o=H(xt(H(o,[-1,c]),[1,0]),h)}else if(a>1){const l=[a-1].concat(To(0,a-1));o=xt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Bl(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Y(()=>{if(n==null)return null;if(!Array.isArray(n))throw new X("`mask` should be an Array");if(!Array.isArray(e))throw new X("`inputs` should be an Array");if(n.length!==e.length)throw new X(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:qn(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=aa(r,n[s]);return r})}}class jK extends oh{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=de(n,e[r]);return n})}}jK.className="Add";ge(jK);class GK extends oh{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=W(n,e[r]);return n})}}GK.className="Multiply";ge(GK);class HK extends oh{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=de(n,e[r]);return W(1/e.length,n)})}}HK.className="Average";ge(HK);class qK extends oh{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=fa(n,e[r]);return n})}}qK.className="Maximum";ge(qK);class KK extends oh{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Nd(n,e[r]);return n})}}KK.className="Minimum";ge(KK);class XK extends oh{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new X("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let o=!1;for(const a of r)if(Ct(a,i)){o=!0;break}o||r.push(i)}if(r.length>1)throw new X("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Y(()=>sR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new X("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new X("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new X("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new X(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Y(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push(Ie(wi(e[o]),"bool")):n[o].rank<e[o].rank?s.push(qn(n[o],-1)):s.push(n[o]);const i=Rn(s,this.axis);return Y3(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}XK.className="Concatenate";ge(XK);function fp(t,e){for(;t<0;)t+=e;return t}function KBe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new st("batchDot is not implemented for tensors of 4D or higher rank yet");if(P(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),P(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new st("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return Y(()=>{let o;if(r>s){o=r-s;const l=[];for(let u=0;u<o;++u)l.push(1);e=H(e,e.shape.concat(l))}else if(s>r){o=s-r;const l=[];for(let u=0;u<o;++u)l.push(1);t=H(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=Be(W(t,e),i[0]):a=Be(W(xt(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,u=i[1]===e.shape.length-1;a=Mt(t,e,l,u)}if(o>0){let l;r>s?l=r+s-3:l=r-1;const u=[];for(let c=l;c<l+o;++c)u.push(c);a=At(a,u)}return a.shape.length===1&&(a=qn(a,1)),a})}class YK extends oh{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new st("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new X(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new X(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,o)=>fp(i,e[o].shape.length)):s=[fp(this.axes,n.shape.length),fp(this.axes,r.shape.length)],this.normalize&&(n=Zx(n,s[0]),r=Zx(r,s[1])),KBe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[fp(this.axes,e.length),fp(this.axes,n.length)],r}computeOutputShape(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new st("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}YK.className="Dot";ge(YK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class QK extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=lt(e);return Xy(()=>de(dS(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}QK.className="GaussianNoise";ge(QK);class JK extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=lt(e);return this.rate>0&&this.rate<1?Xy(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return W(r,dS(r.shape,1,i))},()=>r,n.training||!1):r})}}JK.className="GaussianDropout";ge(JK);class ZK extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||lt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Y(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Xy(()=>{const i=lt(e),o=1.6732632423543772,a=1.0507009873554805,l=-o*a;let u=nh(Vy(r),this.rate);u=fS(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,h=-c*l*this.rate,f=de(W(i,u),W(de(u,-1),l));return de(W(f,c),h)},()=>lt(e),n.training||!1)}return e})}}ZK.className="AlphaDropout";ge(ZK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jm(t,e,n,r,s,i=.001){let o;if(t.rank===2)o=H3e(t,e,n,r,s,i);else if(t.rank===3)o=K3e(t,e,n,r,s,i);else if(t.rank===4)o=Y3e(t,e,n,r,s,i);else throw new st(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function XBe(t,e,n,r,s=.001){return Y(()=>{const i=lO(t,r),o=i.mean,a=i.variance;return[jm(t,o,a,n,e,s),o,a]})}function YBe(t,e,n,r,s=.001){return Y(()=>{const i=lO(t,r),o=i.mean,a=i.variance,l=[];for(const p of To(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=H(o,l),c=H(a,l),h=e==null?null:H(e,l),f=n==null?null:H(n,l);return[jm(t,u,c,f,h,s),o,a]})}function QBe(t,e,n,r,s=.001){return Ct(r.slice().sort(),To(0,t.rank-1))?XBe(t,e,n,r,s):YBe(t,e,n,r,s)}class eX extends Tt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=xn(e.betaInitializer||"zeros"),this.gammaInitializer=xn(e.gammaInitializer||"ones"),this.movingMeanInitializer=xn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=xn(e.movingVarianceInitializer||"ones"),this.betaConstraint=ar(e.betaConstraint),this.gammaConstraint=ar(e.gammaConstraint),this.betaRegularizer=Sn(e.betaRegularizer),this.gammaRegularizer=Sn(e.gammaRegularizer)}build(e){e=qt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new X(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new sr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Y(()=>{const r=n.training==null?!1:n.training,s=lt(e),i=s.shape,o=i.length,a=To(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=Vc(1,o);u[l]=i[l];const c=a.slice();c.sort();const h=!Ct(c,To(0,o).slice(0,o-1)),f=()=>{if(h){const v=H(this.movingMean.read(),u),b=H(this.movingVariance.read(),u),x=this.center?H(this.beta.read(),u):null,w=this.scale?H(this.gamma.read(),u):null;return jm(s,v,b,x,w,this.epsilon)}else return jm(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[d,p,m]=QBe(s,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(v,b,x)=>{Y(()=>{const w=1-x,S=v.read(),k=W(_e(S,b),w);v.write(_e(S,k))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$n(this.betaInitializer),gammaInitializer:$n(this.gammaInitializer),movingMeanInitializer:$n(this.movingMeanInitializer),movingVarianceInitializer:$n(this.movingVarianceInitializer),betaRegularizer:rn(this.betaRegularizer),gammaRegularizer:rn(this.gammaRegularizer),betaConstraint:or(this.betaConstraint),gammaConstraint:or(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}eX.className="BatchNormalization";ge(eX);class tX extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=xn(e.betaInitializer||"zeros"),this.gammaInitializer=xn(e.gammaInitializer||"ones"),this.betaRegularizer=Sn(e.betaRegularizer),this.gammaRegularizer=Sn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=qt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Bl(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=lt(e),s=r.shape,i=s.length;return Y(()=>{let{mean:a,variance:l}=lO(r,this.axis,!0);const u=Vc(1,i);for(const m of this.axis)u[m]=s[m];const c=m=>m!=null&&m.shape.length!==i?H(m,u):m;let h=this.scale?c(this.gamma.read()):null,f=this.center?c(this.beta.read()):null;const d=[],p=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(d.push(s[m]),p.push(1)):(d.push(1),p.push(s[m]));return a=ji(a,d),l=ji(l,d),h!=null&&(h=ji(h,p)),f!=null&&(f=ji(f,p)),jm(r,a,l,f,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$n(this.betaInitializer),gammaInitializer:$n(this.gammaInitializer),betaRegularizer:rn(this.betaRegularizer),gammaRegularizer:rn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}tX.className="LayerNormalization";ge(tX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JBe(t,e,n){return Y(()=>{if(t.rank!==4)throw new X(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new X("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=$o()),n!=="channelsLast"&&n!=="channelsFirst")throw new X(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Lc(t,r)})}class nX extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?$o():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new X(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new X(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new X(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new sr({ndim:4})]}computeOutputShape(e){e=qt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Y(()=>JBe(lt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}nX.className="ZeroPadding2D";ge(nX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wS(t,e,n,r,s,i){return Y(()=>{Un(s),bq(i),$i(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=$o()),i==null&&(i="max"),t=vR(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=Z2(t,e,n,a):o=H2(t,e,n,a),s==="channelsFirst"&&(o=xt(o,[0,3,1,2])),o})}function rX(t,e,n,r,s,i){return Y(()=>{Un(s),bq(i),$i(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=$o()),i==null&&(i="max"),t=bK(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=JG(t,e,n,a):o=DG(t,e,n,a),s==="channelsFirst"&&(o=xt(o,[0,4,1,2,3])),o})}class sX extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new X(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(gr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new X(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);gr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,$i(this.padding),this.inputSpec=[new sr({ndim:3})]}computeOutputShape(e){e=qt(e);const n=wo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Y(()=>{this.invokeCallHook(e,n),e=qy(lt(e),2);const r=this.poolingFunction(lt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return At(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class iX extends sX{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Un(i),$i(s),wS(e,n,r,s,i,"max")}}iX.className="MaxPooling1D";ge(iX);class oX extends sX{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Un(i),$i(s),wS(e,n,r,s,i,"avg")}}oX.className="AveragePooling1D";ge(oX);class aX extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new X(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];gr(this.poolSize,"poolSize"),gr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),$i(this.padding),this.inputSpec=[new sr({ndim:4})]}computeOutputShape(e){e=qt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=wo(n,this.poolSize[0],this.padding,this.strides[0]),r=wo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Y(()=>(this.invokeCallHook(e,n),this.poolingFunction(lt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class lX extends aX{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Un(i),$i(s),wS(e,n,r,s,i,"max")}}lX.className="MaxPooling2D";ge(lX);class uX extends aX{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Un(i),$i(s),wS(e,n,r,s,i,"avg")}}uX.className="AveragePooling2D";ge(uX);class cX extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new X(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];gr(this.poolSize,"poolSize"),gr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),$i(this.padding),this.inputSpec=[new sr({ndim:5})]}computeOutputShape(e){e=qt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=wo(n,this.poolSize[0],this.padding,this.strides[0]),r=wo(r,this.poolSize[1],this.padding,this.strides[1]),s=wo(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return Y(()=>(this.invokeCallHook(e,n),this.poolingFunction(lt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class hX extends cX{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Un(i),$i(s),rX(e,n,r,s,i,"max")}}hX.className="MaxPooling3D";ge(hX);class fX extends cX{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Un(i),$i(s),rX(e,n,r,s,i,"avg")}}fX.className="AveragePooling3D";ge(fX);class dX extends Tt{constructor(e){super(e),this.inputSpec=[new sr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new st}}class pX extends dX{constructor(e){super(e||{})}call(e,n){return Y(()=>{const r=lt(e);return An(r,1)})}}pX.className="GlobalAveragePooling1D";ge(pX);class mX extends dX{constructor(e){super(e||{})}call(e,n){return Y(()=>{const r=lt(e);return Xi(r,1)})}}mX.className="GlobalMaxPooling1D";ge(mX);class gX extends Tt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),this.inputSpec=[new sr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new st}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class yX extends gX{call(e,n){return Y(()=>{const r=lt(e);return this.dataFormat==="channelsLast"?An(r,[1,2]):An(r,[2,3])})}}yX.className="GlobalAveragePooling2D";ge(yX);class vX extends gX{call(e,n){return Y(()=>{const r=lt(e);return this.dataFormat==="channelsLast"?Xi(r,[1,2]):Xi(r,[2,3])})}}vX.className="GlobalMaxPooling2D";ge(vX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xX extends Tt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=ta(s,r);delete n.layer;const o={layer:i};return Object.assign(o,n),new e(o)}}class bX extends xX{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=qt(e),e.length<3)throw new X(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=qt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return Y(()=>(e=lt(e),EK((o,a)=>[lt(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}bX.className="TimeDistributed";ge(bX);function ZBe(t){ih(y5e,"BidirectionalMergeMode",t)}const eze="concat";class wX extends xX{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=ta(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=ta(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?eze:e.mergeMode,ZBe(this.mergeMode),e.weights)throw new st("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Ns(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=NK(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new X("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const c=r.map(h=>new sr({shape:h.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(s!=null)throw new st("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Wo;for(const u of o)if(u instanceof Wo!==l)throw new X("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(o),c=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=h,f}else return super.apply(e,n)}call(e,n){return Y(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=Wa(i,1));let a;return this.mergeMode==="concat"?a=sR([s,i]):this.mergeMode==="sum"?a=de(s,i):this.mergeMode==="ave"?a=W(.5,de(s,i)):this.mergeMode==="mul"?a=W(s,i):this.mergeMode==null&&(a=[s,i]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){hc(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),hc(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=ta(n.layer);if(delete n.layer,n.numConstants!=null)throw new st("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}wX.className="Bidirectional";ge(wX);var SX={exports:{}};(function(t){(function(e,n,r){function s(l){var u=this,c=a();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new s(l),h=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,h&&(typeof h=="object"&&i(h,c),f.state=function(){return i(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Dt,t,!1)})(SX);var kX={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Dt,t,!1)})(kX);var IX={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Dt,t,!1)})(IX);var CX={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.x,h=l.i,f,d;return f=c[h],f^=f>>>7,d=f^f<<24,f=c[h+1&7],d^=f^f>>>10,f=c[h+3&7],d^=f^f>>>3,f=c[h+4&7],d^=f^f<<7,f=c[h+7&7],f=f^f<<13,d^=f^f<<9,c[h]=d,l.i=h+1&7,d};function u(c,h){var f,d=[];if(h===(h|0))d[0]=h;else for(h=""+h,f=0;f<h.length;++f)d[f&7]=d[f&7]<<15^h.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],c.x=d,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Dt,t,!1)})(CX);var TX={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.w,h=l.X,f=l.i,d,p;return l.w=c=c+1640531527|0,p=h[f+34&127],d=h[f=f+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=h[f]=p^d,l.i=f,p+(c^c>>>16)|0};function u(c,h){var f,d,p,m,g,y=[],v=128;for(h===(h|0)?(d=h,h=null):(h=h+"\0",d=0,v=Math.max(v,h.length)),p=0,m=-32;m<v;++m)h&&(d^=h.charCodeAt((m+32)%h.length)),m===0&&(g=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=d+g,p=f==0?p+1:0);for(p>=128&&(y[(h&&h.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=y[p+34&127],f=y[p=p+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,y[p]=d^f;c.w=g,c.X=y,c.i=p}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Dt,t,!1)})(TX);var $X={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var h=l.b,f=l.c,d=l.d,p=l.a;return h=h<<25^h>>>7^f,f=f-d|0,d=d<<24^d>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^f,l.c=f=f-d|0,l.d=d<<16^f>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Dt,t,!1)})($X);var NX={exports:{}};(function(t){(function(e,n){var r=(0,eval)("this"),s=256,i=6,o=52,a="random",l=n.pow(s,i),u=n.pow(2,o),c=u*2,h=s-1,f;function d(x,w,S){var k=[];w=w==!0?{entropy:!0}:w||{};var I=y(g(w.entropy?[x,b(e)]:x==null?v():x,3),k),T=new p(k),N=function(){for(var A=T.g(i),R=l,O=0;A<u;)A=(A+O)*s,R*=s,O=T.g(1);for(;A>=c;)A/=2,R/=2,O>>>=1;return(A+O)/R};return N.int32=function(){return T.g(4)|0},N.quick=function(){return T.g(4)/4294967296},N.double=N,y(b(T.S),e),(w.pass||S||function(A,R,O,M){return M&&(M.S&&m(M,T),A.state=function(){return m(T,{})}),O?(n[a]=A,R):A})(N,I,"global"in w?w.global:this==n,w.state)}n["seed"+a]=d;function p(x){var w,S=x.length,k=this,I=0,T=k.i=k.j=0,N=k.S=[];for(S||(x=[S++]);I<s;)N[I]=I++;for(I=0;I<s;I++)N[I]=N[T=h&T+x[I%S]+(w=N[I])],N[T]=w;(k.g=function(A){for(var R,O=0,M=k.i,z=k.j,B=k.S;A--;)R=B[M=h&M+1],O=O*s+B[h&(B[M]=B[z=h&z+R])+(B[z]=R)];return k.i=M,k.j=z,O})(s)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var S=[],k=typeof x,I;if(w&&k=="object")for(I in x)try{S.push(g(x[I],w-1))}catch{}return S.length?S:k=="string"?x:x+"\0"}function y(x,w){for(var S=x+"",k,I=0;I<S.length;)w[h&I]=h&(k^=w[h&I]*19)+S.charCodeAt(I++);return b(w)}function v(){try{var x;return f&&(x=f.randomBytes)?x=x(s):(x=new Uint8Array(s),(r.crypto||r.msCrypto).getRandomValues(x)),b(x)}catch{var w=r.navigator,S=w&&w.plugins;return[+new Date,r,S,r.screen,b(e)]}}function b(x){return String.fromCharCode.apply(0,x)}if(y(n.random(),e),t.exports){t.exports=d;try{f=Dy}catch{}}})([],Math)})(NX);var tze=SX.exports,nze=kX.exports,rze=IX.exports,sze=CX.exports,ize=TX.exports,oze=$X.exports,Ad=NX.exports;Ad.alea=tze;Ad.xor128=nze;Ad.xorwow=rze;Ad.xorshift7=sze;Ad.xor4096=ize;Ad.tychei=oze;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var L5;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(L5||(L5={}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fe(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aze=SO;class SS extends DA{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new N7(this,ga())}nextDataId(){return SS.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,re().get("IS_NODE")&&hi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Dg(r[0])){const i=r.map(o=>Pl(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return ja(s,i)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Kl(s));return dt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return dt(e.shape,e.dtype,n)}makeOutput(e,n,r){return ga().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Is();return e(),{kernelMs:Is()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Fe([e],"where");const n=this.readSync(e.dataId);return aze(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}SS.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EX(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const lze=t=>{const{x:e}=t.inputs,n=t.backend;Fe(e,"abs");let r=new Float32Array(ie(e.shape));const s=n.data.get(e.dataId).values;return r=EX(s),n.makeOutput(r,e.shape,e.dtype)},uze={kernelName:Vw,backendName:"cpu",kernelFunc:lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qn(t){return(e,n,r,s,i)=>{const o=rt(e,n),a=o.length,l=Ge(o),u=ie(o),c=Pr(i,u),h=e.length,f=n.length,d=Ge(e),p=Ge(n),m=jf(e,o),g=jf(n,o);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(r[y%r.length],s[y%s.length]);else for(let y=0;y<c.length;++y){const v=Mg(y,a,l),b=v.slice(-h);m.forEach(k=>b[k]=0);const x=Jo(b,h,d),w=v.slice(-f);g.forEach(k=>w[k]=0);const S=Jo(w,f,p);c[y]=t(r[x],s[S])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hs(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const cze={kernelName:jA,backendName:"cpu",kernelFunc:Hs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ib(t,e,n="float32"){if(n==="complex64"){const s=ib(t,e,"float32"),i=ib(t,e,"float32");return Hs({inputs:{real:s,imag:i},backend:t})}const r=es(ie(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ua(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const hze={kernelName:ry,backendName:"cpu",kernelFunc:ua};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uc(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const fze={kernelName:v3,backendName:"cpu",kernelFunc:Uc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nu(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return ua({inputs:{x:s},backend:n});const o=ib(n,s.shape,s.dtype),a=nu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Hs({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=Uc({inputs:{input:s},backend:n}),a=nu({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!A7(s.dtype,i)){const o=ua({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(i==="int32"){const o=n.data.get(s.dataId).values,a=Int32Array.from(o);return n.makeTensorInfo(s.shape,"int32",a)}if(i==="bool"){const o=n.data.get(s.dataId).values,a=th([0],s.dtype),[l,u]=Qn((c,h)=>c!==h?1:0)(s.shape,[],o,a,"bool");return n.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const dze={kernelName:jg,backendName:"cpu",kernelFunc:nu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kr(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;Fe([o,a],t);const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,h=o.dtype==="string"?Bc(u):u,f=o.dtype==="string"?Bc(c):c,d=r||o.dtype,[p,m]=e(o.shape,a.shape,h,f,d);return l.makeTensorInfo(m,d,p)}:({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;if(o.dtype==="complex64"||a.dtype==="complex64"){const u=nu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),h=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,d=l.data.get(h.dataId).values,p=l.data.get(f.dataId).values,m=nu({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,v=g.complexTensorInfos.imag,b=l.data.get(y.dataId).values,x=l.data.get(v.dataId).values,[w,S,k]=n(o.shape,a.shape,d,p,b,x),I=l.makeTensorInfo(k,"float32",w),T=l.makeTensorInfo(k,"float32",S),N=Hs({inputs:{real:I,imag:T},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(I),l.disposeIntermediateTensorInfo(T),N}else{const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,h=r||o.dtype,[f,d]=e(o.shape,a.shape,u,c,h);return l.makeTensorInfo(d,h,f)}}}function IR(t){return(e,n,r,s,i,o)=>{const a=rt(e,n),l=ie(a),u=a.length,c=Ge(a),h=Pr("float32",l),f=Pr("float32",l),d=jf(e,a),p=jf(n,a),m=ja(r,s),g=ja(i,o),y=e.length,v=Ge(e),b=n.length,x=Ge(n);if(d.length+p.length===0)for(let w=0;w<h.length;w++){const S=w%m.length,k=w%g.length,I=t(m[S*2],m[S*2+1],g[k*2],g[k*2+1]);h[w]=I.real,f[w]=I.imag}else for(let w=0;w<h.length;w++){const S=Mg(w,u,c),k=S.slice(-y);d.forEach(R=>k[R]=0);const I=Jo(k,y,v),T=S.slice(-b);p.forEach(R=>T[R]=0);const N=Jo(T,b,x),A=t(m[I*2],m[I*2+1],g[N*2],g[N*2+1]);h[w]=A.real,f[w]=A.imag}return[h,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _X=Qn((t,e)=>t+e),pze=IR((t,e,n,r)=>({real:t+n,imag:e+r})),Yf=kr(Cd,_X,pze),mze={kernelName:Cd,backendName:"cpu",kernelFunc:Yf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CR(t,e,n,r,s){const i=ie(r),o=es(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function AX(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=dt([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,a,u):e.size>0?o.set(o.get(a,u)+e.get(a,l),a,u):o.set(o.get(a,u)+1,a,u))}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bu(t){return(e,n,r)=>{const s=Pr(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kt(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;if(Fe(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=i,l=a.data.get(o.dataId).values,u=ie(o.shape),c=n||o.dtype,h=ms(c,u);for(let f=0;f<u;++f)h[f]=e(l[f],s);return a.makeTensorInfo(o.shape,c,h)}}function Od(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;if(Fe(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=i,l=a.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,s);return a.makeTensorInfo(o.shape,u,c)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OX=bu(t=>Math.ceil(t)),gze=Od(Gg,OX),yze={kernelName:Gg,backendName:"cpu",kernelFunc:gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(t,e,n,r){const s=ms(n,ie(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=ie(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?Bc(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let h=0;h<o.shape[1];++h)s[c+h]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DX=Qn((t,e)=>t===e?1:0),PX=kr(r2,DX,null,"bool"),vze={kernelName:r2,backendName:"cpu",kernelFunc:PX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MX=bu(t=>Math.exp(t)),FX=Od(Jg,MX,"float32"),xze={kernelName:Jg,backendName:"cpu",kernelFunc:FX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LX=bu(t=>Math.expm1(t)),bze=Od(Zg,LX),wze={kernelName:Zg,backendName:"cpu",kernelFunc:bze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BX=bu(t=>Math.floor(t)),Sze=Od(ey,BX),kze={kernelName:ey,backendName:"cpu",kernelFunc:Sze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zX(t,e,n,r,s,i,o,a,l){const u=dt([r,i],n);for(let c=0;c<r;c++){const h=[];let f=0;for(let d=0;d<s;d++){const p=t[c*s+d];f+=p*o[d],h.push(p)}if(f<0||f>=l/i)throw new Error(`Invalid indices: ${h} does not index into ${a}`);for(let d=0;d<i;d++)u.values[c*i+d]=e.get(...e.indexToLoc(f*i+d))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(t,e,n){const r=dt(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],u=e.locToIndex([a,l]);o[2]=e.values[u];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[s]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UX=Qn((t,e)=>t>e?1:0),Ize=kr(a2,UX,null,"bool"),Cze={kernelName:a2,backendName:"cpu",kernelFunc:Ize};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WX=Qn((t,e)=>t>=e?1:0),Tze=kr(ny,WX,null,"bool"),$ze={kernelName:ny,backendName:"cpu",kernelFunc:Tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jX=Qn((t,e)=>t<e?1:0),Nze=kr(u2,jX,null,"bool"),Eze={kernelName:u2,backendName:"cpu",kernelFunc:Nze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GX=Qn((t,e)=>t<=e?1:0),_ze=kr(c2,GX,null,"bool"),Aze={kernelName:c2,backendName:"cpu",kernelFunc:_ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HX(t,e,n){const r=(e-t)/(n-1),s=es(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qX=bu(t=>Math.log(t)),Oze=Od(ay,qX),Rze={kernelName:ay,backendName:"cpu",kernelFunc:Oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(t,e,n,r){const s=Pr(r,ie(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>a)&&(a=u)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XX=Qn((t,e)=>Math.max(t,e)),Dze=kr(uy,XX),Pze={kernelName:uy,backendName:"cpu",kernelFunc:Dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YX=Qn((t,e)=>Math.min(t,e)),Mze=kr(cy,YX),Fze={kernelName:cy,backendName:"cpu",kernelFunc:Mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TR=Qn((t,e)=>t*e),Lze=IR((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),kS=kr(fy,TR,Lze),Bze={kernelName:fy,backendName:"cpu",kernelFunc:kS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QX(t,e,n){const r=pu(-1,n);return TR([],e,r,t,n)}function zze(t){const{inputs:e,backend:n}=t,{x:r}=e;Fe(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=QX(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const Vze={kernelName:w2,backendName:"cpu",kernelFunc:zze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JX=Qn((t,e)=>t!==e?1:0),Uze=kr(S2,JX,null,"bool"),Wze={kernelName:S2,backendName:"cpu",kernelFunc:Uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $R(t,e,n,r,s){const i=e.length,o=ie(e),a=Ge(e),l=Ge(s),u=Pr(n,ie(s));for(let c=0;c<o;++c){const h=Mg(c,i,a),f=new Array(h.length);for(let p=0;p<f.length;p++)f[p]=h[r[p]];const d=Jo(f,i,l);u[d]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ms(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Fe(s,"transpose");const o=s.shape.length,a=new Array(o);for(let h=0;h<a.length;h++)a[h]=s.shape[i[h]];const l=r.data.get(s.dataId).values,u=$R(l,s.shape,s.dtype,i,a);return{dataId:r.write(u,a,s.dtype),shape:a,dtype:s.dtype}}const jze={kernelName:lf,backendName:"cpu",kernelFunc:Ms};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(t,e,n,r){const[s,i]=Sr(t,r),o=ti(e,"int32"),a=es(ie(s),o),l=ie(i);for(let u=0;u<a.length;++u){const c=u*l;let h=1;for(let f=0;f<l;++f)h*=n[c+f];a[u]=h}return{outVals:a,outShape:s,outDtype:o}}function Gze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Fe(s,"prod");const a=s.shape.length,l=pt(i,s.shape),u=Nn(l,a);let c=l,h=s;const f=[];u!=null&&(h=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),f.push(h),c=Vn(c.length,a));const d=n.data.get(h.dataId).values,{outVals:p,outShape:m,outDtype:g}=ZX(h.shape,h.dtype,d,c);let y=m;return o&&(y=zn(m,l)),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(y,g,p)}const Hze={kernelName:N2,backendName:"cpu",kernelFunc:Gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return es(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=es(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tY=bu(t=>1/Math.sqrt(t)),qze=Od(vy,tY),Kze={kernelName:vy,backendName:"cpu",kernelFunc:qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qh(t,e,n,r,s,i,o,a,l,u){const c=[r/s,s],h=t.values,f=e.values;if(r===0)return dt(n,e.dtype);const d=dt(c,e.dtype);typeof l=="string"||typeof l=="number"?d.values.fill(l):typeof l=="boolean"&&d.values.fill(+l);for(let p=0;p<i;p++){const m=[];let g=0;for(let y=0;y<o;y++){const v=h[p*o+y];m.push(v),g+=v*a[y]}if(g<0||g>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<s;y++)u?d.values[g*s+y]+=f[p*s+y]:d.values[g*s+y]=e.rank===0?f[0]:f[p*s+y]}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xze=bu(t=>1/(1+Math.exp(-t))),nY=Kt(ky,t=>1/(1+Math.exp(-t))),Yze={kernelName:ky,backendName:"cpu",kernelFunc:nY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rY(t,e,n,r,s){const i=H3(r,e,n),o=ie(n),a=Ge(r);if(i){const h=q3(e,a);return s==="string"?t.slice(h,h+o):t.subarray(h,h+o)}const l=s==="string"?Bc(t):t,u=dt(r,s,l),c=dt(n,s);for(let h=0;h<c.size;++h){const f=c.indexToLoc(h),d=f.map((p,m)=>p+e[m]);c.set(u.get(...d),...f)}return s==="string"?GH(c.values):c.values}function Wc(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;Fe(s,"slice");const[a,l]=G2(s,i,o);j3(s,a,l);const u=n.data.get(s.dataId).values,c=rY(u,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,c)}const Qze={kernelName:D2,backendName:"cpu",kernelFunc:Wc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sY(t,e,n,r,s,i,o){const a=e[0],l=i[0],u=new Array(l),c=new Array(a),h=e[1];if(l===0){if(a!==0)throw new Error(OH(a));const g=ms(n,0),y=ms(s,0);return[g,[0,h],y,u,c]}let f=!0,d=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*h];if(y<0)throw new Error(RH(g,y));if(y>=l)throw new Error(DH(g,y,l));++p[y],f=f&&y>=d,d=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;u[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&f){const g=t,y=r;for(let v=0;v<a;++v)c[v]=v;return[g,[a,h],y,u,c]}else{const g=p[l-1],y=ms(n,g*h),v=ms(s,g),b=new Array(l).fill(0);for(let x=0;x<a;++x){const w=t[x*h],S=b[w],k=(w===0?0:p[w-1])+S;b[w]++;for(let I=0;I<h;++I)y[k*h+I]=t[x*h+I];v[k]=r[x],c[x]=k}for(let x=0;x<l;++x)if(b[x]===0){const S=x===0?0:p[x-1];y[S*h+0]=x;for(let k=1;k<h;++k)y[S*h+k]=0;v[S]=o}return[y,[g,h],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iY(t,e,n,r,s){const i=ie(r),o=e[0],a=s.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const y=s[g];if(y===-1){if(c!==-1)throw new Error(PH(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(MH(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(FH());const g=Math.trunc(i/u);if(u*g!==i)throw new Error(LH(r,l));l[c]=g}if(ie(l)!==i)throw new Error(BH(r,l));const f=r.length,d=[];if(f>0){d[f-1]=1;for(let g=f-2;g>=0;--g)d[g]=d[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=ms(n,o*a);for(let g=0;g<o;++g){let y=0;for(let v=0;v<f;++v)y+=t[g*f+v]*d[v];for(let v=0;v<a;++v)m[g*a+v]=Math.trunc(y/p[v]),y%=p[v]}return[m,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NR(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],h=a>0?s[a-1]+1:0;if(h<0)throw new Error(Q$());const f=e.slice();f[0]=h;const d=f.reduce((b,x)=>b*x,1),p=ms(n,d);if(a===0)return h>0&&p.fill(o),[p,f];if(h<=0)throw new Error(Q$());let m=0,g=1,y=0,v=s[m];for(;;){let b=0;if(g<a){if(b=s[g],v===b){++g;continue}if(v>=b)throw new Error(zH())}if(v<0||v>=h)throw new Error(VH(v,h));v>y&&p.fill(o,y*u,v*u);for(let x=m;x<g;++x){const w=r[x];if(w<0||w>=l[0])throw new Error(UH(x,r[x],l[0]));for(let S=0;S<u;S++)p[v*u+S]+=t[w*u+S]}if(i)for(let x=0;x<u;x++)p[v*u+x]/=g-m;if(m=g,++g,y=v+1,v=b,g>a)break}return y<h&&p.fill(o,y*u,h*u),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jze=bu(t=>Math.sqrt(t)),Zze=Kt(Cy,t=>Math.sqrt(t)),e8e={kernelName:Cy,backendName:"cpu",kernelFunc:Zze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oY=Qn((t,e)=>{const n=t-e;return n*n}),t8e=kr(Ty,oY),n8e={kernelName:Ty,backendName:"cpu",kernelFunc:t8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(t,e,n,r){const s=dt(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r8e{constructor(e,n,r,s,i,o){this.separator=Pl(e),this.nGramWidths=n,this.leftPad=Pl(r),this.rightPad=Pl(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),u=Math.max(0,l-a),c=Math.max(0,l-(i-(a+1))),h=o-(u+c),f=n+(u>0?0:a-l);let d=0;d+=u*this.leftPad.length;for(let v=0;v<h;++v)d+=e[f+v].length;d+=c*this.rightPad.length,d+=(u+c+h-1)*this.separator.length,r[s+a]=new Uint8Array(d);const m=r[s+a];let g=0;const y=v=>v.forEach(b=>m[g++]=b);for(let v=0;v<u;++v)y(this.leftPad),y(this.separator);for(let v=0;v<h-1;++v)y(e[f+v]),y(this.separator);if(h>0){y(e[f+h-1]);for(let v=0;v<c;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<c-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<s;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=ms("int32",s);if(r===0||s===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(h=>{c+=this.getNumNGrams(u,h)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const a=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(h=>{const f=n[l+1]-n[l],d=this.getNumNGrams(f,h);this.createNGrams(e,u,a,c,d,h),c+=d}),this.preserveShort&&c===o[l]){const h=n[l+1]-n[l];if(h===0)continue;const f=h+2*this.padWidth,d=1;this.createNGrams(e,u,a,c,d,f)}}return[a,o]}}function lY(t,e,n,r,s,i,o,a){return new r8e(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function uY(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let f=0;f<r;++f){const d=s.length;s8e(t[f],e,n,s);const p=s.length-d;a[f]=p,i+=p,o=Math.max(o,p)}const l=ms("int32",i*2),u=new Array(i),c=[r,o];let h=0;for(let f=0;f<r;++f)for(let d=0;d<a[f];++d)l[h*2]=f,l[h*2+1]=d,u[h]=s[h],++h;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cY(t,e){const n=ms("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Z_e(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hY=Qn((t,e)=>t-e),i8e=IR((t,e,n,r)=>({real:t-n,imag:e-r})),ER=kr($y,hY,i8e),o8e={kernelName:$y,backendName:"cpu",kernelFunc:ER};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=dt(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Np=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function dY(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*c/a+h)),d=Math.min(r,Math.floor(e+(a-l)*c/a+h));dY(t,e,f,d)}const s=t[e];let i=n,o=r;for(Ih(t,n,e),Np(t[r],s)>0&&Ih(t,n,r);i<o;){for(Ih(t,i,o),i++,o--;Np(t[i],s)<0;)i=i+1;for(;Np(t[o],s)>0;)o=o-1}Np(t[n],s)===0?Ih(t,n,o):(o=o+1,Ih(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function pY(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=Pr(n,o*r),u=Pr("int32",o*r);for(let h=0;h<o;h++){const f=h*a,d=t.subarray(f,f+a);let p=new Array(d.length);d.forEach((v,b)=>p[b]={value:v,index:b}),r<p.length&&(dY(p,r),p=p.slice(0,r)),s&&p.sort(Np);const m=h*r,g=l.subarray(m,m+r),y=u.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[dt(c,n,l),dt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(t,e,n,r){const s=pt(e,n)[0],i=[1,n[0],1];for(let p=0;p<s;p++)i[0]*=n[p];i[1]=n[s];for(let p=s+1;p<n.length;p++)i[2]*=n[p];const o={},a=new Int32Array(n[s]),l=new xr(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let p=0;p<n[s];p++){let m;if(c)m=t[p].toString();else{const g=[];for(let y=0;y<i[0];y++)for(let v=0;v<i[2];v++)g.push(l.get(y,p,v));m=g.join(",")}if(o[m]!==void 0)a[p]=o[m];else{const g=Object.keys(o).length;o[m]=g,a[p]=g,u.push(p)}}const h=i.slice();h[1]=Object.keys(o).length;const f=new xr(h,r);u.forEach((p,m)=>{for(let g=0;g<i[0];g++)for(let y=0;y<i[2];y++)f.set(l.get(g,p,y),g,m,y)});const d=n.slice();return d[s]=h[1],{outputValues:f.values,outputShape:d,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a8e=Object.freeze(Object.defineProperty({__proto__:null,simpleAbsImpl:EX,addImpl:_X,bincountImpl:CR,bincountReduceImpl:AX,ceilImpl:OX,concatImpl:RX,equalImpl:DX,expImpl:MX,expm1Impl:LX,floorImpl:BX,gatherNdImpl:zX,gatherV2Impl:VX,greaterImpl:UX,greaterEqualImpl:WX,lessImpl:jX,lessEqualImpl:GX,linSpaceImpl:HX,logImpl:qX,maxImpl:KX,maximumImpl:XX,minimumImpl:YX,multiplyImpl:TR,negImpl:QX,notEqualImpl:JX,prodImpl:ZX,rangeImpl:eY,rsqrtImpl:tY,scatterImpl:qh,sigmoidImpl:Xze,sliceImpl:rY,sparseFillEmptyRowsImpl:sY,sparseReshapeImpl:iY,sparseSegmentReductionImpl:NR,sqrtImpl:Jze,squaredDifferenceImpl:oY,stridedSliceImpl:aY,stringNGramsImpl:lY,stringSplitImpl:uY,stringToHashBucketFastImpl:cY,subImpl:hY,tileImpl:fY,topKImpl:pY,transposeImpl:$R,uniqueImpl:mY},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dG("cpu",()=>new SS,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gY=Kt(Yg,t=>t>=0?t:Math.exp(t)-1),l8e={kernelName:Yg,backendName:"cpu",kernelFunc:gY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Fe([s],"leakyRelu");const o=ie(s.shape),a=n.data.get(s.dataId).values,l=Pr("float32",o);for(let u=0;u<a.length;u++)l[u]=a[u]<0?i*a[u]:a[u];return n.makeTensorInfo(s.shape,"float32",l)}const u8e={kernelName:l2,backendName:"cpu",kernelFunc:yY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c8e=Qn((t,e)=>t<0?e*t:t);function vY(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Fe([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=c8e(r.shape,s.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",a)}const h8e={kernelName:$2,backendName:"cpu",kernelFunc:vY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xY=Kt(my,t=>Math.max(0,t)),f8e={kernelName:my,backendName:"cpu",kernelFunc:xY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bY=Kt(gy,t=>Math.min(Math.max(0,t),6)),d8e={kernelName:gy,backendName:"cpu",kernelFunc:bY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ob(t,e,n,r,s){if(n==="linear")return ua({inputs:{x:e},backend:t});if(n==="relu")return xY({inputs:{x:e},backend:t});if(n==="elu")return gY({inputs:{x:e},backend:t});if(n==="relu6")return bY({inputs:{x:e},backend:t});if(n==="prelu")return vY({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return yY({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return nY({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ln(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=ie(s.shape),a=_7(i,o),l=ie(a);P(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const u=n.data.get(s.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,h=u.complexTensorInfos.imag;c.shape=a,h.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const p8e={kernelName:E2,backendName:"cpu",kernelFunc:ln};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wY(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;Fe([s,i],"matMul");const l=s.shape.length,u=i.shape.length,c=o?s.shape[l-2]:s.shape[l-1],h=a?i.shape[u-1]:i.shape[u-2],f=o?s.shape[l-1]:s.shape[l-2],d=a?i.shape[u-2]:i.shape[u-1],p=s.shape.slice(0,-2),m=i.shape.slice(0,-2),g=ie(p),y=ie(m),b=rt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,d]);P(c===h,()=>`Error in matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${o} and transposeB=${a} must match.`);const x=o?[g,c,f]:[g,f,c],w=a?[y,d,h]:[y,h,d],S=ln({inputs:{x:s},backend:n,attrs:{shape:x}}),k=ln({inputs:{x:i},backend:n,attrs:{shape:w}}),I=o?S.shape[1]:S.shape[2],T=o?S.shape[2]:S.shape[1],N=a?k.shape[1]:k.shape[2],A=Math.max(g,y),R=n.data.get(S.dataId).values,O=n.data.get(k.dataId).values,M=Ge(S.shape),z=Ge(k.shape),[B,K,L]=o?[M[0],1,M[1]]:[M[0],M[1],1],[V,j,Q]=a?[1,z[1],z[0]]:[z[1],1,z[0]],Z=T*N,oe=dt([A,T,N],S.dtype),fe=oe.values,le=n.blockSize;for(let ye=0;ye<A;ye++)for(let Ce=0;Ce<T;Ce+=le)for(let ve=0;ve<N;ve+=le)for(let ee=0;ee<I;ee+=le){const ce=Math.min(Ce+le,T),we=Math.min(ve+le,N),ne=Math.min(ee+le,I);for(let Re=Ce;Re<ce;Re++)for(let $e=ve;$e<we;$e++){let qe=0;for(let Ue=ee;Ue<ne;Ue++){const it=Math.min(ye,g-1)*B,St=Math.min(ye,y-1)*Q,cr=R[it+Re*K+Ue*L],Bt=O[Ue*V+$e*j+St];qe+=cr*Bt}fe[ye*Z+(Re*N+$e)]+=qe}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(b,oe.dtype,oe.values)}const m8e={kernelName:qw,backendName:"cpu",kernelFunc:wY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;let f,d,p;const m=[];f=wY({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(d=Yf({inputs:{a:f,b:o},backend:n}),m.push(f),f=d),c&&(p=ob(n,f,c,a,h),m.push(f),f=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return f}const y8e={kernelName:Ox,backendName:"cpu",kernelFunc:g8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8e=Kt(Fg,t=>Math.acos(t)),x8e={kernelName:Fg,backendName:"cpu",kernelFunc:v8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b8e=Kt(Lg,t=>Math.acosh(t)),w8e={kernelName:Lg,backendName:"cpu",kernelFunc:b8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n}=t,r=e;Fe(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),i=dt(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const l=s[a];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const k8e={kernelName:Uw,backendName:"cpu",kernelFunc:S8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Fe(s,"all");const a=pt(i,s.shape);let l=a;const u=Nn(l,s.shape.length);let c=s;u!=null&&(c=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),l=Vn(l.length,s.shape.length)),zr("all",l,c.shape.length);const[h,f]=Sr(c.shape,l),d=ie(f),p=es(ie(h),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*d;let b=m[v];for(let x=0;x<d;++x){const w=m[v+x];b=b&&w}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,p);if(o){const y=zn(h,a),v=ln({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const C8e={kernelName:LA,backendName:"cpu",kernelFunc:I8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Fe(s,"any");const a=pt(i,s.shape);let l=a;const u=Nn(l,s.shape.length);let c=s;u!=null&&(c=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),l=Vn(l.length,s.shape.length)),zr("any",l,c.shape.length);const[h,f]=Sr(c.shape,l),d=ie(f),p=es(ie(h),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*d;let b=m[v];for(let x=0;x<d;++x){const w=m[v+x];b=b||w}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,p);if(o){const y=zn(h,a),v=ln({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const $8e={kernelName:BA,backendName:"cpu",kernelFunc:T8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Fe(s,"argMax");let o=pt(i,s.shape);const a=Nn(o,s.shape.length);let l=s;const u=[];a!=null&&(l=Ms({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Vn(o.length,l.shape.length)),o=[o[0]],zr("argMax",o,l.shape.length);const[c,h]=Sr(l.shape,o),f=ie(c),d=es(f,"int32"),p=ie(h),m=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const y=g*p;let v=m[y],b=0;for(let x=0;x<p;++x){const w=m[y+x];w>v&&(v=w,b=x)}d[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",d)}const E8e={kernelName:Ww,backendName:"cpu",kernelFunc:N8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Fe(s,"argMin");let o=pt(i,s.shape);const a=Nn(o,s.shape.length);let l=s;const u=[];a!=null&&(l=Ms({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Vn(o.length,l.shape.length)),o=[o[0]],zr("argMin",o,l.shape.length);const[c,h]=Sr(l.shape,o),f=ie(c),d=es(f,"int32"),p=ie(h),m=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const y=g*p;let v=m[y],b=0;for(let x=0;x<p;++x){const w=m[y+x];w<v&&(v=w,b=x)}d[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",d)}const A8e={kernelName:jw,backendName:"cpu",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8e=Kt(Bg,t=>Math.asin(t)),R8e={kernelName:Bg,backendName:"cpu",kernelFunc:O8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D8e=Kt(zg,t=>Math.asinh(t)),P8e={kernelName:zg,backendName:"cpu",kernelFunc:D8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M8e=Kt(Vg,t=>Math.atan(t)),F8e={kernelName:Vg,backendName:"cpu",kernelFunc:M8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8e=Qn((t,e)=>Math.atan2(t,e)),B8e=kr(Wg,L8e),z8e={kernelName:Wg,backendName:"cpu",kernelFunc:B8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V8e=Kt(Ug,t=>Math.atanh(t)),U8e={kernelName:Ug,backendName:"cpu",kernelFunc:V8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _R(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,u=s.dilationWidth,c=s.effectiveFilterHeight,h=s.effectiveFilterWidth,f=s.padInfo.top,d=s.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=dt(s.outShape,n),g=m.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],v=s.outShape[2]*s.outShape[3],b=s.outShape[3];for(let x=0;x<s.batchSize;++x){const w=x*y,S=x*r[0];for(let k=0;k<s.inChannels;++k)for(let I=0;I<s.outHeight;++I){const T=I*o-f,N=Math.max(0,T),A=Math.min(s.inHeight,c+T),R=w+I*v;for(let O=0;O<s.outWidth;++O){const M=O*a-d,z=Math.max(0,M),B=Math.min(s.inWidth,h+M);let K=p,L=0,V=0;for(let Q=N;Q<A;Q+=l){const Z=S+Q*r[1];for(let oe=z;oe<B;oe+=u){const fe=Z+oe*r[2],le=t[fe+k];i==="max"&&le>K?K=le:i==="avg"&&(L+=le,V++)}if(isNaN(K))break}const j=R+O*b+k;g[j]=i==="avg"?L/V:K}}}return m}function SY(t,e,n,r,s=!1,i=!1){const o=dt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,m=dt(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let v=0;v<r.outHeight;++v){const b=v*a-d;let x=b;for(;x<0;)x+=u;const w=Math.min(r.inHeight,h+b);for(let S=0;S<r.outWidth;++S){const k=S*l-p;let I=k;for(;I<0;)I+=c;const T=Math.min(r.inWidth,f+k);let N=Number.NEGATIVE_INFINITY,A=-1;for(let R=x;R<w;R+=u){const O=R-b;for(let M=I;M<T;M+=c){const z=M-k,B=m.get(g,R,M,y);B>N&&(N=B,s?A=i?((g*r.inHeight+R)*r.inWidth+M)*r.inChannels+y:(R*r.inWidth+M)*r.inChannels+y:A=O*f+z)}}o.set(A,g,v,S,y)}}return o}function kY(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,u=s.dilationDepth,c=s.dilationHeight,h=s.dilationWidth,f=s.effectiveFilterDepth,d=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.front,g=s.padInfo.top,y=s.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=dt(s.outShape,n),x=b.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],S=s.outShape[2]*s.outShape[3]*s.outShape[4],k=s.outShape[3]*s.outShape[4],I=s.outShape[4];for(let T=0;T<s.batchSize;++T){const N=T*w,A=T*r[0];for(let R=0;R<s.inChannels;++R)for(let O=0;O<s.outDepth;++O){const M=O*o-m;let z=M;for(;z<0;)z+=u;const B=Math.min(s.inDepth,f+M),K=N+O*S;for(let L=0;L<s.outHeight;++L){const V=L*a-g;let j=V;for(;j<0;)j+=c;const Q=Math.min(s.inHeight,d+V),Z=K+L*k;for(let oe=0;oe<s.outWidth;++oe){const fe=oe*l-y;let le=fe;for(;le<0;)le+=h;const ye=Math.min(s.inWidth,p+fe),Ce=Z+oe*I;let ve=v,ee=0,ce=0;for(let ne=z;ne<B;ne+=u){const Re=A+ne*r[1];for(let $e=j;$e<Q;$e+=c){const qe=Re+$e*r[2];for(let Ue=le;Ue<ye;Ue+=h){const it=qe+Ue*r[3],St=t[it+R];if(i==="max"&&St>ve?ve=St:i==="avg"&&(ee+=St,ce++),isNaN(ve))break}if(isNaN(ve))break}if(isNaN(ve))break}const we=Ce+R;x[we]=i==="avg"?ee/ce:ve}}}}return b}function W8e(t,e){const n=dt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.front,d=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const v=y*r-f;let b=v;for(;b<0;)b+=o;const x=Math.min(e.inDepth,u+v);for(let w=0;w<e.outHeight;++w){const S=w*s-d;let k=S;for(;k<0;)k+=a;const I=Math.min(e.inHeight,c+S);for(let T=0;T<e.outWidth;++T){const N=T*i-p;let A=N;for(;A<0;)A+=l;const R=Math.min(e.inWidth,h+N);let O=Number.NEGATIVE_INFINITY,M=-1;for(let z=b;z<x;z+=o){const B=z-v;for(let K=k;K<I;K+=a){const L=K-S;for(let V=A;V<R;V+=l){const j=V-N,Q=t.get(m,z,K,V,g);Q>=O&&(O=Q,M=B*c*h+L*c+j)}}}n.set(M,m,y,w,T,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Fe(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;P(Br(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ro(s.shape,i,o,u,a,l);let h;if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))h=ua({inputs:{x:s},backend:n});else{const f=n.data.get(s.dataId).values,d=Ge(s.shape),p=_R(f,s.shape,s.dtype,d,c,"avg");h=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return h}const G8e={kernelName:Gw,backendName:"cpu",kernelFunc:j8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;Fe(s,"avgPool3d");const c=qa(s.shape,i,o,1,a,l,u),h=n.data.get(s.dataId).values,f=kY(h,s.shape,s.dtype,Ge(s.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const q8e={kernelName:Hw,backendName:"cpu",kernelFunc:H8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;Fe([s,i],"avgPool3DGrad");const c=qa(i.shape,o,a,1,l,u),h=c.strideDepth,f=c.strideHeight,d=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,k=x-1-c.padInfo.front,I=S-1-c.padInfo.left,T=w-1-c.padInfo.top,N=dt(i.shape,"float32"),A=1/(p*m*g),R=n.bufferSync(s);for(let O=0;O<c.batchSize;++O)for(let M=0;M<c.inChannels;++M)for(let z=0;z<c.inDepth;++z)for(let B=0;B<c.inHeight;++B)for(let K=0;K<c.inWidth;++K){const L=z-k,V=B-T,j=K-I;let Q=0;for(let Z=0;Z<x;Z+=y){const oe=(L+Z)/h;if(!(oe<0||oe>=c.outDepth||Math.floor(oe)!==oe))for(let fe=0;fe<w;fe+=v){const le=(V+fe)/f;if(!(le<0||le>=c.outHeight||Math.floor(le)!==le))for(let ye=0;ye<S;ye+=b){const Ce=(j+ye)/d;if(Ce<0||Ce>=c.outWidth||Math.floor(Ce)!==Ce)continue;Q+=R.get(O,oe,le,Ce,M)}}}N.set(Q*A,O,z,B,K,M)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const X8e={kernelName:VA,backendName:"cpu",kernelFunc:K8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Fe([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=ro(o.shape,a,l,1,u),h=c.strideHeight,f=c.strideWidth,d=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=dt(o.shape,"float32"),S=1/(d*p),k=n.data.get(s.dataId).values,I=dt(s.shape,"float32",k);for(let T=0;T<c.batchSize;++T)for(let N=0;N<c.inChannels;++N)for(let A=0;A<c.inHeight;++A)for(let R=0;R<c.inWidth;++R){const O=A-x,M=R-b;let z=0;for(let B=0;B<y;B+=m){const K=(O+B)/h;if(!(K<0||K>=c.outHeight||Math.floor(K)!==K))for(let L=0;L<v;L+=g){const V=(M+L)/f;if(V<0||V>=c.outWidth||Math.floor(V)!==V)continue;z+=I.get(T,K,V,N)}}w.set(z*S,T,A,R,N)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const Q8e={kernelName:zA,backendName:"cpu",kernelFunc:Y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:o,mean:a,variance:l}=e;P(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Fe([s,a,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,d=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,y=d.length,v=f.length,b=h.length;let x=0,w=0,S=0,k=0;for(let I=0;I<c.length;++I)m[I]=p[x++]+(c[I]-h[w++])*d[S++]/Math.sqrt(f[k++]+u),x>=g&&(x=0),w>=b&&(w=0),S>=y&&(S=0),k>=v&&(k=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const Z8e={kernelName:i2,backendName:"cpu",kernelFunc:J8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;Fe([s],"batchToSpaceND");const a=i.reduce((y,v)=>y*v),l=Wy(s.shape,i,a),u=jy(l.length,i.length),c=Gy(s.shape,i,a),h=FO(o,i.length),f=LO(c,o,i.length),d=ln({inputs:{x:s},backend:n,attrs:{shape:l}}),p=Ms({inputs:{x:d},backend:n,attrs:{perm:u}}),m=ln({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Wc({inputs:{x:m},backend:n,attrs:{begin:h,size:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const tVe={kernelName:Kw,backendName:"cpu",kernelFunc:eVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,u=CR(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const rVe={kernelName:UA,backendName:"cpu",kernelFunc:nVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sVe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=rt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const iVe={kernelName:WA,backendName:"cpu",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oVe=Kt(Hg,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),aVe={kernelName:Hg,backendName:"cpu",kernelFunc:oVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ie(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],h=l[u];r[u]=Math.hypot(c,h)}return n.makeOutput(r,e.shape,"float32")},uVe={kernelName:Xw,backendName:"cpu",kernelFunc:lVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qf(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const cVe={kernelName:a3,backendName:"cpu",kernelFunc:Qf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=pt(s,e[0].shape)[0];let o=Zo(e.map(m=>m.shape),i);if(ie(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const a=e.filter(m=>ie(m.shape)>0);if(a.length===1)return ua({inputs:{x:a[0]},backend:n});const l=a.map(m=>m.shape);if(DO(l,i),a[0].dtype==="complex64"){const m=a.map(x=>Uc({inputs:{input:x},backend:n})),g=a.map(x=>Qf({inputs:{input:x},backend:n})),y=Jf({inputs:m,backend:n,attrs:{axis:i}}),v=Jf({inputs:g,backend:n,attrs:{axis:i}}),b=Hs({inputs:{real:y,imag:v},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}const u=a.map(m=>{const g=ie(m.shape.slice(i));return ln({inputs:{x:m},backend:n,attrs:{shape:[-1,g]}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));o=Zo(u.map(m=>m.shape),1);const h=u[0].shape[0]===1,f=RX(c,o,e[0].dtype,h),d=Zo(a.map(m=>m.shape),i),p=n.makeTensorInfo(d,e[0].dtype,f);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const hVe={kernelName:Yw,backendName:"cpu",kernelFunc:Jf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Fe([s,i],"conv2d");const h=Ka(l),f=wr(s.shape,i.shape,o,u,a,c,!1,h),d=f.filterHeight,p=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.padInfo.left,v=f.padInfo.top,b=f.dataFormat==="channelsLast",x=new xr(f.outShape,s.dtype),w=Ge(s.shape),S=Ge(i.shape),k=w[0],I=b?w[1]:w[2],T=b?w[2]:1,N=b?1:w[1],A=x.strides[0],R=b?x.strides[1]:x.strides[2],O=b?x.strides[2]:1,M=b?1:x.strides[1],z=n.data.get(s.dataId).values,B=n.data.get(i.dataId).values,K=x.values;for(let L=0;L<f.batchSize;++L){const V=L*k,j=L*A;for(let Q=0;Q<f.outHeight;++Q){const Z=j+Q*R,oe=Q*f.strideHeight-v;for(let fe=0;fe<d;++fe){const le=oe+fe*m;if(le<0||le>=f.inHeight)continue;const ye=fe*S[0],Ce=V+le*I;for(let ve=0;ve<f.outWidth;++ve){const ee=Z+ve*O,ce=ve*f.strideWidth-y;for(let we=0;we<p;++we){const ne=ce+we*g;if(ne<0||ne>=f.inWidth)continue;const Re=ye+we*S[1],$e=Ce+ne*T;let qe=Re;for(let Ue=0;Ue<f.inChannels;++Ue){const it=z[$e+Ue*N];for(let St=0;St<f.outChannels;++St)K[ee+St*M]+=it*B[qe+St];qe+=f.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,K)}const fVe={kernelName:Qw,backendName:"cpu",kernelFunc:IY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Fe([s,i],"conv2dBackpropFilter");const h=Ka(l),f=wr(s.shape,c,o,1,a,u,!1,h),{strideHeight:d,strideWidth:p,filterHeight:m,filterWidth:g}=f,y=f.dataFormat==="channelsLast",v=new xr(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,k=new xr(s.shape,s.dtype,w),I=new xr(i.shape,i.dtype,S);for(let T=0;T<m;++T){const N=Math.max(0,Math.ceil((x-T)/d)),A=Math.min(f.outHeight,(f.inHeight+x-T)/d);for(let R=0;R<g;++R){const O=Math.max(0,Math.ceil((b-R)/p)),M=Math.min(f.outWidth,(f.inWidth+b-R)/p);for(let z=0;z<f.inChannels;++z)for(let B=0;B<f.outChannels;++B){let K=0;for(let L=0;L<f.batchSize;++L)for(let V=N;V<A;++V){const j=T+V*d-x;for(let Q=O;Q<M;++Q){const Z=R+Q*p-b;y?K+=k.get(L,j,Z,z)*I.get(L,V,Q,B):K+=k.get(L,z,j,Z)*I.get(L,B,V,Q)}}v.set(K,T,R,z,B)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const pVe={kernelName:GA,backendName:"cpu",kernelFunc:dVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r;Fe([s,i],"conv2dBackpropInput");const h=Ge(i.shape),f=Ge(s.shape);let d=Ka(u);const p=wr(o,i.shape,a,1,l,c,!1,d),m=new xr(p.inShape,"float32"),g=m.values,y=n.data.get(s.dataId).values,v=n.data.get(i.dataId).values,[b,x,w]=h,{batchSize:S,filterHeight:k,filterWidth:I,inChannels:T,inHeight:N,inWidth:A,outChannels:R,outHeight:O,outWidth:M,strideHeight:z,strideWidth:B}=p;d=p.dataFormat;const K=k-1-p.padInfo.top,L=I-1-p.padInfo.left,V=d==="channelsLast",j=m.strides[0],Q=V?m.strides[1]:m.strides[2],Z=V?m.strides[2]:1,oe=V?1:m.strides[1],fe=f[0],le=V?f[1]:f[2],ye=V?f[2]:1,Ce=V?1:f[1];for(let ve=0;ve<S;++ve)for(let ee=0;ee<T;++ee)for(let ce=0;ce<N;++ce){const we=ce-K,ne=Math.max(0,Math.ceil(we/z)),Re=Math.min(O,(k+we)/z);for(let $e=0;$e<A;++$e){const qe=$e-L,Ue=Math.max(0,Math.ceil(qe/B)),it=Math.min(M,(I+qe)/B);let St=0;for(let Bt=ne;Bt<Re;++Bt){const Ur=Bt*z-we;for(let Wn=Ue;Wn<it;++Wn){const rs=Wn*B-qe,jn=fe*ve+le*Bt+ye*Wn,ws=b*(k-1-Ur)+x*(I-1-rs)+w*ee;for(let En=0;En<R;++En){const oo=y[jn+Ce*En],ao=v[ws+En];St+=oo*ao}}}const cr=j*ve+Q*ce+Z*$e+oe*ee;g[cr]=St}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const gVe={kernelName:Jw,backendName:"cpu",kernelFunc:mVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r;Fe([s,i],"conv3d");const u=mu(s.shape,i.shape,o,l,a),{filterDepth:c,filterHeight:h,filterWidth:f,dilationDepth:d,dilationHeight:p,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,b=g.top,x=new xr(u.outShape,s.dtype),w=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,k=x.values,I=Ge(s.shape),T=Ge(i.shape);for(let N=0;N<u.batchSize;++N){const A=N*I[0],R=N*x.strides[0];for(let O=0;O<u.outDepth;++O){const M=R+O*x.strides[1],z=O*u.strideDepth-y;for(let B=0;B<c;++B){const K=z+B*d;if(K<0||K>=u.inDepth)continue;const L=B*T[0],V=A+K*I[1];for(let j=0;j<u.outHeight;++j){const Q=M+j*x.strides[2],Z=j*u.strideHeight-b;for(let oe=0;oe<h;++oe){const fe=Z+oe*p;if(fe<0||fe>=u.inHeight)continue;const le=L+oe*T[1],ye=V+fe*I[2];for(let Ce=0;Ce<u.outWidth;++Ce){const ve=Q+Ce*u.outChannels,ee=Ce*u.strideWidth-v;for(let ce=0;ce<f;++ce){const we=ee+ce*m;if(we<0||we>=u.inWidth)continue;const ne=le+ce*T[2],Re=ye+we*u.inChannels;let $e=ne;for(let qe=0;qe<u.inChannels;++qe){const Ue=w[Re+qe];for(let it=0;it<u.outChannels;++it)k[ve+it]+=Ue*S[$e+it];$e+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const vVe={kernelName:Zw,backendName:"cpu",kernelFunc:yVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r;Fe([s,i],"conv3dBackpropFilterV2");const u=Ge(s.shape),c=Ge(i.shape),h=mu(s.shape,l,o,1,a),f=h.strideDepth,d=h.strideHeight,p=h.strideWidth,m=h.filterDepth,g=h.filterHeight,y=h.filterWidth,v=new xr(h.filterShape,"float32"),b=v.values,[x,w,S,k]=v.strides,I=n.data.get(i.dataId).values,[T,N,A,R]=c,O=n.data.get(s.dataId).values,[M,z,B,K]=u,L=h.padInfo.front,V=h.padInfo.left,j=h.padInfo.top;for(let Q=0;Q<m;++Q){const Z=Math.max(0,Math.ceil((L-Q)/f)),oe=Math.min(h.outDepth,(h.inDepth+L-Q)/f),fe=Q*x;for(let le=0;le<g;++le){const ye=Math.max(0,Math.ceil((j-le)/d)),Ce=Math.min(h.outHeight,(h.inHeight+j-le)/d),ve=le*w+fe;for(let ee=0;ee<y;++ee){const ce=Math.max(0,Math.ceil((V-ee)/p)),we=Math.min(h.outWidth,(h.inWidth+V-ee)/p),ne=ee*S+ve;for(let Re=0;Re<h.inChannels;++Re){const $e=Re*k+ne;for(let qe=0;qe<h.outChannels;++qe){let Ue=0;for(let it=0;it<h.batchSize;++it){const St=it*M,cr=it*T;for(let Bt=Z;Bt<oe;++Bt){const Wn=(Q+Bt*f-L)*z+St,rs=Bt*N+cr;for(let jn=ye;jn<Ce;++jn){const En=(le+jn*d-j)*B+Wn,oo=jn*A+rs;for(let ao=ce;ao<we;++ao){const zd=(ee+ao*p-V)*K+En,Vd=ao*R+oo;Ue+=O[zd+Re]*I[Vd+qe]}}}}b[$e+qe]=Ue}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const bVe={kernelName:HA,backendName:"cpu",kernelFunc:xVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r;Fe([s],"conv3dBackpropInputV2");const u=Ge(s.shape),c=Ge(i.shape),h=mu(l,i.shape,a,1,o),f=new xr(h.inShape,"float32"),d=f.values,[p,m,g,y]=f.strides,v=n.data.get(s.dataId).values,[b,x,w,S]=u,k=n.data.get(i.dataId).values,[I,T,N,A]=c,{batchSize:R,filterDepth:O,filterHeight:M,filterWidth:z,inChannels:B,inDepth:K,inHeight:L,inWidth:V,outChannels:j,outDepth:Q,outHeight:Z,outWidth:oe,strideDepth:fe,strideHeight:le,strideWidth:ye}=h,Ce=O-1-h.padInfo.front,ve=M-1-h.padInfo.top,ee=z-1-h.padInfo.left;for(let ce=0;ce<R;++ce)for(let we=0;we<B;++we)for(let ne=0;ne<K;++ne){const Re=ne-Ce,$e=Math.max(0,Math.ceil(Re/fe)),qe=Math.min(Q,(O+Re)/fe);for(let Ue=0;Ue<L;++Ue){const it=Ue-ve,St=Math.max(0,Math.ceil(it/le)),cr=Math.min(Z,(M+it)/le);for(let Bt=0;Bt<V;++Bt){const Ur=Bt-ee,Wn=Math.max(0,Math.ceil(Ur/ye)),rs=Math.min(oe,(z+Ur)/ye);let jn=0;for(let ws=$e;ws<qe;++ws){const En=ws*fe-Re;for(let oo=St;oo<cr;++oo){const ao=oo*le-it;for(let Qa=Wn;Qa<rs;++Qa){const zd=Qa*ye-Ur,Vd=b*ce+x*ws+w*oo+S*Qa,Su=I*(O-1-En)+T*(M-1-ao)+N*(z-1-zd)+A*we;for(let ku=0;ku<j;++ku){const Vs=v[Vd+ku],hh=k[Su+ku];jn+=Vs*hh}}}}d[p*ce+m*ne+g*Ue+y*Bt+we]=jn}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const SVe={kernelName:qA,backendName:"cpu",kernelFunc:wVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe=Kt(qg,t=>Math.cos(t)),IVe={kernelName:qg,backendName:"cpu",kernelFunc:kVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CVe=Kt(Kg,t=>Math.cosh(t)),TVe={kernelName:Kg,backendName:"cpu",kernelFunc:CVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ve(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[c,h,f,d]=s.shape,p=i.shape[0],[m,g]=a,y=dt([p,m,g,d],"float32"),v=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,x=n.data.get(s.dataId).values,w=Ge(s.shape),S=Ge(y.shape);for(let k=0;k<p;k++){const I=k*4,T=v[I],N=v[I+1],A=v[I+2],R=v[I+3],O=b[k];if(O>=c)continue;const M=m>1?(A-T)*(h-1)/(m-1):0,z=g>1?(R-N)*(f-1)/(g-1):0;for(let B=0;B<m;B++){const K=m>1?T*(h-1)+B*M:.5*(T+A)*(h-1);if(K<0||K>h-1){for(let L=0;L<g;L++)for(let V=0;V<d;V++){const j=V+L*S[2]+B*S[1]+k*S[0];y.values[j]=u}continue}if(l==="bilinear"){const L=Math.floor(K),V=Math.ceil(K),j=K-L;for(let Q=0;Q<g;Q++){const Z=g>1?N*(f-1)+Q*z:.5*(N+R)*(f-1);if(Z<0||Z>f-1){for(let ye=0;ye<d;ye++){const Ce=ye+Q*S[2]+B*S[1]+k*S[0];y.values[Ce]=u}continue}const oe=Math.floor(Z),fe=Math.ceil(Z),le=Z-oe;for(let ye=0;ye<d;ye++){let Ce=ye+oe*w[2]+L*w[1]+O*w[0];const ve=x[Ce];Ce=ye+fe*w[2]+L*w[1]+O*w[0];const ee=x[Ce];Ce=ye+oe*w[2]+V*w[1]+O*w[0];const ce=x[Ce];Ce=ye+fe*w[2]+V*w[1]+O*w[0];const we=x[Ce],ne=ve+(ee-ve)*le,Re=ce+(we-ce)*le;Ce=ye+Q*S[2]+B*S[1]+k*S[0],y.values[Ce]=ne+(Re-ne)*j}}}else for(let L=0;L<g;++L){const V=g>1?N*(f-1)+L*z:.5*(N+R)*(f-1);if(V<0||V>f-1){for(let Z=0;Z<d;Z++){const oe=Z+L*S[2]+B*S[1]+k*S[0];y.values[oe]=u}continue}const j=Math.round(V),Q=Math.round(K);for(let Z=0;Z<d;Z++){const oe=Z+j*w[2]+Q*w[1]+O*w[0],fe=Z+L*S[2]+B*S[1]+k*S[0];y.values[fe]=x[oe]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const NVe={kernelName:XA,backendName:"cpu",kernelFunc:$Ve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Fe(s,"cumprod");const l=Nn([i],s.shape.length);let u=s;l!=null&&(u=Ms({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=Vn(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=ti(u.dtype,"int32"),f=MA(ie(u.shape),h),d=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<d.length;y+=p)for(let v=0;v<p;v++){const b=m(y,v);if(v===0)f[b]=o?1:d[b];else{const x=m(y,v-1);f[b]=o?d[x]*f[x]:d[b]*f[x]}}const g=n.makeTensorInfo(u.shape,h,f);if(l!=null){const y=gu(l),v=Ms({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const _Ve={kernelName:KA,backendName:"cpu",kernelFunc:EVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Fe(s,"cumsum");const l=Nn([i],s.shape.length);let u=s;l!=null&&(u=Ms({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=Vn(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=ti(u.dtype,"int32"),f=es(ie(u.shape),h),d=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<d.length;y+=p)for(let v=0;v<p;v++){const b=m(y,v);if(v===0)f[b]=o?0:d[b];else{const x=m(y,v-1);f[b]=o?d[x]+f[x]:d[b]+f[x]}}const g=n.makeTensorInfo(u.shape,h,f);if(l!=null){const y=gu(l),v=Ms({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const OVe={kernelName:e2,backendName:"cpu",kernelFunc:AVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=CR(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(i),c=AX(l,u,o,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const DVe={kernelName:YA,backendName:"cpu",kernelFunc:RVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r;P(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],u=s.shape[2],c=s.shape[3],h=l*i,f=u*i,d=c/(i*i),p=n.data.get(s.dataId).values,m=new Float32Array(a*h*f*d);let g=0;for(let y=0;y<a;++y)for(let v=0;v<h;++v){const b=Math.floor(v/i),x=v%i;for(let w=0;w<f;++w){const S=Math.floor(w/i),k=w%i,I=(x*i+k)*d;for(let T=0;T<d;++T){const A=T+I+c*(S+u*(b+l*y));m[g++]=p[A]}}}return n.makeTensorInfo([a,h,f,d],s.dtype,m)}const MVe={kernelName:QA,backendName:"cpu",kernelFunc:PVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CY(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;Fe([s,i],"depthwiseConv2DNative");const c=Ge(s.shape),h=Ge(i.shape);let f=l;f==null&&(f=[1,1]),P(Br(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);const d=wr(s.shape,i.shape,o,f,a,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=d,b=v.left,x=v.top,w=d.outChannels/d.inChannels,S=new xr(d.outShape,s.dtype),k=n.data.get(s.dataId).values,I=n.data.get(i.dataId).values,T=S.values;for(let N=0;N<d.batchSize;++N){const A=N*c[0],R=N*S.strides[0];for(let O=0;O<d.outHeight;++O){const M=R+O*S.strides[1],z=O*d.strideHeight-x;for(let B=0;B<p;++B){const K=z+B*g;if(K<0||K>=d.inHeight)continue;const L=B*h[0],V=A+K*c[1];for(let j=0;j<d.outWidth;++j){const Q=M+j*S.strides[2],Z=j*d.strideWidth-b;for(let oe=0;oe<m;++oe){const fe=Z+oe*y;if(fe<0||fe>=d.inWidth)continue;const le=L+oe*h[1],ye=V+fe*d.inChannels;let Ce=Q,ve=le;for(let ee=0;ee<d.inChannels;++ee){const ce=k[ye+ee];for(let we=0;we<w;++we)T[Ce+we]+=ce*I[ve+we];Ce+=w,ve+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const FVe={kernelName:t2,backendName:"cpu",kernelFunc:CY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;Fe([s,i],"depthwiseConv2dNativeBackpropFilter");const h=wr(s.shape,c,o,a,l,u,!0),{strideHeight:f,strideWidth:d,filterHeight:p,filterWidth:m}=h,g=new xr(h.filterShape,"float32"),y=h.padInfo.left,v=h.padInfo.top,b=h.outChannels/h.inChannels,x=n.data.get(s.dataId).values,w=new xr(s.shape,s.dtype,x),S=n.data.get(i.dataId).values,k=new xr(i.shape,i.dtype,S);for(let I=0;I<p;++I){const T=Math.max(0,Math.ceil((v-I)/f)),N=Math.min(h.outHeight,(h.inHeight+v-I)/f);for(let A=0;A<m;++A){const R=Math.max(0,Math.ceil((y-A)/d)),O=Math.min(h.outWidth,(h.inWidth+y-A)/d);for(let M=0;M<h.outChannels;++M){const z=Math.trunc(M/b),B=M%b;let K=0;for(let L=0;L<h.batchSize;++L)for(let V=T;V<N;++V){const j=I+V*f-v;for(let Q=R;Q<O;++Q){const Z=A+Q*d-y;K+=w.get(L,j,Z,z)*k.get(L,V,Q,M)}}g.set(K,I,A,z,B)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const BVe={kernelName:JA,backendName:"cpu",kernelFunc:LVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r;Fe([s,i],"depthwiseConv2DNativeBackpropInput");const h=Ge(s.shape),f=Ge(i.shape),d=wr(c,i.shape,o,a,l,u,!0),p=new xr(d.inShape,"float32"),m=p.values,[g,y,v]=p.strides,b=n.data.get(s.dataId).values,[x,w,S]=h,k=n.data.get(i.dataId).values,[I,T,N]=f,{batchSize:A,filterHeight:R,filterWidth:O,inChannels:M,inHeight:z,inWidth:B,outChannels:K,outHeight:L,outWidth:V,strideHeight:j,strideWidth:Q}=d,Z=R-1-d.padInfo.top,oe=O-1-d.padInfo.left,fe=K/M;for(let le=0;le<A;++le)for(let ye=0;ye<M;++ye)for(let Ce=0;Ce<z;++Ce){const ve=Ce-Z,ee=Math.max(0,Math.ceil(ve/j)),ce=Math.min(L,(R+ve)/j);for(let we=0;we<B;++we){const ne=we-oe,Re=Math.max(0,Math.ceil(ne/Q)),$e=Math.min(V,(O+ne)/Q);let qe=0;for(let Ue=ee;Ue<ce;++Ue){const it=Ue*j-ve;for(let St=Re;St<$e;++St){const cr=St*Q-ne,Bt=x*le+w*Ue+S*St,Ur=I*(R-1-it)+T*(O-1-cr)+N*ye;for(let Wn=0;Wn<fe;++Wn){const rs=ye*fe+Wn,jn=b[Bt+rs],ws=k[Ur+Wn];qe+=jn*ws}}}m[g*le+y*Ce+v*we+ye]=qe}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const VVe={kernelName:ZA,backendName:"cpu",kernelFunc:zVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UVe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=ie(r.shape),i=n.data.get(r.dataId).values,o=dt([s,s],r.dtype),a=o.values;for(let u=0;u<i.length;u++)a[u*s+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const WVe={kernelName:F7,backendName:"cpu",kernelFunc:UVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jVe={kernelName:n2,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:o,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,h=l.data.get(s.dataId).values,f=s.shape.length,{batchSize:d,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:k,dilationHeight:I,dilationWidth:T,outShape:N}=My(r.shape,s.shape,i,o,"NHWC",a),A=ie(N),R=N.length,O=ms(r.dtype,A);for(let z=0;z<d;++z)for(let B=0;B<y;++B){const K=B*x-b.top;for(let L=0;L<v;++L){const V=L*w-b.left;for(let j=0;j<g;++j){let Q=Number.MIN_SAFE_INTEGER;for(let oe=0;oe<S;++oe){const fe=K+oe*I;if(fe>=0&&fe<p)for(let le=0;le<k;++le){const ye=V+le*T;if(ye>=0&&ye<m){const Ce=Jo([z,fe,ye,j],c,Ge(r.shape)),ve=Jo([oe,le,j],f,Ge(s.shape)),ee=u[Ce]+h[ve];ee>Q&&(Q=ee)}}}const Z=Jo([z,B,L,j],R,Ge(N));O[Z]=Q}}}return{dataId:l.write(th(O,r.dtype),N,r.dtype),shape:N,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GVe={kernelName:A$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=Ki(r.shape,u.data.get(r.dataId).values),h=Ki(s.shape,u.data.get(s.dataId).values),{batchSize:f,inHeight:d,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:k,dilationWidth:I,outShape:T}=My(r.shape,s.shape,o,a,"NHWC",l);P(i.rank===T.length,()=>`Error in ${A$}, dy must have the same rank as output ${T.length}, but got ${i.rank}`);const N=Ki(T,u.data.get(i.dataId).values),A=R7(s.shape,s.dtype);for(let O=0;O<f;++O)for(let M=0;M<g;++M){const z=M*b-v.top;for(let B=0;B<y;++B){const K=B*x-v.left;for(let L=0;L<m;++L){let V=Number.MIN_SAFE_INTEGER,j=0,Q=0;for(let Z=0;Z<w;++Z){const oe=z+Z*k;if(oe>=0&&oe<d)for(let fe=0;fe<S;++fe){const le=K+fe*I;if(le>=0&&le<p){const ye=c[O][oe][le][L]+h[Z][fe][L];ye>V&&(V=ye,j=Z,Q=fe)}}}A[j][Q][L]+=N[O][M][B][L]}}}return{dataId:u.write(th(A,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HVe={kernelName:_$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=Ki(r.shape,u.data.get(r.dataId).values),h=Ki(s.shape,u.data.get(s.dataId).values),{batchSize:f,inHeight:d,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:k,dilationWidth:I,outShape:T}=My(r.shape,s.shape,o,a,"NHWC",l);P(i.rank===T.length,()=>`Error in ${_$}, dy must have the same rank as output ${T.length}, but got ${i.rank}`);const N=Ki(T,u.data.get(i.dataId).values),A=R7(r.shape,r.dtype);for(let O=0;O<f;++O)for(let M=0;M<g;++M){const z=M*b-v.top;for(let B=0;B<y;++B){const K=B*x-v.left;for(let L=0;L<m;++L){let V=Number.MIN_SAFE_INTEGER,j=z<0?0:z,Q=K<0?0:K;for(let Z=0;Z<w;++Z){const oe=z+Z*k;if(oe>=0&&oe<d)for(let fe=0;fe<S;++fe){const le=K+fe*I;if(le>=0&&le<p){const ye=c[O][oe][le][L]+h[Z][fe][L];ye>V&&(V=ye,j=oe,Q=le)}}}A[O][j][Q][L]+=N[O][M][B][L]}}}return{dataId:u.write(th(A,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e0(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Fe(s,"sum");let a;s.dtype==="bool"?a=nu({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=ua({inputs:{x:s},backend:n});const l=a.shape.length,u=pt(i,a.shape),c=Nn(u,l);let h=u,f=a;c!=null&&(f=Ms({inputs:{x:a},backend:n,attrs:{perm:c}}),h=Vn(h.length,l)),zr("sum",h,f.shape.length);const[d,p]=Sr(f.shape,h),m=ti(f.dtype,"int32");let g=ib(n,d,m);const y=ie(p),v=n.data.get(g.dataId).values,b=n.data.get(f.dataId).values;for(let x=0;x<v.length;++x){const w=x*y;let S=0;for(let k=0;k<y;++k)S+=b[w+k];v[x]=S}if(o){const x=zn(g.shape,u),w=g;g=ln({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),g}const qVe={kernelName:P2,backendName:"cpu",kernelFunc:e0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KVe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=HO(s,i.length);KO(o.length,l,i);const{path:u,steps:c}=XO(a,l),h=c.length;let f=null,d=o.length;const p=[];for(let m=0;m<h;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=qO(d,l[g]);let b;YO(y)?b=i[g]:(b=Ms({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);Ct(b.shape,x)||(b=ln({inputs:{x:b},backend:n,attrs:{shape:x}}),p.push(b)),f===null?f=b:(f=kS({inputs:{a:b,b:f},backend:n}),p.push(f))}m<h-1&&(u[m]>=0&&(f=e0({inputs:{x:f},backend:n,attrs:{axis:u[m]-(o.length-d),keepDims:!1}}),p.push(f)),d--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const XVe={kernelName:e3,backendName:"cpu",kernelFunc:KVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YVe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Fe([r,s],"eluGrad");const i=new Float32Array(ie(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=1?i[l]=a[l]:i[l]=a[l]*(u+1)}return n.makeTensorInfo(s.shape,"float32",i)}const QVe={kernelName:t3,backendName:"cpu",kernelFunc:YVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JVe=BO,ZVe=zO,eUe=VO,tUe=UO,nUe=WO,rUe=jO,sUe=Kt(Qg,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+JVe*n);return e*(1-((((rUe*r+nUe)*r+tUe)*r+eUe)*r+ZVe)*r*Math.exp(-n*n))}),iUe={kernelName:Qg,backendName:"cpu",kernelFunc:sUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ab(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(P(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),ln({inputs:{x:s},backend:n,attrs:{shape:a}})}const oUe={kernelName:s2,backendName:"cpu",kernelFunc:ab};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aUe=Qn((t,e)=>t/e),AR=kr(Xg,aUe),kN={kernelName:Xg,backendName:"cpu",kernelFunc:AR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TY(t,e,n){const r=t.shape,s=r[0],i=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[s,i],c=ie(u),h=Pr("float32",c),f=Pr("float32",c);for(let g=0;g<s;g++){const y=Wc({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,i]}}),v=Wc({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),b=Hs({inputs:{real:y,imag:v},backend:n}),{real:x,imag:w}=lUe(b,e,n),S=ja(x,w);for(let k=0;k<i;k++){const I=GO(S,k);h[g*i+k]=I.real,f[g*i+k]=I.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b)}const d=n.makeTensorInfo(u,"float32",h),p=n.makeTensorInfo(u,"float32",f),m=Hs({inputs:{real:d,imag:p},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),m}function lUe(t,e,n){const r=ie(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(uUe(r)){const a=IN(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),h=n.makeTensorInfo([],"float32",pu(r,"float32")),f=ua({inputs:{x:h},backend:n}),d=kN.kernelFunc({inputs:{a:u,b:h},backend:n}),p=kN.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(d.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=ja(i,o),l=cUe(a,r,e);return TH(l)}}function uUe(t){return(t&t-1)===0}function IN(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=ja(t,e),o=n/2,a=$H(i),l=a.real,u=a.imag,c=[l.length],h=s.makeTensorInfo(c,"float32",l),f=s.makeTensorInfo(c,"float32",u),d=Hs({inputs:{real:h,imag:f},backend:s}),p=NH(i),m=p.real,g=p.imag,y=[m.length],v=s.makeTensorInfo(y,"float32",m),b=s.makeTensorInfo(y,"float32",g),x=Hs({inputs:{real:v,imag:b},backend:s}),w=IN(l,u,o,r,s),S=w.real,k=w.imag,I=[S.length],T=s.makeTensorInfo(I,"float32",S),N=s.makeTensorInfo(I,"float32",k),A=Hs({inputs:{real:T,imag:N},backend:s}),R=IN(m,g,o,r,s),O=R.real,M=R.imag,z=[O.length],B=s.makeTensorInfo(z,"float32",O),K=s.makeTensorInfo(z,"float32",M),L=Hs({inputs:{real:B,imag:K},backend:s}),V=_H(n,r),j=[V.real.length],Q=s.makeTensorInfo(j,"float32",V.real),Z=s.makeTensorInfo(j,"float32",V.imag),oe=Hs({inputs:{real:Q,imag:Z},backend:s}),fe=kS({inputs:{a:oe,b:L},backend:s}),le=Yf({inputs:{a:A,b:fe},backend:s}),ye=ER({inputs:{a:A,b:fe},backend:s}),Ce=Uc({inputs:{input:le},backend:s}),ve=Uc({inputs:{input:ye},backend:s}),ee=Qf({inputs:{input:le},backend:s}),ce=Qf({inputs:{input:ye},backend:s}),we=Jf({inputs:[Ce,ve],backend:s,attrs:{axis:0}}),ne=Jf({inputs:[ee,ce],backend:s,attrs:{axis:0}}),Re=s.data.get(we.dataId).values,$e=s.data.get(ne.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(K),s.disposeIntermediateTensorInfo(L),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(oe),s.disposeIntermediateTensorInfo(fe),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(ye),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo(ee),s.disposeIntermediateTensorInfo(ve),s.disposeIntermediateTensorInfo(ce),s.disposeIntermediateTensorInfo(we),s.disposeIntermediateTensorInfo(ne),{real:Re,imag:$e}}function cUe(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,o=0;for(let a=0;a<e;a++){const l=AH(s*a,e,n),u=GO(t,a);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),EH(r,i,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hUe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ie(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=ln({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=TY(a,!1,n),u=ln({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const fUe={kernelName:n3,backendName:"cpu",kernelFunc:hUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OR(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,o=i||Pg(s),a=ms(o,ie(r));return pUe(a,s,o),e.makeTensorInfo(r,o,a)}const dUe={kernelName:r3,backendName:"cpu",kernelFunc:OR};function pUe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mUe={kernelName:s3,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=Pr(r.dtype,ie(r.shape)),[o,a,l,u]=r.shape,c=s.data.get(r.dataId).values;for(let f=0;f<o;f++){const d=f*l*a*u;for(let p=0;p<a;p++){const m=p*(l*u);for(let g=0;g<l;g++){const y=g*u;for(let v=0;v<u;v++){const b=Math.round(l-g-1),x=d+m+y+v;let w=c[x];if(b>=0&&b<l){const S=b*u,k=d+m+S+v;w=c[k]}i[x]=w}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gUe=Qn((t,e)=>Math.floor(t/e)),yUe=kr(ty,gUe,null,"int32"),vUe={kernelName:ty,backendName:"cpu",kernelFunc:yUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f,activation:d,leakyreluAlpha:p}=r;let m=IY({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f}});if(o){const g=m;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const y=ln({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Yf({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=Yf({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(d){const g=m;if(c==="NCHW"&&d==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=ln({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=ob(n,m,d,y,p),n.disposeIntermediateTensorInfo(y)}else m=ob(n,m,d,a,p);n.disposeIntermediateTensorInfo(g)}return m}const bUe={kernelName:Rx,backendName:"cpu",kernelFunc:xUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f,activation:d,leakyreluAlpha:p}=r;let m=CY({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f}});if(o){const g=m;m=Yf({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(d){const g=m;m=ob(n,m,d,a,p),n.disposeIntermediateTensorInfo(g)}return m}const SUe={kernelName:Dx,backendName:"cpu",kernelFunc:wUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kUe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=ie(r.shape),o=s.shape,a=o[o.length-1],[l,u,c,h]=W3(r,s);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(s.dataId).values,d=n.bufferSync(r),p=zX(f,d,r.dtype,u,a,c,h,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}const IUe={kernelName:i3,backendName:"cpu",kernelFunc:kUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r;Fe([s,i],"gatherV2");const l=pt(o,s.shape)[0],u=n.data.get(i.dataId).values,c=s.shape[l];for(let x=0;x<u.length;++x){const w=u[x];P(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let h=a;a==null&&(h=0);const f=ie(i.shape),d=JO(s,i,l,h),p=ln({inputs:{x:s},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),m=ln({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,f/d.batchSize]}}),g=[d.batchSize,d.outerSize,f/d.batchSize,d.sliceSize],y=n.bufferSync(m),v=n.bufferSync(p),b=VX(v,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(d.outputShape,b.dtype,b.values)}const TUe={kernelName:o2,backendName:"cpu",kernelFunc:CUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ue(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ie(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=ln({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=TY(a,!0,n),u=ln({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const NUe={kernelName:o3,backendName:"cpu",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EUe=Kt(sy,t=>Number.isFinite(t)?1:0,"bool"),_Ue={kernelName:sy,backendName:"cpu",kernelFunc:EUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AUe=Kt(iy,t=>Math.abs(t)===1/0?1:0,"bool"),OUe={kernelName:iy,backendName:"cpu",kernelFunc:AUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RUe=Kt(oy,t=>Number.isNaN(t)?1:0,"bool"),DUe={kernelName:oy,backendName:"cpu",kernelFunc:RUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PUe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=HX(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const MUe={kernelName:l3,backendName:"cpu",kernelFunc:PUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FUe=Kt(ly,t=>Math.log1p(t)),LUe={kernelName:ly,backendName:"cpu",kernelFunc:FUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BUe=Qn((t,e)=>t&&e),zUe=kr(h2,BUe,null,"bool"),VUe={kernelName:h2,backendName:"cpu",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UUe=Kt(f2,t=>t?0:1,"bool"),WUe={kernelName:f2,backendName:"cpu",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jUe=Qn((t,e)=>t||e),GUe=kr(d2,jUe,null,"bool"),HUe={kernelName:d2,backendName:"cpu",kernelFunc:GUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r;Fe(s,"LRN");const u=s.shape[3],c=u-1,h=n.data.get(s.dataId).values,f=ie(s.shape),d=new Float32Array(f);function p(m){const g=m%u;let y=m-g+Math.max(0,g-i);const v=m-g+Math.min(g+i,c);let b=0;for(;y<=v;y++){const x=h[y];b+=x*x}return b}for(let m=0;m<f;m++){const g=p(m),y=h[m]*Math.pow(o+a*g,-l);d[m]=y}return n.makeTensorInfo(s.shape,s.dtype,d)}const KUe={kernelName:p2,backendName:"cpu",kernelFunc:qUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r;Fe(o,"LRNGrad");const h=ie(o.shape),f=o.shape[3],d=n.data.get(o.dataId).values,p=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(h),y=h;for(let v=0;v<y;v++){const b=v%f,x=v-b+Math.max(0,b-a),w=v-b+Math.min(f,b+a+1);let S=0;for(let k=x;k<w;k++)S+=Math.pow(p[k],2);S=u*S+l;for(let k=x;k<w;k++){let I=-2*u*c*p[k]*m[v]/S;v===k&&(I+=Math.pow(S,-c)),I*=d[v],g[k]+=I}}return n.makeTensorInfo(o.shape,s.dtype,g)}const YUe={kernelName:u3,backendName:"cpu",kernelFunc:XUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=n;let l=s.shape;const u=l.length,c=pt(i,l);let h=c;const f=Nn(h,u);let d=a.data.get(s.dataId).values;if(f!=null){const x=new Array(u);for(let w=0;w<x.length;w++)x[w]=l[f[w]];d=$R(d,l,s.dtype,f,x),h=Vn(h.length,u),l=x}Fe(s,"max"),zr("max",h,u);const[p,m]=Sr(l,h),g=ie(m),y=KX(d,g,p,s.dtype),v=a.write(y,p,s.dtype);let b=p;return o&&(b=zn(p,c)),{dataId:v,shape:b,dtype:s.dtype}}const QUe={kernelName:m2,backendName:"cpu",kernelFunc:$Y};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Fe(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;P(Br(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ro(s.shape,i,o,u,a,l);let h;if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))h=ua({inputs:{x:s},backend:n});else{const f=n.data.get(s.dataId).values,d=Ge(s.shape),p=_R(f,s.shape,s.dtype,d,c,"max");h=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return h}const ZUe={kernelName:g2,backendName:"cpu",kernelFunc:JUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;Fe(s,"maxPool3d");const c=qa(s.shape,i,o,1,a,l,u),h=n.data.get(s.dataId).values,f=kY(h,s.shape,s.dtype,Ge(s.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const t9e={kernelName:y2,backendName:"cpu",kernelFunc:e9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;Fe([s,i],"maxPool3DGrad");const c=qa(i.shape,o,a,1,l,u),h=n.bufferSync(i),f=W8e(h,c),d=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=b-1-c.padInfo.front,k=w-1-c.padInfo.left,I=x-1-c.padInfo.top,T=dt(i.shape,"float32"),N=n.bufferSync(s);for(let A=0;A<c.batchSize;++A)for(let R=0;R<c.inChannels;++R)for(let O=0;O<c.inDepth;++O)for(let M=0;M<c.inHeight;++M)for(let z=0;z<c.inWidth;++z){const B=O-S,K=M-I,L=z-k;let V=0;for(let j=0;j<b;j+=g){const Q=(B+j)/d;if(!(Q<0||Q>=c.outDepth||Math.floor(Q)!==Q))for(let Z=0;Z<x;Z+=y){const oe=(K+Z)/p;if(!(oe<0||oe>=c.outHeight||Math.floor(oe)!==oe))for(let fe=0;fe<w;fe+=v){const le=(L+fe)/m;if(le<0||le>=c.outWidth||Math.floor(le)!==le)continue;const ye=b*x*w-1-f.get(A,Q,oe,le,R),Ce=j*x*w+Z*w+fe,ve=ye===Ce?1:0;if(ve===0)continue;V+=N.get(A,Q,oe,le,R)*ve}}}T.set(V,A,O,M,z,R)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const r9e={kernelName:h3,backendName:"cpu",kernelFunc:n9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Fe([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,f=ro(a.shape,l,u,1,c,h),d=n.data.get(a.dataId).values,p=dt(f.outShape,a.dtype,SY(d,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,y=f.dilationHeight,v=f.dilationWidth,b=f.effectiveFilterHeight,x=f.effectiveFilterWidth,w=x-1-f.padInfo.left,S=b-1-f.padInfo.top,k=dt(a.shape,"float32"),I=n.data.get(s.dataId).values,T=dt(s.shape,"float32",I);for(let N=0;N<f.batchSize;++N)for(let A=0;A<f.inChannels;++A)for(let R=0;R<f.inHeight;++R)for(let O=0;O<f.inWidth;++O){const M=R-S,z=O-w;let B=0;for(let K=0;K<b;K+=y){const L=(M+K)/m;if(!(L<0||L>=f.outHeight||Math.floor(L)!==L))for(let V=0;V<x;V+=v){const j=(z+V)/g;if(j<0||j>=f.outWidth||Math.floor(j)!==j)continue;const Q=b*x-1-p.get(N,L,j,A),Z=K*x+V,oe=Q===Z?1:0;if(oe===0)continue;B+=T.get(N,L,j,A)*oe}}k.set(B,N,R,O,A)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const i9e={kernelName:c3,backendName:"cpu",kernelFunc:s9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9e(t,e,n,r,s){const i=Ge(e),o=_R(t,e,n,i,s,"max"),a=SY(t,e,n,s,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a9e={kernelName:f3,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;Fe(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=ro(r.shape,s,i,[1,1],o),[h,f]=o9e(u,r.shape,r.dtype,a,c),d=l.write(h,c.outShape,r.dtype),p=l.write(f,c.outShape,r.dtype);return[{dataId:d,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=pt(i,s.shape),u=Sr(s.shape,a)[1],c=ie(u),h=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));h.push(f);const d=nu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});h.push(d);const p=AR({inputs:{a:d,b:f},backend:n});h.push(p);const m=e0({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return h.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const u9e={kernelName:v2,backendName:"cpu",kernelFunc:l9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Fe(s,"min");const a=pt(i,s.shape);let l=a;const u=Nn(l,s.shape.length);let c=s;u!=null&&(c=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),l=Vn(l.length,s.shape.length)),zr("min",l,c.shape.length);const[h,f]=Sr(c.shape,l),d=ie(f),p=es(ie(h),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*d;let b=m[v];for(let x=0;x<d;++x){const w=m[v+x];(Number.isNaN(w)||w<b)&&(b=w)}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,p);if(o){const y=zn(h,a),v=ln({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const h9e={kernelName:x2,backendName:"cpu",kernelFunc:c9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:o}=r;Fe(s,"mirrorPad");const a=i.map((b,x)=>b[0]+s.shape[x]+b[1]),l=i.map(b=>b[0]),u=i.map((b,x)=>b[0]+s.shape[x]),c=o==="reflect"?0:1,h=n.data.get(s.dataId).values,f=s.shape.length,d=Ge(s.shape),p=ie(a),m=a.length,g=Ge(a),y=Pr(s.dtype,p);for(let b=0;b<p;b++){let x=Mg(b,m,g);for(let S=0;S<m;S++)x[S]<l[S]?x[S]=l[S]*2-x[S]-c:x[S]>=u[S]&&(x[S]=(u[S]-1)*2-x[S]+c);x=x.map((S,k)=>S-l[k]);const w=Jo(x,f,d);y[b]=h[w]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const d9e={kernelName:b2,backendName:"cpu",kernelFunc:f9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9e=Qn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),m9e=kr(hy,p9e),g9e={kernelName:hy,backendName:"cpu",kernelFunc:m9e};var NY={exports:{}};(function(t){(function(e,n,r){function s(l){var u=this,c=a();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new s(l),h=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,h&&(typeof h=="object"&&i(h,c),f.state=function(){return i(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Dt,t,!1)})(NY);var EY={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Dt,t,!1)})(EY);var _Y={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Dt,t,!1)})(_Y);var AY={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.x,h=l.i,f,d;return f=c[h],f^=f>>>7,d=f^f<<24,f=c[h+1&7],d^=f^f>>>10,f=c[h+3&7],d^=f^f>>>3,f=c[h+4&7],d^=f^f<<7,f=c[h+7&7],f=f^f<<13,d^=f^f<<9,c[h]=d,l.i=h+1&7,d};function u(c,h){var f,d=[];if(h===(h|0))d[0]=h;else for(h=""+h,f=0;f<h.length;++f)d[f&7]=d[f&7]<<15^h.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],c.x=d,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Dt,t,!1)})(AY);var OY={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.w,h=l.X,f=l.i,d,p;return l.w=c=c+1640531527|0,p=h[f+34&127],d=h[f=f+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=h[f]=p^d,l.i=f,p+(c^c>>>16)|0};function u(c,h){var f,d,p,m,g,y=[],v=128;for(h===(h|0)?(d=h,h=null):(h=h+"\0",d=0,v=Math.max(v,h.length)),p=0,m=-32;m<v;++m)h&&(d^=h.charCodeAt((m+32)%h.length)),m===0&&(g=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=d+g,p=f==0?p+1:0);for(p>=128&&(y[(h&&h.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=y[p+34&127],f=y[p=p+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,y[p]=d^f;c.w=g,c.X=y,c.i=p}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Dt,t,!1)})(OY);var RY={exports:{}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var h=l.b,f=l.c,d=l.d,p=l.a;return h=h<<25^h>>>7^f,f=f-d|0,d=d<<24^d>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^f,l.c=f=f-d|0,l.d=d<<16^f>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&i(c,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Dt,t,!1)})(RY);var DY={exports:{}};(function(t){(function(e,n){var r=this,s=256,i=6,o=52,a="random",l=n.pow(s,i),u=n.pow(2,o),c=u*2,h=s-1,f;function d(x,w,S){var k=[];w=w==!0?{entropy:!0}:w||{};var I=y(g(w.entropy?[x,b(e)]:x==null?v():x,3),k),T=new p(k),N=function(){for(var A=T.g(i),R=l,O=0;A<u;)A=(A+O)*s,R*=s,O=T.g(1);for(;A>=c;)A/=2,R/=2,O>>>=1;return(A+O)/R};return N.int32=function(){return T.g(4)|0},N.quick=function(){return T.g(4)/4294967296},N.double=N,y(b(T.S),e),(w.pass||S||function(A,R,O,M){return M&&(M.S&&m(M,T),A.state=function(){return m(T,{})}),O?(n[a]=A,R):A})(N,I,"global"in w?w.global:this==n,w.state)}n["seed"+a]=d;function p(x){var w,S=x.length,k=this,I=0,T=k.i=k.j=0,N=k.S=[];for(S||(x=[S++]);I<s;)N[I]=I++;for(I=0;I<s;I++)N[I]=N[T=h&T+x[I%S]+(w=N[I])],N[T]=w;(k.g=function(A){for(var R,O=0,M=k.i,z=k.j,B=k.S;A--;)R=B[M=h&M+1],O=O*s+B[h&(B[M]=B[z=h&z+R])+(B[z]=R)];return k.i=M,k.j=z,O})(s)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var S=[],k=typeof x,I;if(w&&k=="object")for(I in x)try{S.push(g(x[I],w-1))}catch{}return S.length?S:k=="string"?x:x+"\0"}function y(x,w){for(var S=x+"",k,I=0;I<S.length;)w[h&I]=h&(k^=w[h&I]*19)+S.charCodeAt(I++);return b(w)}function v(){try{var x;return f&&(x=f.randomBytes)?x=x(s):(x=new Uint8Array(s),(r.crypto||r.msCrypto).getRandomValues(x)),b(x)}catch{var w=r.navigator,S=w&&w.plugins;return[+new Date,r,S,r.screen,b(e)]}}function b(x){return String.fromCharCode.apply(0,x)}if(y(n.random(),e),t.exports){t.exports=d;try{f=Dy}catch{}}})([],Math)})(DY);var y9e=NY.exports,v9e=EY.exports,x9e=_Y.exports,b9e=AY.exports,w9e=OY.exports,S9e=RY.exports,ah=DY.exports;ah.alea=y9e;ah.xor128=v9e;ah.xorwow=x9e;ah.xorshift7=b9e;ah.xor4096=w9e;ah.tychei=S9e;var k9e=ah;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=s.shape.length;let a=i;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=pt([a],s.shape),u=$Y({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=zn(u.shape,l),h=ln({inputs:{x:u},backend:n,attrs:{shape:c}}),f=ER({inputs:{a:s,b:h},backend:n}),d=FX({inputs:{x:f},backend:n}),p=e0({inputs:{x:d},backend:n,attrs:{axis:l,keepDims:!1}}),m=ln({inputs:{x:p},backend:n,attrs:{shape:c}}),g=AR({inputs:{a:d,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const I9e={kernelName:L2,backendName:"cpu",kernelFunc:PY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r;Fe(s,"multinomial");const l=a?s:PY({inputs:{logits:s},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],h=n.data.get(l.dataId).values,f=[u,i],d=es(ie(f),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=h[m];for(let b=1;b<g.length;++b)g[b]=g[b-1]+h[m+b];const y=k9e.alea(o.toString()),v=p*i;for(let b=0;b<i;++b){const x=y();d[v+b]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){d[v+b]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",d)}const T9e={kernelName:d3,backendName:"cpu",kernelFunc:C9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $9e=IO;function N9e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Fe(s,"NonMaxSuppression");const u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:h}=$9e(u,c,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const E9e={kernelName:p3,backendName:"cpu",kernelFunc:N9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _9e=CO;function A9e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;Fe(s,"NonMaxSuppressionPadded");const c=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:f,validOutputs:d}=_9e(c,h,o,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const O9e={kernelName:m3,backendName:"cpu",kernelFunc:A9e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R9e=TO;function D9e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;Fe(s,"NonMaxSuppressionWithScore");const c=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,f=o,d=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=R9e(c,h,f,d,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const P9e={kernelName:g3,backendName:"cpu",kernelFunc:D9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M9e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{depth:i,onValue:o,offValue:a}=r;Fe(s,"oneHot");const l=ie(s.shape),u=new Float32Array(l*i);u.fill(a);const c=n.data.get(s.dataId).values;for(let h=0;h<l;++h)c[h]>=0&&c[h]<i&&(u[h*i+c[h]]=o);return n.makeTensorInfo([...s.shape,i],"int32",u)}const F9e={kernelName:I2,backendName:"cpu",kernelFunc:M9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lb(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Uc({inputs:{input:r},backend:n}),i=lb({inputs:{x:s},backend:n}),o=Qf({inputs:{input:r},backend:n}),a=lb({inputs:{x:o},backend:n}),l=Hs({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return OR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const L9e={kernelName:V2,backendName:"cpu",kernelFunc:lb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Uc({inputs:{input:r},backend:n}),i=MY({inputs:{x:s},backend:n}),o=Qf({inputs:{input:r},backend:n}),a=lb({inputs:{x:o},backend:n}),l=Hs({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return OR({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const B9e={kernelName:k2,backendName:"cpu",kernelFunc:MY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return ab({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{no(i,c.shape,"All tensors passed to stack must have matching shapes"),P(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const h=ab({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(h),h}),u=Jf({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const z9e={kernelName:C2,backendName:"cpu",kernelFunc:FY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;Fe(s,"pad");const a=i.map((v,b)=>v[0]+s.shape[b]+v[1]),l=i.map(v=>v[0]),u=n.data.get(s.dataId).values,c=ie(s.shape),h=s.shape.length,f=Ge(s.shape),d=ie(a),p=a.length,m=Ge(a),g=Pr(s.dtype,d);o!==0&&g.fill(o);for(let v=0;v<c;v++){const x=Mg(v,h,f).map((S,k)=>S+l[k]),w=Jo(x,p,m);g[w]=u[v]}return{dataId:n.write(g,a,s.dtype),shape:a,dtype:s.dtype}}const LY={kernelName:T2,backendName:"cpu",kernelFunc:V9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U9e=Qn((t,e)=>Math.pow(t,e)),W9e=kr(dy,U9e),j9e={kernelName:dy,backendName:"cpu",kernelFunc:W9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G9e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=eY(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}const H9e={kernelName:y3,backendName:"cpu",kernelFunc:G9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q9e=Kt(py,t=>1/t),K9e={kernelName:py,backendName:"cpu",kernelFunc:q9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Fe(s,"resizeBilinear");const l=Ge(s.shape),[u,c]=a,[h,f,d,p]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(ie([h,u,c,p])),y=[i&&u>1?f-1:f,i&&c>1?d-1:d],v=[i&&u>1?u-1:u,i&&c>1?c-1:c];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let S=0;S<h;S++)for(let k=0;k<u;k++){let I;o?I=x*(k+.5)-.5:I=x*k;const T=Math.max(0,Math.floor(I)),N=I-T,A=Math.min(f-1,Math.ceil(I)),R=S*l[0]+T*l[1],O=S*l[0]+A*l[1];for(let M=0;M<c;M++){let z;o?z=w*(M+.5)-.5:z=w*M;const B=Math.max(0,Math.floor(z)),K=z-B,L=Math.min(d-1,Math.ceil(z)),V=R+B*l[2],j=O+B*l[2],Q=R+L*l[2],Z=O+L*l[2];for(let oe=0;oe<p;oe++){const fe=m[V+oe],le=m[j+oe],ye=m[Q+oe],Ce=m[Z+oe],ve=fe+(ye-fe)*K,ee=le+(Ce-le)*K,ce=ve+(ee-ve)*N;g[b++]=ce}}}return n.makeTensorInfo([h,u,c,p],"float32",g)}const Y9e={kernelName:A2,backendName:"cpu",kernelFunc:X9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Fe([i,s],"resizeBilinearGrad");const a=Ge(s.shape),[l,u,c,h]=s.shape,[,f,d]=i.shape,p=new Float32Array(l*u*c*h),m=[o&&f>1?u-1:u,o&&d>1?c-1:c],g=[o&&f>1?f-1:f,o&&d>1?d-1:d],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(i.dataId).values;let x=0;for(let w=0;w<l;w++){const S=w*a[0];for(let k=0;k<f;k++){const I=k*y,T=Math.floor(I),N=Math.min(Math.ceil(I),u-1),A=S+T*a[1],R=S+N*a[1],O=I-T,M=1-O;for(let z=0;z<d;z++){const B=z*v,K=Math.floor(B),L=Math.min(Math.ceil(B),c-1),V=B-K,j=1-V,Q=A+K*a[2],Z=A+L*a[2],oe=R+K*a[2],fe=R+L*a[2],le=M*j,ye=M*V,Ce=O*j,ve=O*V;for(let ee=0;ee<h;ee++){const ce=b[x++];p[Q+ee]+=ce*le,p[Z+ee]+=ce*ye,p[oe+ee]+=ce*Ce,p[fe+ee]+=ce*ve}}}}return n.makeTensorInfo([l,c,u,h],"float32",p)}const J9e={kernelName:b3,backendName:"cpu",kernelFunc:Q9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Fe(s,"resizeNearestNeighbor");const l=Ge(s.shape),[u,c]=a,[h,f,d,p]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(h*u*c*p),y=[i&&u>1?f-1:f,i&&c>1?d-1:d],v=[i&&u>1?u-1:u,i&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let S=0;S<h;S++){const k=S*l[0];for(let I=0;I<u;I++){const T=o?b*(I+.5):b*I;let N=Math.min(f-1,i?Math.round(T):Math.floor(T));o&&(N=Math.max(0,N));const A=k+N*l[1];for(let R=0;R<c;R++){const O=o?x*(R+.5):x*R;let M=Math.min(d-1,i?Math.round(O):Math.floor(O));o&&(M=Math.max(0,M));const z=A+M*l[2];for(let B=0;B<p;B++){const K=m[z+B];g[w++]=K}}}}return n.makeTensorInfo([h,u,c,p],s.dtype,g)}const eWe={kernelName:_2,backendName:"cpu",kernelFunc:Z9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tWe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Fe([i,s],"resizeNearestNeighborGrad");const a=Ge(s.shape),l=Ge(i.shape),[u,c,h,f]=s.shape,[,d,p]=i.shape,m=new Float32Array(u*c*h*f),g=n.data.get(i.dataId).values,y=[o&&d>1?c-1:c,o&&p>1?h-1:h],v=[o&&d>1?d-1:d,o&&p>1?p-1:p],b=y[0]/v[0],x=y[1]/v[1],w=1/b,S=1/x,k=Math.ceil(w)*2+2,I=Math.ceil(S)*2+2;for(let T=0;T<u;T++){const N=T*a[0];for(let A=0;A<c;A++){const R=N+A*a[1],O=Math.floor(A*w),M=Math.floor(O-k/2);for(let z=0;z<h;z++){const B=R+z*a[2],K=Math.floor(z*S),L=Math.floor(K-I/2);for(let V=0;V<f;V++){let j=0;for(let Q=0;Q<k;Q++){const Z=Q+M;if(Z<0||Z>=d)continue;const oe=N+Z*l[1],fe=Z*b,le=Math.min(c-1,o?Math.round(fe):Math.floor(fe));if(A===le)for(let ye=0;ye<I;ye++){const Ce=ye+L;if(Ce<0||Ce>=p)continue;const ve=oe+Ce*l[2],ee=Ce*x,ce=Math.min(h-1,o?Math.round(ee):Math.floor(ee));z===ce&&(j+=g[ve+V])}}m[B+V]=j}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const nWe={kernelName:x3,backendName:"cpu",kernelFunc:tWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Fe(s,"reverse");const o=s.shape.length,a=pt(i,s.shape);if(o===0)return ua({inputs:{x:s},backend:n});const l=new xr(s.shape,s.dtype),u=n.bufferSync(s);for(let c=0;c<l.size;c++){const h=l.indexToLoc(c),f=h.slice();a.forEach(d=>f[d]=s.shape[d]-1-f[d]),l.set(u.get(...f),...h)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const sWe={kernelName:O2,backendName:"cpu",kernelFunc:rWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iWe={kernelName:M3,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=Pr(r.dtype,ie(r.shape)),[u,c,h,f]=r.shape,[d,p]=MO(o,c,h),m=255,g=Math.sin(s),y=Math.cos(s),v=a.data.get(r.dataId).values;for(let x=0;x<u;x++){const w=x*h*c*f;for(let S=0;S<c;S++){const k=S*(h*f);for(let I=0;I<h;I++){const T=I*f;for(let N=0;N<f;N++){const A=[u,S,I,N],R=A[2],O=A[1];let M=(R-d)*y-(O-p)*g,z=(R-d)*g+(O-p)*y;M=Math.round(M+d),z=Math.round(z+p);let B=i;if(typeof i!="number"&&(N===3?B=m:B=i[N]),M>=0&&M<h&&z>=0&&z<c){const L=z*(h*f),V=M*f,j=w+L+V+N;B=v[j]}const K=w+k+T+N;l[K]=B}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oWe=Kt(yy,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),aWe={kernelName:yy,backendName:"cpu",kernelFunc:oWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lWe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=Py(i,s,o),f=!0,d=n.bufferSync(s),p=n.bufferSync(i),m=qh(d,p,o,h,u,l,a,c,0,f);return n.makeTensorInfo(o,m.dtype,m.values)}const uWe={kernelName:w3,backendName:"cpu",kernelFunc:lWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cWe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function hWe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function fWe(t,e,n,r,s,i){const o=ms("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*s;for(let c=0;c<s;++c)o[u+c]=i==="left"?cWe(l,e[c+u]):hWe(l,e[c+u])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dWe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,u=fWe(a,l,s.shape[0],s.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const pWe={kernelName:S3,backendName:"cpu",kernelFunc:dWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mWe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Fe([r,s,i],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=ti(s.dtype,i.dtype),h=es(ie(s.shape),c);let f=0;const d=o===0||o>1||s.shape.length===1?1:ie(s.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<d;m++)a[p]===1?h[f++]=l[p]:h[f++]=u[p];return n.makeTensorInfo(s.shape,c,h)}const gWe={kernelName:R2,backendName:"cpu",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yWe=uS,vWe=cS,xWe=Kt(xy,t=>t>=0?vWe*t:yWe*(Math.exp(t)-1)),bWe={kernelName:xy,backendName:"cpu",kernelFunc:xWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wWe=Kt(Sy,t=>t<0?-1:t>0?1:0),SWe={kernelName:Sy,backendName:"cpu",kernelFunc:wWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kWe=Kt(by,t=>Math.sin(t)),IWe={kernelName:by,backendName:"cpu",kernelFunc:kWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CWe=Kt(wy,t=>Math.sinh(t)),TWe={kernelName:wy,backendName:"cpu",kernelFunc:CWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $We=11920928955078125e-23,B5=Math.log($We)+2,NWe=Kt(Iy,t=>{const e=t>-B5,n=t<B5,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),EWe={kernelName:Iy,backendName:"cpu",kernelFunc:NWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _We(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;Fe([s],"spaceToBatchND");const a=ie(i),l=[[0,0]];l.push(...o);for(let S=1+i.length;S<s.shape.length;++S)l.push([0,0]);const u=LY.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),c=Wy(u.shape,i,a,!1),h=jy(c.length,i.length,!1),f=Gy(u.shape,i,a,!1),m=ln({inputs:{x:u},backend:n,attrs:{shape:c}}),v=Ms({inputs:{x:m},backend:n,attrs:{perm:h}}),w=ln({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const AWe={kernelName:M2,backendName:"cpu",kernelFunc:_We};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OWe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[h,f,d,p,m]=sY(a,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],s.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const RWe={kernelName:k3,backendName:"cpu",kernelFunc:OWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DWe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,h]=iY(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const PWe={kernelName:I3,backendName:"cpu",kernelFunc:DWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MWe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=NR(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const FWe={kernelName:C3,backendName:"cpu",kernelFunc:MWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=NR(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const BWe={kernelName:T3,backendName:"cpu",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zWe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:f}=Py(i,s,a),d=!1,p=n.bufferSync(s);let m;switch(i.dtype){case"bool":{const g=n.bufferSync(i),y=Boolean(n.data.get(o.dataId).values[0]);m=qh(p,g,a,f,c,u,l,h,y,d);break}case"float32":{const g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];m=qh(p,g,a,f,c,u,l,h,y,d);break}case"int32":{const g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];m=qh(p,g,a,f,c,u,l,h,y,d);break}case"string":{const g=n.bufferSync(i),y=Kl(n.data.get(o.dataId).values[0]);m=qh(p,g,a,f,c,u,l,h,y,d);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const VWe={kernelName:$3,backendName:"cpu",kernelFunc:zWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=pt(o,s.shape)[0],l=QO(s,i,a),u=new Array(s.shape.length).fill(0),c=s.shape.slice();return l.map(h=>{const f=[...c];f[a]=h;const d=Wc({inputs:{x:s},backend:n,attrs:{begin:u,size:f}});return u[a]+=h,d})}const WWe={kernelName:F2,backendName:"cpu",kernelFunc:UWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jWe={kernelName:N3,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Fe(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GWe=Kt(Ay,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),HWe={kernelName:Ay,backendName:"cpu",kernelFunc:GWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:f}=r;Fe(s,"stridedSlice");const{finalShapeSparse:d,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=K3(s.shape,i,o,a,l,u,c,h,f);let w;if(m)w=ln({inputs:{x:s},backend:n,attrs:{shape:p}});else if(g||y){P(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const S=G3(v,b,x),k=Wc({inputs:{x:s},backend:n,attrs:{begin:v,size:S}});w=ln({inputs:{x:k},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(k)}else{const S=n.bufferSync(s),k=aY(d,S,x,v);w=n.makeTensorInfo(p,k.dtype,k.values)}return w}const KWe={kernelName:E3,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=e,f=n.data.get(c.dataId).values,d=n.data.get(h.dataId).values,[p,m]=lY(f,d,s,i,o,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(h.shape,"int32",m)]}const YWe={kernelName:_3,backendName:"cpu",kernelFunc:XWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QWe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,h]=uY(a,l,s),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const JWe={kernelName:A3,backendName:"cpu",kernelFunc:QWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZWe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,a=cY(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const eje={kernelName:O3,backendName:"cpu",kernelFunc:ZWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tje=Kt(Ny,t=>Math.tan(t)),nje={kernelName:Ny,backendName:"cpu",kernelFunc:tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rje=Kt(Ey,t=>Math.tanh(t)),sje={kernelName:Ey,backendName:"cpu",kernelFunc:rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ije(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Fe(s,"tile");const o=fY(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const oje={kernelName:_y,backendName:"cpu",kernelFunc:ije};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r;Fe(s,"topk");const a=n.data.get(s.dataId).values,[l,u]=pY(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const lje={kernelName:R3,backendName:"cpu",kernelFunc:aje};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uje(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=n,[c,h,f,d]=s.shape,[p,m]=u!=null?u:[h,f],g=[c,p,m,d],y=Ge(s.shape),v=y[0],b=y[1],x=y[2],w=Pr(s.dtype,ie(g));w.fill(l);const S=r.data.get(s.dataId).values,k=r.data.get(i.dataId).values;for(let T=0;T<c;++T){const N=i.shape[0]===1?k:k.subarray(T*8,T*8+8);for(let A=0;A<p;++A)for(let R=0;R<m;++R)for(let O=0;O<d;++O){let M;const z=N[6]*R+N[7]*A+1;if(z===0)continue;const B=(N[0]*R+N[1]*A+N[2])/z,K=(N[3]*R+N[4]*A+N[5])/z,L=z5(B,f,a),V=z5(K,h,a);switch(o){case"nearest":M=mje(S,h,f,v,b,x,T,V,L,O,l);break;case"bilinear":M=gje(S,h,f,v,b,x,T,V,L,O,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const j=T*v+A*b+R*x+O;w[j]=M}return r.makeTensorInfo(g,s.dtype,w)}return{dataId:r.write(w,g,s.dtype),shape:s.shape,dtype:s.dtype}}const cje={kernelName:D3,backendName:"cpu",kernelFunc:uje};function z5(t,e,n){switch(n){case"reflect":return hje(t,e);case"wrap":return fje(t,e);case"nearest":return pje(t,e);case"constant":default:return dje(t)}}function hje(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Oc(0,n,e-1)}function fje(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Oc(0,n,e-1)}function dje(t,e){return t}function pje(t,e){return Oc(0,t,e-1)}function Ep(t,e,n,r,s,i,o,a,l,u,c){const h=o*r+a*s+l*i+u;return 0<=a&&a<e&&0<=l&&l<n?t[h]:c}function mje(t,e,n,r,s,i,o,a,l,u,c){const h=Math.round(a),f=Math.round(l);return Ep(t,e,n,r,s,i,o,h,f,u,c)}function gje(t,e,n,r,s,i,o,a,l,u,c){const h=Math.floor(a),f=Math.floor(l),d=h+1,p=f+1,m=(p-l)*Ep(t,e,n,r,s,i,o,h,f,u,c)+(l-f)*Ep(t,e,n,r,s,i,o,h,p,u,c),g=(p-l)*Ep(t,e,n,r,s,i,o,d,f,u,c)+(l-f)*Ep(t,e,n,r,s,i,o,d,p,u,c);return(d-a)*m+(a-h)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yje(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Fe(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:u}=mY(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const vje={kernelName:P3,backendName:"cpu",kernelFunc:yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let u=0;for(let d=0;d<o;d++)d!==i&&(l[u++]=s.shape[d]);const c=new Array(o).fill(0),h=s.shape.slice();h[i]=1;const f=new Array(a);for(let d=0;d<f.length;d++){c[i]=d;const p=Wc({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});f[d]=ln({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const bje={kernelName:B2,backendName:"cpu",kernelFunc:xje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r;Fe(s,"unsortedSegmentSum");const a=s.shape.length,l=i.shape.length,u=[],c=[],h=a-l;let f=i;for(let p=0;p<h;++p){const m=ab({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=m,c.push(m)}for(let p=0;p<o;++p){const m=pu(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=PX({inputs:{a:g,b:f},backend:n}),v=nu({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),b=kS({inputs:{a:v,b:s},backend:n}),x=e0({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});u.push(x),c.push(g),c.push(y),c.push(v),c.push(b),c.push(x)}const d=FY({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const Sje={kernelName:z2,backendName:"cpu",kernelFunc:wje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kje=[y8e,uze,x8e,w8e,mze,k8e,C8e,$8e,E8e,A8e,R8e,P8e,F8e,z8e,U8e,G8e,q8e,X8e,Q8e,m8e,Z8e,tVe,rVe,iVe,dze,yze,aVe,cze,uVe,hVe,fVe,pVe,gVe,vVe,bVe,SVe,IVe,TVe,NVe,_Ve,OVe,DVe,MVe,FVe,BVe,VVe,WVe,jVe,GVe,HVe,XVe,l8e,QVe,vze,iUe,xze,oUe,wze,fUe,dUe,mUe,kze,vUe,bUe,SUe,IUe,TUe,Cze,$ze,hze,NUe,cVe,_Ue,OUe,DUe,u8e,Eze,Aze,MUe,Rze,LUe,VUe,WUe,HUe,KUe,YUe,QUe,Pze,ZUe,t9e,r9e,i9e,a9e,u9e,h9e,Fze,d9e,g9e,T9e,Bze,Vze,E9e,O9e,P9e,Wze,F9e,B9e,z9e,LY,j9e,h8e,Hze,H9e,fze,kN,K9e,f8e,d8e,p8e,Y9e,J9e,eWe,nWe,sWe,iWe,aWe,Kze,uWe,pWe,gWe,bWe,Yze,SWe,IWe,TWe,Qze,I9e,EWe,AWe,RWe,PWe,FWe,BWe,VWe,WWe,e8e,jWe,n8e,HWe,KWe,YWe,JWe,eje,o8e,qVe,nje,sje,oje,lje,cje,jze,vje,bje,Sje,L9e];for(const t of kje)L7(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wu={},AI={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Ije(t,e){Wu[t]=e}function No(t,e){if(!(t in Wu)||e!=null){const r=Tje(t,e);if(r!==null)Wu[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Wu[t];return n==null||n.isContextLost()?(delete Wu[t],No(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Wu[t])}function Cje(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Tje(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e==null?Cje(t):e;return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Wu[t]},!1),t===1?n.getContext("webgl",AI)||n.getContext("experimental-webgl",AI):n.getContext("webgl2",AI)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Gm;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Gm||(Gm={}));var pi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(pi||(pi={}));var Er;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Er||(Er={}));function t0(t,e){return[e,t]}function $je(t,e){return t*e}function Y0(t){const e=ie(t),n=Math.ceil(e/4);return C$(n)}function Rd(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Nje(t,e){const[n,r]=Rd(t,e);return n*r*4}function RR(t,e){const n=t;let r,s,i,o,a,l,u,c,h,f;return re().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,c=1,h=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,c=4,h=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Le(t,e){const n=e();return re().getBool("DEBUG")&&Eje(t),n}function Eje(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Rje(t,e))}const _je=596e-10,Aje=65504;function Oje(t){return!!(re().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||_je<Math.abs(t)&&Math.abs(t)<Aje)}function Rje(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Q0(t,e){return Ya(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Dje(t,e){const n=Ya(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Le(t,()=>t.shaderSource(n,e)),Le(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Pje(t,e){const n=Ya(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Le(t,()=>t.shaderSource(n,e)),Le(t,()=>t.compileShader(n)),re().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw BY(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Mje=/ERROR: [0-9]+:([0-9]+):/g;function BY(t,e){const n=Mje.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((h,f)=>af((f+1).toString(),i)+h);let a=0;for(let h=0;h<o.length;h++)a=Math.max(o[h].length,a);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${af(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function Fje(t){return Ya(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Lje(t,e){if(Le(t,()=>t.linkProgram(e)),!re().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function OI(t,e){if(Le(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Bje(t,e){const n=Ya(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Le(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Le(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function zje(t,e){const n=Ya(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Le(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Le(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Vje(t){return Ya(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function Uje(t,e){const n=re().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function Wje(t){return Ya(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function V5(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Le(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Le(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),Le(t,()=>t.enableVertexAttribArray(a)),!0)}function jje(t,e,n){Xje(t,n),Le(t,()=>t.activeTexture(t.TEXTURE0+n)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function Gje(t,e,n){return Ya(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function Hje(t,e,n){return t.getUniformLocation(e,n)}function qje(t,e,n,r){Le(t,()=>jje(t,e,r)),Le(t,()=>t.uniform1i(n,r))}function RI(t,e,n){Le(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Le(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function U5(t,e){Le(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Le(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function J0(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Kje(t,e))}function Kje(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Ya(t,e,n){const r=Le(t,()=>e());if(r==null)throw new Error(n);return r}function Xje(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Zf(t,e=2){return ie(t.slice(0,t.length-e))}function ed(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function DI(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Zf(t),...ed(t)]),e}function Yje(t,e=!1){let n=re().getNumber("WEBGL_MAX_TEXTURE_SIZE");e&&(n=n*2,t=t.map((s,i)=>i>=t.length-2?E7(t[i]):t[i]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=du(t).newShape);let r=ie(t);if(t.length<=1&&r<=n)return[1,r];if(t.length===2&&t[0]<=n&&t[1]<=n)return t;if(t.length===3&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){const s=Zf(t);let i=2,o=2;return t.length&&([i,o]=ed(t)),r=s*(i/2)*(o/2),C$(r).map(a=>a*2)}return C$(r)}function Z0(t){return t%2===0}function ub(t,e){if(t=t.slice(-2),e=e.slice(-2),Ct(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Z0(n)&&Z0(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Z0(t[0])&&Z0(e[0])}let PI,MI;function Qje(t){if(PI==null){const e=No(t);PI=e.getParameter(e.MAX_TEXTURE_SIZE)}return PI}function Jje(t){if(MI==null){const e=No(t);MI=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,MI)}function Zje(t){if(t===0)return 0;let e;const n=No(t);return Hi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Hi(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Hi(t,e){return t.getExtension(e)!=null}function W5(t){try{if(No(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function e7e(t){if(t===0)return!1;const e=No(t);if(t===1){if(!Hi(e,"OES_texture_float"))return!1}else if(!Hi(e,"EXT_color_buffer_float"))return!1;return CN(e)}function t7e(t){if(t===0)return!1;const e=No(t);if(t===1){if(!Hi(e,"OES_texture_float")||!Hi(e,"WEBGL_color_buffer_float"))return!1}else{if(Hi(e,"EXT_color_buffer_float"))return CN(e);const r="EXT_color_buffer_half_float";if(Hi(e,r)){const s=e.getExtension(r);return n7e(e,s)}return!1}return CN(e)}function CN(t){const e=RR(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,s=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,s,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function n7e(t,e){const n=RR(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const s=1,i=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,s,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function r7e(t){return t!==2?!1:No(t).fenceSync!=null}function n0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const He=re();He.registerFlag("HAS_WEBGL",()=>He.getNumber("WEBGL_VERSION")>0);He.registerFlag("WEBGL_VERSION",()=>W5(2)?2:W5(1)?1:0);He.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);He.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>He.get("WEBGL_VERSION")===2);He.registerFlag("WEBGL_CPU_FORWARD",()=>!0);He.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);He.registerFlag("WEBGL_PACK",()=>He.getBool("HAS_WEBGL"));He.registerFlag("WEBGL_PACK_NORMALIZATION",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_PACK_CLIP",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_PACK_REDUCE",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_LAZILY_UNPACK",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_CONV_IM2COL",()=>He.getBool("WEBGL_PACK"));He.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Qje(He.getNumber("WEBGL_VERSION")));He.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Jje(He.getNumber("WEBGL_VERSION")));He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=He.getNumber("WEBGL_VERSION");return t===0?0:Zje(t)});He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>He.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Y7());He.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>e7e(He.getNumber("WEBGL_VERSION")));He.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>He.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:He.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));He.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>t7e(He.getNumber("WEBGL_VERSION")));He.registerFlag("WEBGL_FENCE_API_ENABLED",()=>r7e(He.getNumber("WEBGL_VERSION")));He.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>He.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);He.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});He.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Y7()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});He.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);He.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);He.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);He.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bs(){let t,e,n,r,s,i,o,a,l,u;return re().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lh(t,e,n="index"){const r=Ge(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function IS(t,e,n="index"){const r=Ge(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function s7e(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function i7e(t,e,n="index"){const r=t.map((i,o)=>o),s=s7e(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function DR(t){const e=Ge(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function PR(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const zY=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:VY}=$Me;function o7e(t,e,n){const r=[];if(t.forEach(d=>{const p=ie(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?r.push(`uniform float ${d.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${d.name};`),r.push(`uniform int offset${d.name};`)),n.enableShapeUniforms){const{uniformShape:m}=MR(n.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${d.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${d.name}Shape;`);break}r.push(`uniform ivec2 ${d.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(d=>{r.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(d=>a7e(d,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=bs(),l=c7e(a);let u,c,h=d7e(a);return e.isPacked?(u=l7e(e.logicalShape,o,n.enableShapeUniforms),c=f7e(a)):(u=u7e(e.logicalShape,o,n.enableShapeUniforms),c=h7e(a)),n.packedInputs&&(h+=y7e),[h,l,c,s,u,i,n.userCode].join(`
`)}function Dd(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return E7e(t,e);case 1:return A7e(t,e);case 2:return R7e(t,e);case 3:return P7e(t,e);case 4:return F7e(t,e);case 5:return L7e(t);case 6:return B7e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function UY(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return N7e(t);case 1:return _7e(t,e);case 2:return O7e(t,e);case 3:return D7e(t,e);default:return M7e(t,e)}}function a7e(t,e,n=!1,r){let s="";n?s+=UY(t,r):s+=Dd(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=z7e(t,e):s+=V7e(t,e)),s}function l7e(t,e,n){switch(t.length){case 0:return WY();case 1:return v7e(t,e,n);case 2:return T7e(t,e,n);case 3:return b7e(t,e,n);default:return S7e(t,e,n)}}function u7e(t,e,n){switch(t.length){case 0:return WY();case 1:return x7e(t,e,n);case 2:return $7e(t,e,n);case 3:return w7e(t,e,n);case 4:return k7e(t,e,n);case 5:return I7e(t,e);case 6:return C7e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function c7e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function h7e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function f7e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function d7e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${p7e}
    ${m7e}
    ${g7e}
  `}const p7e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,m7e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,g7e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,y7e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function WY(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function v7e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function x7e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function b7e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function w7e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${IS(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=lh(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function S7e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],a=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function k7e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${IS(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=lh(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function I7e(t,e){const n=lh(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function C7e(t,e){const n=lh(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function T7e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Ct(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function $7e(t,e,n){return Ct(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function uh(t){return`offset${t}`}function N7e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=bs();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function E7e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=uh(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function _7e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=bs();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function A7e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Pd(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=uh(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function O7e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=bs();if(i!=null&&Ct(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function R7e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Ct(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=i[0],d=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=du(n),l=o;if(l.length<n.length){const f=Md(t,l),d=["row","col"];return`
      ${Dd(f,e)}
      float ${s}(int row, int col) {
        return ${s}(${Fd(d,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Pd(t)}
      }
    `;const u=i[0],c=i[1],h=uh(r);return c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function D7e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const f=n.slice(1),d=[1,2],p=Md(t,f),m=["b","row","col"];return`
        ${UY(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Fd(m,d)});
        }
      `}const a=bs();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),h=c*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${h}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function P7e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=du(n),u=a;if(u.length<n.length){const m=Md(t,u),g=["row","col","depth"];return`
        ${Dd(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Fd(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${Pd(t)}
      }
    `;const c=t.shapeInfo.texShape,h=c[0],f=c[1],d=t.shapeInfo.flatOffset;if(f===i&&d==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&d==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=uh(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * ${i} + col * ${o} + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${h}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function M7e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=bs();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],h=Math.ceil(i[o-1]/2);let f=h*Math.ceil(i[o-2]/2),d="int b, int row, int col",p=`b * ${f} + (row / 2) * ${h} + (col / 2)`;for(let m=2;m<o-1;m++)d=`int b${m}, `+d,f*=i[o-m-1],p=`b${m} * ${f} + `+p;return`
    vec4 ${r}(${d}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${s.texture2D}(${n}, uv);
    }
  `}function F7e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:u}=du(n);if(l.length<n.length){const v=Md(t,l),b=["row","col","depth","depth2"];return`
      ${Dd(v,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Fd(b,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${Pd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],d=h[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(d===a&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(d===i&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=uh(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${f}, ${d}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function L7e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:u}=du(e);if(l.length<e.length){const m=Md(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${Dd(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Fd(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${Pd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],d=h[1];if(d===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(d===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=uh(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${d}, index);
      return sampleTexture(${n}, uv);
    }
  `}function B7e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=du(e);if(s.length<e.length){const g=Md(t,s),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Dd(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Fd(y,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Pd(t)}
      }
    `;const h=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],p=f[1];if(p===c&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=uh(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${d}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Pd(t){const e=t.name,n=ie(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function z7e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=VY(t.shapeInfo.logicalShape,e.logicalShape),l=sn(o),u=o-i;let c;const h=["x","y","z","w","u","v"];i===0?c="":o<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${h[v+u]} = 0;`).join(`
`);let f="";o<2&&i>0?f="coords":f=t.shapeInfo.logicalShape.map((v,b)=>`coords.${h[b+u]}`).join(", ");let d="return outputValue;";const m=ie(t.shapeInfo.logicalShape)===1,y=ie(e.logicalShape)===1;if(i===1&&!m&&!y)d=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?d=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:d=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=i-2,b=i-1;a.indexOf(v)>-1&&a.indexOf(b)>-1?d="return vec4(outputValue.x);":a.indexOf(v)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(b)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${f});
      ${d}
    }
  `}function V7e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Ct(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=sn(l),c=VY(t.shapeInfo.logicalShape,e.logicalShape),h=l-a;let f;const d=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${d[m+h]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${d[g+h]}`).join(", "),`
    float ${s}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function sn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function MR(t,e,n){const{newShape:r,keptDims:s}=du(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!Ct(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function Md(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Fd(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U7e(t,e,n,r){const s=n.map((c,h)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:f}}),i=s.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=o7e(s,o,e),l=Pje(t.gl,a),u=t.createProgram(l);return re().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},jY(t,e,u))}function jY(t,e,n){const r={},s={},i={},o=[];let a,l,u,c=null,h=null;h=t.getUniformLocation(n,"NAN",!1),re().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const f=!1;for(let d=0;d<e.variableNames.length;d++){const p=e.variableNames[d];r[p]=t.getUniformLocation(n,p,f),r[`offset${p}`]=t.getUniformLocation(n,`offset${p}`,f),e.enableShapeUniforms&&(s[`${p}Shape`]=t.getUniformLocation(n,`${p}Shape`,f),i[`${p}TexShape`]=t.getUniformLocation(n,`${p}TexShape`,f))}return e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",f),u=t.getUniformLocation(n,"outShapeStrides",f),l=t.getUniformLocation(n,"outTexShape",f)),e.customUniforms&&e.customUniforms.forEach((d,p)=>{o[p]=t.getUniformLocation(n,d.name,f)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:h,inShapesLocations:s,inTexShapesLocations:i,outShapeLocation:a,outShapeStridesLocation:u,outTexShapeLocation:l}}function j5(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!Ct(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Ct(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function W7e(t,e,n,r,s){e.program.enableShapeUniforms||(j5(e.inShapeInfos,n),j5([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),re().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,u)=>{const c=e.program.variableNames[u],h=e.uniformLocations[c],f=e.uniformLocations[`offset${c}`],d=e.inShapesLocations[`${c}Shape`],p=e.inTexShapesLocations[`${c}TexShape`];if(d){const{uniformShape:m}=MR(e.program.packedInputs,l.shape,l.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(d,new Int32Array(m));break;case 2:t.gl.uniform2iv(d,new Int32Array(m));break;case 3:t.gl.uniform3iv(d,new Int32Array(m));break;case 4:t.gl.uniform4iv(d,new Int32Array(m));break}}if(p&&t.gl.uniform2i(p,l.texData.texShape[0],l.texData.texShape[1]),h!=null){if(l.isUniform){if(ie(l.shape)<2)t.gl.uniform1f(h,l.uniformValues[0]);else{let m=l.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(h,m)}return}l.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,h,u)}});const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ge(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s&&e.program.customUniforms.forEach((l,u)=>{const c=e.customUniformLocations[u],h=s[u];if(l.type==="float")t.gl.uniform1fv(c,h);else if(l.type==="vec2")t.gl.uniform2fv(c,h);else if(l.type==="vec3")t.gl.uniform3fv(c,h);else if(l.type==="vec4")t.gl.uniform4fv(c,h);else if(l.type==="int")t.gl.uniform1iv(c,h);else if(l.type==="ivec2")t.gl.uniform2iv(c,h);else if(l.type==="ivec3")t.gl.uniform3iv(c,h);else if(l.type==="ivec4")t.gl.uniform4iv(c,h);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function j7e(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:h}=MR(t.packedInputs,o.shape,l);let f="",d="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)d=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=Ge(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=o.shape.length,g=c.length===2&&Ct(o.shape,l),y=ie(o.shape)===1,v=jf(o.shape,n.shape),b=!t.packedInputs&&m===n.shape.length&&Ct(l,n.texData.texShape),x=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${b}_${u?h:""}_${c.length}_${y}_${v}_${g}_${f}_${d}_${p}_${x}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${re().getNumber("WEBGL_VERSION")}`,i}function zs(t){return re().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G7e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Gm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=bs();this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?IS(["r","c","d"],e):lh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H7e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Gm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=bs();this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?IS(["r","c","d"],e):lh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q7e{constructor(e){this.variableNames=["A"],this.outTexUsage=pi.DOWNLOAD;const n=bs();this.outputShape=e,this.userCode=`
      ${zY}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K7e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=pi.DOWNLOAD;const n=bs();this.outputShape=e,this.userCode=`
      ${zY}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X7e{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=bs();this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?PR():DR(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y7e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=bs();this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?PR():DR(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7e(t){const e=bs(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Dje(t,n)}function J7e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Bje(t,e)}function Z7e(t){const e=new Uint16Array([0,1,2,2,1,3]);return zje(t,e)}function r0(t,e,n,r,s,i){Uje(e,n);const o=Vje(t),a=t.TEXTURE_2D;return Le(t,()=>t.bindTexture(a,o)),Le(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Le(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Le(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Le(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),re().getNumber("WEBGL_VERSION")===1?Le(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):Le(t,()=>t.texStorage2D(a,1,r,e,n)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function GY(t){return t.internalFormatFloat}function eGe(t,e,n,r){const[s,i]=t0(e,n);return r0(t,s,i,GY(r),r.textureFormatFloat,t.FLOAT)}function HY(t){return t.internalFormatHalfFloat}function tGe(t,e,n,r){const[s,i]=t0(e,n);return r0(t,s,i,HY(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function qY(t){return t.downloadTextureFormat}function nGe(t,e,n,r){const[s,i]=t0(e,n);return r0(t,s,i,qY(r),t.RGBA,t.UNSIGNED_BYTE)}function KY(t){return t.internalFormatPackedFloat}function rGe(t,e,n,r){const[s,i]=Rd(e,n);return r0(t,s,i,KY(r),t.RGBA,t.FLOAT)}function XY(t){return t.internalFormatPackedHalfFloat}function sGe(t,e,n,r){const[s,i]=Rd(e,n);return r0(t,s,i,XY(r),t.RGBA,r.textureTypeHalfFloat)}function iGe(t,e,n){return Le(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),V5(t,e,"clipSpacePos",n,3,20,0)&&V5(t,e,"uv",n,2,20,12)}function oGe(t,e,n,r,s,i){Le(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),re().getNumber("WEBGL_VERSION")===2?Le(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Le(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function aGe(t,e,n){Le(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?re().getNumber("WEBGL_VERSION")===2?Le(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Le(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):re().getNumber("WEBGL_VERSION")===2?Le(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Le(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function lGe(t,e,n,r){const s=t.createBuffer();Le(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return Le(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Le(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Le(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function uGe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function cGe(t,e,n,r){const[s,i]=t0(e,n),o=4,a=new Uint8Array($je(e*n,o));return Le(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function hGe(t,e,n,r,s,i,o,a){const l=t,u=new Float32Array(Nje(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function fGe(t,e,n){const r=new Float32Array(e*n*4);return Le(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FI{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=re().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,Ije(n,e)):this.gl=No(n);let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),re().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=Q0(this.gl,i),Hi(this.gl,o))this.textureHalfFloatExtension=Q0(this.gl,o);else if(re().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Hi(this.gl,s))this.colorBufferHalfFloatExtension=Q0(this.gl,s);else if(re().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Hi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Hi(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=J7e(this.gl),this.indexBuffer=Z7e(this.gl),this.framebuffer=Wje(this.gl),this.textureConfig=RR(this.gl,this.textureHalfFloatExtension)}get debug(){return re().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Le(e,()=>e.finish()),Le(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Le(e,()=>e.deleteFramebuffer(this.framebuffer)),Le(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Le(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Le(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),eGe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),tGe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),nGe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),aGe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),oGe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),sGe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),rGe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(U5(this.gl,this.framebuffer),this.outputTexture=null),Le(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>cGe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return hGe(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return uGe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=lGe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(re().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>fGe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Q7e(n));const r=Fje(n);return Le(n,()=>n.attachShader(r,this.vertexShader)),Le(n,()=>n.attachShader(r,e)),Lje(n,r),this.debug&&OI(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=iGe(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Le(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&OI(this.gl,this.program),Le(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?Gje(this.gl,e,n):Hje(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Le(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),qje(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=Rd(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&OI(this.gl,this.program),J0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),Le(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Le(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Q0(this.gl,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await r6(()=>this.disposed||this.isQueryAvailable(e,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=dGe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),!(this.itemsToPoll.length>1)&&r6(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),RI(this.gl,e,this.framebuffer),this.debug&&J0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(RI(this.gl,this.outputTexture,this.framebuffer),this.debug&&J0(this.gl)):U5(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;RI(s,e,this.framebuffer),this.debug&&J0(s),this.outputTexture=e,Le(s,()=>s.viewport(0,0,n,r)),Le(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),Le(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function dGe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:pGe,bincountImpl:YY,bincountReduceImpl:mGe,ceilImpl:gGe,concatImpl:yGe,equalImpl:vGe,expImpl:xGe,expm1Impl:bGe,floorImpl:wGe,gatherNdImpl:SGe,gatherV2Impl:kGe,greaterImpl:IGe,greaterEqualImpl:CGe,lessImpl:TGe,lessEqualImpl:$Ge,linSpaceImpl:NGe,logImpl:EGe,maxImpl:_Ge,maximumImpl:AGe,minimumImpl:OGe,multiplyImpl:RGe,negImpl:DGe,notEqualImpl:PGe,prodImpl:MGe,rangeImpl:FGe,rsqrtImpl:LGe,scatterImpl:BGe,sigmoidImpl:zGe,simpleAbsImpl:QY,sliceImpl:VGe,sparseFillEmptyRowsImpl:UGe,sparseReshapeImpl:WGe,sparseSegmentReductionImpl:JY,sqrtImpl:jGe,stridedSliceImpl:GGe,stringNGramsImpl:HGe,stringSplitImpl:qGe,stringToHashBucketFastImpl:KGe,subImpl:XGe,tileImpl:YGe,topKImpl:QGe,transposeImpl:FR,uniqueImpl:JGe}=a8e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZY(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ps(t,e){return e===1?[t]:ZY(t,e)}function ZGe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eHe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=zs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ps("rc",this.rank),r=sn(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eQ{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${tHe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?PR():DR(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function tHe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?i7e(["r","c","d"],"inputShape"):lh(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nHe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const s=H5(n,r),i=q5(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=G5(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let a;return s===Er.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Er.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Er.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Er.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Er.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=H5(r,s),o=q5(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=G5(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=re().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function rHe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function G5(t,e,n,r,s){const i=sHe(e,r);let o;if(s){const[l,u]=Rd(t[0],t[1]);o=l*u}else{const[l,u]=t0(t[0],t[1]);o=l*u}const a=rHe(n,i);return o*a}function sHe(t,e){switch(t){case Er.PACKED_2X2_FLOAT32:return KY(e);case Er.PACKED_2X2_FLOAT16:return XY(e);case Er.UNPACKED_FLOAT32:return GY(e);case Er.UNPACKED_FLOAT16:return HY(e);case Er.PACKED_4X1_UNSIGNED_BYTE:return qY(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function iHe(t){return re().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Er.PACKED_2X2_FLOAT32:Er.UNPACKED_FLOAT32:t?Er.PACKED_2X2_FLOAT16:Er.UNPACKED_FLOAT16}function H5(t,e){if(t===pi.UPLOAD)return Er.PACKED_2X2_FLOAT32;if(t===pi.RENDER||t==null)return iHe(e);if(t===pi.DOWNLOAD||t===pi.PIXELS)return Er.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function q5(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _a{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const io="if (isnan(x)) return x;",oHe="return x;",K5="return abs(x);",aHe="return (x >= 0.0) ? x : (exp(x) - 1.0);",lHe=io+`
  return (x < 0.0) ? 0.0 : x;
`,uHe=io+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Sh="return x;",cHe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hHe="return x;",fHe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,dHe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,pHe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mHe="return 1.0 / (1.0 + exp(-1.0 * x));";class tc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gHe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length);const n=e.length,r=ps("rc",n),s=sn(n),i=ZGe(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yHe=SO,vHe=1e-7,xHe=1e-4,ev={};function bHe(t){return t in ev||(ev[t]={}),ev[t]}const wHe=re().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),SHe=600;function kHe(){return re().global.screen==null?1024:re().global.screen.height*re().global.screen.width*window.devicePixelRatio*SHe/1024/1024}class CS extends DA{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!re().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof FI)n=e;else{const r=No(re().getNumber("WEBGL_VERSION"),e);n=new FI(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=No(re().getNumber("WEBGL_VERSION"));n=new FI(r),this.binaryCache=bHe(re().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new nHe(this.gpgpu),this.numMBBeforeWarning=kHe(),this.texData=new N7(this,ga())}nextDataId(){return CS.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((re().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||re().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:pi.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(re().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:pi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let f;l?f=new tc(a,Sh):f=new _a(a,Sh);const d=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:s}],s),p=this.readSync(d.dataId);return this.disposeIntermediateTensorInfo(d),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=Is());let h;if(s==="complex64"){const f=this.readSync(i.real.dataId),d=this.readSync(i.imag.dataId);h=ja(f,d)}else h=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=Is()-c),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let p;l?p=new tc(s,Sh):p=new _a(s,Sh);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:o}],o),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(re().getBool("DEBUG")&&!re().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&re().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&re().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...Y0(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];h=ja(m,g)}else if(u==null)h=this.getValuesFromTexture(e);else{const p=ie(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;Le(p,()=>p.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(e,h),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ga().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let d;l?d=new tc(i,Sh):d=new _a(i,Sh);const p=this.runWebGLProgram(d,[{dataId:e,shape:i,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),h=ga().makeTensorFromTensorInfo(c),f=this.texData.get(c.dataId);return Object.assign({tensorRef:h},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Kl(s));return dt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return dt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Oje(r))throw re().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=ie(n);if(re().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),d=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(d.texture.texture,...Y0(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(f),p}const o=re().getBool("WEBGL_PACK")&&s===!0,a=o?DI(n):n,l=o?new K7e(a):new q7e(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),h}timerAvailable(){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=Bf(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=Bf(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=O_e(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Is(),endMs:null}}endTimer(e){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Is(),e)}async getQueryTime(e){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=wHe){return re().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ie(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){hi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return yHe(e.shape,n)}packedUnaryOp(e,n,r){const s=new tc(e.shape,n),i=this.compileAndRun(s,[e],r);return ga().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=QY(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,K5,e.dtype);const n=new _a(e.shape,K5),r=this.compileAndRun(n,[e]);return ga().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Dg(r[0])){const i=r.map(o=>Pl(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return ga().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new gHe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new eHe(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[Zf(e.shape),...ed(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Zf(n),...ed(n)],o=new eQ(i,r),a=!0,l=[r],u=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const f=ie(i),d=n[0]*n[1]*4;P(f<=d,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=DI(i);let l;s?l=new H7e(a):l=new G7e(a);const u=!0,c=[n!=null?n:Y0(a)],h=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:h.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Gm.DENSE){const y=o!=null?o:Y0(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ie(a.shape)===0)return l.values=Pr(a.dtype,0),a;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&ie(y.shape)<=re().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!ub(v.shape,y.shape)){const b=y,x=y.shape;y.shape=v.shape,y=this.packedReshape(y,x),u.push(y),v=this.texData.get(y.dataId),b.shape=x}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const h={shape:a.shape,texData:l,isUniform:!1},f=j7e(e,c,h),d=this.getAndSaveBinary(f,()=>U7e(this.gpgpu,e,c,h)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),re().get("ENGINE_COMPILE_ONLY")||W7e(this.gpgpu,d,c,h,s),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=re().get("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=Is();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!re().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(re().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Y(()=>{if(!re().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=re().getBool("DEBUG");re().set("DEBUG",!1);const n=this.abs(ze(1e-8)).dataSync()[0];if(re().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?vHe:xHe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Is());let h=n.texShape;if(h==null&&(h=Yje(r,l),n.texShape=h),i!=null){const f=DI(r);let d,p=h[1],m=h[0];const g=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!g)&&([p,m]=Rd(h[0],h[1])),l?d=new Y7e(f,g):d=new X7e(f,g);const y=g?[m,p]:h,v=this.makeTensorInfo(y,s),b=this.texData.get(v.dataId);g?b.usage=pi.PIXELS:b.usage=pi.UPLOAD,b.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,i);const x=[[m,p]],w=!0,S=this.runWebGLProgram(d,[v],s,x,w),k=this.texData.get(S.dataId);n.texShape=k.texShape,n.isPacked=k.isPacked,n.usage=k.usage,re().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=k.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=Is()-c)}else{const f=this.acquireTexture(h,a,s,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return this.releaseGPUData(e),n!=null&&(r.values=IHe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*T$(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await CH(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(BY(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,inShapesLocations:o,inTexShapesLocations:a,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=jY(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=a,e.outShapeLocation=l,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}}CS.nextDataId=0;function IHe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q7()&&dG("webgl",()=>new CS,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tQ=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class td{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=rt(n,r),this.enableShapeUniforms=zs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TS=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class s0{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=zs(i);let o="";if(s)if(i===0||ie(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${sn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=ps("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const CHe={kernelName:ry,backendName:"webgl",kernelFunc:ri};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wu(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=ri({inputs:{x:r},backend:n}),l=ri({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const THe={kernelName:jA,backendName:"webgl",kernelFunc:wu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nQ="return (a < 0.) ? b * a : a;",rQ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function $He(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",pu(i,"float32")),a=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s0(rQ,s.shape,o.shape):new td(nQ,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const NHe={kernelName:l2,backendName:"webgl",kernelFunc:$He};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQ="return (a < 0.) ? b * a : a;",iQ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function EHe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s0(iQ,r.shape,s.shape):new td(sQ,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const _He={kernelName:$2,backendName:"webgl",kernelFunc:EHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ld="if (isnan(x)) return x;",AHe=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,OHe=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function $t({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const h=a.texData.get(o.dataId),f=n(h.values,l);return a.makeTensorInfo(o.shape,l,f)}const u=re().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new tc(o.shape,e):c=new _a(o.shape,t),a.runWebGLProgram(c,[o],l)}}function Vr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,c=a;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(b=>{const[x,w]=b,S={dataId:x.dataId,dtype:x.dtype,shape:l.shape},k={dataId:w.dataId,dtype:w.dtype,shape:u.shape},I=new td(t,l.shape,u.shape);return c.runWebGLProgram(I,[S,k],ti(x.dtype,w.dtype))}),v=wu({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),v}const h=i||ti(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&s!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Bc(p):p,y=l.dtype==="string"?Bc(m):m,[v,b]=s(l.shape,u.shape,g,y,h),x=c.makeTensorInfo(b,h),w=c.texData.get(x.dataId);return w.values=v,x}const f=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let d;return f?d=new s0(e,l.shape,u.shape,n):d=new td(t,l.shape,u.shape),c.runWebGLProgram(d,[l,u],h)}}function $S(t,e=!1){if(t==="linear")return e?hHe:oHe;if(t==="relu")return e?dHe:lHe;if(t==="elu")return e?fHe:aHe;if(t==="relu6")return e?pHe:uHe;if(t==="prelu")return e?iQ:sQ;if(t==="leakyrelu")return e?rQ:nQ;if(t==="sigmoid")return e?mHe:cHe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oQ{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=zs(this.outputShape.length);const c=s?e[1]:e[2],h=Math.ceil(c/2),f=s?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";e[0]<n[0]?b=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(x=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${h}; i++) {
          int batchA = ${b};
          int batchB = ${x};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${d});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Y5{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=rt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5="return a * b;";function LR(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=ti(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),u=new Y5(X5.REAL,r.shape,s.shape),c=new Y5(X5.IMAG,r.shape,s.shape),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],f=n.runWebGLProgram(u,h,"float32"),d=n.runWebGLProgram(c,h,"float32"),p=wu({inputs:{real:f,imag:d},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[u,c]=RGe(r.shape,s.shape,a.values,l.values,i),h=n.makeTensorInfo(c,i),f=n.texData.get(h.dataId);return f.values=u,h}let o;return re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new s0(Q5,r.shape,s.shape):o=new td(Q5,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const RHe={kernelName:fy,backendName:"webgl",kernelFunc:LR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DHe(t,e,n){const r=[Zf(t.shape),...ed(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Zf(e),...ed(e)],o=new eQ(i,r),a=!0,l=[r],u=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=ie(s.shape),l=_7(i,a),u=ie(l);P(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(s.dataId);return c.isPacked&&!ub(s.shape,l)&&!(c.texture!==null&&ub(c.shape,l))?DHe(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const PHe={kernelName:E2,backendName:"webgl",kernelFunc:Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J5{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const h=1/n;u=`sumValue += dot(values * ${zf(h)?h.toPrecision(2):h}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MHe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,h=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,d="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${h===1}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${h===2}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${h===3}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FHe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=lS(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function ch(t,e,n,r){const s=FHe(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:u}=s[o];let c,h;n==="mean"?c=o===0?new J5({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new J5({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new MHe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),h=i,i=r.runWebGLProgram(c,[i],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LHe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=sn(this.rank),i=BHe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function BHe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zHe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=sn(this.rank),i=ZY("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NS(t,e,n){const r=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zHe(t.shape,e):new LHe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(t,e,n,r){const s=e,i=t.shape.length,o=pt(s,t.shape);let a=o;const l=Nn(a,i),u=l!=null;let c=t;u&&(c=NS(t,l,r),a=Vn(a.length,i)),zr("sum",a,i);const[h,f]=Sr(c.shape,a);let d=h;n&&(d=zn(h,o));const p=ie(f),g=ie(t.shape)/p,y=Ae({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),v=L3(t.dtype),b=ch(y,v,"sum",r),x=Ae({inputs:{x:b},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ES(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return VHe(s,i,o,n)}const UHe={kernelName:P2,backendName:"webgl",kernelFunc:ES};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=s.shape[i[c]];let u;if(o.shouldExecuteOnCPU([s])){const h=o.texData.get(s.dataId).values,f=FR(h,s.shape,s.dtype,i,l);u=o.makeTensorInfo(l,s.dtype);const d=o.texData.get(u.dataId);d.values=f}else u=NS(s,i,o);return u}const WHe={kernelName:lf,backendName:"webgl",kernelFunc:Yn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ=1e3;function cb({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,h=n?t.shape[u-2]:t.shape[u-1],f=r?e.shape[c-1]:e.shape[c-2],d=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=ie(m),v=ie(g),x=rt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([d,p]);P(h===f,()=>`Error in matMul: inner shapes (${h}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,h,d]:[y,d,h],S=r?[v,p,f]:[v,f,p],k=Ae({inputs:{x:t},backend:s,attrs:{shape:w}}),I=Ae({inputs:{x:e},backend:s,attrs:{shape:S}}),T=[k,I],N=Math.max(y,v),A=n?k.shape[1]:k.shape[2],R=i!=null,O=o!=null,M=l==="leakyrelu",z=l!=null?$S(l,!0):null,B=R||O||M||z!=null;let K;if((d===1||p===1)&&A>aQ&&B===!1){let V=k,j=I;n&&(V=Yn({inputs:{x:k},backend:s,attrs:{perm:[0,2,1]}}),T.push(V)),r&&(j=Yn({inputs:{x:I},backend:s,attrs:{perm:[0,2,1]}}),T.push(j));const Q=p!==1,Z=p===1;let oe=V;Q&&(oe=Ae({inputs:{x:V},backend:s,attrs:{shape:[N,A,1]}}),T.push(oe));const fe=p===1?2:1;let le=j;Z&&(le=Ae({inputs:{x:j},backend:s,attrs:{shape:[N,1,A]}}),T.push(le));const ye=LR({inputs:{a:oe,b:le},backend:s});K=ES({inputs:{x:ye},backend:s,attrs:{axis:fe,keepDims:!0}}),T.push(ye)}else{const V=ti(t.dtype,e.dtype),j=new oQ(w,S,[N,d,p],n,r,R,z,O,M),Q=[k,I];if(i!=null&&Q.push(i),O&&Q.push(o),M){const Z=s.makeTensorInfo([],"float32",pu(a,"float32"));Q.push(Z),T.push(Z)}K=s.runWebGLProgram(j,Q,V)}const L=Ae({inputs:{x:K},backend:s,attrs:{shape:x}});T.push(K);for(const V of T)s.disposeIntermediateTensorInfo(V);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jHe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;return cb({a:s,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:h,activation:c})}const GHe={kernelName:Ox,backendName:"webgl",kernelFunc:jHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5="return abs(x);";function HHe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=QY(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return re().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new tc(r.shape,Z5):s=new _a(r.shape,Z5),n.runWebGLProgram(s,[r],r.dtype)}const qHe={kernelName:Vw,backendName:"webgl",kernelFunc:HHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KHe=io+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,XHe=$t({opSnippet:KHe}),YHe={kernelName:Fg,backendName:"webgl",kernelFunc:XHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QHe=io+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,JHe=$t({opSnippet:QHe}),ZHe={kernelName:Lg,backendName:"webgl",kernelFunc:JHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eB="return a + b;",eqe=Vr({opSnippet:eB,packedOpSnippet:eB,supportsComplex:!0,cpuKernelImpl:pGe}),tqe={kernelName:Cd,backendName:"webgl",kernelFunc:eqe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nqe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rqe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hv(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return ri({inputs:{x:r[0]},backend:n});if(r.length>re().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=Hv({inputs:r.slice(0,l),backend:n}),c=Hv({inputs:r.slice(l),backend:n});return Hv({inputs:[u,c],backend:n})}const s=r.map(l=>l.dtype).reduce((l,u)=>ti(l,u)),i=r.map(l=>l.shape),a=re().getBool("WEBGL_PACK")?new rqe(r[0].shape,i):new nqe(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const sqe={kernelName:Uw,backendName:"webgl",kernelFunc:Hv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=pt(i,s.shape);let u=l;const c=Nn(u,a);let h=s;c!=null&&(h=Yn({inputs:{x:s},backend:n,attrs:{perm:c}}),u=Vn(u.length,a)),zr("all",u,a);const[f,d]=Sr(h.shape,u),p=ie(d),m=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}}),g=ch(m,m.dtype,"all",n);let y;if(o){const v=zn(f,l);y=Ae({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Ae({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(h),y}const oqe={kernelName:LA,backendName:"webgl",kernelFunc:iqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=pt(i,s.shape);let u=l;const c=Nn(u,a);let h=s;c!=null&&(h=Yn({inputs:{x:s},backend:n,attrs:{perm:c}}),u=Vn(u.length,a)),zr("any",u,a);const[f,d]=Sr(h.shape,u),p=ie(d),m=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}}),g=ch(m,m.dtype,"any",n);let y;if(o){const v=zn(f,l);y=Ae({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Ae({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(h),y}const lqe={kernelName:BA,backendName:"webgl",kernelFunc:aqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uqe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cqe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=sn(l),c=ps("coords",l);let h,f;if(o===1){f=l+1;const I=sn(f);h=`
        ${I} sourceLocR = ${I}(${c.join()}, 0);
        ++${c[l-1]};
        ${I} sourceLocG = ${I}(${c.join()}, 0);
        ++${c[l-2]};
        ${I} sourceLocA = ${I}(${c.join()}, 0);
        --${c[l-1]};
        ${I} sourceLocB = ${I}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,h=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const d=["x","y","z","w","u","v"].slice(0,f),p="."+d[f-1],m=d.map(I=>"int "+I),g=ps("sourceLocR",f-1).concat("inIdx.r"),y=ps("sourceLocG",f-1).concat("inIdx.g"),v=ps("sourceLocB",f-1).concat("inIdx.b"),b=ps("sourceLocA",f-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",w=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,k=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${k}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQ(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=lS(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new uqe(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const h=lQ(t,e,n,c);return t.disposeIntermediateTensorInfo(c),h}function uQ(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=lS(i),a=new cqe(s,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=uQ(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function cQ(t,e,n,r){const s=[n];if(zr("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!re().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Sr(l.shape,s),h=ie(c),f=Ae({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});i.push(f);const d=lQ(t,f,r);i.push(d);const p=Ae({inputs:{x:d},backend:t,attrs:{shape:u}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return uQ(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=pt(i,s.shape);const a=Nn(o,s.shape.length);let l=s;const u=[];a!=null&&(l=Yn({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Vn(o.length,l.shape.length)),zr("argMax",[o[0]],l.shape.length);const c=cQ(n,l,o[0],"max");return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const fqe={kernelName:Ww,backendName:"webgl",kernelFunc:hqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=pt(i,s.shape);const a=Nn(o,s.shape.length);let l=s;const u=[];a!=null&&(l=Yn({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Vn(o.length,l.shape.length)),zr("argMin",[o[0]],l.shape.length);const c=cQ(n,l,o[0],"min");return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const pqe={kernelName:jw,backendName:"webgl",kernelFunc:dqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mqe=io+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,gqe=$t({opSnippet:mqe}),yqe={kernelName:Bg,backendName:"webgl",kernelFunc:gqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vqe=io+"return log(x + sqrt(x * x + 1.0));",xqe=$t({opSnippet:vqe}),bqe={kernelName:zg,backendName:"webgl",kernelFunc:xqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wqe=io+`
  return atan(x);
`,Sqe=$t({opSnippet:wqe}),kqe={kernelName:Vg,backendName:"webgl",kernelFunc:Sqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iqe=AHe+`
  return atan(a, b);
`,Cqe=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+OHe+`
  return result;
`,Tqe=Vr({opSnippet:Iqe,packedOpSnippet:Cqe}),$qe={kernelName:Wg,backendName:"webgl",kernelFunc:Tqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nqe=io+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Eqe=$t({opSnippet:Nqe}),_qe={kernelName:Ug,backendName:"webgl",kernelFunc:Eqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hm{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${d}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${I} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?g:y:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / count");const w=Math.floor(o/4)*4,S=o%4,k=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${d}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${k}
          }

          int xC = xCCorner + ${w};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${k}
          }
        }
        setOutput(${x});
      }
    `}}class BR{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,h=e.dilationHeight,f=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let x="0.0";if(b||(x="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${N} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const k=Math.floor(o/4)*4,I=o%4,T=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${k}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${k};
            if (${I===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${I===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${I===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${T}
            }
          }
          setOutput(${S});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;n0(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;P(Br(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ro(s.shape,i,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))return ri({inputs:{x:s},backend:n});const h=new Hm(c,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const Oqe={kernelName:Gw,backendName:"webgl",kernelFunc:Aqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],h=qa(s.shape,i,o,c,a,l,u),f=new BR(h,"avg",!1);return n.runWebGLProgram(f,[s],"float32")}const Dqe={kernelName:Hw,backendName:"webgl",kernelFunc:Rqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pqe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,h=u-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${h});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Mqe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,h=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=h-1-e.padInfo.front,m=f-1-e.padInfo.top,g=d-1-e.padInfo.left,y=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,h=[1,1,1],f=qa(o.shape,a,l,h,u,c),d=new Mqe(f);return n.runWebGLProgram(d,[s],o.dtype)}const Lqe={kernelName:VA,backendName:"webgl",kernelFunc:Fqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;n0([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=ro(o.shape,a,l,1,u),h=new Pqe(c);return n.runWebGLProgram(h,[s],o.dtype)}const zqe={kernelName:zA,backendName:"webgl",kernelFunc:Bqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vqe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return cb({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const Uqe={kernelName:qw,backendName:"webgl",kernelFunc:Vqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wqe{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],rt(e,n),rt(e,r);let a="0.0";s!=null&&(rt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(rt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jqe{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],rt(e,n),rt(e,r);let a="vec4(0.0)";s!=null&&(rt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(rt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gqe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;P(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,s,i];let c=null;o!=null&&(c=o.shape,u.push(o));let h=null;a!=null&&(h=a.shape,u.push(a));const f=re().getBool("WEBGL_PACK_NORMALIZATION")?new jqe(r.shape,s.shape,i.shape,c,h,l):new Wqe(r.shape,s.shape,i.shape,c,h,l);return e.runWebGLProgram(f,u,u[0].dtype)},Hqe={kernelName:i2,backendName:"webgl",kernelFunc:Gqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qqe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=sn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=Kqe(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${TN[a]} = start[${a}] + coords.${TN[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const TN=["x","y","z","w","u","v"];function Kqe(t){if(t===1)return"sourceLoc";if(t<=6)return TN.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xqe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=sn(this.rank),r=ps("coords",this.rank),s=ps("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,h)=>`start[${h}]`).join()});`:e.map((c,h)=>`${s[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yqe(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=q3(e,Ge(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function Bd(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=G2(s,i,o);if(j3(s,a,l),ie(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const h=n.texData.get(s.dataId),f=VGe(h.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,f)}const{isPacked:u}=n.texData.get(s.dataId),c=H3(s.shape,a,l);if(u||!c){const h=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Xqe(l):new qqe(l),f=[a];return n.runWebGLProgram(h,[s],s.dtype,f)}return n.uploadToGPU(s.dataId),Yqe(s,a,l,n)}const Qqe={kernelName:D2,backendName:"webgl",kernelFunc:Bd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jqe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;P(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((v,b)=>v*b),l=Wy(s.shape,i,a),u=jy(l.length,i.length),c=Gy(s.shape,i,a),h=FO(o,i.length),f=LO(c,o,i.length),d=[],p=Ae({inputs:{x:s},backend:n,attrs:{shape:l}}),m=Yn({inputs:{x:p},backend:n,attrs:{perm:u}}),g=Ae({inputs:{x:m},backend:n,attrs:{shape:c}}),y=Bd({inputs:{x:g},backend:n,attrs:{begin:h,size:f}});return d.push(p),d.push(m),d.push(g),d.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},Zqe={kernelName:Kw,backendName:"webgl",kernelFunc:Jqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),u=YY(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const tKe={kernelName:UA,backendName:"webgl",kernelFunc:eKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nKe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=rt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const rKe={kernelName:WA,backendName:"webgl",kernelFunc:nKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sKe="return float(a != b);",hQ=Vr({opSnippet:sKe,cpuKernelImpl:PGe,dtype:"bool"}),iKe={kernelName:S2,backendName:"webgl",kernelFunc:hQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return ri({inputs:{x:s.complexTensorInfos.real},backend:n})}const oKe={kernelName:v3,backendName:"webgl",kernelFunc:i0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aKe="return float(int(x));";function lKe(t,e){const n=new _a(t.shape,aKe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $N(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return ri({inputs:{x:s},backend:n});const o=Kn(s.shape),a=$N({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=wu({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=i0({inputs:{input:s},backend:n}),a=$N({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!A7(s.dtype,i)){const o=ri({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(i==="int32")return lKe(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Pr("bool",1)),l=hQ({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const uKe={kernelName:jg,backendName:"webgl",kernelFunc:$N};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tB="return ceil(x);",cKe=$t({opSnippet:tB,packedOpSnippet:tB,cpuKernelImpl:gGe}),hKe={kernelName:Gg,backendName:"webgl",kernelFunc:cKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fKe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dKe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;re().getBool("WEBGL_PACK_CLIP")?a=new dKe(s.shape):a=new fKe(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const mKe={kernelName:Hg,backendName:"webgl",kernelFunc:pKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gKe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function yKe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new gKe(r.shape),o=[nB(r,s.complexTensorInfos.real),nB(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const vKe={kernelName:Xw,backendName:"webgl",kernelFunc:yKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xKe{constructor(e){this.outputShape=[],this.outputShape=Zo(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bKe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Zo(e,n);const r=this.outputShape,s=r.length,i=sn(s),o=ps("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),h=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];f+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${tv(a,u,g)}),
            vec2(${tv(c,u,g)}));
        }`}const d=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${d}(${tv(a,u,p)}),
          vec2(${tv(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function tv(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _S(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return ri({inputs:{x:s.complexTensorInfos.imag},backend:n})}const wKe={kernelName:a3,backendName:"webgl",kernelFunc:_S};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $h(t,e,n){const r=t[0].dtype;if(r==="complex64"){const c=t.map(m=>i0({inputs:{input:m},backend:n})),h=t.map(m=>_S({inputs:{input:m},backend:n})),f=$h(c,e,n),d=$h(h,e,n),p=wu({inputs:{real:f,imag:d},backend:n});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const c=t.map(y=>{const v=ie(y.shape.slice(e));return Ae({inputs:{x:y},backend:n,attrs:{shape:[-1,v]}})}),h=c.map(y=>({vals:n.readSync(y.dataId),shape:y.shape})),f=Zo(c.map(y=>y.shape),1),d=c[0].shape[0]===1,p=yGe(h,f,r,d),m=Zo(t.map(y=>y.shape),e),g=n.makeTensorInfo(m,r,p);return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}if(t.length>re().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(t.length/2),h=$h(t.slice(0,c),e,n),f=$h(t.slice(c),e,n),d=$h([h,f],e,n);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),d}if(re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const c=new bKe(t.map(h=>h.shape),e);return n.runWebGLProgram(c,t,r)}const{tensors2D:i,outShape:o}=SKe(t,e,n),a=new xKe(i.map(c=>c.shape)),l=n.runWebGLProgram(a,i,r);i.forEach(c=>n.disposeIntermediateTensorInfo(c));const u=Ae({inputs:{x:l},attrs:{shape:o},backend:n});return n.disposeIntermediateTensorInfo(l),u}function SKe(t,e,n){const r=Zo(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Ae({inputs:{x:i},attrs:{shape:[-1,ie(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fQ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=pt(s,e[0].shape)[0],o=Zo(e.map(u=>u.shape),i);if(ie(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const a=e.filter(u=>ie(u.shape)>0);if(a.length===1)return ri({inputs:{x:a[0]},backend:n});const l=a.map(u=>u.shape);return DO(l,i),$h(a,i,n)}const kKe={kernelName:Yw,backendName:"webgl",kernelFunc:fQ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dQ{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,b=g?3:1;let x="",w="";r&&(s?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${w}
        setOutput(result);
      }
    `}}class IKe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,h=e.filterDepth,f=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CKe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=zs(this.outputShape.length);const{dataFormat:r}=n,s=bs(),i=r==="channelsLast",o=i?0:1,a=i?1:2,l=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${e[1]} && pos < ${e[0]}) {`;let u="";for(let c=0;c<=1;c++)for(let h=0;h<=1;h++)u+=`
          blockIndex = rc.y + ${h};
          pos = rc.x + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+h}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+h}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQ({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,h=l[0]*l[1]*l[2],f=n.outChannels,d=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(i!=null&&!d&&i.shape.length===3){const x=Yn({inputs:{x:i},backend:r,attrs:{perm:[1,2,0]}});y.push(x),i=x}if(!((h===1||f===1)&&c>aQ)&&u.isPacked&&d&&u.texture!=null&&l[2]%2!==0&&Ct(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,P(ub(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const k=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(k);const I=cb({a:w,b:k,backend:r,transposeA:p,transposeB:m,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),T=r.texData.get(I.dataId);P(T.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,T.shape=n.outShape,g=ri({inputs:{x:I},backend:r}),g.shape=n.outShape,y.push(I)}else{const x=d?t:Yn({inputs:{x:t},backend:r,attrs:{perm:[0,2,3,1]}}),w=x.shape,S=w[0]*w[1]*w[2],k=Ae({inputs:{x},backend:r,attrs:{shape:[1,S,n.inChannels]}}),I=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),T=cb({a:k,b:I,transposeA:p,transposeB:m,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),N=[n.batchSize,n.outHeight,n.outWidth,n.outChannels],A=Ae({inputs:{x:T},backend:r,attrs:{shape:N}});g=d?A:Yn({inputs:{x:A},backend:r,attrs:{perm:[0,3,1,2]}}),d||(y.push(x),y.push(A)),y.push(k),y.push(I),y.push(T)}for(const x of y)r.disposeIntermediateTensorInfo(x);return g}function mQ({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:h,outHeight:f,dataFormat:d}=n,p=d==="channelsLast",m=l*u*c,g=f*h,y=[m,g],v=!0,b=!1,x=[];if(i!=null&&!p&&i.shape.length===3){const Q=Yn({inputs:{x:i},backend:r,attrs:{perm:[1,2,0]}});x.push(Q),i=Q}const w=Ae({inputs:{x:t},backend:r,attrs:{shape:t.shape.slice(1)}}),S=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,m,ie(e.shape)/m]}});x.push(w),x.push(S);const k=new CKe(y,n),I=[w.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(k,[w],"float32",I),N=Ae({inputs:{x:T},backend:r,attrs:{shape:[1,y[0],y[1]]}});x.push(T),x.push(N);const A=s!=null,R=i!=null,O=a==="leakyrelu",M=a?$S(a,!0):null,z=new oQ(N.shape,S.shape,[1,g,n.outChannels],v,b,A,M,R,O),B=[N,S];if(s&&B.push(s),R&&B.push(i),O){const Q=r.makeTensorInfo([],"float32",pu(o,"float32"));B.push(Q),x.push(Q)}const K=r.runWebGLProgram(z,B,"float32"),L=[1,f,h,n.outChannels],V=Ae({inputs:{x:K},backend:r,attrs:{shape:L}}),j=p?V:Yn({inputs:{x:V},backend:r,attrs:{perm:[0,3,1,2]}});p||x.push(V),x.push(K);for(const Q of x)r.disposeIntermediateTensorInfo(Q);return j}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,h=Ka(l),f=wr(s.shape,i.shape,o,u,a,c,!1,h);let d;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))d=pQ({x:s,filter:i,convInfo:f,backend:n});else if(re().getBool("WEBGL_CONV_IM2COL")&&s.shape[0]===1)d=mQ({x:s,filter:i,convInfo:f,backend:n});else{const m=new dQ(f);d=n.runWebGLProgram(m,[s,i],"float32")}const p=Ae({inputs:{x:d},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(d),p}const $Ke={kernelName:Qw,backendName:"webgl",kernelFunc:TKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NKe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class EKe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class _Ke{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class AKe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,h=Ka(l),f=wr(s.shape,c,o,1,a,u,!1,h),d=new NKe(f);return n.runWebGLProgram(d,[s,i],"float32")}const RKe={kernelName:GA,backendName:"webgl",kernelFunc:OKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,h=Ka(u),f=wr(o,i.shape,a,1,l,c,!1,h),d=new EKe(f);return n.runWebGLProgram(d,[s,i],"float32")}const PKe={kernelName:Jw,backendName:"webgl",kernelFunc:DKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=mu(s.shape,i.shape,o,l,a),c=new IKe(u);return n.runWebGLProgram(c,[s,i],"float32")}const FKe={kernelName:Zw,backendName:"webgl",kernelFunc:MKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,u=mu(s.shape,l,o,1,a),c=new _Ke(u);return n.runWebGLProgram(c,[s,i],"float32")}const BKe={kernelName:HA,backendName:"webgl",kernelFunc:LKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,u=mu(l,i.shape,a,1,o),c=new AKe(u);return n.runWebGLProgram(c,[s,i],"float32")}const VKe={kernelName:qA,backendName:"webgl",kernelFunc:zKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UKe=Ld+`
  return cos(x);
`,WKe=$t({opSnippet:UKe}),jKe={kernelName:qg,backendName:"webgl",kernelFunc:WKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GKe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,HKe=$t({opSnippet:GKe}),qKe={kernelName:Kg,backendName:"webgl",kernelFunc:HKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KKe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,u]=e,[c]=n,[h,f]=r;this.outputShape=[c,h,f,u];const d=s==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,v]=h>1?[`${(a-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,x,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${x};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${d} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XKe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new KKe(s.shape,i.shape,a,l,u);return n.runWebGLProgram(c,[s,i,o],"float32")},YKe={kernelName:XA,backendName:"webgl",kernelFunc:XKe};var qm;(function(t){t.Prod="*",t.Sum="+"})(qm||(qm={}));class rB{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===qm.Prod?"1.0":"0.0",a=r?o:`getX(${sB(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=s?`end != ${l-1}`:"end != 0",c=s?"end + 1":"end - 1"):(u=s?`end + pow2 < ${l}`:"end >= pow2",c=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${sn(i)} coords = getOutputCoords();
        int end = ${iB(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${iB(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${sB(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function sB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function iB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(t,e,n,r,s,i){const o=e.shape.length,a=Nn([r],o);let l=e;a!=null&&(l=Yn({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=Vn(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let h=ri({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(c))-1;f++){const d=new rB(t,l.shape,!1,i),p=[[f]],m=h;h=n.runWebGLProgram(d,[h],h.dtype,p),n.disposeIntermediateTensorInfo(m)}if(s){const f=new rB(t,l.shape,s,i),d=h;h=n.runWebGLProgram(f,[h],h.dtype),n.disposeIntermediateTensorInfo(d)}if(a!=null){const f=gu(a),d=Yn({inputs:{x:h},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),d}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return gQ(qm.Prod,s,n,i,o,a)}const JKe={kernelName:KA,backendName:"webgl",kernelFunc:QKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return gQ(qm.Sum,s,n,i,o,a)}const eXe={kernelName:e2,backendName:"webgl",kernelFunc:ZKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=YY(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(i),c=mGe(l,u,o,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const nXe={kernelName:YA,backendName:"webgl",kernelFunc:tXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rXe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],u=o==="NHWC"?s.shape[2]:s.shape[3],c=o==="NHWC"?s.shape[3]:s.shape[1],h=l*i,f=u*i,d=c/(i*i),p=o==="NHWC"?[a,h,f,d]:[a,d,h,f],m=new rXe(p,i,o);return n.runWebGLProgram(m,[s],s.dtype)}const iXe={kernelName:QA,backendName:"webgl",kernelFunc:sXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yQ{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=zs(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(s?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vQ{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=zs(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,h=e.filterWidth,f=h;let d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<h;y++)d+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;d+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<h;y++)d+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(f+1)/2;y++){const v=y*2;if(d+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<h&&(a%2===1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?d+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<h)){const b=a%2===0?E7(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1&&(d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                      xTexelC${v} = getX(batch, xR, xCOffset, d1);
                      xTexelC${v}Ready = 1;
                    }
                    `),d+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                  `):b===1?d+=`
                    xC${v+1} = xTexelC${v};
                    `:d+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<h&&(a%2===1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<h&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<h&&(d+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<h&&(d+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<h&&(d+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  `,d+=`
      }
    `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),P(Br(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=wr(s.shape,i.shape,o,c,a,u,!0);let f;re().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?f=new vQ(h):f=new yQ(h);const d=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(f,[s,i],"float32",d)}const aXe={kernelName:t2,backendName:"webgl",kernelFunc:oXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lXe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class uXe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,h=wr(s.shape,c,o,a,l,u,!0),f=new lXe(h);return n.runWebGLProgram(f,[s,i],"float32")}const hXe={kernelName:JA,backendName:"webgl",kernelFunc:cXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fXe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,h=wr(c,i.shape,o,a,l,u,!0),f=new uXe(h);return n.runWebGLProgram(f,[s,i],"float32")}const dXe={kernelName:ZA,backendName:"webgl",kernelFunc:fXe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pXe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mXe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=ie(r.shape),o=Ae({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new pXe(i),l=n.runWebGLProgram(a,[o],o.dtype),u=Ae({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const gXe={kernelName:F7,backendName:"webgl",kernelFunc:mXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yXe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:h,left:f}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${h}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=My(s.shape,i.shape,o,a,"NHWC",l);let c;const h=new yXe(u);c=n.runWebGLProgram(h,[s,i],"float32");const f=Ae({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const xXe={kernelName:n2,backendName:"webgl",kernelFunc:vXe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bXe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=HO(s,i.length);KO(o.length,l,i);const{path:u,steps:c}=XO(a,l),h=c.length;let f=null,d=o.length;const p=[];for(let m=0;m<h;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=qO(d,l[g]);let b;YO(y)?b=i[g]:(b=Yn({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);Ct(b.shape,x)||(b=Ae({inputs:{x:b},backend:n,attrs:{shape:x}}),p.push(b)),f===null?f=b:(f=LR({inputs:{a:b,b:f},backend:n}),p.push(f))}m<h-1&&(u[m]>=0&&(f=ES({inputs:{x:f},backend:n,attrs:{axis:u[m]-(o.length-d),keepDims:!1}}),p.push(f)),d--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const wXe={kernelName:e3,backendName:"webgl",kernelFunc:bXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SXe="return (x >= 0.0) ? x : (exp(x) - 1.0);",kXe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,IXe=$t({opSnippet:SXe,packedOpSnippet:kXe}),CXe={kernelName:Yg,backendName:"webgl",kernelFunc:IXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TXe="return (b >= 1.0) ? a : a * (b + 1.0);",$Xe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,NXe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s0($Xe,r.shape,s.shape):new td(TXe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},EXe={kernelName:t3,backendName:"webgl",kernelFunc:NXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Xe=`
  return vec4(equal(a, b));
`,AXe="return float(a == b);",OXe=Vr({opSnippet:AXe,packedOpSnippet:_Xe,dtype:"bool",cpuKernelImpl:vGe}),RXe={kernelName:r2,backendName:"webgl",kernelFunc:OXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DXe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${BO};
  float a1 = ${zO};
  float a2 = ${VO};
  float a3 = ${UO};
  float a4 = ${WO};
  float a5 = ${jO};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,PXe=$t({opSnippet:DXe}),MXe={kernelName:Qg,backendName:"webgl",kernelFunc:PXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FXe=Ld+`
  return exp(x);
`,LXe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xQ=$t({opSnippet:FXe,packedOpSnippet:LXe,cpuKernelImpl:xGe,dtype:"float32"}),BXe={kernelName:Jg,backendName:"webgl",kernelFunc:xQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NN(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(P(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Ae({inputs:{x:i},backend:r,attrs:{shape:a}})}const zXe={kernelName:s2,backendName:"webgl",kernelFunc:NN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oB="return exp(x) - 1.0;",VXe=$t({opSnippet:oB,packedOpSnippet:oB,cpuKernelImpl:bGe}),UXe={kernelName:Zg,backendName:"webgl",kernelFunc:VXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aB{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bQ(t,e,n){const r=n.texData.get(t.dataId),s=ie(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=Ae({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,u=new aB("real",l,e),c=new aB("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,h,"float32"),d=n.runWebGLProgram(c,h,"float32"),p=wu({inputs:{real:f,imag:d},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d);const m=Ae({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WXe(t){const{inputs:e,backend:n}=t,{input:r}=e;return bQ(r,!1,n)}const jXe={kernelName:n3,backendName:"webgl",kernelFunc:WXe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GXe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o0(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Pg(s),i==="string"){const o=ms(i,ie(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new GXe(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const HXe={kernelName:r3,backendName:"webgl",kernelFunc:o0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qXe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KXe={kernelName:s3,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new qXe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lB="return floor(x);",XXe=$t({opSnippet:lB,packedOpSnippet:lB,cpuKernelImpl:wGe}),YXe={kernelName:ey,backendName:"webgl",kernelFunc:XXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QXe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,JXe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,ZXe=Vr({opSnippet:QXe,packedOpSnippet:JXe,dtype:"int32"}),eYe={kernelName:ty,backendName:"webgl",kernelFunc:ZXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tYe{constructor(e){this.variableNames=["A"];const n=bs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nYe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=bs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rYe={kernelName:O$,backendName:"webgl",kernelFunc:sYe};let kh;function sYe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,u]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[u,l],h=[u,l,i];(a||o)&&(kh==null&&(kh=document.createElement("canvas").getContext("2d")),kh.canvas.width=l,kh.canvas.height=u,kh.drawImage(s,0,0,l,u),s=kh.canvas);const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=pi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),s);const d=re().getBool("WEBGL_PACK")?new nYe(h):new tYe(h),p=n.runWebGLProgram(d,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f,activation:d,leakyreluAlpha:p}=r,m=Ka(c),g=wr(s.shape,i.shape,l,h,u,f,!1,m);let y;const v=[];if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=pQ({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:d,preluActivationWeights:a,leakyreluAlpha:p});else if(re().getBool("WEBGL_CONV_IM2COL")&&s.shape[0]===1)y=mQ({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:d,preluActivationWeights:a,leakyreluAlpha:p});else{const x=o!=null,w=a!=null,S=d==="leakyrelu",k=d?$S(d,!1):null,I=new dQ(g,x,k,w,S),T=[s,i],N=(A,R)=>{if(R==="NCHW"&&A.shape.length===1&&A.shape[0]!==1){const O=Ae({inputs:{x:A},backend:n,attrs:{shape:[A.shape[0],1,1]}});return v.push(O),O}return A};if(x&&T.push(N(o,c)),w&&T.push(N(a,c)),S){const A=n.makeTensorInfo([],"float32",pu(p,"float32"));T.push(A),v.push(A)}y=n.runWebGLProgram(I,T,"float32")}const b=Ae({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const oYe={kernelName:Rx,backendName:"webgl",kernelFunc:iYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:h,activation:f,leakyreluAlpha:d}=r,p=[];let m=c;m==null&&(m=[1,1]),P(Br(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=wr(s.shape,i.shape,l,m,u,h,!0),y=re().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=f?$S(f,y):null,b=[s,i],x=o!=null,w=a!=null,S=f==="leakyrelu";if(x&&b.push(o),w&&b.push(a),S){const N=n.makeTensorInfo([],"float32",pu(d,"float32"));b.push(N),p.push(N)}let k;y?k=new vQ(g,x,v,w,S):k=new yQ(g,x,v,w,S);const I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(k,b,"float32",I);return p.forEach(N=>n.disposeIntermediateTensorInfo(N)),T}const lYe={kernelName:Dx,backendName:"webgl",kernelFunc:aYe};class uYe{constructor(e,n,r){this.sliceDim=e,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;const s=sn(n.length),i=sn(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${s} strides = ${s}(${this.strides});
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${o};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cYe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=ie(r.shape),[l,u,c,h]=W3(r,s),f=Ae({inputs:{x:s},backend:n,attrs:{shape:[u,o]}}),d=Ae({inputs:{x:r},backend:n,attrs:{shape:[ie(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const y=n.readSync(s.dataId),v=n.bufferSync(r),b=SGe(y,v,r.dtype,u,o,c,h,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const p=new uYe(o,h,[u,c]),m=n.runWebGLProgram(p,[d,f],d.dtype),g=Ae({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),g}const hYe={kernelName:i3,backendName:"webgl",kernelFunc:cYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fYe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=sn(this.rank),s=dYe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function dYe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=pt(o,s.shape)[0];if(re().get("DEBUG")){const v=n.readSync(i.dataId),b=s.shape[l];for(let x=0;x<v.length;++x){const w=v[x];P(w<=b-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${b-1}]`)}}const u=JO(s,i,l,a),c=ie(i.shape),h=[],f=Ae({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),d=Ae({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});h.push(f),h.push(d);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const v=n.bufferSync(d),b=n.bufferSync(f),x=kGe(b,v,p);return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,x.dtype,x.values)}const m=new fYe(f.shape,p),g=n.runWebGLProgram(m,[f,d],f.dtype);h.push(g);const y=Ae({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const pYe={kernelName:o2,backendName:"webgl",kernelFunc:wQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mYe="return float(a > b);",gYe=`
  return vec4(greaterThan(a, b));
`,yYe=Vr({opSnippet:mYe,packedOpSnippet:gYe,cpuKernelImpl:IGe,dtype:"bool"}),vYe={kernelName:a2,backendName:"webgl",kernelFunc:yYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xYe="return float(a >= b);",bYe=`
  return vec4(greaterThanEqual(a, b));
`,wYe=Vr({opSnippet:xYe,packedOpSnippet:bYe,dtype:"bool",cpuKernelImpl:CGe}),SYe={kernelName:ny,backendName:"webgl",kernelFunc:wYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kYe(t){const{inputs:e,backend:n}=t,{input:r}=e;return bQ(r,!0,n)}const IYe={kernelName:o3,backendName:"webgl",kernelFunc:kYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CYe="return float(!isnan(x) && !isinf(x));",TYe=$t({opSnippet:CYe,dtype:"bool"}),$Ye={kernelName:sy,backendName:"webgl",kernelFunc:TYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NYe="return float(isinf(x));",EYe=$t({opSnippet:NYe,dtype:"bool"}),_Ye={kernelName:iy,backendName:"webgl",kernelFunc:EYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AYe="return float(isnan(x));",OYe=$t({opSnippet:AYe,dtype:"bool"}),RYe={kernelName:oy,backendName:"webgl",kernelFunc:OYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DYe="return float(a < b);",PYe=`
  return vec4(lessThan(a, b));
`,MYe=Vr({opSnippet:DYe,packedOpSnippet:PYe,cpuKernelImpl:TGe,dtype:"bool"}),FYe={kernelName:u2,backendName:"webgl",kernelFunc:MYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LYe="return float(a <= b);",BYe=`
  return vec4(lessThanEqual(a, b));
`,zYe=Vr({opSnippet:LYe,packedOpSnippet:BYe,cpuKernelImpl:$Ge,dtype:"bool"}),VYe={kernelName:c2,backendName:"webgl",kernelFunc:zYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UYe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=NGe(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const WYe={kernelName:l3,backendName:"webgl",kernelFunc:UYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jYe=Ld+`
  return x < 0.0 ? 0./0. : log(x);
`,GYe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,HYe=$t({opSnippet:jYe,packedOpSnippet:GYe,cpuKernelImpl:EGe}),qYe={kernelName:ay,backendName:"webgl",kernelFunc:HYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KYe=Ld+`
  return log(1.0 + x);
`,XYe=$t({opSnippet:KYe}),YYe={kernelName:ly,backendName:"webgl",kernelFunc:XYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QYe="return float(a >= 1.0 && b >= 1.0);",JYe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,ZYe=Vr({opSnippet:QYe,packedOpSnippet:JYe,dtype:"bool"}),eQe={kernelName:h2,backendName:"webgl",kernelFunc:ZYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tQe="return float(!(x >= 1.0));",nQe=$t({opSnippet:tQe}),rQe={kernelName:f2,backendName:"webgl",kernelFunc:nQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQe="return float(a >= 1.0 || b >= 1.0);",iQe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,oQe=Vr({opSnippet:sQe,packedOpSnippet:iQe,dtype:"bool"}),aQe={kernelName:d2,backendName:"webgl",kernelFunc:oQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lQe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uQe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,u=re().getBool("WEBGL_PACK_NORMALIZATION")?new uQe(s.shape,i,o,a,l):new lQe(s.shape,i,o,a,l);return n.runWebGLProgram(u,[s],s.dtype)},hQe={kernelName:p2,backendName:"webgl",kernelFunc:cQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fQe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,h=new fQe(s.shape,a,l,u,c);return n.runWebGLProgram(h,[s,i,o],s.dtype)},pQe={kernelName:u3,backendName:"webgl",kernelFunc:dQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mQe(t,e,n,r){const s=ie(e),o=ie(t.shape)/s,a=Ae({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=ch(a,t.dtype,"max",r),u=Ae({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=pt(i,s.shape);let u=l;const c=Nn(u,a),h=c!=null,f=n.shouldExecuteOnCPU([s]);let d=s;if(h){if(f){const b=n.texData.get(d.dataId).values,x=new Array(a);for(let k=0;k<x.length;k++)x[k]=s.shape[c[k]];const w=FR(b,s.shape,s.dtype,c,x);d=n.makeTensorInfo(x,s.dtype);const S=n.texData.get(d.dataId);S.values=w}else d=NS(s,c,n);u=Vn(u.length,a)}zr("max",u,a);const[p,m]=Sr(d.shape,u);let g=p;o&&(g=zn(p,l));let y;if(f){const b=n.texData.get(d.dataId).values,x=_Ge(b,ie(m),g,s.dtype);y=n.makeTensorInfo(g,s.dtype);const w=n.texData.get(y.dataId);w.values=x}else y=mQe(d,m,g,n);return h&&n.disposeIntermediateTensorInfo(d),y}const gQe={kernelName:m2,backendName:"webgl",kernelFunc:SQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yQe=tQ+`
  return max(a, b);
`,vQe=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+TS+`
  return result;
`,xQe=Vr({opSnippet:yQe,packedOpSnippet:vQe,cpuKernelImpl:AGe}),bQe={kernelName:uy,backendName:"webgl",kernelFunc:xQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;n0(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;P(Br(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ro(s.shape,i,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))return ri({inputs:{x:s},backend:n});const h=new Hm(c,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const SQe={kernelName:g2,backendName:"webgl",kernelFunc:wQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],h=qa(s.shape,i,o,c,a,u,l),f=new BR(h,"max",!1);return n.runWebGLProgram(f,[s],s.dtype)}const IQe={kernelName:y2,backendName:"webgl",kernelFunc:kQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CQe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class TQe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=u-1-e.padInfo.top,d=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${f}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Qe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,h=[1,1,1],f=qa(o.shape,a,l,h,u,c),d=new BR(f,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),m=new TQe(f),g=n.runWebGLProgram(m,[s,p],o.dtype);return n.disposeIntermediateTensorInfo(p),g}const NQe={kernelName:h3,backendName:"webgl",kernelFunc:$Qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;n0([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,f=ro(a.shape,l,u,1,c,h),d=!0,p=new Hm(f,"max",d),m=n.runWebGLProgram(p,[a],a.dtype),g=new CQe(f),y=n.runWebGLProgram(g,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const _Qe={kernelName:c3,backendName:"webgl",kernelFunc:EQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQe(t,e,n,r){let s=new Hm(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new Hm(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OQe={kernelName:f3,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;P(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];P(Br(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ro(r.shape,s,i,u,o),[h,f]=AQe(r,a,c,l);return[h,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RQe(t,e,n,r){const s=ie(e),o=ie(t.shape)/s,a=Ae({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=ch(a,"float32","mean",r),u=Ae({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DQe={kernelName:v2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=pt(i,r.shape);let u=l;const c=Nn(u,a),h=c!=null,f=o.shouldExecuteOnCPU([r]),d=[];let p=r;if(h){if(f){const x=o.texData.get(p.dataId).values,w=new Array(a);for(let I=0;I<w.length;I++)w[I]=r.shape[c[I]];const S=FR(x,r.shape,r.dtype,c,w);p=o.makeTensorInfo(w,r.dtype);const k=o.texData.get(p.dataId);k.values=S}else p=NS(r,c,o);d.push(p),u=Vn(u.length,a)}zr("sum",u,a);const[m,g]=Sr(p.shape,u);let y=m;s&&(y=zn(m,l));const v=RQe(p,g,y,o);for(const b of d)o.disposeIntermediateTensorInfo(b);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=pt(i,s.shape);let u=l;const c=Nn(u,a);let h=s;c!=null&&(h=Yn({inputs:{x:s},backend:n,attrs:{perm:c}}),u=Vn(u.length,s.shape.length)),zr("min",u,a);const[f,d]=Sr(h.shape,u),p=ie(d),m=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}}),g=ch(m,m.dtype,"min",n);let y;if(o){const v=zn(f,l);y=Ae({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Ae({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(h),y}const MQe={kernelName:x2,backendName:"webgl",kernelFunc:PQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FQe=tQ+`
  return min(a, b);
`,LQe=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+TS+`
  return result;
`,BQe=Vr({opSnippet:FQe,packedOpSnippet:LQe,cpuKernelImpl:OGe}),zQe={kernelName:cy,backendName:"webgl",kernelFunc:BQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VQe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,h)=>c[0]+e[h]+c[1]);const s=e.length,i=sn(s),o=n.map(c=>c[0]).join(","),a=n.map((c,h)=>c[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),u=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UQe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,i=sn(s),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=ps("rc",s),u=ps("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${u.slice(-2).join()})`,f=r==="reflect"?0:1;let d="";if(s===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;d=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${h});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${h});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;d=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${h});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${h});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${h});
          ${l[s-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WQe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UQe(r.shape,s,i):new VQe(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},jQe={kernelName:b2,backendName:"webgl",kernelFunc:WQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GQe=`if (b == 0.0) return NAN;
  return mod(a, b);`,HQe=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+TS+`
  return result;
`,qQe=Vr({opSnippet:GQe,packedOpSnippet:HQe}),KQe={kernelName:hy,backendName:"webgl",kernelFunc:qQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XQe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQe=`
if (a == b) {
  return 1.0;
};
return a / b;`,QQe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,kQ=Vr({opSnippet:YQe,packedOpSnippet:QQe,checkOutOfBounds:!0}),JQe={kernelName:Xg,backendName:"webgl",kernelFunc:kQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uB="return a - b;",IQ=Vr({opSnippet:uB,packedOpSnippet:uB,supportsComplex:!0,cpuKernelImpl:XGe}),ZQe={kernelName:$y,backendName:"webgl",kernelFunc:IQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=pt([i],s.shape),a=SQ({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=zn(a.shape,o),u=Ae({inputs:{x:a},backend:n,attrs:{shape:l}}),c=IQ({inputs:{a:s,b:u},backend:n}),h=xQ({inputs:{x:c},backend:n}),f=ES({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:!1}}),d=Ae({inputs:{x:f},backend:n,attrs:{shape:l}}),p=kQ({inputs:{a:h,b:d},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}const eJe={kernelName:L2,backendName:"webgl",kernelFunc:CQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:CQ({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=l.shape[0],c=l.shape[1],h=new XQe(u,c,i),f=[[o]],d=n.runWebGLProgram(h,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),d}const nJe={kernelName:d3,backendName:"webgl",kernelFunc:tJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJe=io+`
  return -x;
`,sJe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function iJe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=DGe(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return re().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new tc(r.shape,sJe):s=new _a(r.shape,rJe),n.runWebGLProgram(s,[r],r.dtype)}const oJe={kernelName:w2,backendName:"webgl",kernelFunc:iJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJe=IO;function lJe(t){hi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),{selectedIndices:h}=aJe(u,c,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const uJe={kernelName:p3,backendName:"webgl",kernelFunc:lJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJe=CO;function hJe(t){hi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(s.dataId),h=n.readSync(i.dataId),{selectedIndices:f,validOutputs:d}=cJe(c,h,o,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const fJe={kernelName:m3,backendName:"webgl",kernelFunc:hJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJe=TO;function pJe(t){hi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(s.dataId),h=n.readSync(i.dataId),f=o,d=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=dJe(c,h,f,d,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const mJe={kernelName:g3,backendName:"webgl",kernelFunc:pJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gJe{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yJe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{depth:i,onValue:o,offValue:a}=r,l=ie(s.shape),u=new gJe(l,i,o,a),c=Ae({inputs:{x:s},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(u,[c],s.dtype);n.disposeIntermediateTensorInfo(c);const f=[...s.shape,i],d=Ae({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),d},vJe={kernelName:I2,backendName:"webgl",kernelFunc:yJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hb(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=i0({inputs:{input:r},backend:n}),i=hb({inputs:{x:s},backend:n}),o=_S({inputs:{input:r},backend:n}),a=hb({inputs:{x:o},backend:n}),l=wu({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return o0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const xJe={kernelName:V2,backendName:"webgl",kernelFunc:hb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=i0({inputs:{input:r},backend:n}),i=TQ({inputs:{x:s},backend:n}),o=_S({inputs:{input:r},backend:n}),a=hb({inputs:{x:o},backend:n}),l=wu({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return o0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const bJe={kernelName:k2,backendName:"webgl",kernelFunc:TQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return NN({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{no(i,c.shape,"All tensors passed to stack must have matching shapes"),P(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const h=NN({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(h),h}),u=fQ({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const SJe={kernelName:C2,backendName:"webgl",kernelFunc:wJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kJe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const s=e.length,i=sn(s),o=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IJe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,i=sn(s),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=ps("rc",s),u=ps("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${c}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${c}) {`],d=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=s===1?2:4;m<g;m++)p+=`
        ${f[m]}
        if (${d}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${h});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Q=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(ie(s.shape)===0){const u=i.map((c,h)=>c[0]+s.shape[h]+c[1]);return o0({backend:n,attrs:{shape:u,value:o,dtype:s.dtype}})}const a=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new IJe(s.shape,i,o):new kJe(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},CJe={kernelName:T2,backendName:"webgl",kernelFunc:$Q};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TJe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,$Je=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+TS+`
  return result;
`,NJe=Vr({opSnippet:TJe,packedOpSnippet:$Je}),EJe={kernelName:dy,backendName:"webgl",kernelFunc:NJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Je(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],u=pt(i,s.shape);let c=u;const h=Nn(c,a);let f=s;h!=null&&(f=Yn({inputs:{x:s},backend:n,attrs:{perm:h}}),c=Vn(c.length,a),l.push(f)),zr("prod",c,a);let d;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:y}=MGe(f.shape,f.dtype,p,c);d=n.makeTensorInfo(g,y,m)}else{const[p,m]=Sr(f.shape,c),g=ie(m),y=Ae({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),v=L3(s.dtype),b=ch(y,v,"prod",n);d=Ae({inputs:{x:b},backend:n,attrs:{shape:p}}),l.push(y),l.push(b)}if(o){l.push(d);const p=zn(d.shape,u);d=Ae({inputs:{x:d},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const AJe={kernelName:N2,backendName:"webgl",kernelFunc:_Je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NQ=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=FGe(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},OJe={kernelName:y3,backendName:"webgl",kernelFunc:NQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJe="return 1.0 / x;",DJe=$t({opSnippet:RJe}),PJe={kernelName:py,backendName:"webgl",kernelFunc:DJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MJe=io+`
  return (x < 0.0) ? 0.0 : x;
`,FJe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,LJe=$t({opSnippet:MJe,packedOpSnippet:FJe}),BJe={kernelName:my,backendName:"webgl",kernelFunc:LJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zJe=io+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,VJe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,UJe=$t({opSnippet:zJe,packedOpSnippet:VJe}),WJe={kernelName:gy,backendName:"webgl",kernelFunc:UJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jJe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let f;i?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/h[0]},
          ${c[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GJe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let f;i?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/h[0]},
          ${c[1]/h[1]},
          ${c[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HJe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=re().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new GJe(s.shape,l,u,i,o):new jJe(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],"float32")}const qJe={kernelName:A2,backendName:"webgl",kernelFunc:HJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KJe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],h=l[1]/u[1],f=1/c,d=1/h,p=Math.ceil(f)*2+2,m=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${h});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XJe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new KJe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const YJe={kernelName:b3,backendName:"webgl",kernelFunc:XJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QJe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],f=s?"0.5":"0.0";let d;i?d="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/h[0]},
          ${c[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JJe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],f=s?"0.5":"0.0";let d;i?d="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/h[0]},
          ${c[1]/h[1]},
          ${c[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=re().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new JJe(s.shape,l,u,i,o):new QJe(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],s.dtype)}const eZe={kernelName:_2,backendName:"webgl",kernelFunc:ZJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tZe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],h=l[1]/u[1],f=1/c,d=1/h,p=Math.ceil(f)*2+2,m=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${h});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new tZe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const rZe={kernelName:x3,backendName:"webgl",kernelFunc:nZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sZe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=sn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iZe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=ps("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=sn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${u(s.slice())};
          }
          if(${o}) {
            result.b = ${c(s.slice())};
            if(${i}) {
              result.a = ${h(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function h(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const m=e.map((v,b)=>d(b,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function d(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=pt(i,s.shape);if(o===0)return ri({inputs:{x:s},backend:n});const l=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iZe(s.shape,a):new sZe(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const aZe={kernelName:O2,backendName:"webgl",kernelFunc:oZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lZe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uZe={kernelName:M3,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new lZe(r.shape,i),[u,c]=MO(o,r.shape[1],r.shape[2]),h=[[u,c,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cZe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,hZe=$t({opSnippet:cZe}),fZe={kernelName:yy,backendName:"webgl",kernelFunc:hZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dZe="return inversesqrt(x);",pZe=$t({opSnippet:dZe,cpuKernelImpl:LGe}),mZe={kernelName:vy,backendName:"webgl",kernelFunc:pZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EQ{constructor(e,n,r,s,i,o,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=sn(i.length),u=sn(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const h=`getIndices(${c})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const d=`getUpdates(${f})`,p=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${p};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${d};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=Py(i,s,o),f=[h/u,u];if(h===0)return n.makeTensorInfo(o,s.dtype);const d=Ae({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=Ae({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new EQ(l,a,d.shape.length,p.shape.length,c,f),y=n.runWebGLProgram(g,[p,d,m],p.dtype),v=Ae({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const yZe={kernelName:w3,backendName:"webgl",kernelFunc:gZe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vZe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=re().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new vZe(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const bZe={kernelName:S3,backendName:"webgl",kernelFunc:xZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wZe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);s=l.join(),i=u.join()}const o=sn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new wZe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],ti(s.dtype,i.dtype))}const kZe={kernelName:R2,backendName:"webgl",kernelFunc:SZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IZe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${uS};
  float scale = ${cS};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,CZe=$t({opSnippet:IZe}),TZe={kernelName:xy,backendName:"webgl",kernelFunc:CZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ze=Ld+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,NZe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EZe=$t({opSnippet:$Ze,packedOpSnippet:NZe,cpuKernelImpl:zGe}),_Ze={kernelName:ky,backendName:"webgl",kernelFunc:EZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AZe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,OZe=$t({opSnippet:AZe}),RZe={kernelName:Sy,backendName:"webgl",kernelFunc:OZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZe=Ld+`
  return sin(x);
`,PZe=$t({opSnippet:DZe}),MZe={kernelName:by,backendName:"webgl",kernelFunc:PZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FZe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,LZe=$t({opSnippet:FZe}),BZe={kernelName:wy,backendName:"webgl",kernelFunc:LZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zZe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,VZe=$t({opSnippet:zZe}),UZe={kernelName:Iy,backendName:"webgl",kernelFunc:VZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WZe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;P(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((y,v)=>y*v),l=[[0,0]];l.push(...o);for(let y=1+i.length;y<s.shape.length;++y)l.push([0,0]);const u=[],c=$Q({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),h=Wy(c.shape,i,a,!1),f=jy(h.length,i.length,!1),d=Gy(c.shape,i,a,!1),p=Ae({inputs:{x:c},backend:n,attrs:{shape:h}}),m=Yn({inputs:{x:p},backend:n,attrs:{perm:f}}),g=Ae({inputs:{x:m},backend:n,attrs:{shape:d}});return u.push(c),u.push(p),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},jZe={kernelName:M2,backendName:"webgl",kernelFunc:WZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GZe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[h,f,d,p,m]=UGe(a,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],s.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const HZe={kernelName:k3,backendName:"webgl",kernelFunc:GZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qZe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,h]=WGe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const KZe={kernelName:I3,backendName:"webgl",kernelFunc:qZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XZe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=JY(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const YZe={kernelName:C3,backendName:"webgl",kernelFunc:XZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=JY(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const JZe={kernelName:T3,backendName:"webgl",kernelFunc:QZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZZe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:f}=Py(i,s,a),d=!1;if(i.dtype==="string"){const y=n.bufferSync(s),v=n.bufferSync(i),b=Kl(n.readSync(o.dataId)[0]),x=BGe(y,v,a,f,c,u,l,h,b,d);return n.makeTensorInfo(a,x.dtype,x.values)}const p=new EQ(u,l,s.shape.length,i.shape.length,h,[f,1],d),m=n.runWebGLProgram(p,[i,s,o],i.dtype),g=Ae({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const eet={kernelName:$3,backendName:"webgl",kernelFunc:ZZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tet(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=pt(o,s.shape)[0],l=QO(s,i,a),u=s.shape.length,c=new Array(u).fill(0),h=s.shape.slice();return l.map(f=>{const d=[...h];d[a]=f;const p=Bd({inputs:{x:s},backend:n,attrs:{begin:c,size:d}});return c[a]+=f,p})}const net={kernelName:F2,backendName:"webgl",kernelFunc:tet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cB="return sqrt(x);",ret=$t({opSnippet:cB,packedOpSnippet:cB,cpuKernelImpl:jGe}),set={kernelName:Cy,backendName:"webgl",kernelFunc:ret};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iet="return x * x;",oet=$t({opSnippet:iet}),aet={kernelName:N3,backendName:"webgl",kernelFunc:oet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hB="return (a - b) * (a - b);",uet=Vr({opSnippet:hB,packedOpSnippet:hB}),cet={kernelName:Ty,backendName:"webgl",kernelFunc:uet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function het({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=io+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new _a(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const fet={kernelName:Ay,backendName:"webgl",kernelFunc:het};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class det{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=sn(r.length),o=sn(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pet(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:f}=r,{finalShapeSparse:d,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=K3(s.shape,i,o,a,l,u,c,h,f);let w;if(m)w=Ae({inputs:{x:s},backend:n,attrs:{shape:p}});else if(g||y){P(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const k=G3(v,b,x),I=Bd({inputs:{x:s},backend:n,attrs:{begin:v,size:k}});w=Ae({inputs:{x:I},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(I)}else if(n.shouldExecuteOnCPU([s])){const I=n.readSync(s.dataId),T=dt(s.shape,s.dtype,I),N=GGe(d,T,x,v);w=n.makeTensorInfo(p,s.dtype,N.values)}else{const I=new det(v,x,d);w=n.runWebGLProgram(I,[s],s.dtype)}const S=Ae({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),S}const met={kernelName:E3,backendName:"webgl",kernelFunc:pet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function get(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=e,f=n.readSync(c.dataId),d=n.readSync(h.dataId),[p,m]=HGe(f,d,s,i,o,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(h.shape,"int32",m)]}const yet={kernelName:_3,backendName:"webgl",kernelFunc:get};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vet(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,h]=qGe(a,l,s),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const xet={kernelName:A3,backendName:"webgl",kernelFunc:vet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bet(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=KGe(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const wet={kernelName:O3,backendName:"webgl",kernelFunc:bet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ket="return tan(x);",Iet=$t({opSnippet:ket}),Cet={kernelName:Ny,backendName:"webgl",kernelFunc:Iet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tet=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,$et=$t({opSnippet:Tet}),Net={kernelName:Ey,backendName:"webgl",kernelFunc:$et};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eet{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=sn(this.rank),i=_et(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function _et(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),u=s.dtype==="string"?l.map(f=>Kl(f)):l,c=dt(s.shape,s.dtype,u),h=YGe(c,i);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const o=new Eet(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const Aet={kernelName:_y,backendName:"webgl",kernelFunc:_Q};class Oet{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Ret{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eu(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function fB(t){let e=1;for(;e<t;)e*=2;return e}function Det(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=re().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=re().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=s.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([s])||c<a||i>l){const N=n.readSync(s.dataId),[A,R]=QGe(N,u,s.dtype,i,o);return[n.makeTensorInfo(A.shape,A.dtype,A.values),n.makeTensorInfo(R.shape,R.dtype,R.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,s.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[s,o0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const h=n.texData.get(s.dataId),f=h!==null&&h.isPacked,d=f?n.unpackTensor(s):s,m=ie(u)/c,g=Ae({inputs:{x:d},attrs:{shape:[m,c]},backend:n});f&&Eu(n,d);const y=fB(i),v=fB(c);let b=null;const x=()=>b===null?[g,g]:[g,b],w=(N,A,R)=>{const O=x(),M=new Oet(R),B=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[N],[A]],K=b;b=n.runWebGLProgram(M,O,"int32",B),Eu(n,K)};for(let N=1;N<y;N*=2){const A=N*2;for(let R=N;R>=1;R/=2)w(A,R,[m,v])}for(let N=v;N>y;N/=2){const A=x(),R=new Ret([m,N/2]),M=[[c],[b===null?1:0],[y]],z=b;b=n.runWebGLProgram(R,A,"int32",M),Eu(n,z);const B=y/2,K=B*2;for(let L=B;L>=1;L/=2)w(K,L,b.shape)}let S=b;b=Bd({inputs:{x:b},backend:n,attrs:{begin:0,size:[m,i]}}),Eu(n,S);let k=wQ({inputs:{x:g,indices:b},backend:n,attrs:{axis:1,batchDims:1}});Eu(n,g);const I=u.slice(0,-1);I.push(i),S=b,b=Ae({inputs:{x:b},attrs:{shape:I},backend:n}),Eu(n,S);const T=k;return k=Ae({inputs:{x:k},attrs:{shape:I},backend:n}),Eu(n,T),[k,b]}const Pet={kernelName:R3,backendName:"webgl",kernelFunc:Det};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Met{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fet(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=r,[c,h,f,d]=s.shape,[p,m]=u!=null?u:[h,f],g=[c,p,m,d],y=new Met(h,f,o,a,l,g);return n.runWebGLProgram(y,[s,i],"float32")}const Let={kernelName:D3,backendName:"webgl",kernelFunc:Fet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bet(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;n0(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:u}=JGe(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const zet={kernelName:P3,backendName:"webgl",kernelFunc:Bet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vet(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==i&&(u[c++]=o.shape[m]);const h=[],f=new Array(a).fill(0),d=o.shape.slice();d[i]=1;const p=new Array(l);for(let m=0;m<p.length;m++){f[i]=m;const g=Bd({inputs:{x:o},backend:n,attrs:{begin:f,size:d}}),y=Ae({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=y,h.push(g)}return h.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Uet={kernelName:B2,backendName:"webgl",kernelFunc:Vet};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wet{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,h=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let d="";i%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jet(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let u=0;const c=Nn([u],a);let h=s;c!=null&&(h=Yn({inputs:{x:s},backend:n,attrs:{perm:c}}),l.push(h),u=Vn(1,a)[0]);const f=jH(h.shape,u,o),d=ie([h.shape[u]]),p=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,d]}});l.push(p);const m=L3(s.dtype),g=(x,w,S,k,I)=>{const T=x.shape[0],N=x.shape[1],A=WH(N,I),R={windowSize:A,inSize:N,batchSize:T,numSegments:I},O=new Wet(R,w),M=n.compileAndRun(O,[x,S],k);if(l.push(M),M.shape[1]===I)return M;const z=NQ({backend:n,attrs:{start:0,stop:I,step:1,dtype:"float32"}}),B=_Q({inputs:{x:z},backend:n,attrs:{reps:[N/A]}});return l.push(z),l.push(B),g(M,w,B,k,I)},y=g(p,"unsortedSegmentSum",i,m,o),v=Ae({inputs:{x:y},backend:n,attrs:{shape:f}});let b=v;if(c!=null){l.push(v);const x=gu(c);b=Yn({inputs:{x:b},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const Get={kernelName:z2,backendName:"webgl",kernelFunc:jet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Het=[GHe,qHe,YHe,ZHe,tqe,sqe,oqe,lqe,fqe,pqe,yqe,bqe,kqe,$qe,_qe,Oqe,Dqe,Lqe,zqe,Uqe,Hqe,Zqe,tKe,rKe,uKe,hKe,mKe,THe,vKe,kKe,$Ke,RKe,PKe,FKe,BKe,VKe,jKe,qKe,YKe,JKe,eXe,nXe,iXe,aXe,hXe,dXe,gXe,xXe,wXe,CXe,EXe,RXe,MXe,BXe,zXe,UXe,jXe,HXe,KXe,YXe,eYe,rYe,oYe,lYe,hYe,pYe,vYe,SYe,CHe,IYe,wKe,$Ye,_Ye,RYe,NHe,FYe,VYe,WYe,qYe,YYe,eQe,rQe,aQe,hQe,pQe,gQe,bQe,SQe,IQe,NQe,_Qe,OQe,DQe,MQe,zQe,jQe,KQe,nJe,RHe,oJe,uJe,fJe,mJe,iKe,vJe,bJe,SJe,CJe,EJe,_He,AJe,OJe,oKe,JQe,PJe,BJe,WJe,PHe,qJe,YJe,eZe,rZe,aZe,uZe,fZe,mZe,yZe,bZe,kZe,TZe,_Ze,RZe,MZe,BZe,Qqe,eJe,UZe,jZe,HZe,KZe,YZe,JZe,eet,net,set,aet,cet,fet,met,yet,xet,wet,ZQe,UHe,Cet,Net,Aet,Pet,Let,WHe,zet,Uet,Get,xJe];for(const t of Het)L7(t);/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qet="/assets/vrikshasan.17a3a74b.webp",Ket="/assets/utkatasan.380390db.gif",Xet="/assets/bhujangasan.770e5923.gif",Yet="/assets/svanasan.8184aed4.gif",Ro={NOSE:0,LEFT_EYE:1,RIGHT_EYE:2,LEFT_EAR:3,RIGHT_EAR:4,LEFT_SHOULDER:5,RIGHT_SHOULDER:6,LEFT_ELBOW:7,RIGHT_ELBOW:8,LEFT_WRIST:9,RIGHT_WRIST:10,LEFT_HIP:11,RIGHT_HIP:12,LEFT_KNEE:13,RIGHT_KNEE:14,LEFT_ANKLE:15,RIGHT_ANKLE:16},Qet={nose:["left_ear","right_ear"],left_ear:["left_shoulder"],right_ear:["right_shoulder"],left_shoulder:["right_shoulder","left_elbow","left_hip"],right_shoulder:["right_elbow","right_hip"],left_elbow:["left_wrist"],right_elbow:["right_wrist"],left_hip:["left_knee","right_hip"],right_hip:["right_knee"],left_knee:["left_ankle"],right_knee:["right_ankle"]};function Jet(t,[e,n],[r,s],i){t.beginPath(),t.moveTo(e,n),t.lineTo(r,s),t.lineWidth=5,t.strokeStyle=i,t.stroke()}function Zet(t,e,n,r,s){t.beginPath(),t.arc(e,n,r,0,2*Math.PI),t.fillStyle=s,t.fill()}let nv="rgb(255,255,255)";const ett={Chair:0,Cobra:1,Dog:2,No_Pose:3,Shoulderstand:4,Traingle:5,Tree:6,Warrior:7};let dB,rv=!1;const ttt=Number(new Date);let LI;const ntt=()=>{const t=ae.exports.useRef(null),e=ae.exports.useRef(null),[n,r,s]=Ob($c),[i,o]=ae.exports.useState(1),[a,l]=ae.exports.useState(!1),[u,c]=ae.exports.useState(0),[h,f]=ae.exports.useState(0),[d,p]=ae.exports.useState(0),[m,g]=ae.exports.useState(0),[y,v]=ae.exports.useState("Tree"),[b,x]=ae.exports.useState(0),[w,S]=ae.exports.useState(0),[k,I]=ae.exports.useState(0),[T,N]=ae.exports.useState(0);ae.exports.useEffect(()=>{const j=(h-u)/1e3;rv&&p(j),(h-u)/1e3>m&&(g(j),i===1&&x(j),i===2&&S(j),i===3&&I(j),i===4&&N(j),LI={tree:b,chair:w,cobra:k,dog:T,warrior:0},console.log(LI),A())},[h]);const A=async()=>{await Aue(due(M9,`workout/${n.email}/poses/${ttt}`),LI)};ae.exports.useEffect(()=>{f(0),p(0),g(0)},[y]);function R(j,Q,Z){let oe=Ll(j,Q,1),fe=Ll(j,Z,1);return de(W(oe,.5),W(fe,.5))}function O(j,Q=2.5){let Z=R(j,Ro.LEFT_HIP,Ro.RIGHT_HIP),oe=R(j,Ro.LEFT_SHOULDER,Ro.RIGHT_SHOULDER),fe=Hf(_e(oe,Z)),le=R(j,Ro.LEFT_HIP,Ro.RIGHT_HIP);le=qn(le,1),le=uc(le,[1,17,2]);let ye=Ll(_e(j,le),0,0),Ce=Xi(Hf(ye,"euclidean",0));return fa(W(fe,Q),Ce)}function M(j){let Q=R(j,Ro.LEFT_HIP,Ro.RIGHT_HIP);Q=qn(Q,1),Q=uc(Q,[1,17,2]),j=_e(j,Q);let Z=O(j);return j=Ne(j,Z),j}function z(j){return j=M(qn(j,0)),H(j,[1,34])}const B=async()=>{const j={modelType:s4e.modelType.SINGLEPOSE_THUNDER},Q=await r4e(hs.MoveNet,j),Z=await UBe("https://models.s3.jp-tok.cloud-object-storage.appdomain.cloud/model.json");dB=setInterval(()=>{K(Q,Z)},100)},K=async(j,Q)=>{if(typeof t.current<"u"&&t.current!==null&&t.current.video.readyState===4){let Z=0;const oe=t.current.video,fe=await j.estimatePoses(oe),le=e.current.getContext("2d");le.clearRect(0,0,e.current.width,e.current.height);try{const ye=fe[0].keypoints;let Ce=ye.map(ce=>{if(ce.score>.4){if(!(ce.name==="left_eye"||ce.name==="right_eye")){Zet(le,ce.x,ce.y,8,"rgb(255,255,255)");let we=Qet[ce.name];try{we.forEach(ne=>{let Re=ne.toUpperCase();Jet(le,[ce.x,ce.y],[ye[Ro[Re]].x,ye[Ro[Re]].y],nv)})}catch{}}}else Z+=1;return[ce.x,ce.y]});if(Z>4){nv="rgb(255,255,255)";return}const ve=z(Ce);Q.predict(ve).array().then(ce=>{const we=ett[y];console.log(ce[0][we]),ce[0][we]>.97?(rv||(c(new Date(Date()).getTime()),rv=!0),f(new Date(Date()).getTime()),nv="rgb(0,255,0)"):(rv=!1,nv="rgb(255,255,255)")})}catch(ye){console.log(ye)}}};function L(){l(!0),B()}function V(){l(!1),clearInterval(dB)}return n?ue("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[D(Ef,{}),D("div",{className:"absolute pt-6 right-1/2",children:ue("span",{className:"mx-4",children:["Current Timer:"," ",ue("span",{className:"text-red-600 font-bold",children:[d,"s"]})]})}),D("div",{className:"absolute pt-6 left-1/2",children:ue("span",{className:"mx-4",children:["Previous Best:"," ",ue("span",{className:"text-green-600 font-bold",children:[m,"s"]})]})}),D("section",{className:"relative",children:D("div",{className:"mx-auto",children:D("div",{className:"pb-12 pt-20 md:pb-20",children:ue("div",{class:"flex border-b border-gray-500 dark:border-gray-700 justify-center",children:[D("button",{className:i===1?"h-10 px-4 py-2 -mb-px text-sm text-center text-blue-600 bg-transparent border-b-2 border-blue-500 sm:text-base dark:border-blue-400 dark:text-blue-300 whitespace-nowrap focus:outline-none":"h-10 px-4 py-2 -mb-px text-sm text-center text-gray-700 bg-transparent border-b-2 border-transparent sm:text-base dark:text-white whitespace-nowrap cursor-base focus:outline-none hover:border-gray-400",onClick:()=>{V(),v("Tree"),o(1),L()},children:"Vrikshasana"}),D("button",{className:i===2?"h-10 px-4 py-2 -mb-px text-sm text-center text-blue-600 bg-transparent border-b-2 border-blue-500 sm:text-base dark:border-blue-400 dark:text-blue-300 whitespace-nowrap focus:outline-none":"h-10 px-4 py-2 -mb-px text-sm text-center text-gray-700 bg-transparent border-b-2 border-transparent sm:text-base dark:text-white whitespace-nowrap cursor-base focus:outline-none hover:border-gray-400",onClick:()=>{V(),v("Chair"),o(2),L()},children:"Utkatasana"}),D("button",{className:i===3?"h-10 px-4 py-2 -mb-px text-sm text-center text-blue-600 bg-transparent border-b-2 border-blue-500 sm:text-base dark:border-blue-400 dark:text-blue-300 whitespace-nowrap focus:outline-none":"h-10 px-4 py-2 -mb-px text-sm text-center text-gray-700 bg-transparent border-b-2 border-transparent sm:text-base dark:text-white whitespace-nowrap cursor-base focus:outline-none hover:border-gray-400",onClick:()=>{V(),v("Cobra"),o(3)},children:"Bhujangasana"}),D("button",{className:i===4?"h-10 px-4 py-2 -mb-px text-sm text-center text-blue-600 bg-transparent border-b-2 border-blue-500 sm:text-base dark:border-blue-400 dark:text-blue-300 whitespace-nowrap focus:outline-none":"h-10 px-4 py-2 -mb-px text-sm text-center text-gray-700 bg-transparent border-b-2 border-transparent sm:text-base dark:text-white whitespace-nowrap cursor-base focus:outline-none hover:border-gray-400",onClick:()=>{V(),v("Dog"),o(4)},children:"Adho Mukha Svanasana"})]})})})}),D($_e,{width:"640px",height:"480px",id:"webcam",ref:t,style:{position:"absolute",left:20,top:125,padding:"0px"}}),D("canvas",{ref:e,id:"my-canvas",width:"640px",height:"480px",style:{position:"absolute",left:20,top:125,zIndex:1}}),i===1&&D("div",{children:D("img",{src:qet,alt:"Vrikshasan",width:"480px",height:"480px",style:{position:"absolute",right:40,top:125,padding:"0px"}})}),i===2&&D("div",{children:D("img",{src:Ket,alt:"Utkatasan",width:"480px",height:"480px",style:{position:"absolute",right:40,top:125,padding:"0px"}})}),i===3&&D("div",{children:D("img",{src:Xet,alt:"Bhujangasan",width:"480px",height:"480px",style:{position:"absolute",right:40,top:125,padding:"0px"}})}),i===4&&D("div",{children:D("img",{src:Yet,alt:"Svanasan",width:"480px",height:"480px",style:{position:"absolute",right:40,top:125,padding:"0px"}})})]}):ue("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[D(Ef,{}),D("main",{className:"flex-grow",children:D("section",{className:"bg-gradient-to-b from-gray-100 to-white",children:D("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:D("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:D("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-20",children:D("h1",{className:"h1",children:"Please sign in to start your workout"})})})})})})]})};function rtt(){return ue("section",{className:"relative",children:[D("div",{className:"absolute inset-0 bg-gray-100 pointer-events-none mb-16","aria-hidden":"true"}),D("div",{className:"absolute left-0 right-0 m-auto w-px p-px h-20 bg-gray-200 transform -translate-y-1/2"}),D("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6",children:ue("div",{className:"pt-12 md:pt-20",children:[ue("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-16",children:[D("h1",{className:"h2 mb-4",children:"Perform Yogasanas With AI"}),D("p",{className:"text-xl text-gray-600",children:"AasanAI is a Deep Learning-powered Web and Mobile application to help you during your yoga workouts"})]}),ue("div",{className:"md:grid md:grid-cols-12 md:gap-6",children:[ue("div",{className:"max-w-xl md:max-w-none md:w-full mx-auto md:col-span-7 lg:col-span-6 md:mt-6","data-aos":"fade-right",children:[ue("div",{className:"md:pr-4 lg:pr-12 xl:pr-16 mb-8",children:[D("h3",{className:"h3 mb-3",children:"An ecosystem for Yogasanas"}),D("p",{className:"text-xl text-gray-600",children:"AasanAI detects your Yogasana position and helps you perfect your posture by getting visual feedback"})]}),ue("div",{className:"mb-8 md:mb-0",children:[ue("a",{className:"flex items-center text-lg p-5 rounded border transition duration-300 ease-in-out mb-3 bg-white shadow-md border-gray-200 hover:shadow-lg",children:[ue("div",{children:[D("div",{className:"font-bold leading-snug tracking-tight mb-1",children:"Timer for each Aasana"}),D("div",{className:"text-gray-600",children:"A timer which keeps a track of your current and best times helps you gradually progress in your workout"})]}),D("div",{className:"flex justify-center items-center w-8 h-8 bg-white rounded-full shadow flex-shrink-0 ml-3",children:D("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.953 4.29a.5.5 0 00-.454-.292H6.14L6.984.62A.5.5 0 006.12.173l-6 7a.5.5 0 00.379.825h5.359l-.844 3.38a.5.5 0 00.864.445l6-7a.5.5 0 00.075-.534z"})})})]}),ue("a",{className:"flex items-center text-lg p-5 rounded border transition duration-300 ease-in-out mb-3 bg-white shadow-md border-gray-200 hover:shadow-lg",children:[ue("div",{children:[D("div",{className:"font-bold leading-snug tracking-tight mb-1",children:"Maintain your workout history"}),D("div",{className:"text-gray-600",children:"AasanAI maintains a history of your Yoga workout sessions thereby allowing you to improve gradually"})]}),D("div",{className:"flex justify-center items-center w-8 h-8 bg-white rounded-full shadow flex-shrink-0 ml-3",children:D("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.854.146a.5.5 0 00-.525-.116l-11 4a.5.5 0 00-.015.934l4.8 1.921 1.921 4.8A.5.5 0 007.5 12h.008a.5.5 0 00.462-.329l4-11a.5.5 0 00-.116-.525z",fillRule:"nonzero"})})})]}),ue("a",{className:"flex items-center text-lg p-5 rounded border transition duration-300 ease-in-out mb-3 bg-white shadow-md border-gray-200 hover:shadow-lg",children:[ue("div",{children:[D("div",{className:"font-bold leading-snug tracking-tight mb-1",children:"Participate in events and competitions"}),D("div",{className:"text-gray-600",children:"AasanAI aims to gamify this ecosystem to allow yoga events and competitions to take place virtually"})]}),D("div",{className:"flex justify-center items-center w-8 h-8 bg-white rounded-full shadow flex-shrink-0 ml-3",children:D("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:D("path",{d:"M11.334 8.06a.5.5 0 00-.421-.237 6.023 6.023 0 01-5.905-6c0-.41.042-.82.125-1.221a.5.5 0 00-.614-.586 6 6 0 106.832 8.529.5.5 0 00-.017-.485z",fill:"#191919",fillRule:"nonzero"})})})]})]})]}),D("div",{className:"max-w-xl md:max-w-none md:w-full mx-auto md:col-span-5 lg:col-span-6 mb-8 md:mb-0 md:order-1","data-aos":"zoom-y-out",children:D("div",{className:"relative flex flex-col text-center lg:text-right",children:D("div",{className:"relative inline-flex flex-col",children:D("img",{className:"md:max-w-none mx-auto rounded mt-10",src:B9,width:"450",height:"462",alt:"AasanAI Logo GIF"})})})})]})]})})]})}function stt(){const t=eg();return ae.exports.useEffect(()=>{Kte.init({once:!0,disable:"phone",duration:700,easing:"ease-out-cubic"})}),ae.exports.useEffect(()=>{document.querySelector("html").style.scrollBehavior="auto",window.scroll({top:0}),document.querySelector("html").style.scrollBehavior=""},[t.pathname]),D(L9,{children:ue(Uee,{children:[D(Ou,{exact:!0,path:"/",element:D(Hue,{})}),D(Ou,{path:"/signin",element:D(que,{})}),D(Ou,{path:"/signup",element:D(Kue,{})}),D(Ou,{path:"/profile",element:D(T_e,{})}),D(Ou,{path:"/workout",element:D(ntt,{})}),D(Ou,{path:"/tutorial",element:D(rtt,{})})]})})}BI.createRoot(document.getElementById("root")).render(D(tn.StrictMode,{children:D(Gee,{children:D(stt,{})})}));
